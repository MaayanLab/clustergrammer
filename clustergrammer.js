var Clustergrammer =
/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};

/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {

/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;

/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			exports: {},
/******/ 			id: moduleId,
/******/ 			loaded: false
/******/ 		};

/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);

/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;

/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}


/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;

/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;

/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";

/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ function(module, exports, __webpack_require__) {

	eval("var Params = __webpack_require__(1);\nvar viz = __webpack_require__(14);\nvar Config = __webpack_require__(43);\n\n/* clustergrammer 1.0\n * Nick Fernandez, Ma'ayan Lab, Icahn School of Medicine at Mount Sinai\n * (c) 2016\n */\nfunction Clustergrammer(args) {\n\n  /* Main program\n   * ----------------------------------------------------------------------- */\n  // consume and validate user input\n  // build giant config object\n  // visualize based on config object\n  // handle user events\n\n  // consume and validate user arguments, produce configuration object\n  var config = Config.make_config(args);\n  // make visualization parameters using configuration object\n  var params = Params.make_params(config);\n  // make visualization using parameters\n  // var viz = generate_viz();\n\n  if (params.use_sidebar) {\n    var generate_sidebar = __webpack_require__(49);\n    generate_sidebar(viz, params);\n  }\n\n  return {\n    params: params,\n    find_gene: viz.search.find_entities,\n    get_genes: viz.search.get_entities,\n    change_groups: viz.change_groups,\n    reorder: viz.reorder,\n    opacity_slider: viz.opacity_slider,\n    opacity_function: viz.opacity_function,\n    resize: viz.run_reset_visualization_size,\n    update_network: viz.update_network,\n    reset_zoom: viz.reset_zoom,\n    change_category: __webpack_require__(50),\n    set_up_N_filters: __webpack_require__(51),\n    ini_sliders: __webpack_require__(52)\n  };\n}\n\nmodule.exports = Clustergrammer;//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvbWFpbi5qcz8xYzkwIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBQYXJhbXMgPSByZXF1aXJlKCcuL3BhcmFtcycpO1xudmFyIHZpeiA9IHJlcXVpcmUoJy4vdml6Jyk7XG52YXIgQ29uZmlnID0gcmVxdWlyZSgnLi9jb25maWcnKTtcblxuLyogY2x1c3RlcmdyYW1tZXIgMS4wXG4gKiBOaWNrIEZlcm5hbmRleiwgTWEnYXlhbiBMYWIsIEljYWhuIFNjaG9vbCBvZiBNZWRpY2luZSBhdCBNb3VudCBTaW5haVxuICogKGMpIDIwMTZcbiAqL1xuZnVuY3Rpb24gQ2x1c3RlcmdyYW1tZXIoYXJncykge1xuXG4gIC8qIE1haW4gcHJvZ3JhbVxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuICAvLyBjb25zdW1lIGFuZCB2YWxpZGF0ZSB1c2VyIGlucHV0XG4gIC8vIGJ1aWxkIGdpYW50IGNvbmZpZyBvYmplY3RcbiAgLy8gdmlzdWFsaXplIGJhc2VkIG9uIGNvbmZpZyBvYmplY3RcbiAgLy8gaGFuZGxlIHVzZXIgZXZlbnRzXG5cbiAgLy8gY29uc3VtZSBhbmQgdmFsaWRhdGUgdXNlciBhcmd1bWVudHMsIHByb2R1Y2UgY29uZmlndXJhdGlvbiBvYmplY3RcbiAgdmFyIGNvbmZpZyA9IENvbmZpZy5tYWtlX2NvbmZpZyhhcmdzKTtcbiAgLy8gbWFrZSB2aXN1YWxpemF0aW9uIHBhcmFtZXRlcnMgdXNpbmcgY29uZmlndXJhdGlvbiBvYmplY3RcbiAgdmFyIHBhcmFtcyA9IFBhcmFtcy5tYWtlX3BhcmFtcyhjb25maWcpO1xuICAvLyBtYWtlIHZpc3VhbGl6YXRpb24gdXNpbmcgcGFyYW1ldGVyc1xuICAvLyB2YXIgdml6ID0gZ2VuZXJhdGVfdml6KCk7XG5cbiAgaWYgKHBhcmFtcy51c2Vfc2lkZWJhcikge1xuICAgIHZhciBnZW5lcmF0ZV9zaWRlYmFyID0gcmVxdWlyZSgnLi9zaWRlYmFyJyk7XG4gICAgZ2VuZXJhdGVfc2lkZWJhcih2aXosIHBhcmFtcyk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHBhcmFtczogcGFyYW1zLFxuICAgIGZpbmRfZ2VuZTogdml6LnNlYXJjaC5maW5kX2VudGl0aWVzLFxuICAgIGdldF9nZW5lczogdml6LnNlYXJjaC5nZXRfZW50aXRpZXMsXG4gICAgY2hhbmdlX2dyb3Vwczogdml6LmNoYW5nZV9ncm91cHMsXG4gICAgcmVvcmRlcjogdml6LnJlb3JkZXIsXG4gICAgb3BhY2l0eV9zbGlkZXI6IHZpei5vcGFjaXR5X3NsaWRlcixcbiAgICBvcGFjaXR5X2Z1bmN0aW9uOiB2aXoub3BhY2l0eV9mdW5jdGlvbixcbiAgICByZXNpemU6IHZpei5ydW5fcmVzZXRfdmlzdWFsaXphdGlvbl9zaXplLFxuICAgIHVwZGF0ZV9uZXR3b3JrOiB2aXoudXBkYXRlX25ldHdvcmssXG4gICAgcmVzZXRfem9vbTogdml6LnJlc2V0X3pvb20sXG4gICAgY2hhbmdlX2NhdGVnb3J5OiByZXF1aXJlKCcuL25ldHdvcmsvY2hhbmdlX2NhdGVnb3J5JyksXG4gICAgc2V0X3VwX05fZmlsdGVyczogcmVxdWlyZSgnLi9maWx0ZXJzL3NldF91cF9OX2ZpbHRlcnMnKSxcbiAgICBpbmlfc2xpZGVyczogcmVxdWlyZSgnLi9maWx0ZXJzL2luaV9zbGlkZXJzJylcbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBDbHVzdGVyZ3JhbW1lcjtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIHNyYy9tYWluLmpzXG4gKiovIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUFLQTtBQUNBOzs7Ozs7Ozs7QUFTQTs7QUFWQTs7OztBQUFBO0FBaUJBO0FBQ0E7QUFGQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWJBO0FBckJBO0FBQ0E7QUFxQ0EiLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 1 */
/***/ function(module, exports, __webpack_require__) {

	eval("var crossfilter = __webpack_require__(2);\nvar extend = __webpack_require__(4);\nvar utils = __webpack_require__(5);\nvar change_network_view = __webpack_require__(6);\nvar parent_div_size = __webpack_require__(8);\nvar initialize_matrix = __webpack_require__(9);\nvar zoomed = __webpack_require__(10);\n\n/* Params: calculates the size of all the visualization elements in the\nclustergram.\n */\nvar params = {};\n\nfunction make_params(input_config) {\n\n  var config = extend(true, {}, input_config);\n  params = config;\n\n  if (params.ini_view !== null) {\n    params.network_data = change_network_view(params, params.network_data, params.ini_view);\n    params.ini_view = null;\n  }\n\n  params.labels = {};\n  params.labels.super_label_scale = config.super_label_scale;\n  params.labels.super_labels = config.super_labels;\n\n  if (params.labels.super_labels) {\n    params.labels.super_label_width = 20 * params.labels.super_label_scale;\n    params.labels.super = {};\n    params.labels.super.row = config.super.row;\n    params.labels.super.col = config.super.col;\n  } else {\n    params.labels.super_label_width = 0;\n  }\n\n  params.labels.show_categories = config.show_categories;\n  if (params.labels.show_categories) {\n    params.labels.class_colors = config.class_colors;\n  }\n  params.labels.show_label_tooltips = config.show_label_tooltips;\n\n  params.matrix = {};\n  params.matrix.tile_colors = config.tile_colors;\n  params.matrix.bar_colors = config.bar_colors;\n  params.matrix.outline_colors = config.outline_colors;\n  params.matrix.hlight_color = config.highlight_color;\n  params.matrix.tile_title = config.tile_title;\n  params.matrix.show_tile_tooltips = config.show_tile_tooltips;\n\n  params.matrix.make_tile_tooltip = config.make_tile_tooltip;\n\n  params.viz = {};\n\n  params.viz.viz_wrapper = config.root + ' .viz_wrapper';\n  params.viz.viz_svg = params.viz.viz_wrapper + ' .viz_svg';\n\n  params.sidebar = {};\n  params.sidebar.sidebar_class = 'sidebar_wrapper';\n\n  params.viz.do_zoom = config.do_zoom;\n  params.viz.resize = config.resize;\n  // background colors\n  params.viz.background_color = config.background_color;\n  params.viz.super_border_color = config.super_border_color;\n  // margin widths\n  params.viz.outer_margins = config.outer_margins;\n  params.viz.outer_margins_expand = config.outer_margins_expand;\n  params.viz.expand = config.ini_expand;\n  params.viz.uni_margin = config.uni_margin;\n  params.viz.grey_border_width = config.grey_border_width;\n  params.viz.show_dendrogram = config.show_dendrogram;\n  params.viz.tile_click_hlight = config.tile_click_hlight;\n\n  params.viz.uni_duration = 1000;\n\n  // initialized clicked tile and rows\n  params.matrix.click_hlight_x = -666;\n  params.matrix.click_hlight_y = -666;\n  params.matrix.click_hlight_row = -666;\n  params.matrix.click_hlight_col = -666;\n\n  // definition of a large matrix - based on number of links\n  // below this cutoff reordering is done with transitions\n  params.matrix.def_large_matrix = 10000;\n\n  params.viz.inst_order = config.inst_order;\n\n  params.matrix.opacity_function = config.opacity_scale;\n\n  params.viz.expand_button = config.expand_button;\n\n  var col_nodes = params.network_data.col_nodes;\n  var row_nodes = params.network_data.row_nodes;\n\n  // Create wrapper around SVG visualization\n  d3.select(config.root).append('div').attr('class', 'viz_wrapper');\n\n  // resize parent div - needs to be run here\n  parent_div_size(params);\n\n  params.viz.svg_dim = {};\n  params.viz.svg_dim.width = Number(d3.select(params.viz.viz_wrapper).style('width').replace('px', ''));\n  params.viz.svg_dim.height = Number(d3.select(params.viz.viz_wrapper).style('height').replace('px', ''));\n\n  params.network_data.row_nodes_names = _.pluck(row_nodes, 'name');\n  params.network_data.col_nodes_names = _.pluck(col_nodes, 'name');\n\n  var row_max_char = _.max(row_nodes, function (inst) {\n    return inst.name.length;\n  }).name.length;\n  var col_max_char = _.max(col_nodes, function (inst) {\n    return inst.name.length;\n  }).name.length;\n\n  params.labels.row_max_char = row_max_char;\n  params.labels.col_max_char = col_max_char;\n\n  params.labels.max_label_char = 10;\n\n  var min_num_char = 5;\n  var max_num_char = params.labels.max_label_char;\n\n  params.labels.show_char = 10;\n\n  // calc how much of the label to keep\n  var keep_label_scale = d3.scale.linear().domain([params.labels.show_char, max_num_char]).range([1, params.labels.show_char / max_num_char]).clamp('true');\n\n  params.labels.row_keep = keep_label_scale(row_max_char);\n  params.labels.col_keep = keep_label_scale(col_max_char);\n\n  // define label scale\n  var min_label_width = 65;\n  var max_label_width = 115;\n  var label_scale = d3.scale.linear().domain([min_num_char, max_num_char]).range([min_label_width, max_label_width]).clamp('true');\n\n  params.norm_label = {};\n  params.norm_label.width = {};\n\n  params.norm_label.width.row = label_scale(row_max_char) * params.row_label_scale;\n\n  params.norm_label.width.col = label_scale(col_max_char) * params.col_label_scale;\n\n  params.norm_label.margin = {};\n  params.norm_label.margin.left = params.viz.grey_border_width + params.labels.super_label_width;\n  params.norm_label.margin.top = params.viz.grey_border_width + params.labels.super_label_width;\n\n  params.class_room = {};\n\n  params.class_room.symbol_width = 11;\n\n  if (params.viz.show_dendrogram) {\n    params.class_room.row = 2 * params.class_room.symbol_width;\n    params.class_room.col = params.class_room.symbol_width;\n\n    // TODO check this\n    config.group_level = {\n      row: 5,\n      col: 5\n    };\n  } else {\n    params.class_room.row = params.class_room.symbol_width;\n    params.class_room.col = 0;\n  }\n\n  params.norm_label.background = {};\n  params.norm_label.background.row = params.norm_label.width.row + params.class_room.row + params.viz.uni_margin;\n  params.norm_label.background.col = params.norm_label.width.col + params.class_room.col + params.viz.uni_margin;\n\n  params.viz.clust = {};\n  params.viz.clust.margin = {};\n  params.viz.clust.margin.left = params.norm_label.margin.left + params.norm_label.background.row;\n  params.viz.clust.margin.top = params.norm_label.margin.top + params.norm_label.background.col;\n  params.viz.spillover_x_offset = label_scale(col_max_char) * 0.7 * params.col_label_scale;\n\n  // reduce width by row/col labels and by grey_border width\n  //(reduce width by less since this is less aparent with slanted col labels)\n  var ini_clust_width = params.viz.svg_dim.width - (params.labels.super_label_width + params.norm_label.width.row + params.class_room.row) - params.viz.grey_border_width - params.viz.spillover_x_offset;\n\n  // there is space between the clustergram and the border\n  var ini_clust_height = params.viz.svg_dim.height - (params.labels.super_label_width + params.norm_label.width.col + params.class_room.col) - 5 * params.viz.grey_border_width;\n\n  params.viz.num_col_nodes = col_nodes.length;\n  params.viz.num_row_nodes = row_nodes.length;\n\n  params.viz.clust.dim = {};\n\n  var tmp_x_scale = d3.scale.ordinal().rangeBands([0, ini_clust_width]);\n  tmp_x_scale.domain(_.range(col_nodes.length));\n  var triangle_height = tmp_x_scale.rangeBand() / 2;\n\n  if (triangle_height > params.norm_label.width.col) {\n    ini_clust_width = ini_clust_width * (params.norm_label.width.col / triangle_height);\n  }\n  params.viz.clust.dim.width = ini_clust_width;\n\n  if (ini_clust_width / params.viz.num_col_nodes < ini_clust_height / params.viz.num_row_nodes) {\n\n    params.viz.clust.dim.height = ini_clust_width * (params.viz.num_row_nodes / params.viz.num_col_nodes);\n\n    params.viz.force_square = 1;\n\n    if (params.viz.clust.dim.height > ini_clust_height) {\n      params.viz.clust.dim.height = ini_clust_height;\n      params.viz.force_square = 0;\n    }\n  } else {\n    params.viz.clust.dim.height = ini_clust_height;\n    params.viz.force_square = 0;\n  }\n\n  if (config.force_square === 1) {\n    params.viz.force_square = 1;\n  }\n\n  var enr_max = Math.abs(_.max(col_nodes, function (d) {\n    return Math.abs(d.value);\n  }).value);\n\n  params.labels.bar_scale_col = d3.scale.linear().domain([0, enr_max]).range([0, 0.75 * params.norm_label.width.col]);\n\n  var enr_max = Math.abs(_.max(row_nodes, function (d) {\n    return Math.abs(d.value);\n  }).value);\n  params.labels.bar_scale_row = d3.scale.linear().domain([0, enr_max]).range([0, params.norm_label.width.row]);\n\n  // Define Orderings\n  params.matrix.orders = {\n    // ini\n    ini_row: d3.range(params.viz.num_col_nodes).sort(function (a, b) {\n      return col_nodes[b].ini - col_nodes[a].ini;\n    }),\n    ini_col: d3.range(params.viz.num_row_nodes).sort(function (a, b) {\n      return row_nodes[b].ini - row_nodes[a].ini;\n    }),\n    // rank\n    rank_row: d3.range(params.viz.num_col_nodes).sort(function (a, b) {\n      return col_nodes[b].rank - col_nodes[a].rank;\n    }),\n    rank_col: d3.range(params.viz.num_row_nodes).sort(function (a, b) {\n      return row_nodes[b].rank - row_nodes[a].rank;\n    }),\n    // clustered\n    clust_row: d3.range(params.viz.num_col_nodes).sort(function (a, b) {\n      return col_nodes[b].clust - col_nodes[a].clust;\n    }),\n    clust_col: d3.range(params.viz.num_row_nodes).sort(function (a, b) {\n      return row_nodes[b].clust - row_nodes[a].clust;\n    })\n  };\n\n  // // define class ordering - define on front-end\n  // if (utils.has(col_nodes[0],'cl')){\n\n  //   // the order should be interpreted as the nth node should be positioned here\n  //   // in the order\n\n  //   var tmp_col_nodes = _.sortBy(col_nodes,'cl')\n\n  //   var ordered_col_names = []\n  //   for (var i=0; i< tmp_col_nodes.length; i++){\n  //     ordered_col_names.push( tmp_col_nodes[i].name );\n  //   }\n\n  //   var order_col_class = []\n  //   for (var i=0; i< col_nodes.length; i++){\n  //     var inst_col_name = ordered_col_names[i];\n  //     order_col_class.push( _.indexOf( params.network_data.col_nodes_names, inst_col_name) );\n  //   }\n\n  //   params.matrix.orders.class_row = order_col_class;\n  // }\n\n  if (utils.has(col_nodes[0], 'cl_index')) {\n    params.matrix.orders.class_row = d3.range(params.viz.num_col_nodes).sort(function (a, b) {\n      return col_nodes[b].cl_index - col_nodes[a].cl_index;\n    });\n  }\n\n  params.matrix.x_scale = d3.scale.ordinal().rangeBands([0, params.viz.clust.dim.width]);\n  params.matrix.y_scale = d3.scale.ordinal().rangeBands([0, params.viz.clust.dim.height]);\n\n  if (params.viz.inst_order.row === 'ini') {\n    params.matrix.x_scale.domain(params.matrix.orders.ini_row);\n  } else if (params.viz.inst_order.row === 'clust') {\n    params.matrix.x_scale.domain(params.matrix.orders.clust_row);\n  } else if (params.viz.inst_order.row === 'rank') {\n    params.matrix.x_scale.domain(params.matrix.orders.rank_row);\n  } else if (params.viz.inst_order.row === 'class') {\n    if (utils.has(params.matrix.orders, 'class_row')) {\n      params.matrix.x_scale.domain(params.matrix.orders.class_row);\n    } else {\n      params.matrix.x_scale.domain(params.matrix.orders.clust_row);\n    }\n  }\n\n  if (params.viz.inst_order.col === 'ini') {\n    params.matrix.y_scale.domain(params.matrix.orders.ini_col);\n  } else if (params.viz.inst_order.col === 'clust') {\n    params.matrix.y_scale.domain(params.matrix.orders.clust_col);\n  } else if (params.viz.inst_order.col === 'rank') {\n    params.matrix.y_scale.domain(params.matrix.orders.rank_col);\n  } else if (params.viz.inst_order.col === 'class') {\n    if (utils.has(params.matrix.orders, 'class_row')) {\n      params.matrix.y_scale.domain(params.matrix.orders.class_col);\n    } else {\n      params.matrix.y_scale.domain(params.matrix.orders.clust_col);\n    }\n  }\n\n  params.network_data.links.forEach(function (d) {\n    // d.name = row_nodes[d.source].name + '_' + col_nodes[d.target].name;\n    // d.row_name = row_nodes[d.source].name;\n    // d.col_name = col_nodes[d.target].name;\n    d.x = params.matrix.x_scale(d.target);\n    d.y = params.matrix.y_scale(d.source);\n  });\n\n  // make lnks crossfilter\n  // TODO check if relying on crossfilter\n  params.cf = {};\n  params.cf.links = crossfilter(params.network_data.links);\n  params.cf.dim_x = params.cf.links.dimension(function (d) {\n    return d.x;\n  });\n  params.cf.dim_y = params.cf.links.dimension(function (d) {\n    return d.y;\n  });\n\n  params.matrix.matrix = initialize_matrix(params.network_data);\n\n  params.viz.border_fraction = 55;\n  params.viz.border_width = params.matrix.x_scale.rangeBand() / params.viz.border_fraction;\n\n  params.viz.zoom_switch = params.viz.clust.dim.width / params.viz.num_col_nodes / (params.viz.clust.dim.height / params.viz.num_row_nodes);\n\n  if (params.viz.zoom_switch < 1) {\n    params.viz.zoom_switch = 1;\n  }\n\n  params.matrix.rect_width = params.matrix.x_scale.rangeBand() - 1 * params.viz.border_width;\n  params.matrix.rect_height = params.matrix.y_scale.rangeBand() - 1 * params.viz.border_width / params.viz.zoom_switch;\n\n  params.scale_font_offset = d3.scale.linear().domain([1, 0]).range([0.8, 0.5]);\n\n  params.labels.default_fs_row = params.matrix.y_scale.rangeBand() * 1.01;\n  params.labels.default_fs_col = params.matrix.x_scale.rangeBand() * 0.87;\n\n  params.viz.zoom_scale_font = {};\n  params.viz.zoom_scale_font.row = 1;\n  params.viz.zoom_scale_font.col = 1;\n\n  params.viz.real_zoom = params.norm_label.width.col / (params.matrix.x_scale.rangeBand() / 2);\n\n  if (utils.has(params.network_data, 'all_links')) {\n    params.matrix.max_link = _.max(params.network_data.all_links, function (d) {\n      return Math.abs(d.value);\n    }).value;\n  } else {\n    params.matrix.max_link = _.max(params.network_data.links, function (d) {\n      return Math.abs(d.value);\n    }).value;\n  }\n\n  if (config.input_domain === 0) {\n    if (params.matrix.opacity_function === 'linear') {\n      params.matrix.opacity_scale = d3.scale.linear().domain([0, Math.abs(params.matrix.max_link)]).clamp(true).range([0.0, 1.0]);\n    } else if (params.matrix.opacity_function === 'log') {\n      params.matrix.opacity_scale = d3.scale.log().domain([0.001, Math.abs(params.matrix.max_link)]).clamp(true).range([0.0, 1.0]);\n    }\n  } else {\n    if (params.matrix.opacity_function === 'linear') {\n      params.matrix.opacity_scale = d3.scale.linear().domain([0, config.input_domain]).clamp(true).range([0.0, 1.0]);\n    } else if (params.matrix.opacity_function === 'log') {\n      params.matrix.opacity_scale = d3.scale.log().domain([0.001, config.input_domain]).clamp(true).range([0.0, 1.0]);\n    }\n  }\n\n  // TODO check if using run_trans\n  params.viz.run_trans = false;\n\n  if (utils.has(params.network_data.links[0], 'value_up') || utils.has(params.network_data.links[0], 'value_dn')) {\n    params.matrix.tile_type = 'updn';\n  } else {\n    params.matrix.tile_type = 'simple';\n  }\n\n  if (utils.has(params.network_data.links[0], 'highlight')) {\n    params.matrix.highlight = 1;\n  } else {\n    params.matrix.highlight = 0;\n  }\n\n  params.zoom_behavior = d3.behavior.zoom().scaleExtent([1, params.viz.real_zoom * params.viz.zoom_switch]).on('zoom', function () {\n    zoomed(params);\n  });\n\n  return params;\n}\n\nmodule.exports = {\n  get: function () {\n    if (Object.keys(params).length < 1) {\n      throw new Error('Params was passed without being initialized.');\n    }\n    return params;\n  },\n  make_params: make_params\n};//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvcGFyYW1zLmpzP2Y4NmMiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIGNyb3NzZmlsdGVyID0gcmVxdWlyZSgnY3Jvc3NmaWx0ZXInKTtcbnZhciBleHRlbmQgPSByZXF1aXJlKCdleHRlbmQnKTtcbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcbnZhciBjaGFuZ2VfbmV0d29ya192aWV3ID0gcmVxdWlyZSgnLi9uZXR3b3JrL2NoYW5nZV9uZXR3b3JrX3ZpZXcnKTtcbnZhciBwYXJlbnRfZGl2X3NpemUgPSByZXF1aXJlKCcuL3BhcmVudF9kaXZfc2l6ZScpO1xudmFyIGluaXRpYWxpemVfbWF0cml4ID0gcmVxdWlyZSgnLi9pbml0aWFsaXplX21hdHJpeCcpO1xudmFyIHpvb21lZCA9IHJlcXVpcmUoJy4vem9vbWVkJyk7XG5cbi8qIFBhcmFtczogY2FsY3VsYXRlcyB0aGUgc2l6ZSBvZiBhbGwgdGhlIHZpc3VhbGl6YXRpb24gZWxlbWVudHMgaW4gdGhlXG5jbHVzdGVyZ3JhbS5cbiAqL1xudmFyIHBhcmFtcyA9IHt9O1xuXG5mdW5jdGlvbiBtYWtlX3BhcmFtcyhpbnB1dF9jb25maWcpIHtcblxuICB2YXIgY29uZmlnID0gZXh0ZW5kKHRydWUsIHt9LCBpbnB1dF9jb25maWcpO1xuICBwYXJhbXMgPSBjb25maWc7XG5cbiAgaWYgKHBhcmFtcy5pbmlfdmlldyAhPT0gbnVsbCkge1xuICAgIHBhcmFtcy5uZXR3b3JrX2RhdGEgPSBjaGFuZ2VfbmV0d29ya192aWV3KHBhcmFtcywgcGFyYW1zLm5ldHdvcmtfZGF0YSwgcGFyYW1zLmluaV92aWV3KTtcbiAgICBwYXJhbXMuaW5pX3ZpZXcgPSBudWxsO1xuICB9XG5cbiAgcGFyYW1zLmxhYmVscyA9IHt9O1xuICBwYXJhbXMubGFiZWxzLnN1cGVyX2xhYmVsX3NjYWxlID0gY29uZmlnLnN1cGVyX2xhYmVsX3NjYWxlO1xuICBwYXJhbXMubGFiZWxzLnN1cGVyX2xhYmVscyA9IGNvbmZpZy5zdXBlcl9sYWJlbHM7XG5cbiAgaWYgKHBhcmFtcy5sYWJlbHMuc3VwZXJfbGFiZWxzKSB7XG4gICAgcGFyYW1zLmxhYmVscy5zdXBlcl9sYWJlbF93aWR0aCA9IDIwICogcGFyYW1zLmxhYmVscy5zdXBlcl9sYWJlbF9zY2FsZTtcbiAgICBwYXJhbXMubGFiZWxzLnN1cGVyID0ge307XG4gICAgcGFyYW1zLmxhYmVscy5zdXBlci5yb3cgPSBjb25maWcuc3VwZXIucm93O1xuICAgIHBhcmFtcy5sYWJlbHMuc3VwZXIuY29sID0gY29uZmlnLnN1cGVyLmNvbDtcbiAgfSBlbHNlIHtcbiAgICBwYXJhbXMubGFiZWxzLnN1cGVyX2xhYmVsX3dpZHRoID0gMDtcbiAgfVxuXG4gIHBhcmFtcy5sYWJlbHMuc2hvd19jYXRlZ29yaWVzID0gY29uZmlnLnNob3dfY2F0ZWdvcmllcztcbiAgaWYgKHBhcmFtcy5sYWJlbHMuc2hvd19jYXRlZ29yaWVzKSB7XG4gICAgcGFyYW1zLmxhYmVscy5jbGFzc19jb2xvcnMgPSBjb25maWcuY2xhc3NfY29sb3JzO1xuICB9XG4gIHBhcmFtcy5sYWJlbHMuc2hvd19sYWJlbF90b29sdGlwcyA9IGNvbmZpZy5zaG93X2xhYmVsX3Rvb2x0aXBzO1xuXG4gIHBhcmFtcy5tYXRyaXggPSB7fTtcbiAgcGFyYW1zLm1hdHJpeC50aWxlX2NvbG9ycyA9IGNvbmZpZy50aWxlX2NvbG9ycztcbiAgcGFyYW1zLm1hdHJpeC5iYXJfY29sb3JzID0gY29uZmlnLmJhcl9jb2xvcnM7XG4gIHBhcmFtcy5tYXRyaXgub3V0bGluZV9jb2xvcnMgPSBjb25maWcub3V0bGluZV9jb2xvcnM7XG4gIHBhcmFtcy5tYXRyaXguaGxpZ2h0X2NvbG9yID0gY29uZmlnLmhpZ2hsaWdodF9jb2xvcjtcbiAgcGFyYW1zLm1hdHJpeC50aWxlX3RpdGxlID0gY29uZmlnLnRpbGVfdGl0bGU7XG4gIHBhcmFtcy5tYXRyaXguc2hvd190aWxlX3Rvb2x0aXBzID0gY29uZmlnLnNob3dfdGlsZV90b29sdGlwcztcblxuICBwYXJhbXMubWF0cml4Lm1ha2VfdGlsZV90b29sdGlwID0gY29uZmlnLm1ha2VfdGlsZV90b29sdGlwO1xuXG4gIHBhcmFtcy52aXogPSB7fTtcblxuICBwYXJhbXMudml6LnZpel93cmFwcGVyID0gY29uZmlnLnJvb3QgKyAnIC52aXpfd3JhcHBlcic7XG4gIHBhcmFtcy52aXoudml6X3N2ZyA9IHBhcmFtcy52aXoudml6X3dyYXBwZXIgKyAnIC52aXpfc3ZnJztcblxuICBwYXJhbXMuc2lkZWJhciA9IHt9O1xuICBwYXJhbXMuc2lkZWJhci5zaWRlYmFyX2NsYXNzID0gJ3NpZGViYXJfd3JhcHBlcic7XG5cbiAgcGFyYW1zLnZpei5kb196b29tID0gY29uZmlnLmRvX3pvb207XG4gIHBhcmFtcy52aXoucmVzaXplID0gY29uZmlnLnJlc2l6ZTtcbiAgLy8gYmFja2dyb3VuZCBjb2xvcnNcbiAgcGFyYW1zLnZpei5iYWNrZ3JvdW5kX2NvbG9yID0gY29uZmlnLmJhY2tncm91bmRfY29sb3I7XG4gIHBhcmFtcy52aXouc3VwZXJfYm9yZGVyX2NvbG9yID0gY29uZmlnLnN1cGVyX2JvcmRlcl9jb2xvcjtcbiAgLy8gbWFyZ2luIHdpZHRoc1xuICBwYXJhbXMudml6Lm91dGVyX21hcmdpbnMgPSBjb25maWcub3V0ZXJfbWFyZ2lucztcbiAgcGFyYW1zLnZpei5vdXRlcl9tYXJnaW5zX2V4cGFuZCA9IGNvbmZpZy5vdXRlcl9tYXJnaW5zX2V4cGFuZDtcbiAgcGFyYW1zLnZpei5leHBhbmQgPSBjb25maWcuaW5pX2V4cGFuZDtcbiAgcGFyYW1zLnZpei51bmlfbWFyZ2luID0gY29uZmlnLnVuaV9tYXJnaW47XG4gIHBhcmFtcy52aXouZ3JleV9ib3JkZXJfd2lkdGggPSBjb25maWcuZ3JleV9ib3JkZXJfd2lkdGg7XG4gIHBhcmFtcy52aXouc2hvd19kZW5kcm9ncmFtID0gY29uZmlnLnNob3dfZGVuZHJvZ3JhbTtcbiAgcGFyYW1zLnZpei50aWxlX2NsaWNrX2hsaWdodCA9IGNvbmZpZy50aWxlX2NsaWNrX2hsaWdodDtcblxuICBwYXJhbXMudml6LnVuaV9kdXJhdGlvbiA9IDEwMDA7XG5cbiAgLy8gaW5pdGlhbGl6ZWQgY2xpY2tlZCB0aWxlIGFuZCByb3dzXG4gIHBhcmFtcy5tYXRyaXguY2xpY2tfaGxpZ2h0X3ggPSAtNjY2O1xuICBwYXJhbXMubWF0cml4LmNsaWNrX2hsaWdodF95ID0gLTY2NjtcbiAgcGFyYW1zLm1hdHJpeC5jbGlja19obGlnaHRfcm93ID0gLTY2NjtcbiAgcGFyYW1zLm1hdHJpeC5jbGlja19obGlnaHRfY29sID0gLTY2NjtcblxuICAvLyBkZWZpbml0aW9uIG9mIGEgbGFyZ2UgbWF0cml4IC0gYmFzZWQgb24gbnVtYmVyIG9mIGxpbmtzXG4gIC8vIGJlbG93IHRoaXMgY3V0b2ZmIHJlb3JkZXJpbmcgaXMgZG9uZSB3aXRoIHRyYW5zaXRpb25zXG4gIHBhcmFtcy5tYXRyaXguZGVmX2xhcmdlX21hdHJpeCA9IDEwMDAwO1xuXG4gIHBhcmFtcy52aXouaW5zdF9vcmRlciA9IGNvbmZpZy5pbnN0X29yZGVyO1xuXG4gIHBhcmFtcy5tYXRyaXgub3BhY2l0eV9mdW5jdGlvbiA9IGNvbmZpZy5vcGFjaXR5X3NjYWxlO1xuXG4gIHBhcmFtcy52aXouZXhwYW5kX2J1dHRvbiA9IGNvbmZpZy5leHBhbmRfYnV0dG9uO1xuXG4gIHZhciBjb2xfbm9kZXMgPSBwYXJhbXMubmV0d29ya19kYXRhLmNvbF9ub2RlcztcbiAgdmFyIHJvd19ub2RlcyA9IHBhcmFtcy5uZXR3b3JrX2RhdGEucm93X25vZGVzO1xuXG4gIC8vIENyZWF0ZSB3cmFwcGVyIGFyb3VuZCBTVkcgdmlzdWFsaXphdGlvblxuICBkMy5zZWxlY3QoY29uZmlnLnJvb3QpLmFwcGVuZCgnZGl2JykuYXR0cignY2xhc3MnLCAndml6X3dyYXBwZXInKTtcblxuICAvLyByZXNpemUgcGFyZW50IGRpdiAtIG5lZWRzIHRvIGJlIHJ1biBoZXJlXG4gIHBhcmVudF9kaXZfc2l6ZShwYXJhbXMpO1xuXG4gIHBhcmFtcy52aXouc3ZnX2RpbSA9IHt9O1xuICBwYXJhbXMudml6LnN2Z19kaW0ud2lkdGggPSBOdW1iZXIoZDMuc2VsZWN0KHBhcmFtcy52aXoudml6X3dyYXBwZXIpLnN0eWxlKCd3aWR0aCcpLnJlcGxhY2UoJ3B4JywgJycpKTtcbiAgcGFyYW1zLnZpei5zdmdfZGltLmhlaWdodCA9IE51bWJlcihkMy5zZWxlY3QocGFyYW1zLnZpei52aXpfd3JhcHBlcikuc3R5bGUoJ2hlaWdodCcpLnJlcGxhY2UoJ3B4JywgJycpKTtcblxuICBwYXJhbXMubmV0d29ya19kYXRhLnJvd19ub2Rlc19uYW1lcyA9IF8ucGx1Y2socm93X25vZGVzLCAnbmFtZScpO1xuICBwYXJhbXMubmV0d29ya19kYXRhLmNvbF9ub2Rlc19uYW1lcyA9IF8ucGx1Y2soY29sX25vZGVzLCAnbmFtZScpO1xuXG4gIHZhciByb3dfbWF4X2NoYXIgPSBfLm1heChyb3dfbm9kZXMsIGZ1bmN0aW9uIChpbnN0KSB7XG4gICAgcmV0dXJuIGluc3QubmFtZS5sZW5ndGg7XG4gIH0pLm5hbWUubGVuZ3RoO1xuICB2YXIgY29sX21heF9jaGFyID0gXy5tYXgoY29sX25vZGVzLCBmdW5jdGlvbiAoaW5zdCkge1xuICAgIHJldHVybiBpbnN0Lm5hbWUubGVuZ3RoO1xuICB9KS5uYW1lLmxlbmd0aDtcblxuICBwYXJhbXMubGFiZWxzLnJvd19tYXhfY2hhciA9IHJvd19tYXhfY2hhcjtcbiAgcGFyYW1zLmxhYmVscy5jb2xfbWF4X2NoYXIgPSBjb2xfbWF4X2NoYXI7XG5cbiAgcGFyYW1zLmxhYmVscy5tYXhfbGFiZWxfY2hhciA9IDEwO1xuXG4gIHZhciBtaW5fbnVtX2NoYXIgPSA1O1xuICB2YXIgbWF4X251bV9jaGFyID0gcGFyYW1zLmxhYmVscy5tYXhfbGFiZWxfY2hhcjtcblxuICBwYXJhbXMubGFiZWxzLnNob3dfY2hhciA9IDEwO1xuXG4gIC8vIGNhbGMgaG93IG11Y2ggb2YgdGhlIGxhYmVsIHRvIGtlZXBcbiAgdmFyIGtlZXBfbGFiZWxfc2NhbGUgPSBkMy5zY2FsZS5saW5lYXIoKVxuICAgIC5kb21haW4oW3BhcmFtcy5sYWJlbHMuc2hvd19jaGFyLCBtYXhfbnVtX2NoYXJdKVxuICAgIC5yYW5nZShbMSwgcGFyYW1zLmxhYmVscy5zaG93X2NoYXIgLyBtYXhfbnVtX2NoYXJdKS5jbGFtcCgndHJ1ZScpO1xuXG4gIHBhcmFtcy5sYWJlbHMucm93X2tlZXAgPSBrZWVwX2xhYmVsX3NjYWxlKHJvd19tYXhfY2hhcik7XG4gIHBhcmFtcy5sYWJlbHMuY29sX2tlZXAgPSBrZWVwX2xhYmVsX3NjYWxlKGNvbF9tYXhfY2hhcik7XG5cbiAgLy8gZGVmaW5lIGxhYmVsIHNjYWxlXG4gIHZhciBtaW5fbGFiZWxfd2lkdGggPSA2NTtcbiAgdmFyIG1heF9sYWJlbF93aWR0aCA9IDExNTtcbiAgdmFyIGxhYmVsX3NjYWxlID0gZDMuc2NhbGUubGluZWFyKClcbiAgICAuZG9tYWluKFttaW5fbnVtX2NoYXIsIG1heF9udW1fY2hhcl0pXG4gICAgLnJhbmdlKFttaW5fbGFiZWxfd2lkdGgsIG1heF9sYWJlbF93aWR0aF0pLmNsYW1wKCd0cnVlJyk7XG5cbiAgcGFyYW1zLm5vcm1fbGFiZWwgPSB7fTtcbiAgcGFyYW1zLm5vcm1fbGFiZWwud2lkdGggPSB7fTtcblxuICBwYXJhbXMubm9ybV9sYWJlbC53aWR0aC5yb3cgPSBsYWJlbF9zY2FsZShyb3dfbWF4X2NoYXIpXG4gICAgKiBwYXJhbXMucm93X2xhYmVsX3NjYWxlO1xuXG4gIHBhcmFtcy5ub3JtX2xhYmVsLndpZHRoLmNvbCA9IGxhYmVsX3NjYWxlKGNvbF9tYXhfY2hhcilcbiAgICAqIHBhcmFtcy5jb2xfbGFiZWxfc2NhbGU7XG5cbiAgcGFyYW1zLm5vcm1fbGFiZWwubWFyZ2luID0ge307XG4gIHBhcmFtcy5ub3JtX2xhYmVsLm1hcmdpbi5sZWZ0ID0gcGFyYW1zLnZpei5ncmV5X2JvcmRlcl93aWR0aCArIHBhcmFtcy5sYWJlbHMuc3VwZXJfbGFiZWxfd2lkdGg7XG4gIHBhcmFtcy5ub3JtX2xhYmVsLm1hcmdpbi50b3AgPSBwYXJhbXMudml6LmdyZXlfYm9yZGVyX3dpZHRoICsgcGFyYW1zLmxhYmVscy5zdXBlcl9sYWJlbF93aWR0aDtcblxuICBwYXJhbXMuY2xhc3Nfcm9vbSA9IHt9O1xuXG4gIHBhcmFtcy5jbGFzc19yb29tLnN5bWJvbF93aWR0aCA9IDExO1xuXG4gIGlmIChwYXJhbXMudml6LnNob3dfZGVuZHJvZ3JhbSkge1xuICAgIHBhcmFtcy5jbGFzc19yb29tLnJvdyA9IDIgKiBwYXJhbXMuY2xhc3Nfcm9vbS5zeW1ib2xfd2lkdGg7XG4gICAgcGFyYW1zLmNsYXNzX3Jvb20uY29sID0gcGFyYW1zLmNsYXNzX3Jvb20uc3ltYm9sX3dpZHRoO1xuXG4gICAgLy8gVE9ETyBjaGVjayB0aGlzXG4gICAgY29uZmlnLmdyb3VwX2xldmVsID0ge1xuICAgICAgcm93OiA1LFxuICAgICAgY29sOiA1XG4gICAgfTtcblxuICB9IGVsc2Uge1xuICAgIHBhcmFtcy5jbGFzc19yb29tLnJvdyA9IHBhcmFtcy5jbGFzc19yb29tLnN5bWJvbF93aWR0aDtcbiAgICBwYXJhbXMuY2xhc3Nfcm9vbS5jb2wgPSAwO1xuICB9XG5cbiAgcGFyYW1zLm5vcm1fbGFiZWwuYmFja2dyb3VuZCA9IHt9O1xuICBwYXJhbXMubm9ybV9sYWJlbC5iYWNrZ3JvdW5kLnJvdyA9IHBhcmFtcy5ub3JtX2xhYmVsLndpZHRoLnJvdyArIHBhcmFtcy5jbGFzc19yb29tLnJvdyArIHBhcmFtcy52aXoudW5pX21hcmdpbjtcbiAgcGFyYW1zLm5vcm1fbGFiZWwuYmFja2dyb3VuZC5jb2wgPSBwYXJhbXMubm9ybV9sYWJlbC53aWR0aC5jb2wgKyBwYXJhbXMuY2xhc3Nfcm9vbS5jb2wgKyBwYXJhbXMudml6LnVuaV9tYXJnaW47XG5cbiAgcGFyYW1zLnZpei5jbHVzdCA9IHt9O1xuICBwYXJhbXMudml6LmNsdXN0Lm1hcmdpbiA9IHt9O1xuICBwYXJhbXMudml6LmNsdXN0Lm1hcmdpbi5sZWZ0ID0gcGFyYW1zLm5vcm1fbGFiZWwubWFyZ2luLmxlZnQgKyBwYXJhbXMubm9ybV9sYWJlbC5iYWNrZ3JvdW5kLnJvdztcbiAgcGFyYW1zLnZpei5jbHVzdC5tYXJnaW4udG9wID0gcGFyYW1zLm5vcm1fbGFiZWwubWFyZ2luLnRvcCArIHBhcmFtcy5ub3JtX2xhYmVsLmJhY2tncm91bmQuY29sO1xuICBwYXJhbXMudml6LnNwaWxsb3Zlcl94X29mZnNldCA9IGxhYmVsX3NjYWxlKGNvbF9tYXhfY2hhcikgKiAwLjcgKiBwYXJhbXMuY29sX2xhYmVsX3NjYWxlO1xuXG4gIC8vIHJlZHVjZSB3aWR0aCBieSByb3cvY29sIGxhYmVscyBhbmQgYnkgZ3JleV9ib3JkZXIgd2lkdGhcbiAgLy8ocmVkdWNlIHdpZHRoIGJ5IGxlc3Mgc2luY2UgdGhpcyBpcyBsZXNzIGFwYXJlbnQgd2l0aCBzbGFudGVkIGNvbCBsYWJlbHMpXG4gIHZhciBpbmlfY2x1c3Rfd2lkdGggPSBwYXJhbXMudml6LnN2Z19kaW0ud2lkdGggLSAocGFyYW1zLmxhYmVscy5zdXBlcl9sYWJlbF93aWR0aCArXG4gICAgcGFyYW1zLm5vcm1fbGFiZWwud2lkdGgucm93ICsgcGFyYW1zLmNsYXNzX3Jvb20ucm93KSAtIHBhcmFtcy52aXouZ3JleV9ib3JkZXJfd2lkdGggLSBwYXJhbXMudml6LnNwaWxsb3Zlcl94X29mZnNldDtcblxuICAvLyB0aGVyZSBpcyBzcGFjZSBiZXR3ZWVuIHRoZSBjbHVzdGVyZ3JhbSBhbmQgdGhlIGJvcmRlclxuICB2YXIgaW5pX2NsdXN0X2hlaWdodCA9IHBhcmFtcy52aXouc3ZnX2RpbS5oZWlnaHQgLSAocGFyYW1zLmxhYmVscy5zdXBlcl9sYWJlbF93aWR0aCArXG4gICAgcGFyYW1zLm5vcm1fbGFiZWwud2lkdGguY29sICsgcGFyYW1zLmNsYXNzX3Jvb20uY29sKSAtIDUgKiBwYXJhbXMudml6LmdyZXlfYm9yZGVyX3dpZHRoO1xuXG4gIHBhcmFtcy52aXoubnVtX2NvbF9ub2RlcyA9IGNvbF9ub2Rlcy5sZW5ndGg7XG4gIHBhcmFtcy52aXoubnVtX3Jvd19ub2RlcyA9IHJvd19ub2Rlcy5sZW5ndGg7XG5cbiAgcGFyYW1zLnZpei5jbHVzdC5kaW0gPSB7fTtcblxuICB2YXIgdG1wX3hfc2NhbGUgPSBkMy5zY2FsZS5vcmRpbmFsKCkucmFuZ2VCYW5kcyhbMCwgaW5pX2NsdXN0X3dpZHRoXSk7XG4gIHRtcF94X3NjYWxlLmRvbWFpbihfLnJhbmdlKGNvbF9ub2Rlcy5sZW5ndGgpKTtcbiAgdmFyIHRyaWFuZ2xlX2hlaWdodCA9IHRtcF94X3NjYWxlLnJhbmdlQmFuZCgpIC8gMjtcblxuICBpZiAodHJpYW5nbGVfaGVpZ2h0ID4gcGFyYW1zLm5vcm1fbGFiZWwud2lkdGguY29sKSB7XG4gICAgaW5pX2NsdXN0X3dpZHRoID0gaW5pX2NsdXN0X3dpZHRoICogKCBwYXJhbXMubm9ybV9sYWJlbC53aWR0aC5jb2wgLyB0cmlhbmdsZV9oZWlnaHQgKTtcbiAgfVxuICBwYXJhbXMudml6LmNsdXN0LmRpbS53aWR0aCA9IGluaV9jbHVzdF93aWR0aDtcblxuICBpZiAoaW5pX2NsdXN0X3dpZHRoIC8gcGFyYW1zLnZpei5udW1fY29sX25vZGVzIDwgaW5pX2NsdXN0X2hlaWdodCAvIHBhcmFtcy52aXoubnVtX3Jvd19ub2Rlcykge1xuXG4gICAgcGFyYW1zLnZpei5jbHVzdC5kaW0uaGVpZ2h0ID0gaW5pX2NsdXN0X3dpZHRoICogKHBhcmFtcy52aXoubnVtX3Jvd19ub2RlcyAvIHBhcmFtcy52aXoubnVtX2NvbF9ub2RlcyApO1xuXG4gICAgcGFyYW1zLnZpei5mb3JjZV9zcXVhcmUgPSAxO1xuXG4gICAgaWYgKHBhcmFtcy52aXouY2x1c3QuZGltLmhlaWdodCA+IGluaV9jbHVzdF9oZWlnaHQpIHtcbiAgICAgIHBhcmFtcy52aXouY2x1c3QuZGltLmhlaWdodCA9IGluaV9jbHVzdF9oZWlnaHQ7XG4gICAgICBwYXJhbXMudml6LmZvcmNlX3NxdWFyZSA9IDA7XG4gICAgfVxuICB9XG4gIGVsc2Uge1xuICAgIHBhcmFtcy52aXouY2x1c3QuZGltLmhlaWdodCA9IGluaV9jbHVzdF9oZWlnaHQ7XG4gICAgcGFyYW1zLnZpei5mb3JjZV9zcXVhcmUgPSAwO1xuICB9XG5cbiAgaWYgKGNvbmZpZy5mb3JjZV9zcXVhcmUgPT09IDEpIHtcbiAgICBwYXJhbXMudml6LmZvcmNlX3NxdWFyZSA9IDE7XG4gIH1cblxuXG4gIHZhciBlbnJfbWF4ID0gTWF0aC5hYnMoXy5tYXgoY29sX25vZGVzLCBmdW5jdGlvbiAoZCkge1xuICAgIHJldHVybiBNYXRoLmFicyhkLnZhbHVlKTtcbiAgfSkudmFsdWUpO1xuXG4gIHBhcmFtcy5sYWJlbHMuYmFyX3NjYWxlX2NvbCA9IGQzLnNjYWxlXG4gICAgLmxpbmVhcigpXG4gICAgLmRvbWFpbihbMCwgZW5yX21heF0pXG4gICAgLnJhbmdlKFswLCAwLjc1ICogcGFyYW1zLm5vcm1fbGFiZWwud2lkdGguY29sXSk7XG5cbiAgdmFyIGVucl9tYXggPSBNYXRoLmFicyhfLm1heChyb3dfbm9kZXMsIGZ1bmN0aW9uIChkKSB7XG4gICAgcmV0dXJuIE1hdGguYWJzKGQudmFsdWUpO1xuICB9KS52YWx1ZSk7XG4gIHBhcmFtcy5sYWJlbHMuYmFyX3NjYWxlX3JvdyA9IGQzLnNjYWxlXG4gICAgLmxpbmVhcigpXG4gICAgLmRvbWFpbihbMCwgZW5yX21heF0pXG4gICAgLnJhbmdlKFswLCBwYXJhbXMubm9ybV9sYWJlbC53aWR0aC5yb3ddKTtcblxuXG4gIC8vIERlZmluZSBPcmRlcmluZ3NcbiAgcGFyYW1zLm1hdHJpeC5vcmRlcnMgPSB7XG4gICAgLy8gaW5pXG4gICAgaW5pX3JvdzogZDMucmFuZ2UocGFyYW1zLnZpei5udW1fY29sX25vZGVzKS5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICByZXR1cm4gY29sX25vZGVzW2JdLmluaSAtIGNvbF9ub2Rlc1thXS5pbmk7XG4gICAgfSksXG4gICAgaW5pX2NvbDogZDMucmFuZ2UocGFyYW1zLnZpei5udW1fcm93X25vZGVzKS5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICByZXR1cm4gcm93X25vZGVzW2JdLmluaSAtIHJvd19ub2Rlc1thXS5pbmk7XG4gICAgfSksXG4gICAgLy8gcmFua1xuICAgIHJhbmtfcm93OiBkMy5yYW5nZShwYXJhbXMudml6Lm51bV9jb2xfbm9kZXMpLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgIHJldHVybiBjb2xfbm9kZXNbYl0ucmFuayAtIGNvbF9ub2Rlc1thXS5yYW5rO1xuICAgIH0pLFxuICAgIHJhbmtfY29sOiBkMy5yYW5nZShwYXJhbXMudml6Lm51bV9yb3dfbm9kZXMpLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgIHJldHVybiByb3dfbm9kZXNbYl0ucmFuayAtIHJvd19ub2Rlc1thXS5yYW5rO1xuICAgIH0pLFxuICAgIC8vIGNsdXN0ZXJlZFxuICAgIGNsdXN0X3JvdzogZDMucmFuZ2UocGFyYW1zLnZpei5udW1fY29sX25vZGVzKS5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICByZXR1cm4gY29sX25vZGVzW2JdLmNsdXN0IC0gY29sX25vZGVzW2FdLmNsdXN0O1xuICAgIH0pLFxuICAgIGNsdXN0X2NvbDogZDMucmFuZ2UocGFyYW1zLnZpei5udW1fcm93X25vZGVzKS5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICByZXR1cm4gcm93X25vZGVzW2JdLmNsdXN0IC0gcm93X25vZGVzW2FdLmNsdXN0O1xuICAgIH0pXG4gIH07XG5cblxuICAvLyAvLyBkZWZpbmUgY2xhc3Mgb3JkZXJpbmcgLSBkZWZpbmUgb24gZnJvbnQtZW5kXG4gIC8vIGlmICh1dGlscy5oYXMoY29sX25vZGVzWzBdLCdjbCcpKXtcblxuICAvLyAgIC8vIHRoZSBvcmRlciBzaG91bGQgYmUgaW50ZXJwcmV0ZWQgYXMgdGhlIG50aCBub2RlIHNob3VsZCBiZSBwb3NpdGlvbmVkIGhlcmVcbiAgLy8gICAvLyBpbiB0aGUgb3JkZXJcblxuICAvLyAgIHZhciB0bXBfY29sX25vZGVzID0gXy5zb3J0QnkoY29sX25vZGVzLCdjbCcpXG5cbiAgLy8gICB2YXIgb3JkZXJlZF9jb2xfbmFtZXMgPSBbXVxuICAvLyAgIGZvciAodmFyIGk9MDsgaTwgdG1wX2NvbF9ub2Rlcy5sZW5ndGg7IGkrKyl7XG4gIC8vICAgICBvcmRlcmVkX2NvbF9uYW1lcy5wdXNoKCB0bXBfY29sX25vZGVzW2ldLm5hbWUgKTtcbiAgLy8gICB9XG5cbiAgLy8gICB2YXIgb3JkZXJfY29sX2NsYXNzID0gW11cbiAgLy8gICBmb3IgKHZhciBpPTA7IGk8IGNvbF9ub2Rlcy5sZW5ndGg7IGkrKyl7XG4gIC8vICAgICB2YXIgaW5zdF9jb2xfbmFtZSA9IG9yZGVyZWRfY29sX25hbWVzW2ldO1xuICAvLyAgICAgb3JkZXJfY29sX2NsYXNzLnB1c2goIF8uaW5kZXhPZiggcGFyYW1zLm5ldHdvcmtfZGF0YS5jb2xfbm9kZXNfbmFtZXMsIGluc3RfY29sX25hbWUpICk7XG4gIC8vICAgfVxuXG4gIC8vICAgcGFyYW1zLm1hdHJpeC5vcmRlcnMuY2xhc3Nfcm93ID0gb3JkZXJfY29sX2NsYXNzO1xuICAvLyB9XG5cbiAgaWYgKHV0aWxzLmhhcyhjb2xfbm9kZXNbMF0sICdjbF9pbmRleCcpKSB7XG4gICAgcGFyYW1zLm1hdHJpeC5vcmRlcnMuY2xhc3Nfcm93ID0gZDMucmFuZ2UocGFyYW1zLnZpei5udW1fY29sX25vZGVzKS5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICByZXR1cm4gY29sX25vZGVzW2JdLmNsX2luZGV4IC0gY29sX25vZGVzW2FdLmNsX2luZGV4O1xuICAgIH0pO1xuICB9XG5cbiAgcGFyYW1zLm1hdHJpeC54X3NjYWxlID0gZDMuc2NhbGUub3JkaW5hbCgpLnJhbmdlQmFuZHMoWzAsIHBhcmFtcy52aXouY2x1c3QuZGltLndpZHRoXSk7XG4gIHBhcmFtcy5tYXRyaXgueV9zY2FsZSA9IGQzLnNjYWxlLm9yZGluYWwoKS5yYW5nZUJhbmRzKFswLCBwYXJhbXMudml6LmNsdXN0LmRpbS5oZWlnaHRdKTtcblxuICBpZiAocGFyYW1zLnZpei5pbnN0X29yZGVyLnJvdyA9PT0gJ2luaScpIHtcbiAgICBwYXJhbXMubWF0cml4Lnhfc2NhbGUuZG9tYWluKHBhcmFtcy5tYXRyaXgub3JkZXJzLmluaV9yb3cpO1xuICB9IGVsc2UgaWYgKHBhcmFtcy52aXouaW5zdF9vcmRlci5yb3cgPT09ICdjbHVzdCcpIHtcbiAgICBwYXJhbXMubWF0cml4Lnhfc2NhbGUuZG9tYWluKHBhcmFtcy5tYXRyaXgub3JkZXJzLmNsdXN0X3Jvdyk7XG4gIH0gZWxzZSBpZiAocGFyYW1zLnZpei5pbnN0X29yZGVyLnJvdyA9PT0gJ3JhbmsnKSB7XG4gICAgcGFyYW1zLm1hdHJpeC54X3NjYWxlLmRvbWFpbihwYXJhbXMubWF0cml4Lm9yZGVycy5yYW5rX3Jvdyk7XG4gIH0gZWxzZSBpZiAocGFyYW1zLnZpei5pbnN0X29yZGVyLnJvdyA9PT0gJ2NsYXNzJykge1xuICAgIGlmICh1dGlscy5oYXMocGFyYW1zLm1hdHJpeC5vcmRlcnMsICdjbGFzc19yb3cnKSkge1xuICAgICAgcGFyYW1zLm1hdHJpeC54X3NjYWxlLmRvbWFpbihwYXJhbXMubWF0cml4Lm9yZGVycy5jbGFzc19yb3cpO1xuICAgIH0gZWxzZSB7XG4gICAgICBwYXJhbXMubWF0cml4Lnhfc2NhbGUuZG9tYWluKHBhcmFtcy5tYXRyaXgub3JkZXJzLmNsdXN0X3Jvdyk7XG4gICAgfVxuXG4gIH1cblxuICBpZiAocGFyYW1zLnZpei5pbnN0X29yZGVyLmNvbCA9PT0gJ2luaScpIHtcbiAgICBwYXJhbXMubWF0cml4Lnlfc2NhbGUuZG9tYWluKHBhcmFtcy5tYXRyaXgub3JkZXJzLmluaV9jb2wpO1xuICB9IGVsc2UgaWYgKHBhcmFtcy52aXouaW5zdF9vcmRlci5jb2wgPT09ICdjbHVzdCcpIHtcbiAgICBwYXJhbXMubWF0cml4Lnlfc2NhbGUuZG9tYWluKHBhcmFtcy5tYXRyaXgub3JkZXJzLmNsdXN0X2NvbCk7XG4gIH0gZWxzZSBpZiAocGFyYW1zLnZpei5pbnN0X29yZGVyLmNvbCA9PT0gJ3JhbmsnKSB7XG4gICAgcGFyYW1zLm1hdHJpeC55X3NjYWxlLmRvbWFpbihwYXJhbXMubWF0cml4Lm9yZGVycy5yYW5rX2NvbCk7XG4gIH0gZWxzZSBpZiAocGFyYW1zLnZpei5pbnN0X29yZGVyLmNvbCA9PT0gJ2NsYXNzJykge1xuICAgIGlmICh1dGlscy5oYXMocGFyYW1zLm1hdHJpeC5vcmRlcnMsICdjbGFzc19yb3cnKSkge1xuICAgICAgcGFyYW1zLm1hdHJpeC55X3NjYWxlLmRvbWFpbihwYXJhbXMubWF0cml4Lm9yZGVycy5jbGFzc19jb2wpO1xuICAgIH0gZWxzZSB7XG4gICAgICBwYXJhbXMubWF0cml4Lnlfc2NhbGUuZG9tYWluKHBhcmFtcy5tYXRyaXgub3JkZXJzLmNsdXN0X2NvbCk7XG4gICAgfVxuICB9XG5cbiAgcGFyYW1zLm5ldHdvcmtfZGF0YS5saW5rcy5mb3JFYWNoKGZ1bmN0aW9uIChkKSB7XG4gICAgLy8gZC5uYW1lID0gcm93X25vZGVzW2Quc291cmNlXS5uYW1lICsgJ18nICsgY29sX25vZGVzW2QudGFyZ2V0XS5uYW1lO1xuICAgIC8vIGQucm93X25hbWUgPSByb3dfbm9kZXNbZC5zb3VyY2VdLm5hbWU7XG4gICAgLy8gZC5jb2xfbmFtZSA9IGNvbF9ub2Rlc1tkLnRhcmdldF0ubmFtZTtcbiAgICBkLnggPSBwYXJhbXMubWF0cml4Lnhfc2NhbGUoZC50YXJnZXQpO1xuICAgIGQueSA9IHBhcmFtcy5tYXRyaXgueV9zY2FsZShkLnNvdXJjZSk7XG4gIH0pO1xuXG4gIC8vIG1ha2UgbG5rcyBjcm9zc2ZpbHRlclxuICAvLyBUT0RPIGNoZWNrIGlmIHJlbHlpbmcgb24gY3Jvc3NmaWx0ZXJcbiAgcGFyYW1zLmNmID0ge307XG4gIHBhcmFtcy5jZi5saW5rcyA9IGNyb3NzZmlsdGVyKHBhcmFtcy5uZXR3b3JrX2RhdGEubGlua3MpO1xuICBwYXJhbXMuY2YuZGltX3ggPSBwYXJhbXMuY2YubGlua3MuZGltZW5zaW9uKGZ1bmN0aW9uIChkKSB7XG4gICAgcmV0dXJuIGQueDtcbiAgfSk7XG4gIHBhcmFtcy5jZi5kaW1feSA9IHBhcmFtcy5jZi5saW5rcy5kaW1lbnNpb24oZnVuY3Rpb24gKGQpIHtcbiAgICByZXR1cm4gZC55O1xuICB9KTtcblxuICBwYXJhbXMubWF0cml4Lm1hdHJpeCA9IGluaXRpYWxpemVfbWF0cml4KHBhcmFtcy5uZXR3b3JrX2RhdGEpO1xuXG4gIHBhcmFtcy52aXouYm9yZGVyX2ZyYWN0aW9uID0gNTU7XG4gIHBhcmFtcy52aXouYm9yZGVyX3dpZHRoID0gcGFyYW1zLm1hdHJpeC54X3NjYWxlLnJhbmdlQmFuZCgpIC9cbiAgICBwYXJhbXMudml6LmJvcmRlcl9mcmFjdGlvbjtcblxuICBwYXJhbXMudml6Lnpvb21fc3dpdGNoID0gKHBhcmFtcy52aXouY2x1c3QuZGltLndpZHRoIC8gcGFyYW1zLnZpei5udW1fY29sX25vZGVzKSAvIChwYXJhbXMudml6LmNsdXN0LmRpbS5oZWlnaHQgLyBwYXJhbXMudml6Lm51bV9yb3dfbm9kZXMpO1xuXG4gIGlmIChwYXJhbXMudml6Lnpvb21fc3dpdGNoIDwgMSkge1xuICAgIHBhcmFtcy52aXouem9vbV9zd2l0Y2ggPSAxO1xuICB9XG5cbiAgcGFyYW1zLm1hdHJpeC5yZWN0X3dpZHRoID0gcGFyYW1zLm1hdHJpeC54X3NjYWxlLnJhbmdlQmFuZCgpIC0gMSAqIHBhcmFtcy52aXouYm9yZGVyX3dpZHRoO1xuICBwYXJhbXMubWF0cml4LnJlY3RfaGVpZ2h0ID0gcGFyYW1zLm1hdHJpeC55X3NjYWxlLnJhbmdlQmFuZCgpIC0gMSAqIHBhcmFtcy52aXouYm9yZGVyX3dpZHRoIC8gcGFyYW1zLnZpei56b29tX3N3aXRjaDtcblxuICBwYXJhbXMuc2NhbGVfZm9udF9vZmZzZXQgPSBkMy5zY2FsZVxuICAgIC5saW5lYXIoKS5kb21haW4oWzEsIDBdKVxuICAgIC5yYW5nZShbMC44LCAwLjVdKTtcblxuICBwYXJhbXMubGFiZWxzLmRlZmF1bHRfZnNfcm93ID0gcGFyYW1zLm1hdHJpeC55X3NjYWxlLnJhbmdlQmFuZCgpICogMS4wMTtcbiAgcGFyYW1zLmxhYmVscy5kZWZhdWx0X2ZzX2NvbCA9IHBhcmFtcy5tYXRyaXgueF9zY2FsZS5yYW5nZUJhbmQoKSAqIDAuODc7XG5cbiAgcGFyYW1zLnZpei56b29tX3NjYWxlX2ZvbnQgPSB7fTtcbiAgcGFyYW1zLnZpei56b29tX3NjYWxlX2ZvbnQucm93ID0gMTtcbiAgcGFyYW1zLnZpei56b29tX3NjYWxlX2ZvbnQuY29sID0gMTtcblxuICBwYXJhbXMudml6LnJlYWxfem9vbSA9IHBhcmFtcy5ub3JtX2xhYmVsLndpZHRoLmNvbCAvIChwYXJhbXMubWF0cml4Lnhfc2NhbGUucmFuZ2VCYW5kKCkgLyAyKTtcblxuICBpZiAodXRpbHMuaGFzKHBhcmFtcy5uZXR3b3JrX2RhdGEsICdhbGxfbGlua3MnKSkge1xuICAgIHBhcmFtcy5tYXRyaXgubWF4X2xpbmsgPSBfLm1heChwYXJhbXMubmV0d29ya19kYXRhLmFsbF9saW5rcywgZnVuY3Rpb24gKGQpIHtcbiAgICAgIHJldHVybiBNYXRoLmFicyhkLnZhbHVlKTtcbiAgICB9KS52YWx1ZTtcbiAgfSBlbHNlIHtcbiAgICBwYXJhbXMubWF0cml4Lm1heF9saW5rID0gXy5tYXgocGFyYW1zLm5ldHdvcmtfZGF0YS5saW5rcywgZnVuY3Rpb24gKGQpIHtcbiAgICAgIHJldHVybiBNYXRoLmFicyhkLnZhbHVlKTtcbiAgICB9KS52YWx1ZTtcbiAgfVxuXG4gIGlmIChjb25maWcuaW5wdXRfZG9tYWluID09PSAwKSB7XG4gICAgaWYgKHBhcmFtcy5tYXRyaXgub3BhY2l0eV9mdW5jdGlvbiA9PT0gJ2xpbmVhcicpIHtcbiAgICAgIHBhcmFtcy5tYXRyaXgub3BhY2l0eV9zY2FsZSA9IGQzLnNjYWxlLmxpbmVhcigpXG4gICAgICAgIC5kb21haW4oWzAsIE1hdGguYWJzKHBhcmFtcy5tYXRyaXgubWF4X2xpbmspXSkuY2xhbXAodHJ1ZSlcbiAgICAgICAgLnJhbmdlKFswLjAsIDEuMF0pO1xuICAgIH0gZWxzZSBpZiAocGFyYW1zLm1hdHJpeC5vcGFjaXR5X2Z1bmN0aW9uID09PSAnbG9nJykge1xuICAgICAgcGFyYW1zLm1hdHJpeC5vcGFjaXR5X3NjYWxlID0gZDMuc2NhbGUubG9nKClcbiAgICAgICAgLmRvbWFpbihbMC4wMDEsIE1hdGguYWJzKHBhcmFtcy5tYXRyaXgubWF4X2xpbmspXSkuY2xhbXAodHJ1ZSlcbiAgICAgICAgLnJhbmdlKFswLjAsIDEuMF0pO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBpZiAocGFyYW1zLm1hdHJpeC5vcGFjaXR5X2Z1bmN0aW9uID09PSAnbGluZWFyJykge1xuICAgICAgcGFyYW1zLm1hdHJpeC5vcGFjaXR5X3NjYWxlID0gZDMuc2NhbGUubGluZWFyKClcbiAgICAgICAgLmRvbWFpbihbMCwgY29uZmlnLmlucHV0X2RvbWFpbl0pLmNsYW1wKHRydWUpXG4gICAgICAgIC5yYW5nZShbMC4wLCAxLjBdKTtcbiAgICB9IGVsc2UgaWYgKHBhcmFtcy5tYXRyaXgub3BhY2l0eV9mdW5jdGlvbiA9PT0gJ2xvZycpIHtcbiAgICAgIHBhcmFtcy5tYXRyaXgub3BhY2l0eV9zY2FsZSA9IGQzLnNjYWxlLmxvZygpXG4gICAgICAgIC5kb21haW4oWzAuMDAxLCBjb25maWcuaW5wdXRfZG9tYWluXSkuY2xhbXAodHJ1ZSlcbiAgICAgICAgLnJhbmdlKFswLjAsIDEuMF0pO1xuICAgIH1cbiAgfVxuXG4gIC8vIFRPRE8gY2hlY2sgaWYgdXNpbmcgcnVuX3RyYW5zXG4gIHBhcmFtcy52aXoucnVuX3RyYW5zID0gZmFsc2U7XG5cbiAgaWYgKHV0aWxzLmhhcyhwYXJhbXMubmV0d29ya19kYXRhLmxpbmtzWzBdLCAndmFsdWVfdXAnKSB8fCB1dGlscy5oYXMocGFyYW1zLm5ldHdvcmtfZGF0YS5saW5rc1swXSwgJ3ZhbHVlX2RuJykpIHtcbiAgICBwYXJhbXMubWF0cml4LnRpbGVfdHlwZSA9ICd1cGRuJztcbiAgfSBlbHNlIHtcbiAgICBwYXJhbXMubWF0cml4LnRpbGVfdHlwZSA9ICdzaW1wbGUnO1xuICB9XG5cbiAgaWYgKHV0aWxzLmhhcyhwYXJhbXMubmV0d29ya19kYXRhLmxpbmtzWzBdLCAnaGlnaGxpZ2h0JykpIHtcbiAgICBwYXJhbXMubWF0cml4LmhpZ2hsaWdodCA9IDE7XG4gIH0gZWxzZSB7XG4gICAgcGFyYW1zLm1hdHJpeC5oaWdobGlnaHQgPSAwO1xuICB9XG5cbiAgcGFyYW1zLnpvb21fYmVoYXZpb3IgPSBkMy5iZWhhdmlvci56b29tKClcbiAgICAuc2NhbGVFeHRlbnQoWzEsIHBhcmFtcy52aXoucmVhbF96b29tICogcGFyYW1zLnZpei56b29tX3N3aXRjaF0pXG4gICAgLm9uKCd6b29tJywgZnVuY3Rpb24oKXtcbiAgICAgIHpvb21lZChwYXJhbXMpO1xuICAgIH0pO1xuXG4gIHJldHVybiBwYXJhbXM7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgIGlmIChPYmplY3Qua2V5cyhwYXJhbXMpLmxlbmd0aCA8IDEpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignUGFyYW1zIHdhcyBwYXNzZWQgd2l0aG91dCBiZWluZyBpbml0aWFsaXplZC4nKTtcbiAgICB9XG4gICAgcmV0dXJuIHBhcmFtcztcbiAgfSxcbiAgbWFrZV9wYXJhbXM6IG1ha2VfcGFyYW1zXG59O1xuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogc3JjL3BhcmFtcy5qc1xuICoqLyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFOQTtBQUNBO0FBUUE7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFoREE7QUFtREE7O0FBbkRBO0FBc0RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUE5REE7QUFpRUE7QUFDQTtBQUNBO0FBQ0E7OztBQXBFQTtBQUNBO0FBd0VBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFqRkE7QUFDQTs7QUFEQTtBQUNBO0FBdUZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQURBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUEvR0E7QUFDQTtBQW9IQTtBQUNBO0FBQ0E7O0FBdkhBO0FBMEhBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUhBO0FBTUE7QUFDQTtBQUZBO0FBTEE7QUFXQTtBQUNBO0FBWkE7QUFDQTtBQWNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUF4S0E7QUFDQTs7QUFEQTtBQUNBO0FBaUxBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQU5BO0FBWUE7QUFDQTtBQWJBO0FBQ0E7QUFlQTtBQUNBO0FBREE7QUFDQTtBQUlBO0FBQ0E7QUFEQTtBQUNBO0FBR0E7QUFDQTtBQUlBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7O0FBbE9BOztBQTBPQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBREE7O0FBSUE7QUFDQTtBQURBO0FBR0E7QUFDQTtBQURBOztBQUlBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFEQTtBQW5CQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQXpPQTtBQXdSQTtBQUNBO0FBREE7QUFEQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFEQTtBQUdBO0FBREE7QUFHQTtBQUNBO0FBREE7QUFHQTtBQUhBO0FBREE7QUFDQTtBQVFBO0FBQ0E7QUFEQTtBQUdBO0FBREE7QUFHQTtBQURBO0FBR0E7QUFDQTtBQURBO0FBR0E7QUFIQTtBQURBO0FBQ0E7QUFPQTs7OztBQUlBO0FBQ0E7QUFMQTtBQUNBOzs7QUE5VEE7QUF3VUE7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBREE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFEQTtBQUtBO0FBQ0E7QUFEQTtBQUxBO0FBQ0E7QUFTQTtBQUNBO0FBQ0E7QUFEQTtBQUtBO0FBREE7QUFMQTtBQVdBO0FBQ0E7QUFEQTtBQUtBO0FBREE7QUFmQTtBQUNBOztBQXZYQTtBQUNBO0FBOFlBO0FBQ0E7QUFEQTtBQUdBO0FBSEE7QUFDQTtBQUtBO0FBQ0E7QUFEQTtBQUdBO0FBSEE7QUFDQTtBQUtBO0FBR0E7QUFEQTtBQUNBO0FBR0E7QUFqYUE7QUFDQTtBQW1hQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFKQTtBQU1BO0FBUEEiLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 2 */
/***/ function(module, exports, __webpack_require__) {

	eval("module.exports = __webpack_require__(3).crossfilter;//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9ub2RlX21vZHVsZXMvY3Jvc3NmaWx0ZXIvaW5kZXguanM/MTdkZCJdLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCIuL2Nyb3NzZmlsdGVyXCIpLmNyb3NzZmlsdGVyO1xuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogbm9kZV9tb2R1bGVzL2Nyb3NzZmlsdGVyL2luZGV4LmpzXG4gKiovIl0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ },
/* 3 */
/***/ function(module, exports) {

	eval("(function (exports) {\n  crossfilter.version = \"1.3.12\";\n  function crossfilter_identity(d) {\n    return d;\n  }\n  crossfilter.permute = permute;\n\n  function permute(array, index) {\n    for (var i = 0, n = index.length, copy = new Array(n); i < n; ++i) {\n      copy[i] = array[index[i]];\n    }\n    return copy;\n  }\n  var bisect = crossfilter.bisect = bisect_by(crossfilter_identity);\n\n  bisect.by = bisect_by;\n\n  function bisect_by(f) {\n\n    // Locate the insertion point for x in a to maintain sorted order. The\n    // arguments lo and hi may be used to specify a subset of the array which\n    // should be considered; by default the entire array is used. If x is already\n    // present in a, the insertion point will be before (to the left of) any\n    // existing entries. The return value is suitable for use as the first\n    // argument to `array.splice` assuming that a is already sorted.\n    //\n    // The returned insertion point i partitions the array a into two halves so\n    // that all v < x for v in a[lo:i] for the left side and all v >= x for v in\n    // a[i:hi] for the right side.\n    function bisectLeft(a, x, lo, hi) {\n      while (lo < hi) {\n        var mid = lo + hi >>> 1;\n        if (f(a[mid]) < x) lo = mid + 1;else hi = mid;\n      }\n      return lo;\n    }\n\n    // Similar to bisectLeft, but returns an insertion point which comes after (to\n    // the right of) any existing entries of x in a.\n    //\n    // The returned insertion point i partitions the array into two halves so that\n    // all v <= x for v in a[lo:i] for the left side and all v > x for v in\n    // a[i:hi] for the right side.\n    function bisectRight(a, x, lo, hi) {\n      while (lo < hi) {\n        var mid = lo + hi >>> 1;\n        if (x < f(a[mid])) hi = mid;else lo = mid + 1;\n      }\n      return lo;\n    }\n\n    bisectRight.right = bisectRight;\n    bisectRight.left = bisectLeft;\n    return bisectRight;\n  }\n  var heap = crossfilter.heap = heap_by(crossfilter_identity);\n\n  heap.by = heap_by;\n\n  function heap_by(f) {\n\n    // Builds a binary heap within the specified array a[lo:hi]. The heap has the\n    // property such that the parent a[lo+i] is always less than or equal to its\n    // two children: a[lo+2*i+1] and a[lo+2*i+2].\n    function heap(a, lo, hi) {\n      var n = hi - lo,\n          i = (n >>> 1) + 1;\n      while (--i > 0) sift(a, i, n, lo);\n      return a;\n    }\n\n    // Sorts the specified array a[lo:hi] in descending order, assuming it is\n    // already a heap.\n    function sort(a, lo, hi) {\n      var n = hi - lo,\n          t;\n      while (--n > 0) t = a[lo], a[lo] = a[lo + n], a[lo + n] = t, sift(a, 1, n, lo);\n      return a;\n    }\n\n    // Sifts the element a[lo+i-1] down the heap, where the heap is the contiguous\n    // slice of array a[lo:lo+n]. This method can also be used to update the heap\n    // incrementally, without incurring the full cost of reconstructing the heap.\n    function sift(a, i, n, lo) {\n      var d = a[--lo + i],\n          x = f(d),\n          child;\n      while ((child = i << 1) <= n) {\n        if (child < n && f(a[lo + child]) > f(a[lo + child + 1])) child++;\n        if (x <= f(a[lo + child])) break;\n        a[lo + i] = a[lo + child];\n        i = child;\n      }\n      a[lo + i] = d;\n    }\n\n    heap.sort = sort;\n    return heap;\n  }\n  var heapselect = crossfilter.heapselect = heapselect_by(crossfilter_identity);\n\n  heapselect.by = heapselect_by;\n\n  function heapselect_by(f) {\n    var heap = heap_by(f);\n\n    // Returns a new array containing the top k elements in the array a[lo:hi].\n    // The returned array is not sorted, but maintains the heap property. If k is\n    // greater than hi - lo, then fewer than k elements will be returned. The\n    // order of elements in a is unchanged by this operation.\n    function heapselect(a, lo, hi, k) {\n      var queue = new Array(k = Math.min(hi - lo, k)),\n          min,\n          i,\n          x,\n          d;\n\n      for (i = 0; i < k; ++i) queue[i] = a[lo++];\n      heap(queue, 0, k);\n\n      if (lo < hi) {\n        min = f(queue[0]);\n        do {\n          if (x = f(d = a[lo]) > min) {\n            queue[0] = d;\n            min = f(heap(queue, 0, k)[0]);\n          }\n        } while (++lo < hi);\n      }\n\n      return queue;\n    }\n\n    return heapselect;\n  }\n  var insertionsort = crossfilter.insertionsort = insertionsort_by(crossfilter_identity);\n\n  insertionsort.by = insertionsort_by;\n\n  function insertionsort_by(f) {\n\n    function insertionsort(a, lo, hi) {\n      for (var i = lo + 1; i < hi; ++i) {\n        for (var j = i, t = a[i], x = f(t); j > lo && f(a[j - 1]) > x; --j) {\n          a[j] = a[j - 1];\n        }\n        a[j] = t;\n      }\n      return a;\n    }\n\n    return insertionsort;\n  }\n  // Algorithm designed by Vladimir Yaroslavskiy.\n  // Implementation based on the Dart project; see lib/dart/LICENSE for details.\n\n  var quicksort = crossfilter.quicksort = quicksort_by(crossfilter_identity);\n\n  quicksort.by = quicksort_by;\n\n  function quicksort_by(f) {\n    var insertionsort = insertionsort_by(f);\n\n    function sort(a, lo, hi) {\n      return (hi - lo < quicksort_sizeThreshold ? insertionsort : quicksort)(a, lo, hi);\n    }\n\n    function quicksort(a, lo, hi) {\n      // Compute the two pivots by looking at 5 elements.\n      var sixth = (hi - lo) / 6 | 0,\n          i1 = lo + sixth,\n          i5 = hi - 1 - sixth,\n          i3 = lo + hi - 1 >> 1,\n          // The midpoint.\n      i2 = i3 - sixth,\n          i4 = i3 + sixth;\n\n      var e1 = a[i1],\n          x1 = f(e1),\n          e2 = a[i2],\n          x2 = f(e2),\n          e3 = a[i3],\n          x3 = f(e3),\n          e4 = a[i4],\n          x4 = f(e4),\n          e5 = a[i5],\n          x5 = f(e5);\n\n      var t;\n\n      // Sort the selected 5 elements using a sorting network.\n      if (x1 > x2) t = e1, e1 = e2, e2 = t, t = x1, x1 = x2, x2 = t;\n      if (x4 > x5) t = e4, e4 = e5, e5 = t, t = x4, x4 = x5, x5 = t;\n      if (x1 > x3) t = e1, e1 = e3, e3 = t, t = x1, x1 = x3, x3 = t;\n      if (x2 > x3) t = e2, e2 = e3, e3 = t, t = x2, x2 = x3, x3 = t;\n      if (x1 > x4) t = e1, e1 = e4, e4 = t, t = x1, x1 = x4, x4 = t;\n      if (x3 > x4) t = e3, e3 = e4, e4 = t, t = x3, x3 = x4, x4 = t;\n      if (x2 > x5) t = e2, e2 = e5, e5 = t, t = x2, x2 = x5, x5 = t;\n      if (x2 > x3) t = e2, e2 = e3, e3 = t, t = x2, x2 = x3, x3 = t;\n      if (x4 > x5) t = e4, e4 = e5, e5 = t, t = x4, x4 = x5, x5 = t;\n\n      var pivot1 = e2,\n          pivotValue1 = x2,\n          pivot2 = e4,\n          pivotValue2 = x4;\n\n      // e2 and e4 have been saved in the pivot variables. They will be written\n      // back, once the partitioning is finished.\n      a[i1] = e1;\n      a[i2] = a[lo];\n      a[i3] = e3;\n      a[i4] = a[hi - 1];\n      a[i5] = e5;\n\n      var less = lo + 1,\n          // First element in the middle partition.\n      great = hi - 2; // Last element in the middle partition.\n\n      // Note that for value comparison, <, <=, >= and > coerce to a primitive via\n      // Object.prototype.valueOf; == and === do not, so in order to be consistent\n      // with natural order (such as for Date objects), we must do two compares.\n      var pivotsEqual = pivotValue1 <= pivotValue2 && pivotValue1 >= pivotValue2;\n      if (pivotsEqual) {\n\n        // Degenerated case where the partitioning becomes a dutch national flag\n        // problem.\n        //\n        // [ |  < pivot  | == pivot | unpartitioned | > pivot  | ]\n        //  ^             ^          ^             ^            ^\n        // left         less         k           great         right\n        //\n        // a[left] and a[right] are undefined and are filled after the\n        // partitioning.\n        //\n        // Invariants:\n        //   1) for x in ]left, less[ : x < pivot.\n        //   2) for x in [less, k[ : x == pivot.\n        //   3) for x in ]great, right[ : x > pivot.\n        for (var k = less; k <= great; ++k) {\n          var ek = a[k],\n              xk = f(ek);\n          if (xk < pivotValue1) {\n            if (k !== less) {\n              a[k] = a[less];\n              a[less] = ek;\n            }\n            ++less;\n          } else if (xk > pivotValue1) {\n\n            // Find the first element <= pivot in the range [k - 1, great] and\n            // put [:ek:] there. We know that such an element must exist:\n            // When k == less, then el3 (which is equal to pivot) lies in the\n            // interval. Otherwise a[k - 1] == pivot and the search stops at k-1.\n            // Note that in the latter case invariant 2 will be violated for a\n            // short amount of time. The invariant will be restored when the\n            // pivots are put into their final positions.\n            while (true) {\n              var greatValue = f(a[great]);\n              if (greatValue > pivotValue1) {\n                great--;\n                // This is the only location in the while-loop where a new\n                // iteration is started.\n                continue;\n              } else if (greatValue < pivotValue1) {\n                // Triple exchange.\n                a[k] = a[less];\n                a[less++] = a[great];\n                a[great--] = ek;\n                break;\n              } else {\n                a[k] = a[great];\n                a[great--] = ek;\n                // Note: if great < k then we will exit the outer loop and fix\n                // invariant 2 (which we just violated).\n                break;\n              }\n            }\n          }\n        }\n      } else {\n\n        // We partition the list into three parts:\n        //  1. < pivot1\n        //  2. >= pivot1 && <= pivot2\n        //  3. > pivot2\n        //\n        // During the loop we have:\n        // [ | < pivot1 | >= pivot1 && <= pivot2 | unpartitioned  | > pivot2  | ]\n        //  ^            ^                        ^              ^             ^\n        // left         less                     k              great        right\n        //\n        // a[left] and a[right] are undefined and are filled after the\n        // partitioning.\n        //\n        // Invariants:\n        //   1. for x in ]left, less[ : x < pivot1\n        //   2. for x in [less, k[ : pivot1 <= x && x <= pivot2\n        //   3. for x in ]great, right[ : x > pivot2\n        for (var k = less; k <= great; k++) {\n          var ek = a[k],\n              xk = f(ek);\n          if (xk < pivotValue1) {\n            if (k !== less) {\n              a[k] = a[less];\n              a[less] = ek;\n            }\n            ++less;\n          } else {\n            if (xk > pivotValue2) {\n              while (true) {\n                var greatValue = f(a[great]);\n                if (greatValue > pivotValue2) {\n                  great--;\n                  if (great < k) break;\n                  // This is the only location inside the loop where a new\n                  // iteration is started.\n                  continue;\n                } else {\n                  // a[great] <= pivot2.\n                  if (greatValue < pivotValue1) {\n                    // Triple exchange.\n                    a[k] = a[less];\n                    a[less++] = a[great];\n                    a[great--] = ek;\n                  } else {\n                    // a[great] >= pivot1.\n                    a[k] = a[great];\n                    a[great--] = ek;\n                  }\n                  break;\n                }\n              }\n            }\n          }\n        }\n      }\n\n      // Move pivots into their final positions.\n      // We shrunk the list from both sides (a[left] and a[right] have\n      // meaningless values in them) and now we move elements from the first\n      // and third partition into these locations so that we can store the\n      // pivots.\n      a[lo] = a[less - 1];\n      a[less - 1] = pivot1;\n      a[hi - 1] = a[great + 1];\n      a[great + 1] = pivot2;\n\n      // The list is now partitioned into three partitions:\n      // [ < pivot1   | >= pivot1 && <= pivot2   |  > pivot2   ]\n      //  ^            ^                        ^             ^\n      // left         less                     great        right\n\n      // Recursive descent. (Don't include the pivot values.)\n      sort(a, lo, less - 1);\n      sort(a, great + 2, hi);\n\n      if (pivotsEqual) {\n        // All elements in the second partition are equal to the pivot. No\n        // need to sort them.\n        return a;\n      }\n\n      // In theory it should be enough to call _doSort recursively on the second\n      // partition.\n      // The Android source however removes the pivot elements from the recursive\n      // call if the second partition is too large (more than 2/3 of the list).\n      if (less < i1 && great > i5) {\n        var lessValue, greatValue;\n        while ((lessValue = f(a[less])) <= pivotValue1 && lessValue >= pivotValue1) ++less;\n        while ((greatValue = f(a[great])) <= pivotValue2 && greatValue >= pivotValue2) --great;\n\n        // Copy paste of the previous 3-way partitioning with adaptions.\n        //\n        // We partition the list into three parts:\n        //  1. == pivot1\n        //  2. > pivot1 && < pivot2\n        //  3. == pivot2\n        //\n        // During the loop we have:\n        // [ == pivot1 | > pivot1 && < pivot2 | unpartitioned  | == pivot2 ]\n        //              ^                      ^              ^\n        //            less                     k              great\n        //\n        // Invariants:\n        //   1. for x in [ *, less[ : x == pivot1\n        //   2. for x in [less, k[ : pivot1 < x && x < pivot2\n        //   3. for x in ]great, * ] : x == pivot2\n        for (var k = less; k <= great; k++) {\n          var ek = a[k],\n              xk = f(ek);\n          if (xk <= pivotValue1 && xk >= pivotValue1) {\n            if (k !== less) {\n              a[k] = a[less];\n              a[less] = ek;\n            }\n            less++;\n          } else {\n            if (xk <= pivotValue2 && xk >= pivotValue2) {\n              while (true) {\n                var greatValue = f(a[great]);\n                if (greatValue <= pivotValue2 && greatValue >= pivotValue2) {\n                  great--;\n                  if (great < k) break;\n                  // This is the only location inside the loop where a new\n                  // iteration is started.\n                  continue;\n                } else {\n                  // a[great] < pivot2.\n                  if (greatValue < pivotValue1) {\n                    // Triple exchange.\n                    a[k] = a[less];\n                    a[less++] = a[great];\n                    a[great--] = ek;\n                  } else {\n                    // a[great] == pivot1.\n                    a[k] = a[great];\n                    a[great--] = ek;\n                  }\n                  break;\n                }\n              }\n            }\n          }\n        }\n      }\n\n      // The second partition has now been cleared of pivot elements and looks\n      // as follows:\n      // [  *  |  > pivot1 && < pivot2  | * ]\n      //        ^                      ^\n      //       less                  great\n      // Sort the second partition using recursive descent.\n\n      // The second partition looks as follows:\n      // [  *  |  >= pivot1 && <= pivot2  | * ]\n      //        ^                        ^\n      //       less                    great\n      // Simply sort it by recursive descent.\n\n      return sort(a, less, great + 1);\n    }\n\n    return sort;\n  }\n\n  var quicksort_sizeThreshold = 32;\n  var crossfilter_array8 = crossfilter_arrayUntyped,\n      crossfilter_array16 = crossfilter_arrayUntyped,\n      crossfilter_array32 = crossfilter_arrayUntyped,\n      crossfilter_arrayLengthen = crossfilter_arrayLengthenUntyped,\n      crossfilter_arrayWiden = crossfilter_arrayWidenUntyped;\n\n  if (typeof Uint8Array !== \"undefined\") {\n    crossfilter_array8 = function (n) {\n      return new Uint8Array(n);\n    };\n    crossfilter_array16 = function (n) {\n      return new Uint16Array(n);\n    };\n    crossfilter_array32 = function (n) {\n      return new Uint32Array(n);\n    };\n\n    crossfilter_arrayLengthen = function (array, length) {\n      if (array.length >= length) return array;\n      var copy = new array.constructor(length);\n      copy.set(array);\n      return copy;\n    };\n\n    crossfilter_arrayWiden = function (array, width) {\n      var copy;\n      switch (width) {\n        case 16:\n          copy = crossfilter_array16(array.length);break;\n        case 32:\n          copy = crossfilter_array32(array.length);break;\n        default:\n          throw new Error(\"invalid array width!\");\n      }\n      copy.set(array);\n      return copy;\n    };\n  }\n\n  function crossfilter_arrayUntyped(n) {\n    var array = new Array(n),\n        i = -1;\n    while (++i < n) array[i] = 0;\n    return array;\n  }\n\n  function crossfilter_arrayLengthenUntyped(array, length) {\n    var n = array.length;\n    while (n < length) array[n++] = 0;\n    return array;\n  }\n\n  function crossfilter_arrayWidenUntyped(array, width) {\n    if (width > 32) throw new Error(\"invalid array width!\");\n    return array;\n  }\n  function crossfilter_filterExact(bisect, value) {\n    return function (values) {\n      var n = values.length;\n      return [bisect.left(values, value, 0, n), bisect.right(values, value, 0, n)];\n    };\n  }\n\n  function crossfilter_filterRange(bisect, range) {\n    var min = range[0],\n        max = range[1];\n    return function (values) {\n      var n = values.length;\n      return [bisect.left(values, min, 0, n), bisect.left(values, max, 0, n)];\n    };\n  }\n\n  function crossfilter_filterAll(values) {\n    return [0, values.length];\n  }\n  function crossfilter_null() {\n    return null;\n  }\n  function crossfilter_zero() {\n    return 0;\n  }\n  function crossfilter_reduceIncrement(p) {\n    return p + 1;\n  }\n\n  function crossfilter_reduceDecrement(p) {\n    return p - 1;\n  }\n\n  function crossfilter_reduceAdd(f) {\n    return function (p, v) {\n      return p + +f(v);\n    };\n  }\n\n  function crossfilter_reduceSubtract(f) {\n    return function (p, v) {\n      return p - f(v);\n    };\n  }\n  exports.crossfilter = crossfilter;\n\n  function crossfilter() {\n    var crossfilter = {\n      add: add,\n      remove: removeData,\n      dimension: dimension,\n      groupAll: groupAll,\n      size: size\n    };\n\n    var data = [],\n        // the records\n    n = 0,\n        // the number of records; data.length\n    m = 0,\n        // a bit mask representing which dimensions are in use\n    M = 8,\n        // number of dimensions that can fit in `filters`\n    filters = crossfilter_array8(0),\n        // M bits per record; 1 is filtered out\n    filterListeners = [],\n        // when the filters change\n    dataListeners = [],\n        // when data is added\n    removeDataListeners = []; // when data is removed\n\n    // Adds the specified new records to this crossfilter.\n    function add(newData) {\n      var n0 = n,\n          n1 = newData.length;\n\n      // If there's actually new data to add\n      // Merge the new data into the existing data.\n      // Lengthen the filter bitset to handle the new records.\n      // Notify listeners (dimensions and groups) that new data is available.\n      if (n1) {\n        data = data.concat(newData);\n        filters = crossfilter_arrayLengthen(filters, n += n1);\n        dataListeners.forEach(function (l) {\n          l(newData, n0, n1);\n        });\n      }\n\n      return crossfilter;\n    }\n\n    // Removes all records that match the current filters.\n    function removeData() {\n      var newIndex = crossfilter_index(n, n),\n          removed = [];\n      for (var i = 0, j = 0; i < n; ++i) {\n        if (filters[i]) newIndex[i] = j++;else removed.push(i);\n      }\n\n      // Remove all matching records from groups.\n      filterListeners.forEach(function (l) {\n        l(0, [], removed);\n      });\n\n      // Update indexes.\n      removeDataListeners.forEach(function (l) {\n        l(newIndex);\n      });\n\n      // Remove old filters and data by overwriting.\n      for (var i = 0, j = 0, k; i < n; ++i) {\n        if (k = filters[i]) {\n          if (i !== j) filters[j] = k, data[j] = data[i];\n          ++j;\n        }\n      }\n      data.length = j;\n      while (n > j) filters[--n] = 0;\n    }\n\n    // Adds a new dimension with the specified value accessor function.\n    function dimension(value) {\n      var dimension = {\n        filter: filter,\n        filterExact: filterExact,\n        filterRange: filterRange,\n        filterFunction: filterFunction,\n        filterAll: filterAll,\n        top: top,\n        bottom: bottom,\n        group: group,\n        groupAll: groupAll,\n        dispose: dispose,\n        remove: dispose // for backwards-compatibility\n      };\n\n      var one = ~m & - ~m,\n          // lowest unset bit as mask, e.g., 00001000\n      zero = ~one,\n          // inverted one, e.g., 11110111\n      values,\n          // sorted, cached array\n      index,\n          // value rank  object id\n      newValues,\n          // temporary array storing newly-added values\n      newIndex,\n          // temporary array storing newly-added index\n      sort = quicksort_by(function (i) {\n        return newValues[i];\n      }),\n          refilter = crossfilter_filterAll,\n          // for recomputing filter\n      refilterFunction,\n          // the custom filter function in use\n      indexListeners = [],\n          // when data is added\n      dimensionGroups = [],\n          lo0 = 0,\n          hi0 = 0;\n\n      // Updating a dimension is a two-stage process. First, we must update the\n      // associated filters for the newly-added records. Once all dimensions have\n      // updated their filters, the groups are notified to update.\n      dataListeners.unshift(preAdd);\n      dataListeners.push(postAdd);\n\n      removeDataListeners.push(removeData);\n\n      // Incorporate any existing data into this dimension, and make sure that the\n      // filter bitset is wide enough to handle the new dimension.\n      m |= one;\n      if (M >= 32 ? !one : m & -(1 << M)) {\n        filters = crossfilter_arrayWiden(filters, M <<= 1);\n      }\n      preAdd(data, 0, n);\n      postAdd(data, 0, n);\n\n      // Incorporates the specified new records into this dimension.\n      // This function is responsible for updating filters, values, and index.\n      function preAdd(newData, n0, n1) {\n\n        // Permute new values into natural order using a sorted index.\n        newValues = newData.map(value);\n        newIndex = sort(crossfilter_range(n1), 0, n1);\n        newValues = permute(newValues, newIndex);\n\n        // Bisect newValues to determine which new records are selected.\n        var bounds = refilter(newValues),\n            lo1 = bounds[0],\n            hi1 = bounds[1],\n            i;\n        if (refilterFunction) {\n          for (i = 0; i < n1; ++i) {\n            if (!refilterFunction(newValues[i], i)) filters[newIndex[i] + n0] |= one;\n          }\n        } else {\n          for (i = 0; i < lo1; ++i) filters[newIndex[i] + n0] |= one;\n          for (i = hi1; i < n1; ++i) filters[newIndex[i] + n0] |= one;\n        }\n\n        // If this dimension previously had no data, then we don't need to do the\n        // more expensive merge operation; use the new values and index as-is.\n        if (!n0) {\n          values = newValues;\n          index = newIndex;\n          lo0 = lo1;\n          hi0 = hi1;\n          return;\n        }\n\n        var oldValues = values,\n            oldIndex = index,\n            i0 = 0,\n            i1 = 0;\n\n        // Otherwise, create new arrays into which to merge new and old.\n        values = new Array(n);\n        index = crossfilter_index(n, n);\n\n        // Merge the old and new sorted values, and old and new index.\n        for (i = 0; i0 < n0 && i1 < n1; ++i) {\n          if (oldValues[i0] < newValues[i1]) {\n            values[i] = oldValues[i0];\n            index[i] = oldIndex[i0++];\n          } else {\n            values[i] = newValues[i1];\n            index[i] = newIndex[i1++] + n0;\n          }\n        }\n\n        // Add any remaining old values.\n        for (; i0 < n0; ++i0, ++i) {\n          values[i] = oldValues[i0];\n          index[i] = oldIndex[i0];\n        }\n\n        // Add any remaining new values.\n        for (; i1 < n1; ++i1, ++i) {\n          values[i] = newValues[i1];\n          index[i] = newIndex[i1] + n0;\n        }\n\n        // Bisect again to recompute lo0 and hi0.\n        bounds = refilter(values), lo0 = bounds[0], hi0 = bounds[1];\n      }\n\n      // When all filters have updated, notify index listeners of the new values.\n      function postAdd(newData, n0, n1) {\n        indexListeners.forEach(function (l) {\n          l(newValues, newIndex, n0, n1);\n        });\n        newValues = newIndex = null;\n      }\n\n      function removeData(reIndex) {\n        for (var i = 0, j = 0, k; i < n; ++i) {\n          if (filters[k = index[i]]) {\n            if (i !== j) values[j] = values[i];\n            index[j] = reIndex[k];\n            ++j;\n          }\n        }\n        values.length = j;\n        while (j < n) index[j++] = 0;\n\n        // Bisect again to recompute lo0 and hi0.\n        var bounds = refilter(values);\n        lo0 = bounds[0], hi0 = bounds[1];\n      }\n\n      // Updates the selected values based on the specified bounds [lo, hi].\n      // This implementation is used by all the public filter methods.\n      function filterIndexBounds(bounds) {\n        var lo1 = bounds[0],\n            hi1 = bounds[1];\n\n        if (refilterFunction) {\n          refilterFunction = null;\n          filterIndexFunction(function (d, i) {\n            return lo1 <= i && i < hi1;\n          });\n          lo0 = lo1;\n          hi0 = hi1;\n          return dimension;\n        }\n\n        var i,\n            j,\n            k,\n            added = [],\n            removed = [];\n\n        // Fast incremental update based on previous lo index.\n        if (lo1 < lo0) {\n          for (i = lo1, j = Math.min(lo0, hi1); i < j; ++i) {\n            filters[k = index[i]] ^= one;\n            added.push(k);\n          }\n        } else if (lo1 > lo0) {\n          for (i = lo0, j = Math.min(lo1, hi0); i < j; ++i) {\n            filters[k = index[i]] ^= one;\n            removed.push(k);\n          }\n        }\n\n        // Fast incremental update based on previous hi index.\n        if (hi1 > hi0) {\n          for (i = Math.max(lo1, hi0), j = hi1; i < j; ++i) {\n            filters[k = index[i]] ^= one;\n            added.push(k);\n          }\n        } else if (hi1 < hi0) {\n          for (i = Math.max(lo0, hi1), j = hi0; i < j; ++i) {\n            filters[k = index[i]] ^= one;\n            removed.push(k);\n          }\n        }\n\n        lo0 = lo1;\n        hi0 = hi1;\n        filterListeners.forEach(function (l) {\n          l(one, added, removed);\n        });\n        return dimension;\n      }\n\n      // Filters this dimension using the specified range, value, or null.\n      // If the range is null, this is equivalent to filterAll.\n      // If the range is an array, this is equivalent to filterRange.\n      // Otherwise, this is equivalent to filterExact.\n      function filter(range) {\n        return range == null ? filterAll() : Array.isArray(range) ? filterRange(range) : typeof range === \"function\" ? filterFunction(range) : filterExact(range);\n      }\n\n      // Filters this dimension to select the exact value.\n      function filterExact(value) {\n        return filterIndexBounds((refilter = crossfilter_filterExact(bisect, value))(values));\n      }\n\n      // Filters this dimension to select the specified range [lo, hi].\n      // The lower bound is inclusive, and the upper bound is exclusive.\n      function filterRange(range) {\n        return filterIndexBounds((refilter = crossfilter_filterRange(bisect, range))(values));\n      }\n\n      // Clears any filters on this dimension.\n      function filterAll() {\n        return filterIndexBounds((refilter = crossfilter_filterAll)(values));\n      }\n\n      // Filters this dimension using an arbitrary function.\n      function filterFunction(f) {\n        refilter = crossfilter_filterAll;\n\n        filterIndexFunction(refilterFunction = f);\n\n        lo0 = 0;\n        hi0 = n;\n\n        return dimension;\n      }\n\n      function filterIndexFunction(f) {\n        var i,\n            k,\n            x,\n            added = [],\n            removed = [];\n\n        for (i = 0; i < n; ++i) {\n          if (!(filters[k = index[i]] & one) ^ !!(x = f(values[i], i))) {\n            if (x) filters[k] &= zero, added.push(k);else filters[k] |= one, removed.push(k);\n          }\n        }\n        filterListeners.forEach(function (l) {\n          l(one, added, removed);\n        });\n      }\n\n      // Returns the top K selected records based on this dimension's order.\n      // Note: observes this dimension's filter, unlike group and groupAll.\n      function top(k) {\n        var array = [],\n            i = hi0,\n            j;\n\n        while (--i >= lo0 && k > 0) {\n          if (!filters[j = index[i]]) {\n            array.push(data[j]);\n            --k;\n          }\n        }\n\n        return array;\n      }\n\n      // Returns the bottom K selected records based on this dimension's order.\n      // Note: observes this dimension's filter, unlike group and groupAll.\n      function bottom(k) {\n        var array = [],\n            i = lo0,\n            j;\n\n        while (i < hi0 && k > 0) {\n          if (!filters[j = index[i]]) {\n            array.push(data[j]);\n            --k;\n          }\n          i++;\n        }\n\n        return array;\n      }\n\n      // Adds a new group to this dimension, using the specified key function.\n      function group(key) {\n        var group = {\n          top: top,\n          all: all,\n          reduce: reduce,\n          reduceCount: reduceCount,\n          reduceSum: reduceSum,\n          order: order,\n          orderNatural: orderNatural,\n          size: size,\n          dispose: dispose,\n          remove: dispose // for backwards-compatibility\n        };\n\n        // Ensure that this group will be removed when the dimension is removed.\n        dimensionGroups.push(group);\n\n        var groups,\n            // array of {key, value}\n        groupIndex,\n            // object id  group id\n        groupWidth = 8,\n            groupCapacity = crossfilter_capacity(groupWidth),\n            k = 0,\n            // cardinality\n        select,\n            heap,\n            reduceAdd,\n            reduceRemove,\n            reduceInitial,\n            update = crossfilter_null,\n            reset = crossfilter_null,\n            resetNeeded = true,\n            groupAll = key === crossfilter_null;\n\n        if (arguments.length < 1) key = crossfilter_identity;\n\n        // The group listens to the crossfilter for when any dimension changes, so\n        // that it can update the associated reduce values. It must also listen to\n        // the parent dimension for when data is added, and compute new keys.\n        filterListeners.push(update);\n        indexListeners.push(add);\n        removeDataListeners.push(removeData);\n\n        // Incorporate any existing data into the grouping.\n        add(values, index, 0, n);\n\n        // Incorporates the specified new values into this group.\n        // This function is responsible for updating groups and groupIndex.\n        function add(newValues, newIndex, n0, n1) {\n          var oldGroups = groups,\n              reIndex = crossfilter_index(k, groupCapacity),\n              add = reduceAdd,\n              initial = reduceInitial,\n              k0 = k,\n              // old cardinality\n          i0 = 0,\n              // index of old group\n          i1 = 0,\n              // index of new record\n          j,\n              // object id\n          g0,\n              // old group\n          x0,\n              // old key\n          x1,\n              // new key\n          g,\n              // group to add\n          x; // key of group to add\n\n          // If a reset is needed, we don't need to update the reduce values.\n          if (resetNeeded) add = initial = crossfilter_null;\n\n          // Reset the new groups (k is a lower bound).\n          // Also, make sure that groupIndex exists and is long enough.\n          groups = new Array(k), k = 0;\n          groupIndex = k0 > 1 ? crossfilter_arrayLengthen(groupIndex, n) : crossfilter_index(n, groupCapacity);\n\n          // Get the first old key (x0 of g0), if it exists.\n          if (k0) x0 = (g0 = oldGroups[0]).key;\n\n          // Find the first new key (x1), skipping NaN keys.\n          while (i1 < n1 && !((x1 = key(newValues[i1])) >= x1)) ++i1;\n\n          // While new keys remain\n          while (i1 < n1) {\n\n            // Determine the lesser of the two current keys; new and old.\n            // If there are no old keys remaining, then always add the new key.\n            if (g0 && x0 <= x1) {\n              g = g0, x = x0;\n\n              // Record the new index of the old group.\n              reIndex[i0] = k;\n\n              // Retrieve the next old key.\n              if (g0 = oldGroups[++i0]) x0 = g0.key;\n            } else {\n              g = { key: x1, value: initial() }, x = x1;\n            }\n\n            // Add the lesser group.\n            groups[k] = g;\n\n            // Add any selected records belonging to the added group, while\n            // advancing the new key and populating the associated group index.\n            while (!(x1 > x)) {\n              groupIndex[j = newIndex[i1] + n0] = k;\n              if (!(filters[j] & zero)) g.value = add(g.value, data[j]);\n              if (++i1 >= n1) break;\n              x1 = key(newValues[i1]);\n            }\n\n            groupIncrement();\n          }\n\n          // Add any remaining old groups that were greater than all new keys.\n          // No incremental reduce is needed; these groups have no new records.\n          // Also record the new index of the old group.\n          while (i0 < k0) {\n            groups[reIndex[i0] = k] = oldGroups[i0++];\n            groupIncrement();\n          }\n\n          // If we added any new groups before any old groups,\n          // update the group index of all the old records.\n          if (k > i0) for (i0 = 0; i0 < n0; ++i0) {\n            groupIndex[i0] = reIndex[groupIndex[i0]];\n          }\n\n          // Modify the update and reset behavior based on the cardinality.\n          // If the cardinality is less than or equal to one, then the groupIndex\n          // is not needed. If the cardinality is zero, then there are no records\n          // and therefore no groups to update or reset. Note that we also must\n          // change the registered listener to point to the new method.\n          j = filterListeners.indexOf(update);\n          if (k > 1) {\n            update = updateMany;\n            reset = resetMany;\n          } else {\n            if (!k && groupAll) {\n              k = 1;\n              groups = [{ key: null, value: initial() }];\n            }\n            if (k === 1) {\n              update = updateOne;\n              reset = resetOne;\n            } else {\n              update = crossfilter_null;\n              reset = crossfilter_null;\n            }\n            groupIndex = null;\n          }\n          filterListeners[j] = update;\n\n          // Count the number of added groups,\n          // and widen the group index as needed.\n          function groupIncrement() {\n            if (++k === groupCapacity) {\n              reIndex = crossfilter_arrayWiden(reIndex, groupWidth <<= 1);\n              groupIndex = crossfilter_arrayWiden(groupIndex, groupWidth);\n              groupCapacity = crossfilter_capacity(groupWidth);\n            }\n          }\n        }\n\n        function removeData() {\n          if (k > 1) {\n            var oldK = k,\n                oldGroups = groups,\n                seenGroups = crossfilter_index(oldK, oldK);\n\n            // Filter out non-matches by copying matching group index entries to\n            // the beginning of the array.\n            for (var i = 0, j = 0; i < n; ++i) {\n              if (filters[i]) {\n                seenGroups[groupIndex[j] = groupIndex[i]] = 1;\n                ++j;\n              }\n            }\n\n            // Reassemble groups including only those groups that were referred\n            // to by matching group index entries.  Note the new group index in\n            // seenGroups.\n            groups = [], k = 0;\n            for (i = 0; i < oldK; ++i) {\n              if (seenGroups[i]) {\n                seenGroups[i] = k++;\n                groups.push(oldGroups[i]);\n              }\n            }\n\n            if (k > 1) {\n              // Reindex the group index using seenGroups to find the new index.\n              for (var i = 0; i < j; ++i) groupIndex[i] = seenGroups[groupIndex[i]];\n            } else {\n              groupIndex = null;\n            }\n            filterListeners[filterListeners.indexOf(update)] = k > 1 ? (reset = resetMany, update = updateMany) : k === 1 ? (reset = resetOne, update = updateOne) : reset = update = crossfilter_null;\n          } else if (k === 1) {\n            if (groupAll) return;\n            for (var i = 0; i < n; ++i) if (filters[i]) return;\n            groups = [], k = 0;\n            filterListeners[filterListeners.indexOf(update)] = update = reset = crossfilter_null;\n          }\n        }\n\n        // Reduces the specified selected or deselected records.\n        // This function is only used when the cardinality is greater than 1.\n        function updateMany(filterOne, added, removed) {\n          if (filterOne === one || resetNeeded) return;\n\n          var i, k, n, g;\n\n          // Add the added values.\n          for (i = 0, n = added.length; i < n; ++i) {\n            if (!(filters[k = added[i]] & zero)) {\n              g = groups[groupIndex[k]];\n              g.value = reduceAdd(g.value, data[k]);\n            }\n          }\n\n          // Remove the removed values.\n          for (i = 0, n = removed.length; i < n; ++i) {\n            if ((filters[k = removed[i]] & zero) === filterOne) {\n              g = groups[groupIndex[k]];\n              g.value = reduceRemove(g.value, data[k]);\n            }\n          }\n        }\n\n        // Reduces the specified selected or deselected records.\n        // This function is only used when the cardinality is 1.\n        function updateOne(filterOne, added, removed) {\n          if (filterOne === one || resetNeeded) return;\n\n          var i,\n              k,\n              n,\n              g = groups[0];\n\n          // Add the added values.\n          for (i = 0, n = added.length; i < n; ++i) {\n            if (!(filters[k = added[i]] & zero)) {\n              g.value = reduceAdd(g.value, data[k]);\n            }\n          }\n\n          // Remove the removed values.\n          for (i = 0, n = removed.length; i < n; ++i) {\n            if ((filters[k = removed[i]] & zero) === filterOne) {\n              g.value = reduceRemove(g.value, data[k]);\n            }\n          }\n        }\n\n        // Recomputes the group reduce values from scratch.\n        // This function is only used when the cardinality is greater than 1.\n        function resetMany() {\n          var i, g;\n\n          // Reset all group values.\n          for (i = 0; i < k; ++i) {\n            groups[i].value = reduceInitial();\n          }\n\n          // Add any selected records.\n          for (i = 0; i < n; ++i) {\n            if (!(filters[i] & zero)) {\n              g = groups[groupIndex[i]];\n              g.value = reduceAdd(g.value, data[i]);\n            }\n          }\n        }\n\n        // Recomputes the group reduce values from scratch.\n        // This function is only used when the cardinality is 1.\n        function resetOne() {\n          var i,\n              g = groups[0];\n\n          // Reset the singleton group values.\n          g.value = reduceInitial();\n\n          // Add any selected records.\n          for (i = 0; i < n; ++i) {\n            if (!(filters[i] & zero)) {\n              g.value = reduceAdd(g.value, data[i]);\n            }\n          }\n        }\n\n        // Returns the array of group values, in the dimension's natural order.\n        function all() {\n          if (resetNeeded) reset(), resetNeeded = false;\n          return groups;\n        }\n\n        // Returns a new array containing the top K group values, in reduce order.\n        function top(k) {\n          var top = select(all(), 0, groups.length, k);\n          return heap.sort(top, 0, top.length);\n        }\n\n        // Sets the reduce behavior for this group to use the specified functions.\n        // This method lazily recomputes the reduce values, waiting until needed.\n        function reduce(add, remove, initial) {\n          reduceAdd = add;\n          reduceRemove = remove;\n          reduceInitial = initial;\n          resetNeeded = true;\n          return group;\n        }\n\n        // A convenience method for reducing by count.\n        function reduceCount() {\n          return reduce(crossfilter_reduceIncrement, crossfilter_reduceDecrement, crossfilter_zero);\n        }\n\n        // A convenience method for reducing by sum(value).\n        function reduceSum(value) {\n          return reduce(crossfilter_reduceAdd(value), crossfilter_reduceSubtract(value), crossfilter_zero);\n        }\n\n        // Sets the reduce order, using the specified accessor.\n        function order(value) {\n          select = heapselect_by(valueOf);\n          heap = heap_by(valueOf);\n          function valueOf(d) {\n            return value(d.value);\n          }\n          return group;\n        }\n\n        // A convenience method for natural ordering by reduce value.\n        function orderNatural() {\n          return order(crossfilter_identity);\n        }\n\n        // Returns the cardinality of this group, irrespective of any filters.\n        function size() {\n          return k;\n        }\n\n        // Removes this group and associated event listeners.\n        function dispose() {\n          var i = filterListeners.indexOf(update);\n          if (i >= 0) filterListeners.splice(i, 1);\n          i = indexListeners.indexOf(add);\n          if (i >= 0) indexListeners.splice(i, 1);\n          i = removeDataListeners.indexOf(removeData);\n          if (i >= 0) removeDataListeners.splice(i, 1);\n          return group;\n        }\n\n        return reduceCount().orderNatural();\n      }\n\n      // A convenience function for generating a singleton group.\n      function groupAll() {\n        var g = group(crossfilter_null),\n            all = g.all;\n        delete g.all;\n        delete g.top;\n        delete g.order;\n        delete g.orderNatural;\n        delete g.size;\n        g.value = function () {\n          return all()[0].value;\n        };\n        return g;\n      }\n\n      // Removes this dimension and associated groups and event listeners.\n      function dispose() {\n        dimensionGroups.forEach(function (group) {\n          group.dispose();\n        });\n        var i = dataListeners.indexOf(preAdd);\n        if (i >= 0) dataListeners.splice(i, 1);\n        i = dataListeners.indexOf(postAdd);\n        if (i >= 0) dataListeners.splice(i, 1);\n        i = removeDataListeners.indexOf(removeData);\n        if (i >= 0) removeDataListeners.splice(i, 1);\n        m &= zero;\n        return filterAll();\n      }\n\n      return dimension;\n    }\n\n    // A convenience method for groupAll on a dummy dimension.\n    // This implementation can be optimized since it always has cardinality 1.\n    function groupAll() {\n      var group = {\n        reduce: reduce,\n        reduceCount: reduceCount,\n        reduceSum: reduceSum,\n        value: value,\n        dispose: dispose,\n        remove: dispose // for backwards-compatibility\n      };\n\n      var reduceValue,\n          reduceAdd,\n          reduceRemove,\n          reduceInitial,\n          resetNeeded = true;\n\n      // The group listens to the crossfilter for when any dimension changes, so\n      // that it can update the reduce value. It must also listen to the parent\n      // dimension for when data is added.\n      filterListeners.push(update);\n      dataListeners.push(add);\n\n      // For consistency; actually a no-op since resetNeeded is true.\n      add(data, 0, n);\n\n      // Incorporates the specified new values into this group.\n      function add(newData, n0) {\n        var i;\n\n        if (resetNeeded) return;\n\n        // Add the added values.\n        for (i = n0; i < n; ++i) {\n          if (!filters[i]) {\n            reduceValue = reduceAdd(reduceValue, data[i]);\n          }\n        }\n      }\n\n      // Reduces the specified selected or deselected records.\n      function update(filterOne, added, removed) {\n        var i, k, n;\n\n        if (resetNeeded) return;\n\n        // Add the added values.\n        for (i = 0, n = added.length; i < n; ++i) {\n          if (!filters[k = added[i]]) {\n            reduceValue = reduceAdd(reduceValue, data[k]);\n          }\n        }\n\n        // Remove the removed values.\n        for (i = 0, n = removed.length; i < n; ++i) {\n          if (filters[k = removed[i]] === filterOne) {\n            reduceValue = reduceRemove(reduceValue, data[k]);\n          }\n        }\n      }\n\n      // Recomputes the group reduce value from scratch.\n      function reset() {\n        var i;\n\n        reduceValue = reduceInitial();\n\n        for (i = 0; i < n; ++i) {\n          if (!filters[i]) {\n            reduceValue = reduceAdd(reduceValue, data[i]);\n          }\n        }\n      }\n\n      // Sets the reduce behavior for this group to use the specified functions.\n      // This method lazily recomputes the reduce value, waiting until needed.\n      function reduce(add, remove, initial) {\n        reduceAdd = add;\n        reduceRemove = remove;\n        reduceInitial = initial;\n        resetNeeded = true;\n        return group;\n      }\n\n      // A convenience method for reducing by count.\n      function reduceCount() {\n        return reduce(crossfilter_reduceIncrement, crossfilter_reduceDecrement, crossfilter_zero);\n      }\n\n      // A convenience method for reducing by sum(value).\n      function reduceSum(value) {\n        return reduce(crossfilter_reduceAdd(value), crossfilter_reduceSubtract(value), crossfilter_zero);\n      }\n\n      // Returns the computed reduce value.\n      function value() {\n        if (resetNeeded) reset(), resetNeeded = false;\n        return reduceValue;\n      }\n\n      // Removes this group and associated event listeners.\n      function dispose() {\n        var i = filterListeners.indexOf(update);\n        if (i >= 0) filterListeners.splice(i);\n        i = dataListeners.indexOf(add);\n        if (i >= 0) dataListeners.splice(i);\n        return group;\n      }\n\n      return reduceCount();\n    }\n\n    // Returns the number of records in this crossfilter, irrespective of any filters.\n    function size() {\n      return n;\n    }\n\n    return arguments.length ? add(arguments[0]) : crossfilter;\n  }\n\n  // Returns an array of size n, big enough to store ids up to m.\n  function crossfilter_index(n, m) {\n    return (m < 0x101 ? crossfilter_array8 : m < 0x10001 ? crossfilter_array16 : crossfilter_array32)(n);\n  }\n\n  // Constructs a new array of size n, with sequential values from 0 to n - 1.\n  function crossfilter_range(n) {\n    var range = crossfilter_index(n, n);\n    for (var i = -1; ++i < n;) range[i] = i;\n    return range;\n  }\n\n  function crossfilter_capacity(w) {\n    return w === 8 ? 0x100 : w === 16 ? 0x10000 : 0x100000000;\n  }\n})(typeof exports !== 'undefined' && exports || this);//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9ub2RlX21vZHVsZXMvY3Jvc3NmaWx0ZXIvY3Jvc3NmaWx0ZXIuanM/MGJhNiJdLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oZXhwb3J0cyl7XG5jcm9zc2ZpbHRlci52ZXJzaW9uID0gXCIxLjMuMTJcIjtcbmZ1bmN0aW9uIGNyb3NzZmlsdGVyX2lkZW50aXR5KGQpIHtcbiAgcmV0dXJuIGQ7XG59XG5jcm9zc2ZpbHRlci5wZXJtdXRlID0gcGVybXV0ZTtcblxuZnVuY3Rpb24gcGVybXV0ZShhcnJheSwgaW5kZXgpIHtcbiAgZm9yICh2YXIgaSA9IDAsIG4gPSBpbmRleC5sZW5ndGgsIGNvcHkgPSBuZXcgQXJyYXkobik7IGkgPCBuOyArK2kpIHtcbiAgICBjb3B5W2ldID0gYXJyYXlbaW5kZXhbaV1dO1xuICB9XG4gIHJldHVybiBjb3B5O1xufVxudmFyIGJpc2VjdCA9IGNyb3NzZmlsdGVyLmJpc2VjdCA9IGJpc2VjdF9ieShjcm9zc2ZpbHRlcl9pZGVudGl0eSk7XG5cbmJpc2VjdC5ieSA9IGJpc2VjdF9ieTtcblxuZnVuY3Rpb24gYmlzZWN0X2J5KGYpIHtcblxuICAvLyBMb2NhdGUgdGhlIGluc2VydGlvbiBwb2ludCBmb3IgeCBpbiBhIHRvIG1haW50YWluIHNvcnRlZCBvcmRlci4gVGhlXG4gIC8vIGFyZ3VtZW50cyBsbyBhbmQgaGkgbWF5IGJlIHVzZWQgdG8gc3BlY2lmeSBhIHN1YnNldCBvZiB0aGUgYXJyYXkgd2hpY2hcbiAgLy8gc2hvdWxkIGJlIGNvbnNpZGVyZWQ7IGJ5IGRlZmF1bHQgdGhlIGVudGlyZSBhcnJheSBpcyB1c2VkLiBJZiB4IGlzIGFscmVhZHlcbiAgLy8gcHJlc2VudCBpbiBhLCB0aGUgaW5zZXJ0aW9uIHBvaW50IHdpbGwgYmUgYmVmb3JlICh0byB0aGUgbGVmdCBvZikgYW55XG4gIC8vIGV4aXN0aW5nIGVudHJpZXMuIFRoZSByZXR1cm4gdmFsdWUgaXMgc3VpdGFibGUgZm9yIHVzZSBhcyB0aGUgZmlyc3RcbiAgLy8gYXJndW1lbnQgdG8gYGFycmF5LnNwbGljZWAgYXNzdW1pbmcgdGhhdCBhIGlzIGFscmVhZHkgc29ydGVkLlxuICAvL1xuICAvLyBUaGUgcmV0dXJuZWQgaW5zZXJ0aW9uIHBvaW50IGkgcGFydGl0aW9ucyB0aGUgYXJyYXkgYSBpbnRvIHR3byBoYWx2ZXMgc29cbiAgLy8gdGhhdCBhbGwgdiA8IHggZm9yIHYgaW4gYVtsbzppXSBmb3IgdGhlIGxlZnQgc2lkZSBhbmQgYWxsIHYgPj0geCBmb3IgdiBpblxuICAvLyBhW2k6aGldIGZvciB0aGUgcmlnaHQgc2lkZS5cbiAgZnVuY3Rpb24gYmlzZWN0TGVmdChhLCB4LCBsbywgaGkpIHtcbiAgICB3aGlsZSAobG8gPCBoaSkge1xuICAgICAgdmFyIG1pZCA9IGxvICsgaGkgPj4+IDE7XG4gICAgICBpZiAoZihhW21pZF0pIDwgeCkgbG8gPSBtaWQgKyAxO1xuICAgICAgZWxzZSBoaSA9IG1pZDtcbiAgICB9XG4gICAgcmV0dXJuIGxvO1xuICB9XG5cbiAgLy8gU2ltaWxhciB0byBiaXNlY3RMZWZ0LCBidXQgcmV0dXJucyBhbiBpbnNlcnRpb24gcG9pbnQgd2hpY2ggY29tZXMgYWZ0ZXIgKHRvXG4gIC8vIHRoZSByaWdodCBvZikgYW55IGV4aXN0aW5nIGVudHJpZXMgb2YgeCBpbiBhLlxuICAvL1xuICAvLyBUaGUgcmV0dXJuZWQgaW5zZXJ0aW9uIHBvaW50IGkgcGFydGl0aW9ucyB0aGUgYXJyYXkgaW50byB0d28gaGFsdmVzIHNvIHRoYXRcbiAgLy8gYWxsIHYgPD0geCBmb3IgdiBpbiBhW2xvOmldIGZvciB0aGUgbGVmdCBzaWRlIGFuZCBhbGwgdiA+IHggZm9yIHYgaW5cbiAgLy8gYVtpOmhpXSBmb3IgdGhlIHJpZ2h0IHNpZGUuXG4gIGZ1bmN0aW9uIGJpc2VjdFJpZ2h0KGEsIHgsIGxvLCBoaSkge1xuICAgIHdoaWxlIChsbyA8IGhpKSB7XG4gICAgICB2YXIgbWlkID0gbG8gKyBoaSA+Pj4gMTtcbiAgICAgIGlmICh4IDwgZihhW21pZF0pKSBoaSA9IG1pZDtcbiAgICAgIGVsc2UgbG8gPSBtaWQgKyAxO1xuICAgIH1cbiAgICByZXR1cm4gbG87XG4gIH1cblxuICBiaXNlY3RSaWdodC5yaWdodCA9IGJpc2VjdFJpZ2h0O1xuICBiaXNlY3RSaWdodC5sZWZ0ID0gYmlzZWN0TGVmdDtcbiAgcmV0dXJuIGJpc2VjdFJpZ2h0O1xufVxudmFyIGhlYXAgPSBjcm9zc2ZpbHRlci5oZWFwID0gaGVhcF9ieShjcm9zc2ZpbHRlcl9pZGVudGl0eSk7XG5cbmhlYXAuYnkgPSBoZWFwX2J5O1xuXG5mdW5jdGlvbiBoZWFwX2J5KGYpIHtcblxuICAvLyBCdWlsZHMgYSBiaW5hcnkgaGVhcCB3aXRoaW4gdGhlIHNwZWNpZmllZCBhcnJheSBhW2xvOmhpXS4gVGhlIGhlYXAgaGFzIHRoZVxuICAvLyBwcm9wZXJ0eSBzdWNoIHRoYXQgdGhlIHBhcmVudCBhW2xvK2ldIGlzIGFsd2F5cyBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gaXRzXG4gIC8vIHR3byBjaGlsZHJlbjogYVtsbysyKmkrMV0gYW5kIGFbbG8rMippKzJdLlxuICBmdW5jdGlvbiBoZWFwKGEsIGxvLCBoaSkge1xuICAgIHZhciBuID0gaGkgLSBsbyxcbiAgICAgICAgaSA9IChuID4+PiAxKSArIDE7XG4gICAgd2hpbGUgKC0taSA+IDApIHNpZnQoYSwgaSwgbiwgbG8pO1xuICAgIHJldHVybiBhO1xuICB9XG5cbiAgLy8gU29ydHMgdGhlIHNwZWNpZmllZCBhcnJheSBhW2xvOmhpXSBpbiBkZXNjZW5kaW5nIG9yZGVyLCBhc3N1bWluZyBpdCBpc1xuICAvLyBhbHJlYWR5IGEgaGVhcC5cbiAgZnVuY3Rpb24gc29ydChhLCBsbywgaGkpIHtcbiAgICB2YXIgbiA9IGhpIC0gbG8sXG4gICAgICAgIHQ7XG4gICAgd2hpbGUgKC0tbiA+IDApIHQgPSBhW2xvXSwgYVtsb10gPSBhW2xvICsgbl0sIGFbbG8gKyBuXSA9IHQsIHNpZnQoYSwgMSwgbiwgbG8pO1xuICAgIHJldHVybiBhO1xuICB9XG5cbiAgLy8gU2lmdHMgdGhlIGVsZW1lbnQgYVtsbytpLTFdIGRvd24gdGhlIGhlYXAsIHdoZXJlIHRoZSBoZWFwIGlzIHRoZSBjb250aWd1b3VzXG4gIC8vIHNsaWNlIG9mIGFycmF5IGFbbG86bG8rbl0uIFRoaXMgbWV0aG9kIGNhbiBhbHNvIGJlIHVzZWQgdG8gdXBkYXRlIHRoZSBoZWFwXG4gIC8vIGluY3JlbWVudGFsbHksIHdpdGhvdXQgaW5jdXJyaW5nIHRoZSBmdWxsIGNvc3Qgb2YgcmVjb25zdHJ1Y3RpbmcgdGhlIGhlYXAuXG4gIGZ1bmN0aW9uIHNpZnQoYSwgaSwgbiwgbG8pIHtcbiAgICB2YXIgZCA9IGFbLS1sbyArIGldLFxuICAgICAgICB4ID0gZihkKSxcbiAgICAgICAgY2hpbGQ7XG4gICAgd2hpbGUgKChjaGlsZCA9IGkgPDwgMSkgPD0gbikge1xuICAgICAgaWYgKGNoaWxkIDwgbiAmJiBmKGFbbG8gKyBjaGlsZF0pID4gZihhW2xvICsgY2hpbGQgKyAxXSkpIGNoaWxkKys7XG4gICAgICBpZiAoeCA8PSBmKGFbbG8gKyBjaGlsZF0pKSBicmVhaztcbiAgICAgIGFbbG8gKyBpXSA9IGFbbG8gKyBjaGlsZF07XG4gICAgICBpID0gY2hpbGQ7XG4gICAgfVxuICAgIGFbbG8gKyBpXSA9IGQ7XG4gIH1cblxuICBoZWFwLnNvcnQgPSBzb3J0O1xuICByZXR1cm4gaGVhcDtcbn1cbnZhciBoZWFwc2VsZWN0ID0gY3Jvc3NmaWx0ZXIuaGVhcHNlbGVjdCA9IGhlYXBzZWxlY3RfYnkoY3Jvc3NmaWx0ZXJfaWRlbnRpdHkpO1xuXG5oZWFwc2VsZWN0LmJ5ID0gaGVhcHNlbGVjdF9ieTtcblxuZnVuY3Rpb24gaGVhcHNlbGVjdF9ieShmKSB7XG4gIHZhciBoZWFwID0gaGVhcF9ieShmKTtcblxuICAvLyBSZXR1cm5zIGEgbmV3IGFycmF5IGNvbnRhaW5pbmcgdGhlIHRvcCBrIGVsZW1lbnRzIGluIHRoZSBhcnJheSBhW2xvOmhpXS5cbiAgLy8gVGhlIHJldHVybmVkIGFycmF5IGlzIG5vdCBzb3J0ZWQsIGJ1dCBtYWludGFpbnMgdGhlIGhlYXAgcHJvcGVydHkuIElmIGsgaXNcbiAgLy8gZ3JlYXRlciB0aGFuIGhpIC0gbG8sIHRoZW4gZmV3ZXIgdGhhbiBrIGVsZW1lbnRzIHdpbGwgYmUgcmV0dXJuZWQuIFRoZVxuICAvLyBvcmRlciBvZiBlbGVtZW50cyBpbiBhIGlzIHVuY2hhbmdlZCBieSB0aGlzIG9wZXJhdGlvbi5cbiAgZnVuY3Rpb24gaGVhcHNlbGVjdChhLCBsbywgaGksIGspIHtcbiAgICB2YXIgcXVldWUgPSBuZXcgQXJyYXkoayA9IE1hdGgubWluKGhpIC0gbG8sIGspKSxcbiAgICAgICAgbWluLFxuICAgICAgICBpLFxuICAgICAgICB4LFxuICAgICAgICBkO1xuXG4gICAgZm9yIChpID0gMDsgaSA8IGs7ICsraSkgcXVldWVbaV0gPSBhW2xvKytdO1xuICAgIGhlYXAocXVldWUsIDAsIGspO1xuXG4gICAgaWYgKGxvIDwgaGkpIHtcbiAgICAgIG1pbiA9IGYocXVldWVbMF0pO1xuICAgICAgZG8ge1xuICAgICAgICBpZiAoeCA9IGYoZCA9IGFbbG9dKSA+IG1pbikge1xuICAgICAgICAgIHF1ZXVlWzBdID0gZDtcbiAgICAgICAgICBtaW4gPSBmKGhlYXAocXVldWUsIDAsIGspWzBdKTtcbiAgICAgICAgfVxuICAgICAgfSB3aGlsZSAoKytsbyA8IGhpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcXVldWU7XG4gIH1cblxuICByZXR1cm4gaGVhcHNlbGVjdDtcbn1cbnZhciBpbnNlcnRpb25zb3J0ID0gY3Jvc3NmaWx0ZXIuaW5zZXJ0aW9uc29ydCA9IGluc2VydGlvbnNvcnRfYnkoY3Jvc3NmaWx0ZXJfaWRlbnRpdHkpO1xuXG5pbnNlcnRpb25zb3J0LmJ5ID0gaW5zZXJ0aW9uc29ydF9ieTtcblxuZnVuY3Rpb24gaW5zZXJ0aW9uc29ydF9ieShmKSB7XG5cbiAgZnVuY3Rpb24gaW5zZXJ0aW9uc29ydChhLCBsbywgaGkpIHtcbiAgICBmb3IgKHZhciBpID0gbG8gKyAxOyBpIDwgaGk7ICsraSkge1xuICAgICAgZm9yICh2YXIgaiA9IGksIHQgPSBhW2ldLCB4ID0gZih0KTsgaiA+IGxvICYmIGYoYVtqIC0gMV0pID4geDsgLS1qKSB7XG4gICAgICAgIGFbal0gPSBhW2ogLSAxXTtcbiAgICAgIH1cbiAgICAgIGFbal0gPSB0O1xuICAgIH1cbiAgICByZXR1cm4gYTtcbiAgfVxuXG4gIHJldHVybiBpbnNlcnRpb25zb3J0O1xufVxuLy8gQWxnb3JpdGhtIGRlc2lnbmVkIGJ5IFZsYWRpbWlyIFlhcm9zbGF2c2tpeS5cbi8vIEltcGxlbWVudGF0aW9uIGJhc2VkIG9uIHRoZSBEYXJ0IHByb2plY3Q7IHNlZSBsaWIvZGFydC9MSUNFTlNFIGZvciBkZXRhaWxzLlxuXG52YXIgcXVpY2tzb3J0ID0gY3Jvc3NmaWx0ZXIucXVpY2tzb3J0ID0gcXVpY2tzb3J0X2J5KGNyb3NzZmlsdGVyX2lkZW50aXR5KTtcblxucXVpY2tzb3J0LmJ5ID0gcXVpY2tzb3J0X2J5O1xuXG5mdW5jdGlvbiBxdWlja3NvcnRfYnkoZikge1xuICB2YXIgaW5zZXJ0aW9uc29ydCA9IGluc2VydGlvbnNvcnRfYnkoZik7XG5cbiAgZnVuY3Rpb24gc29ydChhLCBsbywgaGkpIHtcbiAgICByZXR1cm4gKGhpIC0gbG8gPCBxdWlja3NvcnRfc2l6ZVRocmVzaG9sZFxuICAgICAgICA/IGluc2VydGlvbnNvcnRcbiAgICAgICAgOiBxdWlja3NvcnQpKGEsIGxvLCBoaSk7XG4gIH1cblxuICBmdW5jdGlvbiBxdWlja3NvcnQoYSwgbG8sIGhpKSB7XG4gICAgLy8gQ29tcHV0ZSB0aGUgdHdvIHBpdm90cyBieSBsb29raW5nIGF0IDUgZWxlbWVudHMuXG4gICAgdmFyIHNpeHRoID0gKGhpIC0gbG8pIC8gNiB8IDAsXG4gICAgICAgIGkxID0gbG8gKyBzaXh0aCxcbiAgICAgICAgaTUgPSBoaSAtIDEgLSBzaXh0aCxcbiAgICAgICAgaTMgPSBsbyArIGhpIC0gMSA+PiAxLCAgLy8gVGhlIG1pZHBvaW50LlxuICAgICAgICBpMiA9IGkzIC0gc2l4dGgsXG4gICAgICAgIGk0ID0gaTMgKyBzaXh0aDtcblxuICAgIHZhciBlMSA9IGFbaTFdLCB4MSA9IGYoZTEpLFxuICAgICAgICBlMiA9IGFbaTJdLCB4MiA9IGYoZTIpLFxuICAgICAgICBlMyA9IGFbaTNdLCB4MyA9IGYoZTMpLFxuICAgICAgICBlNCA9IGFbaTRdLCB4NCA9IGYoZTQpLFxuICAgICAgICBlNSA9IGFbaTVdLCB4NSA9IGYoZTUpO1xuXG4gICAgdmFyIHQ7XG5cbiAgICAvLyBTb3J0IHRoZSBzZWxlY3RlZCA1IGVsZW1lbnRzIHVzaW5nIGEgc29ydGluZyBuZXR3b3JrLlxuICAgIGlmICh4MSA+IHgyKSB0ID0gZTEsIGUxID0gZTIsIGUyID0gdCwgdCA9IHgxLCB4MSA9IHgyLCB4MiA9IHQ7XG4gICAgaWYgKHg0ID4geDUpIHQgPSBlNCwgZTQgPSBlNSwgZTUgPSB0LCB0ID0geDQsIHg0ID0geDUsIHg1ID0gdDtcbiAgICBpZiAoeDEgPiB4MykgdCA9IGUxLCBlMSA9IGUzLCBlMyA9IHQsIHQgPSB4MSwgeDEgPSB4MywgeDMgPSB0O1xuICAgIGlmICh4MiA+IHgzKSB0ID0gZTIsIGUyID0gZTMsIGUzID0gdCwgdCA9IHgyLCB4MiA9IHgzLCB4MyA9IHQ7XG4gICAgaWYgKHgxID4geDQpIHQgPSBlMSwgZTEgPSBlNCwgZTQgPSB0LCB0ID0geDEsIHgxID0geDQsIHg0ID0gdDtcbiAgICBpZiAoeDMgPiB4NCkgdCA9IGUzLCBlMyA9IGU0LCBlNCA9IHQsIHQgPSB4MywgeDMgPSB4NCwgeDQgPSB0O1xuICAgIGlmICh4MiA+IHg1KSB0ID0gZTIsIGUyID0gZTUsIGU1ID0gdCwgdCA9IHgyLCB4MiA9IHg1LCB4NSA9IHQ7XG4gICAgaWYgKHgyID4geDMpIHQgPSBlMiwgZTIgPSBlMywgZTMgPSB0LCB0ID0geDIsIHgyID0geDMsIHgzID0gdDtcbiAgICBpZiAoeDQgPiB4NSkgdCA9IGU0LCBlNCA9IGU1LCBlNSA9IHQsIHQgPSB4NCwgeDQgPSB4NSwgeDUgPSB0O1xuXG4gICAgdmFyIHBpdm90MSA9IGUyLCBwaXZvdFZhbHVlMSA9IHgyLFxuICAgICAgICBwaXZvdDIgPSBlNCwgcGl2b3RWYWx1ZTIgPSB4NDtcblxuICAgIC8vIGUyIGFuZCBlNCBoYXZlIGJlZW4gc2F2ZWQgaW4gdGhlIHBpdm90IHZhcmlhYmxlcy4gVGhleSB3aWxsIGJlIHdyaXR0ZW5cbiAgICAvLyBiYWNrLCBvbmNlIHRoZSBwYXJ0aXRpb25pbmcgaXMgZmluaXNoZWQuXG4gICAgYVtpMV0gPSBlMTtcbiAgICBhW2kyXSA9IGFbbG9dO1xuICAgIGFbaTNdID0gZTM7XG4gICAgYVtpNF0gPSBhW2hpIC0gMV07XG4gICAgYVtpNV0gPSBlNTtcblxuICAgIHZhciBsZXNzID0gbG8gKyAxLCAgIC8vIEZpcnN0IGVsZW1lbnQgaW4gdGhlIG1pZGRsZSBwYXJ0aXRpb24uXG4gICAgICAgIGdyZWF0ID0gaGkgLSAyOyAgLy8gTGFzdCBlbGVtZW50IGluIHRoZSBtaWRkbGUgcGFydGl0aW9uLlxuXG4gICAgLy8gTm90ZSB0aGF0IGZvciB2YWx1ZSBjb21wYXJpc29uLCA8LCA8PSwgPj0gYW5kID4gY29lcmNlIHRvIGEgcHJpbWl0aXZlIHZpYVxuICAgIC8vIE9iamVjdC5wcm90b3R5cGUudmFsdWVPZjsgPT0gYW5kID09PSBkbyBub3QsIHNvIGluIG9yZGVyIHRvIGJlIGNvbnNpc3RlbnRcbiAgICAvLyB3aXRoIG5hdHVyYWwgb3JkZXIgKHN1Y2ggYXMgZm9yIERhdGUgb2JqZWN0cyksIHdlIG11c3QgZG8gdHdvIGNvbXBhcmVzLlxuICAgIHZhciBwaXZvdHNFcXVhbCA9IHBpdm90VmFsdWUxIDw9IHBpdm90VmFsdWUyICYmIHBpdm90VmFsdWUxID49IHBpdm90VmFsdWUyO1xuICAgIGlmIChwaXZvdHNFcXVhbCkge1xuXG4gICAgICAvLyBEZWdlbmVyYXRlZCBjYXNlIHdoZXJlIHRoZSBwYXJ0aXRpb25pbmcgYmVjb21lcyBhIGR1dGNoIG5hdGlvbmFsIGZsYWdcbiAgICAgIC8vIHByb2JsZW0uXG4gICAgICAvL1xuICAgICAgLy8gWyB8ICA8IHBpdm90ICB8ID09IHBpdm90IHwgdW5wYXJ0aXRpb25lZCB8ID4gcGl2b3QgIHwgXVxuICAgICAgLy8gIF4gICAgICAgICAgICAgXiAgICAgICAgICBeICAgICAgICAgICAgIF4gICAgICAgICAgICBeXG4gICAgICAvLyBsZWZ0ICAgICAgICAgbGVzcyAgICAgICAgIGsgICAgICAgICAgIGdyZWF0ICAgICAgICAgcmlnaHRcbiAgICAgIC8vXG4gICAgICAvLyBhW2xlZnRdIGFuZCBhW3JpZ2h0XSBhcmUgdW5kZWZpbmVkIGFuZCBhcmUgZmlsbGVkIGFmdGVyIHRoZVxuICAgICAgLy8gcGFydGl0aW9uaW5nLlxuICAgICAgLy9cbiAgICAgIC8vIEludmFyaWFudHM6XG4gICAgICAvLyAgIDEpIGZvciB4IGluIF1sZWZ0LCBsZXNzWyA6IHggPCBwaXZvdC5cbiAgICAgIC8vICAgMikgZm9yIHggaW4gW2xlc3MsIGtbIDogeCA9PSBwaXZvdC5cbiAgICAgIC8vICAgMykgZm9yIHggaW4gXWdyZWF0LCByaWdodFsgOiB4ID4gcGl2b3QuXG4gICAgICBmb3IgKHZhciBrID0gbGVzczsgayA8PSBncmVhdDsgKytrKSB7XG4gICAgICAgIHZhciBlayA9IGFba10sIHhrID0gZihlayk7XG4gICAgICAgIGlmICh4ayA8IHBpdm90VmFsdWUxKSB7XG4gICAgICAgICAgaWYgKGsgIT09IGxlc3MpIHtcbiAgICAgICAgICAgIGFba10gPSBhW2xlc3NdO1xuICAgICAgICAgICAgYVtsZXNzXSA9IGVrO1xuICAgICAgICAgIH1cbiAgICAgICAgICArK2xlc3M7XG4gICAgICAgIH0gZWxzZSBpZiAoeGsgPiBwaXZvdFZhbHVlMSkge1xuXG4gICAgICAgICAgLy8gRmluZCB0aGUgZmlyc3QgZWxlbWVudCA8PSBwaXZvdCBpbiB0aGUgcmFuZ2UgW2sgLSAxLCBncmVhdF0gYW5kXG4gICAgICAgICAgLy8gcHV0IFs6ZWs6XSB0aGVyZS4gV2Uga25vdyB0aGF0IHN1Y2ggYW4gZWxlbWVudCBtdXN0IGV4aXN0OlxuICAgICAgICAgIC8vIFdoZW4gayA9PSBsZXNzLCB0aGVuIGVsMyAod2hpY2ggaXMgZXF1YWwgdG8gcGl2b3QpIGxpZXMgaW4gdGhlXG4gICAgICAgICAgLy8gaW50ZXJ2YWwuIE90aGVyd2lzZSBhW2sgLSAxXSA9PSBwaXZvdCBhbmQgdGhlIHNlYXJjaCBzdG9wcyBhdCBrLTEuXG4gICAgICAgICAgLy8gTm90ZSB0aGF0IGluIHRoZSBsYXR0ZXIgY2FzZSBpbnZhcmlhbnQgMiB3aWxsIGJlIHZpb2xhdGVkIGZvciBhXG4gICAgICAgICAgLy8gc2hvcnQgYW1vdW50IG9mIHRpbWUuIFRoZSBpbnZhcmlhbnQgd2lsbCBiZSByZXN0b3JlZCB3aGVuIHRoZVxuICAgICAgICAgIC8vIHBpdm90cyBhcmUgcHV0IGludG8gdGhlaXIgZmluYWwgcG9zaXRpb25zLlxuICAgICAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgICAgICB2YXIgZ3JlYXRWYWx1ZSA9IGYoYVtncmVhdF0pO1xuICAgICAgICAgICAgaWYgKGdyZWF0VmFsdWUgPiBwaXZvdFZhbHVlMSkge1xuICAgICAgICAgICAgICBncmVhdC0tO1xuICAgICAgICAgICAgICAvLyBUaGlzIGlzIHRoZSBvbmx5IGxvY2F0aW9uIGluIHRoZSB3aGlsZS1sb29wIHdoZXJlIGEgbmV3XG4gICAgICAgICAgICAgIC8vIGl0ZXJhdGlvbiBpcyBzdGFydGVkLlxuICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZ3JlYXRWYWx1ZSA8IHBpdm90VmFsdWUxKSB7XG4gICAgICAgICAgICAgIC8vIFRyaXBsZSBleGNoYW5nZS5cbiAgICAgICAgICAgICAgYVtrXSA9IGFbbGVzc107XG4gICAgICAgICAgICAgIGFbbGVzcysrXSA9IGFbZ3JlYXRdO1xuICAgICAgICAgICAgICBhW2dyZWF0LS1dID0gZWs7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgYVtrXSA9IGFbZ3JlYXRdO1xuICAgICAgICAgICAgICBhW2dyZWF0LS1dID0gZWs7XG4gICAgICAgICAgICAgIC8vIE5vdGU6IGlmIGdyZWF0IDwgayB0aGVuIHdlIHdpbGwgZXhpdCB0aGUgb3V0ZXIgbG9vcCBhbmQgZml4XG4gICAgICAgICAgICAgIC8vIGludmFyaWFudCAyICh3aGljaCB3ZSBqdXN0IHZpb2xhdGVkKS5cbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcblxuICAgICAgLy8gV2UgcGFydGl0aW9uIHRoZSBsaXN0IGludG8gdGhyZWUgcGFydHM6XG4gICAgICAvLyAgMS4gPCBwaXZvdDFcbiAgICAgIC8vICAyLiA+PSBwaXZvdDEgJiYgPD0gcGl2b3QyXG4gICAgICAvLyAgMy4gPiBwaXZvdDJcbiAgICAgIC8vXG4gICAgICAvLyBEdXJpbmcgdGhlIGxvb3Agd2UgaGF2ZTpcbiAgICAgIC8vIFsgfCA8IHBpdm90MSB8ID49IHBpdm90MSAmJiA8PSBwaXZvdDIgfCB1bnBhcnRpdGlvbmVkICB8ID4gcGl2b3QyICB8IF1cbiAgICAgIC8vICBeICAgICAgICAgICAgXiAgICAgICAgICAgICAgICAgICAgICAgIF4gICAgICAgICAgICAgIF4gICAgICAgICAgICAgXlxuICAgICAgLy8gbGVmdCAgICAgICAgIGxlc3MgICAgICAgICAgICAgICAgICAgICBrICAgICAgICAgICAgICBncmVhdCAgICAgICAgcmlnaHRcbiAgICAgIC8vXG4gICAgICAvLyBhW2xlZnRdIGFuZCBhW3JpZ2h0XSBhcmUgdW5kZWZpbmVkIGFuZCBhcmUgZmlsbGVkIGFmdGVyIHRoZVxuICAgICAgLy8gcGFydGl0aW9uaW5nLlxuICAgICAgLy9cbiAgICAgIC8vIEludmFyaWFudHM6XG4gICAgICAvLyAgIDEuIGZvciB4IGluIF1sZWZ0LCBsZXNzWyA6IHggPCBwaXZvdDFcbiAgICAgIC8vICAgMi4gZm9yIHggaW4gW2xlc3MsIGtbIDogcGl2b3QxIDw9IHggJiYgeCA8PSBwaXZvdDJcbiAgICAgIC8vICAgMy4gZm9yIHggaW4gXWdyZWF0LCByaWdodFsgOiB4ID4gcGl2b3QyXG4gICAgICBmb3IgKHZhciBrID0gbGVzczsgayA8PSBncmVhdDsgaysrKSB7XG4gICAgICAgIHZhciBlayA9IGFba10sIHhrID0gZihlayk7XG4gICAgICAgIGlmICh4ayA8IHBpdm90VmFsdWUxKSB7XG4gICAgICAgICAgaWYgKGsgIT09IGxlc3MpIHtcbiAgICAgICAgICAgIGFba10gPSBhW2xlc3NdO1xuICAgICAgICAgICAgYVtsZXNzXSA9IGVrO1xuICAgICAgICAgIH1cbiAgICAgICAgICArK2xlc3M7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKHhrID4gcGl2b3RWYWx1ZTIpIHtcbiAgICAgICAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgICAgICAgIHZhciBncmVhdFZhbHVlID0gZihhW2dyZWF0XSk7XG4gICAgICAgICAgICAgIGlmIChncmVhdFZhbHVlID4gcGl2b3RWYWx1ZTIpIHtcbiAgICAgICAgICAgICAgICBncmVhdC0tO1xuICAgICAgICAgICAgICAgIGlmIChncmVhdCA8IGspIGJyZWFrO1xuICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgdGhlIG9ubHkgbG9jYXRpb24gaW5zaWRlIHRoZSBsb29wIHdoZXJlIGEgbmV3XG4gICAgICAgICAgICAgICAgLy8gaXRlcmF0aW9uIGlzIHN0YXJ0ZWQuXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gYVtncmVhdF0gPD0gcGl2b3QyLlxuICAgICAgICAgICAgICAgIGlmIChncmVhdFZhbHVlIDwgcGl2b3RWYWx1ZTEpIHtcbiAgICAgICAgICAgICAgICAgIC8vIFRyaXBsZSBleGNoYW5nZS5cbiAgICAgICAgICAgICAgICAgIGFba10gPSBhW2xlc3NdO1xuICAgICAgICAgICAgICAgICAgYVtsZXNzKytdID0gYVtncmVhdF07XG4gICAgICAgICAgICAgICAgICBhW2dyZWF0LS1dID0gZWs7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIC8vIGFbZ3JlYXRdID49IHBpdm90MS5cbiAgICAgICAgICAgICAgICAgIGFba10gPSBhW2dyZWF0XTtcbiAgICAgICAgICAgICAgICAgIGFbZ3JlYXQtLV0gPSBlaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBNb3ZlIHBpdm90cyBpbnRvIHRoZWlyIGZpbmFsIHBvc2l0aW9ucy5cbiAgICAvLyBXZSBzaHJ1bmsgdGhlIGxpc3QgZnJvbSBib3RoIHNpZGVzIChhW2xlZnRdIGFuZCBhW3JpZ2h0XSBoYXZlXG4gICAgLy8gbWVhbmluZ2xlc3MgdmFsdWVzIGluIHRoZW0pIGFuZCBub3cgd2UgbW92ZSBlbGVtZW50cyBmcm9tIHRoZSBmaXJzdFxuICAgIC8vIGFuZCB0aGlyZCBwYXJ0aXRpb24gaW50byB0aGVzZSBsb2NhdGlvbnMgc28gdGhhdCB3ZSBjYW4gc3RvcmUgdGhlXG4gICAgLy8gcGl2b3RzLlxuICAgIGFbbG9dID0gYVtsZXNzIC0gMV07XG4gICAgYVtsZXNzIC0gMV0gPSBwaXZvdDE7XG4gICAgYVtoaSAtIDFdID0gYVtncmVhdCArIDFdO1xuICAgIGFbZ3JlYXQgKyAxXSA9IHBpdm90MjtcblxuICAgIC8vIFRoZSBsaXN0IGlzIG5vdyBwYXJ0aXRpb25lZCBpbnRvIHRocmVlIHBhcnRpdGlvbnM6XG4gICAgLy8gWyA8IHBpdm90MSAgIHwgPj0gcGl2b3QxICYmIDw9IHBpdm90MiAgIHwgID4gcGl2b3QyICAgXVxuICAgIC8vICBeICAgICAgICAgICAgXiAgICAgICAgICAgICAgICAgICAgICAgIF4gICAgICAgICAgICAgXlxuICAgIC8vIGxlZnQgICAgICAgICBsZXNzICAgICAgICAgICAgICAgICAgICAgZ3JlYXQgICAgICAgIHJpZ2h0XG5cbiAgICAvLyBSZWN1cnNpdmUgZGVzY2VudC4gKERvbid0IGluY2x1ZGUgdGhlIHBpdm90IHZhbHVlcy4pXG4gICAgc29ydChhLCBsbywgbGVzcyAtIDEpO1xuICAgIHNvcnQoYSwgZ3JlYXQgKyAyLCBoaSk7XG5cbiAgICBpZiAocGl2b3RzRXF1YWwpIHtcbiAgICAgIC8vIEFsbCBlbGVtZW50cyBpbiB0aGUgc2Vjb25kIHBhcnRpdGlvbiBhcmUgZXF1YWwgdG8gdGhlIHBpdm90LiBOb1xuICAgICAgLy8gbmVlZCB0byBzb3J0IHRoZW0uXG4gICAgICByZXR1cm4gYTtcbiAgICB9XG5cbiAgICAvLyBJbiB0aGVvcnkgaXQgc2hvdWxkIGJlIGVub3VnaCB0byBjYWxsIF9kb1NvcnQgcmVjdXJzaXZlbHkgb24gdGhlIHNlY29uZFxuICAgIC8vIHBhcnRpdGlvbi5cbiAgICAvLyBUaGUgQW5kcm9pZCBzb3VyY2UgaG93ZXZlciByZW1vdmVzIHRoZSBwaXZvdCBlbGVtZW50cyBmcm9tIHRoZSByZWN1cnNpdmVcbiAgICAvLyBjYWxsIGlmIHRoZSBzZWNvbmQgcGFydGl0aW9uIGlzIHRvbyBsYXJnZSAobW9yZSB0aGFuIDIvMyBvZiB0aGUgbGlzdCkuXG4gICAgaWYgKGxlc3MgPCBpMSAmJiBncmVhdCA+IGk1KSB7XG4gICAgICB2YXIgbGVzc1ZhbHVlLCBncmVhdFZhbHVlO1xuICAgICAgd2hpbGUgKChsZXNzVmFsdWUgPSBmKGFbbGVzc10pKSA8PSBwaXZvdFZhbHVlMSAmJiBsZXNzVmFsdWUgPj0gcGl2b3RWYWx1ZTEpICsrbGVzcztcbiAgICAgIHdoaWxlICgoZ3JlYXRWYWx1ZSA9IGYoYVtncmVhdF0pKSA8PSBwaXZvdFZhbHVlMiAmJiBncmVhdFZhbHVlID49IHBpdm90VmFsdWUyKSAtLWdyZWF0O1xuXG4gICAgICAvLyBDb3B5IHBhc3RlIG9mIHRoZSBwcmV2aW91cyAzLXdheSBwYXJ0aXRpb25pbmcgd2l0aCBhZGFwdGlvbnMuXG4gICAgICAvL1xuICAgICAgLy8gV2UgcGFydGl0aW9uIHRoZSBsaXN0IGludG8gdGhyZWUgcGFydHM6XG4gICAgICAvLyAgMS4gPT0gcGl2b3QxXG4gICAgICAvLyAgMi4gPiBwaXZvdDEgJiYgPCBwaXZvdDJcbiAgICAgIC8vICAzLiA9PSBwaXZvdDJcbiAgICAgIC8vXG4gICAgICAvLyBEdXJpbmcgdGhlIGxvb3Agd2UgaGF2ZTpcbiAgICAgIC8vIFsgPT0gcGl2b3QxIHwgPiBwaXZvdDEgJiYgPCBwaXZvdDIgfCB1bnBhcnRpdGlvbmVkICB8ID09IHBpdm90MiBdXG4gICAgICAvLyAgICAgICAgICAgICAgXiAgICAgICAgICAgICAgICAgICAgICBeICAgICAgICAgICAgICBeXG4gICAgICAvLyAgICAgICAgICAgIGxlc3MgICAgICAgICAgICAgICAgICAgICBrICAgICAgICAgICAgICBncmVhdFxuICAgICAgLy9cbiAgICAgIC8vIEludmFyaWFudHM6XG4gICAgICAvLyAgIDEuIGZvciB4IGluIFsgKiwgbGVzc1sgOiB4ID09IHBpdm90MVxuICAgICAgLy8gICAyLiBmb3IgeCBpbiBbbGVzcywga1sgOiBwaXZvdDEgPCB4ICYmIHggPCBwaXZvdDJcbiAgICAgIC8vICAgMy4gZm9yIHggaW4gXWdyZWF0LCAqIF0gOiB4ID09IHBpdm90MlxuICAgICAgZm9yICh2YXIgayA9IGxlc3M7IGsgPD0gZ3JlYXQ7IGsrKykge1xuICAgICAgICB2YXIgZWsgPSBhW2tdLCB4ayA9IGYoZWspO1xuICAgICAgICBpZiAoeGsgPD0gcGl2b3RWYWx1ZTEgJiYgeGsgPj0gcGl2b3RWYWx1ZTEpIHtcbiAgICAgICAgICBpZiAoayAhPT0gbGVzcykge1xuICAgICAgICAgICAgYVtrXSA9IGFbbGVzc107XG4gICAgICAgICAgICBhW2xlc3NdID0gZWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIGxlc3MrKztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoeGsgPD0gcGl2b3RWYWx1ZTIgJiYgeGsgPj0gcGl2b3RWYWx1ZTIpIHtcbiAgICAgICAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgICAgICAgIHZhciBncmVhdFZhbHVlID0gZihhW2dyZWF0XSk7XG4gICAgICAgICAgICAgIGlmIChncmVhdFZhbHVlIDw9IHBpdm90VmFsdWUyICYmIGdyZWF0VmFsdWUgPj0gcGl2b3RWYWx1ZTIpIHtcbiAgICAgICAgICAgICAgICBncmVhdC0tO1xuICAgICAgICAgICAgICAgIGlmIChncmVhdCA8IGspIGJyZWFrO1xuICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgdGhlIG9ubHkgbG9jYXRpb24gaW5zaWRlIHRoZSBsb29wIHdoZXJlIGEgbmV3XG4gICAgICAgICAgICAgICAgLy8gaXRlcmF0aW9uIGlzIHN0YXJ0ZWQuXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gYVtncmVhdF0gPCBwaXZvdDIuXG4gICAgICAgICAgICAgICAgaWYgKGdyZWF0VmFsdWUgPCBwaXZvdFZhbHVlMSkge1xuICAgICAgICAgICAgICAgICAgLy8gVHJpcGxlIGV4Y2hhbmdlLlxuICAgICAgICAgICAgICAgICAgYVtrXSA9IGFbbGVzc107XG4gICAgICAgICAgICAgICAgICBhW2xlc3MrK10gPSBhW2dyZWF0XTtcbiAgICAgICAgICAgICAgICAgIGFbZ3JlYXQtLV0gPSBlaztcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgLy8gYVtncmVhdF0gPT0gcGl2b3QxLlxuICAgICAgICAgICAgICAgICAgYVtrXSA9IGFbZ3JlYXRdO1xuICAgICAgICAgICAgICAgICAgYVtncmVhdC0tXSA9IGVrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFRoZSBzZWNvbmQgcGFydGl0aW9uIGhhcyBub3cgYmVlbiBjbGVhcmVkIG9mIHBpdm90IGVsZW1lbnRzIGFuZCBsb29rc1xuICAgIC8vIGFzIGZvbGxvd3M6XG4gICAgLy8gWyAgKiAgfCAgPiBwaXZvdDEgJiYgPCBwaXZvdDIgIHwgKiBdXG4gICAgLy8gICAgICAgIF4gICAgICAgICAgICAgICAgICAgICAgXlxuICAgIC8vICAgICAgIGxlc3MgICAgICAgICAgICAgICAgICBncmVhdFxuICAgIC8vIFNvcnQgdGhlIHNlY29uZCBwYXJ0aXRpb24gdXNpbmcgcmVjdXJzaXZlIGRlc2NlbnQuXG5cbiAgICAvLyBUaGUgc2Vjb25kIHBhcnRpdGlvbiBsb29rcyBhcyBmb2xsb3dzOlxuICAgIC8vIFsgICogIHwgID49IHBpdm90MSAmJiA8PSBwaXZvdDIgIHwgKiBdXG4gICAgLy8gICAgICAgIF4gICAgICAgICAgICAgICAgICAgICAgICBeXG4gICAgLy8gICAgICAgbGVzcyAgICAgICAgICAgICAgICAgICAgZ3JlYXRcbiAgICAvLyBTaW1wbHkgc29ydCBpdCBieSByZWN1cnNpdmUgZGVzY2VudC5cblxuICAgIHJldHVybiBzb3J0KGEsIGxlc3MsIGdyZWF0ICsgMSk7XG4gIH1cblxuICByZXR1cm4gc29ydDtcbn1cblxudmFyIHF1aWNrc29ydF9zaXplVGhyZXNob2xkID0gMzI7XG52YXIgY3Jvc3NmaWx0ZXJfYXJyYXk4ID0gY3Jvc3NmaWx0ZXJfYXJyYXlVbnR5cGVkLFxuICAgIGNyb3NzZmlsdGVyX2FycmF5MTYgPSBjcm9zc2ZpbHRlcl9hcnJheVVudHlwZWQsXG4gICAgY3Jvc3NmaWx0ZXJfYXJyYXkzMiA9IGNyb3NzZmlsdGVyX2FycmF5VW50eXBlZCxcbiAgICBjcm9zc2ZpbHRlcl9hcnJheUxlbmd0aGVuID0gY3Jvc3NmaWx0ZXJfYXJyYXlMZW5ndGhlblVudHlwZWQsXG4gICAgY3Jvc3NmaWx0ZXJfYXJyYXlXaWRlbiA9IGNyb3NzZmlsdGVyX2FycmF5V2lkZW5VbnR5cGVkO1xuXG5pZiAodHlwZW9mIFVpbnQ4QXJyYXkgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgY3Jvc3NmaWx0ZXJfYXJyYXk4ID0gZnVuY3Rpb24obikgeyByZXR1cm4gbmV3IFVpbnQ4QXJyYXkobik7IH07XG4gIGNyb3NzZmlsdGVyX2FycmF5MTYgPSBmdW5jdGlvbihuKSB7IHJldHVybiBuZXcgVWludDE2QXJyYXkobik7IH07XG4gIGNyb3NzZmlsdGVyX2FycmF5MzIgPSBmdW5jdGlvbihuKSB7IHJldHVybiBuZXcgVWludDMyQXJyYXkobik7IH07XG5cbiAgY3Jvc3NmaWx0ZXJfYXJyYXlMZW5ndGhlbiA9IGZ1bmN0aW9uKGFycmF5LCBsZW5ndGgpIHtcbiAgICBpZiAoYXJyYXkubGVuZ3RoID49IGxlbmd0aCkgcmV0dXJuIGFycmF5O1xuICAgIHZhciBjb3B5ID0gbmV3IGFycmF5LmNvbnN0cnVjdG9yKGxlbmd0aCk7XG4gICAgY29weS5zZXQoYXJyYXkpO1xuICAgIHJldHVybiBjb3B5O1xuICB9O1xuXG4gIGNyb3NzZmlsdGVyX2FycmF5V2lkZW4gPSBmdW5jdGlvbihhcnJheSwgd2lkdGgpIHtcbiAgICB2YXIgY29weTtcbiAgICBzd2l0Y2ggKHdpZHRoKSB7XG4gICAgICBjYXNlIDE2OiBjb3B5ID0gY3Jvc3NmaWx0ZXJfYXJyYXkxNihhcnJheS5sZW5ndGgpOyBicmVhaztcbiAgICAgIGNhc2UgMzI6IGNvcHkgPSBjcm9zc2ZpbHRlcl9hcnJheTMyKGFycmF5Lmxlbmd0aCk7IGJyZWFrO1xuICAgICAgZGVmYXVsdDogdGhyb3cgbmV3IEVycm9yKFwiaW52YWxpZCBhcnJheSB3aWR0aCFcIik7XG4gICAgfVxuICAgIGNvcHkuc2V0KGFycmF5KTtcbiAgICByZXR1cm4gY29weTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gY3Jvc3NmaWx0ZXJfYXJyYXlVbnR5cGVkKG4pIHtcbiAgdmFyIGFycmF5ID0gbmV3IEFycmF5KG4pLCBpID0gLTE7XG4gIHdoaWxlICgrK2kgPCBuKSBhcnJheVtpXSA9IDA7XG4gIHJldHVybiBhcnJheTtcbn1cblxuZnVuY3Rpb24gY3Jvc3NmaWx0ZXJfYXJyYXlMZW5ndGhlblVudHlwZWQoYXJyYXksIGxlbmd0aCkge1xuICB2YXIgbiA9IGFycmF5Lmxlbmd0aDtcbiAgd2hpbGUgKG4gPCBsZW5ndGgpIGFycmF5W24rK10gPSAwO1xuICByZXR1cm4gYXJyYXk7XG59XG5cbmZ1bmN0aW9uIGNyb3NzZmlsdGVyX2FycmF5V2lkZW5VbnR5cGVkKGFycmF5LCB3aWR0aCkge1xuICBpZiAod2lkdGggPiAzMikgdGhyb3cgbmV3IEVycm9yKFwiaW52YWxpZCBhcnJheSB3aWR0aCFcIik7XG4gIHJldHVybiBhcnJheTtcbn1cbmZ1bmN0aW9uIGNyb3NzZmlsdGVyX2ZpbHRlckV4YWN0KGJpc2VjdCwgdmFsdWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKHZhbHVlcykge1xuICAgIHZhciBuID0gdmFsdWVzLmxlbmd0aDtcbiAgICByZXR1cm4gW2Jpc2VjdC5sZWZ0KHZhbHVlcywgdmFsdWUsIDAsIG4pLCBiaXNlY3QucmlnaHQodmFsdWVzLCB2YWx1ZSwgMCwgbildO1xuICB9O1xufVxuXG5mdW5jdGlvbiBjcm9zc2ZpbHRlcl9maWx0ZXJSYW5nZShiaXNlY3QsIHJhbmdlKSB7XG4gIHZhciBtaW4gPSByYW5nZVswXSxcbiAgICAgIG1heCA9IHJhbmdlWzFdO1xuICByZXR1cm4gZnVuY3Rpb24odmFsdWVzKSB7XG4gICAgdmFyIG4gPSB2YWx1ZXMubGVuZ3RoO1xuICAgIHJldHVybiBbYmlzZWN0LmxlZnQodmFsdWVzLCBtaW4sIDAsIG4pLCBiaXNlY3QubGVmdCh2YWx1ZXMsIG1heCwgMCwgbildO1xuICB9O1xufVxuXG5mdW5jdGlvbiBjcm9zc2ZpbHRlcl9maWx0ZXJBbGwodmFsdWVzKSB7XG4gIHJldHVybiBbMCwgdmFsdWVzLmxlbmd0aF07XG59XG5mdW5jdGlvbiBjcm9zc2ZpbHRlcl9udWxsKCkge1xuICByZXR1cm4gbnVsbDtcbn1cbmZ1bmN0aW9uIGNyb3NzZmlsdGVyX3plcm8oKSB7XG4gIHJldHVybiAwO1xufVxuZnVuY3Rpb24gY3Jvc3NmaWx0ZXJfcmVkdWNlSW5jcmVtZW50KHApIHtcbiAgcmV0dXJuIHAgKyAxO1xufVxuXG5mdW5jdGlvbiBjcm9zc2ZpbHRlcl9yZWR1Y2VEZWNyZW1lbnQocCkge1xuICByZXR1cm4gcCAtIDE7XG59XG5cbmZ1bmN0aW9uIGNyb3NzZmlsdGVyX3JlZHVjZUFkZChmKSB7XG4gIHJldHVybiBmdW5jdGlvbihwLCB2KSB7XG4gICAgcmV0dXJuIHAgKyArZih2KTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gY3Jvc3NmaWx0ZXJfcmVkdWNlU3VidHJhY3QoZikge1xuICByZXR1cm4gZnVuY3Rpb24ocCwgdikge1xuICAgIHJldHVybiBwIC0gZih2KTtcbiAgfTtcbn1cbmV4cG9ydHMuY3Jvc3NmaWx0ZXIgPSBjcm9zc2ZpbHRlcjtcblxuZnVuY3Rpb24gY3Jvc3NmaWx0ZXIoKSB7XG4gIHZhciBjcm9zc2ZpbHRlciA9IHtcbiAgICBhZGQ6IGFkZCxcbiAgICByZW1vdmU6IHJlbW92ZURhdGEsXG4gICAgZGltZW5zaW9uOiBkaW1lbnNpb24sXG4gICAgZ3JvdXBBbGw6IGdyb3VwQWxsLFxuICAgIHNpemU6IHNpemVcbiAgfTtcblxuICB2YXIgZGF0YSA9IFtdLCAvLyB0aGUgcmVjb3Jkc1xuICAgICAgbiA9IDAsIC8vIHRoZSBudW1iZXIgb2YgcmVjb3JkczsgZGF0YS5sZW5ndGhcbiAgICAgIG0gPSAwLCAvLyBhIGJpdCBtYXNrIHJlcHJlc2VudGluZyB3aGljaCBkaW1lbnNpb25zIGFyZSBpbiB1c2VcbiAgICAgIE0gPSA4LCAvLyBudW1iZXIgb2YgZGltZW5zaW9ucyB0aGF0IGNhbiBmaXQgaW4gYGZpbHRlcnNgXG4gICAgICBmaWx0ZXJzID0gY3Jvc3NmaWx0ZXJfYXJyYXk4KDApLCAvLyBNIGJpdHMgcGVyIHJlY29yZDsgMSBpcyBmaWx0ZXJlZCBvdXRcbiAgICAgIGZpbHRlckxpc3RlbmVycyA9IFtdLCAvLyB3aGVuIHRoZSBmaWx0ZXJzIGNoYW5nZVxuICAgICAgZGF0YUxpc3RlbmVycyA9IFtdLCAvLyB3aGVuIGRhdGEgaXMgYWRkZWRcbiAgICAgIHJlbW92ZURhdGFMaXN0ZW5lcnMgPSBbXTsgLy8gd2hlbiBkYXRhIGlzIHJlbW92ZWRcblxuICAvLyBBZGRzIHRoZSBzcGVjaWZpZWQgbmV3IHJlY29yZHMgdG8gdGhpcyBjcm9zc2ZpbHRlci5cbiAgZnVuY3Rpb24gYWRkKG5ld0RhdGEpIHtcbiAgICB2YXIgbjAgPSBuLFxuICAgICAgICBuMSA9IG5ld0RhdGEubGVuZ3RoO1xuXG4gICAgLy8gSWYgdGhlcmUncyBhY3R1YWxseSBuZXcgZGF0YSB0byBhZGTigKZcbiAgICAvLyBNZXJnZSB0aGUgbmV3IGRhdGEgaW50byB0aGUgZXhpc3RpbmcgZGF0YS5cbiAgICAvLyBMZW5ndGhlbiB0aGUgZmlsdGVyIGJpdHNldCB0byBoYW5kbGUgdGhlIG5ldyByZWNvcmRzLlxuICAgIC8vIE5vdGlmeSBsaXN0ZW5lcnMgKGRpbWVuc2lvbnMgYW5kIGdyb3VwcykgdGhhdCBuZXcgZGF0YSBpcyBhdmFpbGFibGUuXG4gICAgaWYgKG4xKSB7XG4gICAgICBkYXRhID0gZGF0YS5jb25jYXQobmV3RGF0YSk7XG4gICAgICBmaWx0ZXJzID0gY3Jvc3NmaWx0ZXJfYXJyYXlMZW5ndGhlbihmaWx0ZXJzLCBuICs9IG4xKTtcbiAgICAgIGRhdGFMaXN0ZW5lcnMuZm9yRWFjaChmdW5jdGlvbihsKSB7IGwobmV3RGF0YSwgbjAsIG4xKTsgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNyb3NzZmlsdGVyO1xuICB9XG5cbiAgLy8gUmVtb3ZlcyBhbGwgcmVjb3JkcyB0aGF0IG1hdGNoIHRoZSBjdXJyZW50IGZpbHRlcnMuXG4gIGZ1bmN0aW9uIHJlbW92ZURhdGEoKSB7XG4gICAgdmFyIG5ld0luZGV4ID0gY3Jvc3NmaWx0ZXJfaW5kZXgobiwgbiksXG4gICAgICAgIHJlbW92ZWQgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMCwgaiA9IDA7IGkgPCBuOyArK2kpIHtcbiAgICAgIGlmIChmaWx0ZXJzW2ldKSBuZXdJbmRleFtpXSA9IGorKztcbiAgICAgIGVsc2UgcmVtb3ZlZC5wdXNoKGkpO1xuICAgIH1cblxuICAgIC8vIFJlbW92ZSBhbGwgbWF0Y2hpbmcgcmVjb3JkcyBmcm9tIGdyb3Vwcy5cbiAgICBmaWx0ZXJMaXN0ZW5lcnMuZm9yRWFjaChmdW5jdGlvbihsKSB7IGwoMCwgW10sIHJlbW92ZWQpOyB9KTtcblxuICAgIC8vIFVwZGF0ZSBpbmRleGVzLlxuICAgIHJlbW92ZURhdGFMaXN0ZW5lcnMuZm9yRWFjaChmdW5jdGlvbihsKSB7IGwobmV3SW5kZXgpOyB9KTtcblxuICAgIC8vIFJlbW92ZSBvbGQgZmlsdGVycyBhbmQgZGF0YSBieSBvdmVyd3JpdGluZy5cbiAgICBmb3IgKHZhciBpID0gMCwgaiA9IDAsIGs7IGkgPCBuOyArK2kpIHtcbiAgICAgIGlmIChrID0gZmlsdGVyc1tpXSkge1xuICAgICAgICBpZiAoaSAhPT0gaikgZmlsdGVyc1tqXSA9IGssIGRhdGFbal0gPSBkYXRhW2ldO1xuICAgICAgICArK2o7XG4gICAgICB9XG4gICAgfVxuICAgIGRhdGEubGVuZ3RoID0gajtcbiAgICB3aGlsZSAobiA+IGopIGZpbHRlcnNbLS1uXSA9IDA7XG4gIH1cblxuICAvLyBBZGRzIGEgbmV3IGRpbWVuc2lvbiB3aXRoIHRoZSBzcGVjaWZpZWQgdmFsdWUgYWNjZXNzb3IgZnVuY3Rpb24uXG4gIGZ1bmN0aW9uIGRpbWVuc2lvbih2YWx1ZSkge1xuICAgIHZhciBkaW1lbnNpb24gPSB7XG4gICAgICBmaWx0ZXI6IGZpbHRlcixcbiAgICAgIGZpbHRlckV4YWN0OiBmaWx0ZXJFeGFjdCxcbiAgICAgIGZpbHRlclJhbmdlOiBmaWx0ZXJSYW5nZSxcbiAgICAgIGZpbHRlckZ1bmN0aW9uOiBmaWx0ZXJGdW5jdGlvbixcbiAgICAgIGZpbHRlckFsbDogZmlsdGVyQWxsLFxuICAgICAgdG9wOiB0b3AsXG4gICAgICBib3R0b206IGJvdHRvbSxcbiAgICAgIGdyb3VwOiBncm91cCxcbiAgICAgIGdyb3VwQWxsOiBncm91cEFsbCxcbiAgICAgIGRpc3Bvc2U6IGRpc3Bvc2UsXG4gICAgICByZW1vdmU6IGRpc3Bvc2UgLy8gZm9yIGJhY2t3YXJkcy1jb21wYXRpYmlsaXR5XG4gICAgfTtcblxuICAgIHZhciBvbmUgPSB+bSAmIC1+bSwgLy8gbG93ZXN0IHVuc2V0IGJpdCBhcyBtYXNrLCBlLmcuLCAwMDAwMTAwMFxuICAgICAgICB6ZXJvID0gfm9uZSwgLy8gaW52ZXJ0ZWQgb25lLCBlLmcuLCAxMTExMDExMVxuICAgICAgICB2YWx1ZXMsIC8vIHNvcnRlZCwgY2FjaGVkIGFycmF5XG4gICAgICAgIGluZGV4LCAvLyB2YWx1ZSByYW5rIOKGpiBvYmplY3QgaWRcbiAgICAgICAgbmV3VmFsdWVzLCAvLyB0ZW1wb3JhcnkgYXJyYXkgc3RvcmluZyBuZXdseS1hZGRlZCB2YWx1ZXNcbiAgICAgICAgbmV3SW5kZXgsIC8vIHRlbXBvcmFyeSBhcnJheSBzdG9yaW5nIG5ld2x5LWFkZGVkIGluZGV4XG4gICAgICAgIHNvcnQgPSBxdWlja3NvcnRfYnkoZnVuY3Rpb24oaSkgeyByZXR1cm4gbmV3VmFsdWVzW2ldOyB9KSxcbiAgICAgICAgcmVmaWx0ZXIgPSBjcm9zc2ZpbHRlcl9maWx0ZXJBbGwsIC8vIGZvciByZWNvbXB1dGluZyBmaWx0ZXJcbiAgICAgICAgcmVmaWx0ZXJGdW5jdGlvbiwgLy8gdGhlIGN1c3RvbSBmaWx0ZXIgZnVuY3Rpb24gaW4gdXNlXG4gICAgICAgIGluZGV4TGlzdGVuZXJzID0gW10sIC8vIHdoZW4gZGF0YSBpcyBhZGRlZFxuICAgICAgICBkaW1lbnNpb25Hcm91cHMgPSBbXSxcbiAgICAgICAgbG8wID0gMCxcbiAgICAgICAgaGkwID0gMDtcblxuICAgIC8vIFVwZGF0aW5nIGEgZGltZW5zaW9uIGlzIGEgdHdvLXN0YWdlIHByb2Nlc3MuIEZpcnN0LCB3ZSBtdXN0IHVwZGF0ZSB0aGVcbiAgICAvLyBhc3NvY2lhdGVkIGZpbHRlcnMgZm9yIHRoZSBuZXdseS1hZGRlZCByZWNvcmRzLiBPbmNlIGFsbCBkaW1lbnNpb25zIGhhdmVcbiAgICAvLyB1cGRhdGVkIHRoZWlyIGZpbHRlcnMsIHRoZSBncm91cHMgYXJlIG5vdGlmaWVkIHRvIHVwZGF0ZS5cbiAgICBkYXRhTGlzdGVuZXJzLnVuc2hpZnQocHJlQWRkKTtcbiAgICBkYXRhTGlzdGVuZXJzLnB1c2gocG9zdEFkZCk7XG5cbiAgICByZW1vdmVEYXRhTGlzdGVuZXJzLnB1c2gocmVtb3ZlRGF0YSk7XG5cbiAgICAvLyBJbmNvcnBvcmF0ZSBhbnkgZXhpc3RpbmcgZGF0YSBpbnRvIHRoaXMgZGltZW5zaW9uLCBhbmQgbWFrZSBzdXJlIHRoYXQgdGhlXG4gICAgLy8gZmlsdGVyIGJpdHNldCBpcyB3aWRlIGVub3VnaCB0byBoYW5kbGUgdGhlIG5ldyBkaW1lbnNpb24uXG4gICAgbSB8PSBvbmU7XG4gICAgaWYgKE0gPj0gMzIgPyAhb25lIDogbSAmIC0oMSA8PCBNKSkge1xuICAgICAgZmlsdGVycyA9IGNyb3NzZmlsdGVyX2FycmF5V2lkZW4oZmlsdGVycywgTSA8PD0gMSk7XG4gICAgfVxuICAgIHByZUFkZChkYXRhLCAwLCBuKTtcbiAgICBwb3N0QWRkKGRhdGEsIDAsIG4pO1xuXG4gICAgLy8gSW5jb3Jwb3JhdGVzIHRoZSBzcGVjaWZpZWQgbmV3IHJlY29yZHMgaW50byB0aGlzIGRpbWVuc2lvbi5cbiAgICAvLyBUaGlzIGZ1bmN0aW9uIGlzIHJlc3BvbnNpYmxlIGZvciB1cGRhdGluZyBmaWx0ZXJzLCB2YWx1ZXMsIGFuZCBpbmRleC5cbiAgICBmdW5jdGlvbiBwcmVBZGQobmV3RGF0YSwgbjAsIG4xKSB7XG5cbiAgICAgIC8vIFBlcm11dGUgbmV3IHZhbHVlcyBpbnRvIG5hdHVyYWwgb3JkZXIgdXNpbmcgYSBzb3J0ZWQgaW5kZXguXG4gICAgICBuZXdWYWx1ZXMgPSBuZXdEYXRhLm1hcCh2YWx1ZSk7XG4gICAgICBuZXdJbmRleCA9IHNvcnQoY3Jvc3NmaWx0ZXJfcmFuZ2UobjEpLCAwLCBuMSk7XG4gICAgICBuZXdWYWx1ZXMgPSBwZXJtdXRlKG5ld1ZhbHVlcywgbmV3SW5kZXgpO1xuXG4gICAgICAvLyBCaXNlY3QgbmV3VmFsdWVzIHRvIGRldGVybWluZSB3aGljaCBuZXcgcmVjb3JkcyBhcmUgc2VsZWN0ZWQuXG4gICAgICB2YXIgYm91bmRzID0gcmVmaWx0ZXIobmV3VmFsdWVzKSwgbG8xID0gYm91bmRzWzBdLCBoaTEgPSBib3VuZHNbMV0sIGk7XG4gICAgICBpZiAocmVmaWx0ZXJGdW5jdGlvbikge1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbjE7ICsraSkge1xuICAgICAgICAgIGlmICghcmVmaWx0ZXJGdW5jdGlvbihuZXdWYWx1ZXNbaV0sIGkpKSBmaWx0ZXJzW25ld0luZGV4W2ldICsgbjBdIHw9IG9uZTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGxvMTsgKytpKSBmaWx0ZXJzW25ld0luZGV4W2ldICsgbjBdIHw9IG9uZTtcbiAgICAgICAgZm9yIChpID0gaGkxOyBpIDwgbjE7ICsraSkgZmlsdGVyc1tuZXdJbmRleFtpXSArIG4wXSB8PSBvbmU7XG4gICAgICB9XG5cbiAgICAgIC8vIElmIHRoaXMgZGltZW5zaW9uIHByZXZpb3VzbHkgaGFkIG5vIGRhdGEsIHRoZW4gd2UgZG9uJ3QgbmVlZCB0byBkbyB0aGVcbiAgICAgIC8vIG1vcmUgZXhwZW5zaXZlIG1lcmdlIG9wZXJhdGlvbjsgdXNlIHRoZSBuZXcgdmFsdWVzIGFuZCBpbmRleCBhcy1pcy5cbiAgICAgIGlmICghbjApIHtcbiAgICAgICAgdmFsdWVzID0gbmV3VmFsdWVzO1xuICAgICAgICBpbmRleCA9IG5ld0luZGV4O1xuICAgICAgICBsbzAgPSBsbzE7XG4gICAgICAgIGhpMCA9IGhpMTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB2YXIgb2xkVmFsdWVzID0gdmFsdWVzLFxuICAgICAgICAgIG9sZEluZGV4ID0gaW5kZXgsXG4gICAgICAgICAgaTAgPSAwLFxuICAgICAgICAgIGkxID0gMDtcblxuICAgICAgLy8gT3RoZXJ3aXNlLCBjcmVhdGUgbmV3IGFycmF5cyBpbnRvIHdoaWNoIHRvIG1lcmdlIG5ldyBhbmQgb2xkLlxuICAgICAgdmFsdWVzID0gbmV3IEFycmF5KG4pO1xuICAgICAgaW5kZXggPSBjcm9zc2ZpbHRlcl9pbmRleChuLCBuKTtcblxuICAgICAgLy8gTWVyZ2UgdGhlIG9sZCBhbmQgbmV3IHNvcnRlZCB2YWx1ZXMsIGFuZCBvbGQgYW5kIG5ldyBpbmRleC5cbiAgICAgIGZvciAoaSA9IDA7IGkwIDwgbjAgJiYgaTEgPCBuMTsgKytpKSB7XG4gICAgICAgIGlmIChvbGRWYWx1ZXNbaTBdIDwgbmV3VmFsdWVzW2kxXSkge1xuICAgICAgICAgIHZhbHVlc1tpXSA9IG9sZFZhbHVlc1tpMF07XG4gICAgICAgICAgaW5kZXhbaV0gPSBvbGRJbmRleFtpMCsrXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YWx1ZXNbaV0gPSBuZXdWYWx1ZXNbaTFdO1xuICAgICAgICAgIGluZGV4W2ldID0gbmV3SW5kZXhbaTErK10gKyBuMDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBBZGQgYW55IHJlbWFpbmluZyBvbGQgdmFsdWVzLlxuICAgICAgZm9yICg7IGkwIDwgbjA7ICsraTAsICsraSkge1xuICAgICAgICB2YWx1ZXNbaV0gPSBvbGRWYWx1ZXNbaTBdO1xuICAgICAgICBpbmRleFtpXSA9IG9sZEluZGV4W2kwXTtcbiAgICAgIH1cblxuICAgICAgLy8gQWRkIGFueSByZW1haW5pbmcgbmV3IHZhbHVlcy5cbiAgICAgIGZvciAoOyBpMSA8IG4xOyArK2kxLCArK2kpIHtcbiAgICAgICAgdmFsdWVzW2ldID0gbmV3VmFsdWVzW2kxXTtcbiAgICAgICAgaW5kZXhbaV0gPSBuZXdJbmRleFtpMV0gKyBuMDtcbiAgICAgIH1cblxuICAgICAgLy8gQmlzZWN0IGFnYWluIHRvIHJlY29tcHV0ZSBsbzAgYW5kIGhpMC5cbiAgICAgIGJvdW5kcyA9IHJlZmlsdGVyKHZhbHVlcyksIGxvMCA9IGJvdW5kc1swXSwgaGkwID0gYm91bmRzWzFdO1xuICAgIH1cblxuICAgIC8vIFdoZW4gYWxsIGZpbHRlcnMgaGF2ZSB1cGRhdGVkLCBub3RpZnkgaW5kZXggbGlzdGVuZXJzIG9mIHRoZSBuZXcgdmFsdWVzLlxuICAgIGZ1bmN0aW9uIHBvc3RBZGQobmV3RGF0YSwgbjAsIG4xKSB7XG4gICAgICBpbmRleExpc3RlbmVycy5mb3JFYWNoKGZ1bmN0aW9uKGwpIHsgbChuZXdWYWx1ZXMsIG5ld0luZGV4LCBuMCwgbjEpOyB9KTtcbiAgICAgIG5ld1ZhbHVlcyA9IG5ld0luZGV4ID0gbnVsbDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZW1vdmVEYXRhKHJlSW5kZXgpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBqID0gMCwgazsgaSA8IG47ICsraSkge1xuICAgICAgICBpZiAoZmlsdGVyc1trID0gaW5kZXhbaV1dKSB7XG4gICAgICAgICAgaWYgKGkgIT09IGopIHZhbHVlc1tqXSA9IHZhbHVlc1tpXTtcbiAgICAgICAgICBpbmRleFtqXSA9IHJlSW5kZXhba107XG4gICAgICAgICAgKytqO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB2YWx1ZXMubGVuZ3RoID0gajtcbiAgICAgIHdoaWxlIChqIDwgbikgaW5kZXhbaisrXSA9IDA7XG5cbiAgICAgIC8vIEJpc2VjdCBhZ2FpbiB0byByZWNvbXB1dGUgbG8wIGFuZCBoaTAuXG4gICAgICB2YXIgYm91bmRzID0gcmVmaWx0ZXIodmFsdWVzKTtcbiAgICAgIGxvMCA9IGJvdW5kc1swXSwgaGkwID0gYm91bmRzWzFdO1xuICAgIH1cblxuICAgIC8vIFVwZGF0ZXMgdGhlIHNlbGVjdGVkIHZhbHVlcyBiYXNlZCBvbiB0aGUgc3BlY2lmaWVkIGJvdW5kcyBbbG8sIGhpXS5cbiAgICAvLyBUaGlzIGltcGxlbWVudGF0aW9uIGlzIHVzZWQgYnkgYWxsIHRoZSBwdWJsaWMgZmlsdGVyIG1ldGhvZHMuXG4gICAgZnVuY3Rpb24gZmlsdGVySW5kZXhCb3VuZHMoYm91bmRzKSB7XG4gICAgICB2YXIgbG8xID0gYm91bmRzWzBdLFxuICAgICAgICAgIGhpMSA9IGJvdW5kc1sxXTtcblxuICAgICAgaWYgKHJlZmlsdGVyRnVuY3Rpb24pIHtcbiAgICAgICAgcmVmaWx0ZXJGdW5jdGlvbiA9IG51bGw7XG4gICAgICAgIGZpbHRlckluZGV4RnVuY3Rpb24oZnVuY3Rpb24oZCwgaSkgeyByZXR1cm4gbG8xIDw9IGkgJiYgaSA8IGhpMTsgfSk7XG4gICAgICAgIGxvMCA9IGxvMTtcbiAgICAgICAgaGkwID0gaGkxO1xuICAgICAgICByZXR1cm4gZGltZW5zaW9uO1xuICAgICAgfVxuXG4gICAgICB2YXIgaSxcbiAgICAgICAgICBqLFxuICAgICAgICAgIGssXG4gICAgICAgICAgYWRkZWQgPSBbXSxcbiAgICAgICAgICByZW1vdmVkID0gW107XG5cbiAgICAgIC8vIEZhc3QgaW5jcmVtZW50YWwgdXBkYXRlIGJhc2VkIG9uIHByZXZpb3VzIGxvIGluZGV4LlxuICAgICAgaWYgKGxvMSA8IGxvMCkge1xuICAgICAgICBmb3IgKGkgPSBsbzEsIGogPSBNYXRoLm1pbihsbzAsIGhpMSk7IGkgPCBqOyArK2kpIHtcbiAgICAgICAgICBmaWx0ZXJzW2sgPSBpbmRleFtpXV0gXj0gb25lO1xuICAgICAgICAgIGFkZGVkLnB1c2goayk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAobG8xID4gbG8wKSB7XG4gICAgICAgIGZvciAoaSA9IGxvMCwgaiA9IE1hdGgubWluKGxvMSwgaGkwKTsgaSA8IGo7ICsraSkge1xuICAgICAgICAgIGZpbHRlcnNbayA9IGluZGV4W2ldXSBePSBvbmU7XG4gICAgICAgICAgcmVtb3ZlZC5wdXNoKGspO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIEZhc3QgaW5jcmVtZW50YWwgdXBkYXRlIGJhc2VkIG9uIHByZXZpb3VzIGhpIGluZGV4LlxuICAgICAgaWYgKGhpMSA+IGhpMCkge1xuICAgICAgICBmb3IgKGkgPSBNYXRoLm1heChsbzEsIGhpMCksIGogPSBoaTE7IGkgPCBqOyArK2kpIHtcbiAgICAgICAgICBmaWx0ZXJzW2sgPSBpbmRleFtpXV0gXj0gb25lO1xuICAgICAgICAgIGFkZGVkLnB1c2goayk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoaGkxIDwgaGkwKSB7XG4gICAgICAgIGZvciAoaSA9IE1hdGgubWF4KGxvMCwgaGkxKSwgaiA9IGhpMDsgaSA8IGo7ICsraSkge1xuICAgICAgICAgIGZpbHRlcnNbayA9IGluZGV4W2ldXSBePSBvbmU7XG4gICAgICAgICAgcmVtb3ZlZC5wdXNoKGspO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGxvMCA9IGxvMTtcbiAgICAgIGhpMCA9IGhpMTtcbiAgICAgIGZpbHRlckxpc3RlbmVycy5mb3JFYWNoKGZ1bmN0aW9uKGwpIHsgbChvbmUsIGFkZGVkLCByZW1vdmVkKTsgfSk7XG4gICAgICByZXR1cm4gZGltZW5zaW9uO1xuICAgIH1cblxuICAgIC8vIEZpbHRlcnMgdGhpcyBkaW1lbnNpb24gdXNpbmcgdGhlIHNwZWNpZmllZCByYW5nZSwgdmFsdWUsIG9yIG51bGwuXG4gICAgLy8gSWYgdGhlIHJhbmdlIGlzIG51bGwsIHRoaXMgaXMgZXF1aXZhbGVudCB0byBmaWx0ZXJBbGwuXG4gICAgLy8gSWYgdGhlIHJhbmdlIGlzIGFuIGFycmF5LCB0aGlzIGlzIGVxdWl2YWxlbnQgdG8gZmlsdGVyUmFuZ2UuXG4gICAgLy8gT3RoZXJ3aXNlLCB0aGlzIGlzIGVxdWl2YWxlbnQgdG8gZmlsdGVyRXhhY3QuXG4gICAgZnVuY3Rpb24gZmlsdGVyKHJhbmdlKSB7XG4gICAgICByZXR1cm4gcmFuZ2UgPT0gbnVsbFxuICAgICAgICAgID8gZmlsdGVyQWxsKCkgOiBBcnJheS5pc0FycmF5KHJhbmdlKVxuICAgICAgICAgID8gZmlsdGVyUmFuZ2UocmFuZ2UpIDogdHlwZW9mIHJhbmdlID09PSBcImZ1bmN0aW9uXCJcbiAgICAgICAgICA/IGZpbHRlckZ1bmN0aW9uKHJhbmdlKVxuICAgICAgICAgIDogZmlsdGVyRXhhY3QocmFuZ2UpO1xuICAgIH1cblxuICAgIC8vIEZpbHRlcnMgdGhpcyBkaW1lbnNpb24gdG8gc2VsZWN0IHRoZSBleGFjdCB2YWx1ZS5cbiAgICBmdW5jdGlvbiBmaWx0ZXJFeGFjdCh2YWx1ZSkge1xuICAgICAgcmV0dXJuIGZpbHRlckluZGV4Qm91bmRzKChyZWZpbHRlciA9IGNyb3NzZmlsdGVyX2ZpbHRlckV4YWN0KGJpc2VjdCwgdmFsdWUpKSh2YWx1ZXMpKTtcbiAgICB9XG5cbiAgICAvLyBGaWx0ZXJzIHRoaXMgZGltZW5zaW9uIHRvIHNlbGVjdCB0aGUgc3BlY2lmaWVkIHJhbmdlIFtsbywgaGldLlxuICAgIC8vIFRoZSBsb3dlciBib3VuZCBpcyBpbmNsdXNpdmUsIGFuZCB0aGUgdXBwZXIgYm91bmQgaXMgZXhjbHVzaXZlLlxuICAgIGZ1bmN0aW9uIGZpbHRlclJhbmdlKHJhbmdlKSB7XG4gICAgICByZXR1cm4gZmlsdGVySW5kZXhCb3VuZHMoKHJlZmlsdGVyID0gY3Jvc3NmaWx0ZXJfZmlsdGVyUmFuZ2UoYmlzZWN0LCByYW5nZSkpKHZhbHVlcykpO1xuICAgIH1cblxuICAgIC8vIENsZWFycyBhbnkgZmlsdGVycyBvbiB0aGlzIGRpbWVuc2lvbi5cbiAgICBmdW5jdGlvbiBmaWx0ZXJBbGwoKSB7XG4gICAgICByZXR1cm4gZmlsdGVySW5kZXhCb3VuZHMoKHJlZmlsdGVyID0gY3Jvc3NmaWx0ZXJfZmlsdGVyQWxsKSh2YWx1ZXMpKTtcbiAgICB9XG5cbiAgICAvLyBGaWx0ZXJzIHRoaXMgZGltZW5zaW9uIHVzaW5nIGFuIGFyYml0cmFyeSBmdW5jdGlvbi5cbiAgICBmdW5jdGlvbiBmaWx0ZXJGdW5jdGlvbihmKSB7XG4gICAgICByZWZpbHRlciA9IGNyb3NzZmlsdGVyX2ZpbHRlckFsbDtcblxuICAgICAgZmlsdGVySW5kZXhGdW5jdGlvbihyZWZpbHRlckZ1bmN0aW9uID0gZik7XG5cbiAgICAgIGxvMCA9IDA7XG4gICAgICBoaTAgPSBuO1xuXG4gICAgICByZXR1cm4gZGltZW5zaW9uO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGZpbHRlckluZGV4RnVuY3Rpb24oZikge1xuICAgICAgdmFyIGksXG4gICAgICAgICAgayxcbiAgICAgICAgICB4LFxuICAgICAgICAgIGFkZGVkID0gW10sXG4gICAgICAgICAgcmVtb3ZlZCA9IFtdO1xuXG4gICAgICBmb3IgKGkgPSAwOyBpIDwgbjsgKytpKSB7XG4gICAgICAgIGlmICghKGZpbHRlcnNbayA9IGluZGV4W2ldXSAmIG9uZSkgXiAhISh4ID0gZih2YWx1ZXNbaV0sIGkpKSkge1xuICAgICAgICAgIGlmICh4KSBmaWx0ZXJzW2tdICY9IHplcm8sIGFkZGVkLnB1c2goayk7XG4gICAgICAgICAgZWxzZSBmaWx0ZXJzW2tdIHw9IG9uZSwgcmVtb3ZlZC5wdXNoKGspO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBmaWx0ZXJMaXN0ZW5lcnMuZm9yRWFjaChmdW5jdGlvbihsKSB7IGwob25lLCBhZGRlZCwgcmVtb3ZlZCk7IH0pO1xuICAgIH1cblxuICAgIC8vIFJldHVybnMgdGhlIHRvcCBLIHNlbGVjdGVkIHJlY29yZHMgYmFzZWQgb24gdGhpcyBkaW1lbnNpb24ncyBvcmRlci5cbiAgICAvLyBOb3RlOiBvYnNlcnZlcyB0aGlzIGRpbWVuc2lvbidzIGZpbHRlciwgdW5saWtlIGdyb3VwIGFuZCBncm91cEFsbC5cbiAgICBmdW5jdGlvbiB0b3Aoaykge1xuICAgICAgdmFyIGFycmF5ID0gW10sXG4gICAgICAgICAgaSA9IGhpMCxcbiAgICAgICAgICBqO1xuXG4gICAgICB3aGlsZSAoLS1pID49IGxvMCAmJiBrID4gMCkge1xuICAgICAgICBpZiAoIWZpbHRlcnNbaiA9IGluZGV4W2ldXSkge1xuICAgICAgICAgIGFycmF5LnB1c2goZGF0YVtqXSk7XG4gICAgICAgICAgLS1rO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBhcnJheTtcbiAgICB9XG5cbiAgICAvLyBSZXR1cm5zIHRoZSBib3R0b20gSyBzZWxlY3RlZCByZWNvcmRzIGJhc2VkIG9uIHRoaXMgZGltZW5zaW9uJ3Mgb3JkZXIuXG4gICAgLy8gTm90ZTogb2JzZXJ2ZXMgdGhpcyBkaW1lbnNpb24ncyBmaWx0ZXIsIHVubGlrZSBncm91cCBhbmQgZ3JvdXBBbGwuXG4gICAgZnVuY3Rpb24gYm90dG9tKGspIHtcbiAgICAgIHZhciBhcnJheSA9IFtdLFxuICAgICAgICAgIGkgPSBsbzAsXG4gICAgICAgICAgajtcblxuICAgICAgd2hpbGUgKGkgPCBoaTAgJiYgayA+IDApIHtcbiAgICAgICAgaWYgKCFmaWx0ZXJzW2ogPSBpbmRleFtpXV0pIHtcbiAgICAgICAgICBhcnJheS5wdXNoKGRhdGFbal0pO1xuICAgICAgICAgIC0taztcbiAgICAgICAgfVxuICAgICAgICBpKys7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBhcnJheTtcbiAgICB9XG5cbiAgICAvLyBBZGRzIGEgbmV3IGdyb3VwIHRvIHRoaXMgZGltZW5zaW9uLCB1c2luZyB0aGUgc3BlY2lmaWVkIGtleSBmdW5jdGlvbi5cbiAgICBmdW5jdGlvbiBncm91cChrZXkpIHtcbiAgICAgIHZhciBncm91cCA9IHtcbiAgICAgICAgdG9wOiB0b3AsXG4gICAgICAgIGFsbDogYWxsLFxuICAgICAgICByZWR1Y2U6IHJlZHVjZSxcbiAgICAgICAgcmVkdWNlQ291bnQ6IHJlZHVjZUNvdW50LFxuICAgICAgICByZWR1Y2VTdW06IHJlZHVjZVN1bSxcbiAgICAgICAgb3JkZXI6IG9yZGVyLFxuICAgICAgICBvcmRlck5hdHVyYWw6IG9yZGVyTmF0dXJhbCxcbiAgICAgICAgc2l6ZTogc2l6ZSxcbiAgICAgICAgZGlzcG9zZTogZGlzcG9zZSxcbiAgICAgICAgcmVtb3ZlOiBkaXNwb3NlIC8vIGZvciBiYWNrd2FyZHMtY29tcGF0aWJpbGl0eVxuICAgICAgfTtcblxuICAgICAgLy8gRW5zdXJlIHRoYXQgdGhpcyBncm91cCB3aWxsIGJlIHJlbW92ZWQgd2hlbiB0aGUgZGltZW5zaW9uIGlzIHJlbW92ZWQuXG4gICAgICBkaW1lbnNpb25Hcm91cHMucHVzaChncm91cCk7XG5cbiAgICAgIHZhciBncm91cHMsIC8vIGFycmF5IG9mIHtrZXksIHZhbHVlfVxuICAgICAgICAgIGdyb3VwSW5kZXgsIC8vIG9iamVjdCBpZCDihqYgZ3JvdXAgaWRcbiAgICAgICAgICBncm91cFdpZHRoID0gOCxcbiAgICAgICAgICBncm91cENhcGFjaXR5ID0gY3Jvc3NmaWx0ZXJfY2FwYWNpdHkoZ3JvdXBXaWR0aCksXG4gICAgICAgICAgayA9IDAsIC8vIGNhcmRpbmFsaXR5XG4gICAgICAgICAgc2VsZWN0LFxuICAgICAgICAgIGhlYXAsXG4gICAgICAgICAgcmVkdWNlQWRkLFxuICAgICAgICAgIHJlZHVjZVJlbW92ZSxcbiAgICAgICAgICByZWR1Y2VJbml0aWFsLFxuICAgICAgICAgIHVwZGF0ZSA9IGNyb3NzZmlsdGVyX251bGwsXG4gICAgICAgICAgcmVzZXQgPSBjcm9zc2ZpbHRlcl9udWxsLFxuICAgICAgICAgIHJlc2V0TmVlZGVkID0gdHJ1ZSxcbiAgICAgICAgICBncm91cEFsbCA9IGtleSA9PT0gY3Jvc3NmaWx0ZXJfbnVsbDtcblxuICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAxKSBrZXkgPSBjcm9zc2ZpbHRlcl9pZGVudGl0eTtcblxuICAgICAgLy8gVGhlIGdyb3VwIGxpc3RlbnMgdG8gdGhlIGNyb3NzZmlsdGVyIGZvciB3aGVuIGFueSBkaW1lbnNpb24gY2hhbmdlcywgc29cbiAgICAgIC8vIHRoYXQgaXQgY2FuIHVwZGF0ZSB0aGUgYXNzb2NpYXRlZCByZWR1Y2UgdmFsdWVzLiBJdCBtdXN0IGFsc28gbGlzdGVuIHRvXG4gICAgICAvLyB0aGUgcGFyZW50IGRpbWVuc2lvbiBmb3Igd2hlbiBkYXRhIGlzIGFkZGVkLCBhbmQgY29tcHV0ZSBuZXcga2V5cy5cbiAgICAgIGZpbHRlckxpc3RlbmVycy5wdXNoKHVwZGF0ZSk7XG4gICAgICBpbmRleExpc3RlbmVycy5wdXNoKGFkZCk7XG4gICAgICByZW1vdmVEYXRhTGlzdGVuZXJzLnB1c2gocmVtb3ZlRGF0YSk7XG5cbiAgICAgIC8vIEluY29ycG9yYXRlIGFueSBleGlzdGluZyBkYXRhIGludG8gdGhlIGdyb3VwaW5nLlxuICAgICAgYWRkKHZhbHVlcywgaW5kZXgsIDAsIG4pO1xuXG4gICAgICAvLyBJbmNvcnBvcmF0ZXMgdGhlIHNwZWNpZmllZCBuZXcgdmFsdWVzIGludG8gdGhpcyBncm91cC5cbiAgICAgIC8vIFRoaXMgZnVuY3Rpb24gaXMgcmVzcG9uc2libGUgZm9yIHVwZGF0aW5nIGdyb3VwcyBhbmQgZ3JvdXBJbmRleC5cbiAgICAgIGZ1bmN0aW9uIGFkZChuZXdWYWx1ZXMsIG5ld0luZGV4LCBuMCwgbjEpIHtcbiAgICAgICAgdmFyIG9sZEdyb3VwcyA9IGdyb3VwcyxcbiAgICAgICAgICAgIHJlSW5kZXggPSBjcm9zc2ZpbHRlcl9pbmRleChrLCBncm91cENhcGFjaXR5KSxcbiAgICAgICAgICAgIGFkZCA9IHJlZHVjZUFkZCxcbiAgICAgICAgICAgIGluaXRpYWwgPSByZWR1Y2VJbml0aWFsLFxuICAgICAgICAgICAgazAgPSBrLCAvLyBvbGQgY2FyZGluYWxpdHlcbiAgICAgICAgICAgIGkwID0gMCwgLy8gaW5kZXggb2Ygb2xkIGdyb3VwXG4gICAgICAgICAgICBpMSA9IDAsIC8vIGluZGV4IG9mIG5ldyByZWNvcmRcbiAgICAgICAgICAgIGosIC8vIG9iamVjdCBpZFxuICAgICAgICAgICAgZzAsIC8vIG9sZCBncm91cFxuICAgICAgICAgICAgeDAsIC8vIG9sZCBrZXlcbiAgICAgICAgICAgIHgxLCAvLyBuZXcga2V5XG4gICAgICAgICAgICBnLCAvLyBncm91cCB0byBhZGRcbiAgICAgICAgICAgIHg7IC8vIGtleSBvZiBncm91cCB0byBhZGRcblxuICAgICAgICAvLyBJZiBhIHJlc2V0IGlzIG5lZWRlZCwgd2UgZG9uJ3QgbmVlZCB0byB1cGRhdGUgdGhlIHJlZHVjZSB2YWx1ZXMuXG4gICAgICAgIGlmIChyZXNldE5lZWRlZCkgYWRkID0gaW5pdGlhbCA9IGNyb3NzZmlsdGVyX251bGw7XG5cbiAgICAgICAgLy8gUmVzZXQgdGhlIG5ldyBncm91cHMgKGsgaXMgYSBsb3dlciBib3VuZCkuXG4gICAgICAgIC8vIEFsc28sIG1ha2Ugc3VyZSB0aGF0IGdyb3VwSW5kZXggZXhpc3RzIGFuZCBpcyBsb25nIGVub3VnaC5cbiAgICAgICAgZ3JvdXBzID0gbmV3IEFycmF5KGspLCBrID0gMDtcbiAgICAgICAgZ3JvdXBJbmRleCA9IGswID4gMSA/IGNyb3NzZmlsdGVyX2FycmF5TGVuZ3RoZW4oZ3JvdXBJbmRleCwgbikgOiBjcm9zc2ZpbHRlcl9pbmRleChuLCBncm91cENhcGFjaXR5KTtcblxuICAgICAgICAvLyBHZXQgdGhlIGZpcnN0IG9sZCBrZXkgKHgwIG9mIGcwKSwgaWYgaXQgZXhpc3RzLlxuICAgICAgICBpZiAoazApIHgwID0gKGcwID0gb2xkR3JvdXBzWzBdKS5rZXk7XG5cbiAgICAgICAgLy8gRmluZCB0aGUgZmlyc3QgbmV3IGtleSAoeDEpLCBza2lwcGluZyBOYU4ga2V5cy5cbiAgICAgICAgd2hpbGUgKGkxIDwgbjEgJiYgISgoeDEgPSBrZXkobmV3VmFsdWVzW2kxXSkpID49IHgxKSkgKytpMTtcblxuICAgICAgICAvLyBXaGlsZSBuZXcga2V5cyByZW1haW7igKZcbiAgICAgICAgd2hpbGUgKGkxIDwgbjEpIHtcblxuICAgICAgICAgIC8vIERldGVybWluZSB0aGUgbGVzc2VyIG9mIHRoZSB0d28gY3VycmVudCBrZXlzOyBuZXcgYW5kIG9sZC5cbiAgICAgICAgICAvLyBJZiB0aGVyZSBhcmUgbm8gb2xkIGtleXMgcmVtYWluaW5nLCB0aGVuIGFsd2F5cyBhZGQgdGhlIG5ldyBrZXkuXG4gICAgICAgICAgaWYgKGcwICYmIHgwIDw9IHgxKSB7XG4gICAgICAgICAgICBnID0gZzAsIHggPSB4MDtcblxuICAgICAgICAgICAgLy8gUmVjb3JkIHRoZSBuZXcgaW5kZXggb2YgdGhlIG9sZCBncm91cC5cbiAgICAgICAgICAgIHJlSW5kZXhbaTBdID0gaztcblxuICAgICAgICAgICAgLy8gUmV0cmlldmUgdGhlIG5leHQgb2xkIGtleS5cbiAgICAgICAgICAgIGlmIChnMCA9IG9sZEdyb3Vwc1srK2kwXSkgeDAgPSBnMC5rZXk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGcgPSB7a2V5OiB4MSwgdmFsdWU6IGluaXRpYWwoKX0sIHggPSB4MTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBBZGQgdGhlIGxlc3NlciBncm91cC5cbiAgICAgICAgICBncm91cHNba10gPSBnO1xuXG4gICAgICAgICAgLy8gQWRkIGFueSBzZWxlY3RlZCByZWNvcmRzIGJlbG9uZ2luZyB0byB0aGUgYWRkZWQgZ3JvdXAsIHdoaWxlXG4gICAgICAgICAgLy8gYWR2YW5jaW5nIHRoZSBuZXcga2V5IGFuZCBwb3B1bGF0aW5nIHRoZSBhc3NvY2lhdGVkIGdyb3VwIGluZGV4LlxuICAgICAgICAgIHdoaWxlICghKHgxID4geCkpIHtcbiAgICAgICAgICAgIGdyb3VwSW5kZXhbaiA9IG5ld0luZGV4W2kxXSArIG4wXSA9IGs7XG4gICAgICAgICAgICBpZiAoIShmaWx0ZXJzW2pdICYgemVybykpIGcudmFsdWUgPSBhZGQoZy52YWx1ZSwgZGF0YVtqXSk7XG4gICAgICAgICAgICBpZiAoKytpMSA+PSBuMSkgYnJlYWs7XG4gICAgICAgICAgICB4MSA9IGtleShuZXdWYWx1ZXNbaTFdKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBncm91cEluY3JlbWVudCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQWRkIGFueSByZW1haW5pbmcgb2xkIGdyb3VwcyB0aGF0IHdlcmUgZ3JlYXRlciB0aGFuIGFsbCBuZXcga2V5cy5cbiAgICAgICAgLy8gTm8gaW5jcmVtZW50YWwgcmVkdWNlIGlzIG5lZWRlZDsgdGhlc2UgZ3JvdXBzIGhhdmUgbm8gbmV3IHJlY29yZHMuXG4gICAgICAgIC8vIEFsc28gcmVjb3JkIHRoZSBuZXcgaW5kZXggb2YgdGhlIG9sZCBncm91cC5cbiAgICAgICAgd2hpbGUgKGkwIDwgazApIHtcbiAgICAgICAgICBncm91cHNbcmVJbmRleFtpMF0gPSBrXSA9IG9sZEdyb3Vwc1tpMCsrXTtcbiAgICAgICAgICBncm91cEluY3JlbWVudCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gSWYgd2UgYWRkZWQgYW55IG5ldyBncm91cHMgYmVmb3JlIGFueSBvbGQgZ3JvdXBzLFxuICAgICAgICAvLyB1cGRhdGUgdGhlIGdyb3VwIGluZGV4IG9mIGFsbCB0aGUgb2xkIHJlY29yZHMuXG4gICAgICAgIGlmIChrID4gaTApIGZvciAoaTAgPSAwOyBpMCA8IG4wOyArK2kwKSB7XG4gICAgICAgICAgZ3JvdXBJbmRleFtpMF0gPSByZUluZGV4W2dyb3VwSW5kZXhbaTBdXTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIE1vZGlmeSB0aGUgdXBkYXRlIGFuZCByZXNldCBiZWhhdmlvciBiYXNlZCBvbiB0aGUgY2FyZGluYWxpdHkuXG4gICAgICAgIC8vIElmIHRoZSBjYXJkaW5hbGl0eSBpcyBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gb25lLCB0aGVuIHRoZSBncm91cEluZGV4XG4gICAgICAgIC8vIGlzIG5vdCBuZWVkZWQuIElmIHRoZSBjYXJkaW5hbGl0eSBpcyB6ZXJvLCB0aGVuIHRoZXJlIGFyZSBubyByZWNvcmRzXG4gICAgICAgIC8vIGFuZCB0aGVyZWZvcmUgbm8gZ3JvdXBzIHRvIHVwZGF0ZSBvciByZXNldC4gTm90ZSB0aGF0IHdlIGFsc28gbXVzdFxuICAgICAgICAvLyBjaGFuZ2UgdGhlIHJlZ2lzdGVyZWQgbGlzdGVuZXIgdG8gcG9pbnQgdG8gdGhlIG5ldyBtZXRob2QuXG4gICAgICAgIGogPSBmaWx0ZXJMaXN0ZW5lcnMuaW5kZXhPZih1cGRhdGUpO1xuICAgICAgICBpZiAoayA+IDEpIHtcbiAgICAgICAgICB1cGRhdGUgPSB1cGRhdGVNYW55O1xuICAgICAgICAgIHJlc2V0ID0gcmVzZXRNYW55O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmICghayAmJiBncm91cEFsbCkge1xuICAgICAgICAgICAgayA9IDE7XG4gICAgICAgICAgICBncm91cHMgPSBbe2tleTogbnVsbCwgdmFsdWU6IGluaXRpYWwoKX1dO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoayA9PT0gMSkge1xuICAgICAgICAgICAgdXBkYXRlID0gdXBkYXRlT25lO1xuICAgICAgICAgICAgcmVzZXQgPSByZXNldE9uZTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdXBkYXRlID0gY3Jvc3NmaWx0ZXJfbnVsbDtcbiAgICAgICAgICAgIHJlc2V0ID0gY3Jvc3NmaWx0ZXJfbnVsbDtcbiAgICAgICAgICB9XG4gICAgICAgICAgZ3JvdXBJbmRleCA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgZmlsdGVyTGlzdGVuZXJzW2pdID0gdXBkYXRlO1xuXG4gICAgICAgIC8vIENvdW50IHRoZSBudW1iZXIgb2YgYWRkZWQgZ3JvdXBzLFxuICAgICAgICAvLyBhbmQgd2lkZW4gdGhlIGdyb3VwIGluZGV4IGFzIG5lZWRlZC5cbiAgICAgICAgZnVuY3Rpb24gZ3JvdXBJbmNyZW1lbnQoKSB7XG4gICAgICAgICAgaWYgKCsrayA9PT0gZ3JvdXBDYXBhY2l0eSkge1xuICAgICAgICAgICAgcmVJbmRleCA9IGNyb3NzZmlsdGVyX2FycmF5V2lkZW4ocmVJbmRleCwgZ3JvdXBXaWR0aCA8PD0gMSk7XG4gICAgICAgICAgICBncm91cEluZGV4ID0gY3Jvc3NmaWx0ZXJfYXJyYXlXaWRlbihncm91cEluZGV4LCBncm91cFdpZHRoKTtcbiAgICAgICAgICAgIGdyb3VwQ2FwYWNpdHkgPSBjcm9zc2ZpbHRlcl9jYXBhY2l0eShncm91cFdpZHRoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gcmVtb3ZlRGF0YSgpIHtcbiAgICAgICAgaWYgKGsgPiAxKSB7XG4gICAgICAgICAgdmFyIG9sZEsgPSBrLFxuICAgICAgICAgICAgICBvbGRHcm91cHMgPSBncm91cHMsXG4gICAgICAgICAgICAgIHNlZW5Hcm91cHMgPSBjcm9zc2ZpbHRlcl9pbmRleChvbGRLLCBvbGRLKTtcblxuICAgICAgICAgIC8vIEZpbHRlciBvdXQgbm9uLW1hdGNoZXMgYnkgY29weWluZyBtYXRjaGluZyBncm91cCBpbmRleCBlbnRyaWVzIHRvXG4gICAgICAgICAgLy8gdGhlIGJlZ2lubmluZyBvZiB0aGUgYXJyYXkuXG4gICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGogPSAwOyBpIDwgbjsgKytpKSB7XG4gICAgICAgICAgICBpZiAoZmlsdGVyc1tpXSkge1xuICAgICAgICAgICAgICBzZWVuR3JvdXBzW2dyb3VwSW5kZXhbal0gPSBncm91cEluZGV4W2ldXSA9IDE7XG4gICAgICAgICAgICAgICsrajtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBSZWFzc2VtYmxlIGdyb3VwcyBpbmNsdWRpbmcgb25seSB0aG9zZSBncm91cHMgdGhhdCB3ZXJlIHJlZmVycmVkXG4gICAgICAgICAgLy8gdG8gYnkgbWF0Y2hpbmcgZ3JvdXAgaW5kZXggZW50cmllcy4gIE5vdGUgdGhlIG5ldyBncm91cCBpbmRleCBpblxuICAgICAgICAgIC8vIHNlZW5Hcm91cHMuXG4gICAgICAgICAgZ3JvdXBzID0gW10sIGsgPSAwO1xuICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBvbGRLOyArK2kpIHtcbiAgICAgICAgICAgIGlmIChzZWVuR3JvdXBzW2ldKSB7XG4gICAgICAgICAgICAgIHNlZW5Hcm91cHNbaV0gPSBrKys7XG4gICAgICAgICAgICAgIGdyb3Vwcy5wdXNoKG9sZEdyb3Vwc1tpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGsgPiAxKSB7XG4gICAgICAgICAgICAvLyBSZWluZGV4IHRoZSBncm91cCBpbmRleCB1c2luZyBzZWVuR3JvdXBzIHRvIGZpbmQgdGhlIG5ldyBpbmRleC5cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgajsgKytpKSBncm91cEluZGV4W2ldID0gc2Vlbkdyb3Vwc1tncm91cEluZGV4W2ldXTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZ3JvdXBJbmRleCA9IG51bGw7XG4gICAgICAgICAgfVxuICAgICAgICAgIGZpbHRlckxpc3RlbmVyc1tmaWx0ZXJMaXN0ZW5lcnMuaW5kZXhPZih1cGRhdGUpXSA9IGsgPiAxXG4gICAgICAgICAgICAgID8gKHJlc2V0ID0gcmVzZXRNYW55LCB1cGRhdGUgPSB1cGRhdGVNYW55KVxuICAgICAgICAgICAgICA6IGsgPT09IDEgPyAocmVzZXQgPSByZXNldE9uZSwgdXBkYXRlID0gdXBkYXRlT25lKVxuICAgICAgICAgICAgICA6IHJlc2V0ID0gdXBkYXRlID0gY3Jvc3NmaWx0ZXJfbnVsbDtcbiAgICAgICAgfSBlbHNlIGlmIChrID09PSAxKSB7XG4gICAgICAgICAgaWYgKGdyb3VwQWxsKSByZXR1cm47XG4gICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuOyArK2kpIGlmIChmaWx0ZXJzW2ldKSByZXR1cm47XG4gICAgICAgICAgZ3JvdXBzID0gW10sIGsgPSAwO1xuICAgICAgICAgIGZpbHRlckxpc3RlbmVyc1tmaWx0ZXJMaXN0ZW5lcnMuaW5kZXhPZih1cGRhdGUpXSA9XG4gICAgICAgICAgdXBkYXRlID0gcmVzZXQgPSBjcm9zc2ZpbHRlcl9udWxsO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFJlZHVjZXMgdGhlIHNwZWNpZmllZCBzZWxlY3RlZCBvciBkZXNlbGVjdGVkIHJlY29yZHMuXG4gICAgICAvLyBUaGlzIGZ1bmN0aW9uIGlzIG9ubHkgdXNlZCB3aGVuIHRoZSBjYXJkaW5hbGl0eSBpcyBncmVhdGVyIHRoYW4gMS5cbiAgICAgIGZ1bmN0aW9uIHVwZGF0ZU1hbnkoZmlsdGVyT25lLCBhZGRlZCwgcmVtb3ZlZCkge1xuICAgICAgICBpZiAoZmlsdGVyT25lID09PSBvbmUgfHwgcmVzZXROZWVkZWQpIHJldHVybjtcblxuICAgICAgICB2YXIgaSxcbiAgICAgICAgICAgIGssXG4gICAgICAgICAgICBuLFxuICAgICAgICAgICAgZztcblxuICAgICAgICAvLyBBZGQgdGhlIGFkZGVkIHZhbHVlcy5cbiAgICAgICAgZm9yIChpID0gMCwgbiA9IGFkZGVkLmxlbmd0aDsgaSA8IG47ICsraSkge1xuICAgICAgICAgIGlmICghKGZpbHRlcnNbayA9IGFkZGVkW2ldXSAmIHplcm8pKSB7XG4gICAgICAgICAgICBnID0gZ3JvdXBzW2dyb3VwSW5kZXhba11dO1xuICAgICAgICAgICAgZy52YWx1ZSA9IHJlZHVjZUFkZChnLnZhbHVlLCBkYXRhW2tdKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBSZW1vdmUgdGhlIHJlbW92ZWQgdmFsdWVzLlxuICAgICAgICBmb3IgKGkgPSAwLCBuID0gcmVtb3ZlZC5sZW5ndGg7IGkgPCBuOyArK2kpIHtcbiAgICAgICAgICBpZiAoKGZpbHRlcnNbayA9IHJlbW92ZWRbaV1dICYgemVybykgPT09IGZpbHRlck9uZSkge1xuICAgICAgICAgICAgZyA9IGdyb3Vwc1tncm91cEluZGV4W2tdXTtcbiAgICAgICAgICAgIGcudmFsdWUgPSByZWR1Y2VSZW1vdmUoZy52YWx1ZSwgZGF0YVtrXSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFJlZHVjZXMgdGhlIHNwZWNpZmllZCBzZWxlY3RlZCBvciBkZXNlbGVjdGVkIHJlY29yZHMuXG4gICAgICAvLyBUaGlzIGZ1bmN0aW9uIGlzIG9ubHkgdXNlZCB3aGVuIHRoZSBjYXJkaW5hbGl0eSBpcyAxLlxuICAgICAgZnVuY3Rpb24gdXBkYXRlT25lKGZpbHRlck9uZSwgYWRkZWQsIHJlbW92ZWQpIHtcbiAgICAgICAgaWYgKGZpbHRlck9uZSA9PT0gb25lIHx8IHJlc2V0TmVlZGVkKSByZXR1cm47XG5cbiAgICAgICAgdmFyIGksXG4gICAgICAgICAgICBrLFxuICAgICAgICAgICAgbixcbiAgICAgICAgICAgIGcgPSBncm91cHNbMF07XG5cbiAgICAgICAgLy8gQWRkIHRoZSBhZGRlZCB2YWx1ZXMuXG4gICAgICAgIGZvciAoaSA9IDAsIG4gPSBhZGRlZC5sZW5ndGg7IGkgPCBuOyArK2kpIHtcbiAgICAgICAgICBpZiAoIShmaWx0ZXJzW2sgPSBhZGRlZFtpXV0gJiB6ZXJvKSkge1xuICAgICAgICAgICAgZy52YWx1ZSA9IHJlZHVjZUFkZChnLnZhbHVlLCBkYXRhW2tdKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBSZW1vdmUgdGhlIHJlbW92ZWQgdmFsdWVzLlxuICAgICAgICBmb3IgKGkgPSAwLCBuID0gcmVtb3ZlZC5sZW5ndGg7IGkgPCBuOyArK2kpIHtcbiAgICAgICAgICBpZiAoKGZpbHRlcnNbayA9IHJlbW92ZWRbaV1dICYgemVybykgPT09IGZpbHRlck9uZSkge1xuICAgICAgICAgICAgZy52YWx1ZSA9IHJlZHVjZVJlbW92ZShnLnZhbHVlLCBkYXRhW2tdKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gUmVjb21wdXRlcyB0aGUgZ3JvdXAgcmVkdWNlIHZhbHVlcyBmcm9tIHNjcmF0Y2guXG4gICAgICAvLyBUaGlzIGZ1bmN0aW9uIGlzIG9ubHkgdXNlZCB3aGVuIHRoZSBjYXJkaW5hbGl0eSBpcyBncmVhdGVyIHRoYW4gMS5cbiAgICAgIGZ1bmN0aW9uIHJlc2V0TWFueSgpIHtcbiAgICAgICAgdmFyIGksXG4gICAgICAgICAgICBnO1xuXG4gICAgICAgIC8vIFJlc2V0IGFsbCBncm91cCB2YWx1ZXMuXG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBrOyArK2kpIHtcbiAgICAgICAgICBncm91cHNbaV0udmFsdWUgPSByZWR1Y2VJbml0aWFsKCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBBZGQgYW55IHNlbGVjdGVkIHJlY29yZHMuXG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBuOyArK2kpIHtcbiAgICAgICAgICBpZiAoIShmaWx0ZXJzW2ldICYgemVybykpIHtcbiAgICAgICAgICAgIGcgPSBncm91cHNbZ3JvdXBJbmRleFtpXV07XG4gICAgICAgICAgICBnLnZhbHVlID0gcmVkdWNlQWRkKGcudmFsdWUsIGRhdGFbaV0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBSZWNvbXB1dGVzIHRoZSBncm91cCByZWR1Y2UgdmFsdWVzIGZyb20gc2NyYXRjaC5cbiAgICAgIC8vIFRoaXMgZnVuY3Rpb24gaXMgb25seSB1c2VkIHdoZW4gdGhlIGNhcmRpbmFsaXR5IGlzIDEuXG4gICAgICBmdW5jdGlvbiByZXNldE9uZSgpIHtcbiAgICAgICAgdmFyIGksXG4gICAgICAgICAgICBnID0gZ3JvdXBzWzBdO1xuXG4gICAgICAgIC8vIFJlc2V0IHRoZSBzaW5nbGV0b24gZ3JvdXAgdmFsdWVzLlxuICAgICAgICBnLnZhbHVlID0gcmVkdWNlSW5pdGlhbCgpO1xuXG4gICAgICAgIC8vIEFkZCBhbnkgc2VsZWN0ZWQgcmVjb3Jkcy5cbiAgICAgICAgZm9yIChpID0gMDsgaSA8IG47ICsraSkge1xuICAgICAgICAgIGlmICghKGZpbHRlcnNbaV0gJiB6ZXJvKSkge1xuICAgICAgICAgICAgZy52YWx1ZSA9IHJlZHVjZUFkZChnLnZhbHVlLCBkYXRhW2ldKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gUmV0dXJucyB0aGUgYXJyYXkgb2YgZ3JvdXAgdmFsdWVzLCBpbiB0aGUgZGltZW5zaW9uJ3MgbmF0dXJhbCBvcmRlci5cbiAgICAgIGZ1bmN0aW9uIGFsbCgpIHtcbiAgICAgICAgaWYgKHJlc2V0TmVlZGVkKSByZXNldCgpLCByZXNldE5lZWRlZCA9IGZhbHNlO1xuICAgICAgICByZXR1cm4gZ3JvdXBzO1xuICAgICAgfVxuXG4gICAgICAvLyBSZXR1cm5zIGEgbmV3IGFycmF5IGNvbnRhaW5pbmcgdGhlIHRvcCBLIGdyb3VwIHZhbHVlcywgaW4gcmVkdWNlIG9yZGVyLlxuICAgICAgZnVuY3Rpb24gdG9wKGspIHtcbiAgICAgICAgdmFyIHRvcCA9IHNlbGVjdChhbGwoKSwgMCwgZ3JvdXBzLmxlbmd0aCwgayk7XG4gICAgICAgIHJldHVybiBoZWFwLnNvcnQodG9wLCAwLCB0b3AubGVuZ3RoKTtcbiAgICAgIH1cblxuICAgICAgLy8gU2V0cyB0aGUgcmVkdWNlIGJlaGF2aW9yIGZvciB0aGlzIGdyb3VwIHRvIHVzZSB0aGUgc3BlY2lmaWVkIGZ1bmN0aW9ucy5cbiAgICAgIC8vIFRoaXMgbWV0aG9kIGxhemlseSByZWNvbXB1dGVzIHRoZSByZWR1Y2UgdmFsdWVzLCB3YWl0aW5nIHVudGlsIG5lZWRlZC5cbiAgICAgIGZ1bmN0aW9uIHJlZHVjZShhZGQsIHJlbW92ZSwgaW5pdGlhbCkge1xuICAgICAgICByZWR1Y2VBZGQgPSBhZGQ7XG4gICAgICAgIHJlZHVjZVJlbW92ZSA9IHJlbW92ZTtcbiAgICAgICAgcmVkdWNlSW5pdGlhbCA9IGluaXRpYWw7XG4gICAgICAgIHJlc2V0TmVlZGVkID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIGdyb3VwO1xuICAgICAgfVxuXG4gICAgICAvLyBBIGNvbnZlbmllbmNlIG1ldGhvZCBmb3IgcmVkdWNpbmcgYnkgY291bnQuXG4gICAgICBmdW5jdGlvbiByZWR1Y2VDb3VudCgpIHtcbiAgICAgICAgcmV0dXJuIHJlZHVjZShjcm9zc2ZpbHRlcl9yZWR1Y2VJbmNyZW1lbnQsIGNyb3NzZmlsdGVyX3JlZHVjZURlY3JlbWVudCwgY3Jvc3NmaWx0ZXJfemVybyk7XG4gICAgICB9XG5cbiAgICAgIC8vIEEgY29udmVuaWVuY2UgbWV0aG9kIGZvciByZWR1Y2luZyBieSBzdW0odmFsdWUpLlxuICAgICAgZnVuY3Rpb24gcmVkdWNlU3VtKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiByZWR1Y2UoY3Jvc3NmaWx0ZXJfcmVkdWNlQWRkKHZhbHVlKSwgY3Jvc3NmaWx0ZXJfcmVkdWNlU3VidHJhY3QodmFsdWUpLCBjcm9zc2ZpbHRlcl96ZXJvKTtcbiAgICAgIH1cblxuICAgICAgLy8gU2V0cyB0aGUgcmVkdWNlIG9yZGVyLCB1c2luZyB0aGUgc3BlY2lmaWVkIGFjY2Vzc29yLlxuICAgICAgZnVuY3Rpb24gb3JkZXIodmFsdWUpIHtcbiAgICAgICAgc2VsZWN0ID0gaGVhcHNlbGVjdF9ieSh2YWx1ZU9mKTtcbiAgICAgICAgaGVhcCA9IGhlYXBfYnkodmFsdWVPZik7XG4gICAgICAgIGZ1bmN0aW9uIHZhbHVlT2YoZCkgeyByZXR1cm4gdmFsdWUoZC52YWx1ZSk7IH1cbiAgICAgICAgcmV0dXJuIGdyb3VwO1xuICAgICAgfVxuXG4gICAgICAvLyBBIGNvbnZlbmllbmNlIG1ldGhvZCBmb3IgbmF0dXJhbCBvcmRlcmluZyBieSByZWR1Y2UgdmFsdWUuXG4gICAgICBmdW5jdGlvbiBvcmRlck5hdHVyYWwoKSB7XG4gICAgICAgIHJldHVybiBvcmRlcihjcm9zc2ZpbHRlcl9pZGVudGl0eSk7XG4gICAgICB9XG5cbiAgICAgIC8vIFJldHVybnMgdGhlIGNhcmRpbmFsaXR5IG9mIHRoaXMgZ3JvdXAsIGlycmVzcGVjdGl2ZSBvZiBhbnkgZmlsdGVycy5cbiAgICAgIGZ1bmN0aW9uIHNpemUoKSB7XG4gICAgICAgIHJldHVybiBrO1xuICAgICAgfVxuXG4gICAgICAvLyBSZW1vdmVzIHRoaXMgZ3JvdXAgYW5kIGFzc29jaWF0ZWQgZXZlbnQgbGlzdGVuZXJzLlxuICAgICAgZnVuY3Rpb24gZGlzcG9zZSgpIHtcbiAgICAgICAgdmFyIGkgPSBmaWx0ZXJMaXN0ZW5lcnMuaW5kZXhPZih1cGRhdGUpO1xuICAgICAgICBpZiAoaSA+PSAwKSBmaWx0ZXJMaXN0ZW5lcnMuc3BsaWNlKGksIDEpO1xuICAgICAgICBpID0gaW5kZXhMaXN0ZW5lcnMuaW5kZXhPZihhZGQpO1xuICAgICAgICBpZiAoaSA+PSAwKSBpbmRleExpc3RlbmVycy5zcGxpY2UoaSwgMSk7XG4gICAgICAgIGkgPSByZW1vdmVEYXRhTGlzdGVuZXJzLmluZGV4T2YocmVtb3ZlRGF0YSk7XG4gICAgICAgIGlmIChpID49IDApIHJlbW92ZURhdGFMaXN0ZW5lcnMuc3BsaWNlKGksIDEpO1xuICAgICAgICByZXR1cm4gZ3JvdXA7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZWR1Y2VDb3VudCgpLm9yZGVyTmF0dXJhbCgpO1xuICAgIH1cblxuICAgIC8vIEEgY29udmVuaWVuY2UgZnVuY3Rpb24gZm9yIGdlbmVyYXRpbmcgYSBzaW5nbGV0b24gZ3JvdXAuXG4gICAgZnVuY3Rpb24gZ3JvdXBBbGwoKSB7XG4gICAgICB2YXIgZyA9IGdyb3VwKGNyb3NzZmlsdGVyX251bGwpLCBhbGwgPSBnLmFsbDtcbiAgICAgIGRlbGV0ZSBnLmFsbDtcbiAgICAgIGRlbGV0ZSBnLnRvcDtcbiAgICAgIGRlbGV0ZSBnLm9yZGVyO1xuICAgICAgZGVsZXRlIGcub3JkZXJOYXR1cmFsO1xuICAgICAgZGVsZXRlIGcuc2l6ZTtcbiAgICAgIGcudmFsdWUgPSBmdW5jdGlvbigpIHsgcmV0dXJuIGFsbCgpWzBdLnZhbHVlOyB9O1xuICAgICAgcmV0dXJuIGc7XG4gICAgfVxuXG4gICAgLy8gUmVtb3ZlcyB0aGlzIGRpbWVuc2lvbiBhbmQgYXNzb2NpYXRlZCBncm91cHMgYW5kIGV2ZW50IGxpc3RlbmVycy5cbiAgICBmdW5jdGlvbiBkaXNwb3NlKCkge1xuICAgICAgZGltZW5zaW9uR3JvdXBzLmZvckVhY2goZnVuY3Rpb24oZ3JvdXApIHsgZ3JvdXAuZGlzcG9zZSgpOyB9KTtcbiAgICAgIHZhciBpID0gZGF0YUxpc3RlbmVycy5pbmRleE9mKHByZUFkZCk7XG4gICAgICBpZiAoaSA+PSAwKSBkYXRhTGlzdGVuZXJzLnNwbGljZShpLCAxKTtcbiAgICAgIGkgPSBkYXRhTGlzdGVuZXJzLmluZGV4T2YocG9zdEFkZCk7XG4gICAgICBpZiAoaSA+PSAwKSBkYXRhTGlzdGVuZXJzLnNwbGljZShpLCAxKTtcbiAgICAgIGkgPSByZW1vdmVEYXRhTGlzdGVuZXJzLmluZGV4T2YocmVtb3ZlRGF0YSk7XG4gICAgICBpZiAoaSA+PSAwKSByZW1vdmVEYXRhTGlzdGVuZXJzLnNwbGljZShpLCAxKTtcbiAgICAgIG0gJj0gemVybztcbiAgICAgIHJldHVybiBmaWx0ZXJBbGwoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZGltZW5zaW9uO1xuICB9XG5cbiAgLy8gQSBjb252ZW5pZW5jZSBtZXRob2QgZm9yIGdyb3VwQWxsIG9uIGEgZHVtbXkgZGltZW5zaW9uLlxuICAvLyBUaGlzIGltcGxlbWVudGF0aW9uIGNhbiBiZSBvcHRpbWl6ZWQgc2luY2UgaXQgYWx3YXlzIGhhcyBjYXJkaW5hbGl0eSAxLlxuICBmdW5jdGlvbiBncm91cEFsbCgpIHtcbiAgICB2YXIgZ3JvdXAgPSB7XG4gICAgICByZWR1Y2U6IHJlZHVjZSxcbiAgICAgIHJlZHVjZUNvdW50OiByZWR1Y2VDb3VudCxcbiAgICAgIHJlZHVjZVN1bTogcmVkdWNlU3VtLFxuICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgZGlzcG9zZTogZGlzcG9zZSxcbiAgICAgIHJlbW92ZTogZGlzcG9zZSAvLyBmb3IgYmFja3dhcmRzLWNvbXBhdGliaWxpdHlcbiAgICB9O1xuXG4gICAgdmFyIHJlZHVjZVZhbHVlLFxuICAgICAgICByZWR1Y2VBZGQsXG4gICAgICAgIHJlZHVjZVJlbW92ZSxcbiAgICAgICAgcmVkdWNlSW5pdGlhbCxcbiAgICAgICAgcmVzZXROZWVkZWQgPSB0cnVlO1xuXG4gICAgLy8gVGhlIGdyb3VwIGxpc3RlbnMgdG8gdGhlIGNyb3NzZmlsdGVyIGZvciB3aGVuIGFueSBkaW1lbnNpb24gY2hhbmdlcywgc29cbiAgICAvLyB0aGF0IGl0IGNhbiB1cGRhdGUgdGhlIHJlZHVjZSB2YWx1ZS4gSXQgbXVzdCBhbHNvIGxpc3RlbiB0byB0aGUgcGFyZW50XG4gICAgLy8gZGltZW5zaW9uIGZvciB3aGVuIGRhdGEgaXMgYWRkZWQuXG4gICAgZmlsdGVyTGlzdGVuZXJzLnB1c2godXBkYXRlKTtcbiAgICBkYXRhTGlzdGVuZXJzLnB1c2goYWRkKTtcblxuICAgIC8vIEZvciBjb25zaXN0ZW5jeTsgYWN0dWFsbHkgYSBuby1vcCBzaW5jZSByZXNldE5lZWRlZCBpcyB0cnVlLlxuICAgIGFkZChkYXRhLCAwLCBuKTtcblxuICAgIC8vIEluY29ycG9yYXRlcyB0aGUgc3BlY2lmaWVkIG5ldyB2YWx1ZXMgaW50byB0aGlzIGdyb3VwLlxuICAgIGZ1bmN0aW9uIGFkZChuZXdEYXRhLCBuMCkge1xuICAgICAgdmFyIGk7XG5cbiAgICAgIGlmIChyZXNldE5lZWRlZCkgcmV0dXJuO1xuXG4gICAgICAvLyBBZGQgdGhlIGFkZGVkIHZhbHVlcy5cbiAgICAgIGZvciAoaSA9IG4wOyBpIDwgbjsgKytpKSB7XG4gICAgICAgIGlmICghZmlsdGVyc1tpXSkge1xuICAgICAgICAgIHJlZHVjZVZhbHVlID0gcmVkdWNlQWRkKHJlZHVjZVZhbHVlLCBkYXRhW2ldKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFJlZHVjZXMgdGhlIHNwZWNpZmllZCBzZWxlY3RlZCBvciBkZXNlbGVjdGVkIHJlY29yZHMuXG4gICAgZnVuY3Rpb24gdXBkYXRlKGZpbHRlck9uZSwgYWRkZWQsIHJlbW92ZWQpIHtcbiAgICAgIHZhciBpLFxuICAgICAgICAgIGssXG4gICAgICAgICAgbjtcblxuICAgICAgaWYgKHJlc2V0TmVlZGVkKSByZXR1cm47XG5cbiAgICAgIC8vIEFkZCB0aGUgYWRkZWQgdmFsdWVzLlxuICAgICAgZm9yIChpID0gMCwgbiA9IGFkZGVkLmxlbmd0aDsgaSA8IG47ICsraSkge1xuICAgICAgICBpZiAoIWZpbHRlcnNbayA9IGFkZGVkW2ldXSkge1xuICAgICAgICAgIHJlZHVjZVZhbHVlID0gcmVkdWNlQWRkKHJlZHVjZVZhbHVlLCBkYXRhW2tdKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBSZW1vdmUgdGhlIHJlbW92ZWQgdmFsdWVzLlxuICAgICAgZm9yIChpID0gMCwgbiA9IHJlbW92ZWQubGVuZ3RoOyBpIDwgbjsgKytpKSB7XG4gICAgICAgIGlmIChmaWx0ZXJzW2sgPSByZW1vdmVkW2ldXSA9PT0gZmlsdGVyT25lKSB7XG4gICAgICAgICAgcmVkdWNlVmFsdWUgPSByZWR1Y2VSZW1vdmUocmVkdWNlVmFsdWUsIGRhdGFba10pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gUmVjb21wdXRlcyB0aGUgZ3JvdXAgcmVkdWNlIHZhbHVlIGZyb20gc2NyYXRjaC5cbiAgICBmdW5jdGlvbiByZXNldCgpIHtcbiAgICAgIHZhciBpO1xuXG4gICAgICByZWR1Y2VWYWx1ZSA9IHJlZHVjZUluaXRpYWwoKTtcblxuICAgICAgZm9yIChpID0gMDsgaSA8IG47ICsraSkge1xuICAgICAgICBpZiAoIWZpbHRlcnNbaV0pIHtcbiAgICAgICAgICByZWR1Y2VWYWx1ZSA9IHJlZHVjZUFkZChyZWR1Y2VWYWx1ZSwgZGF0YVtpXSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBTZXRzIHRoZSByZWR1Y2UgYmVoYXZpb3IgZm9yIHRoaXMgZ3JvdXAgdG8gdXNlIHRoZSBzcGVjaWZpZWQgZnVuY3Rpb25zLlxuICAgIC8vIFRoaXMgbWV0aG9kIGxhemlseSByZWNvbXB1dGVzIHRoZSByZWR1Y2UgdmFsdWUsIHdhaXRpbmcgdW50aWwgbmVlZGVkLlxuICAgIGZ1bmN0aW9uIHJlZHVjZShhZGQsIHJlbW92ZSwgaW5pdGlhbCkge1xuICAgICAgcmVkdWNlQWRkID0gYWRkO1xuICAgICAgcmVkdWNlUmVtb3ZlID0gcmVtb3ZlO1xuICAgICAgcmVkdWNlSW5pdGlhbCA9IGluaXRpYWw7XG4gICAgICByZXNldE5lZWRlZCA9IHRydWU7XG4gICAgICByZXR1cm4gZ3JvdXA7XG4gICAgfVxuXG4gICAgLy8gQSBjb252ZW5pZW5jZSBtZXRob2QgZm9yIHJlZHVjaW5nIGJ5IGNvdW50LlxuICAgIGZ1bmN0aW9uIHJlZHVjZUNvdW50KCkge1xuICAgICAgcmV0dXJuIHJlZHVjZShjcm9zc2ZpbHRlcl9yZWR1Y2VJbmNyZW1lbnQsIGNyb3NzZmlsdGVyX3JlZHVjZURlY3JlbWVudCwgY3Jvc3NmaWx0ZXJfemVybyk7XG4gICAgfVxuXG4gICAgLy8gQSBjb252ZW5pZW5jZSBtZXRob2QgZm9yIHJlZHVjaW5nIGJ5IHN1bSh2YWx1ZSkuXG4gICAgZnVuY3Rpb24gcmVkdWNlU3VtKHZhbHVlKSB7XG4gICAgICByZXR1cm4gcmVkdWNlKGNyb3NzZmlsdGVyX3JlZHVjZUFkZCh2YWx1ZSksIGNyb3NzZmlsdGVyX3JlZHVjZVN1YnRyYWN0KHZhbHVlKSwgY3Jvc3NmaWx0ZXJfemVybyk7XG4gICAgfVxuXG4gICAgLy8gUmV0dXJucyB0aGUgY29tcHV0ZWQgcmVkdWNlIHZhbHVlLlxuICAgIGZ1bmN0aW9uIHZhbHVlKCkge1xuICAgICAgaWYgKHJlc2V0TmVlZGVkKSByZXNldCgpLCByZXNldE5lZWRlZCA9IGZhbHNlO1xuICAgICAgcmV0dXJuIHJlZHVjZVZhbHVlO1xuICAgIH1cblxuICAgIC8vIFJlbW92ZXMgdGhpcyBncm91cCBhbmQgYXNzb2NpYXRlZCBldmVudCBsaXN0ZW5lcnMuXG4gICAgZnVuY3Rpb24gZGlzcG9zZSgpIHtcbiAgICAgIHZhciBpID0gZmlsdGVyTGlzdGVuZXJzLmluZGV4T2YodXBkYXRlKTtcbiAgICAgIGlmIChpID49IDApIGZpbHRlckxpc3RlbmVycy5zcGxpY2UoaSk7XG4gICAgICBpID0gZGF0YUxpc3RlbmVycy5pbmRleE9mKGFkZCk7XG4gICAgICBpZiAoaSA+PSAwKSBkYXRhTGlzdGVuZXJzLnNwbGljZShpKTtcbiAgICAgIHJldHVybiBncm91cDtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVkdWNlQ291bnQoKTtcbiAgfVxuXG4gIC8vIFJldHVybnMgdGhlIG51bWJlciBvZiByZWNvcmRzIGluIHRoaXMgY3Jvc3NmaWx0ZXIsIGlycmVzcGVjdGl2ZSBvZiBhbnkgZmlsdGVycy5cbiAgZnVuY3Rpb24gc2l6ZSgpIHtcbiAgICByZXR1cm4gbjtcbiAgfVxuXG4gIHJldHVybiBhcmd1bWVudHMubGVuZ3RoXG4gICAgICA/IGFkZChhcmd1bWVudHNbMF0pXG4gICAgICA6IGNyb3NzZmlsdGVyO1xufVxuXG4vLyBSZXR1cm5zIGFuIGFycmF5IG9mIHNpemUgbiwgYmlnIGVub3VnaCB0byBzdG9yZSBpZHMgdXAgdG8gbS5cbmZ1bmN0aW9uIGNyb3NzZmlsdGVyX2luZGV4KG4sIG0pIHtcbiAgcmV0dXJuIChtIDwgMHgxMDFcbiAgICAgID8gY3Jvc3NmaWx0ZXJfYXJyYXk4IDogbSA8IDB4MTAwMDFcbiAgICAgID8gY3Jvc3NmaWx0ZXJfYXJyYXkxNlxuICAgICAgOiBjcm9zc2ZpbHRlcl9hcnJheTMyKShuKTtcbn1cblxuLy8gQ29uc3RydWN0cyBhIG5ldyBhcnJheSBvZiBzaXplIG4sIHdpdGggc2VxdWVudGlhbCB2YWx1ZXMgZnJvbSAwIHRvIG4gLSAxLlxuZnVuY3Rpb24gY3Jvc3NmaWx0ZXJfcmFuZ2Uobikge1xuICB2YXIgcmFuZ2UgPSBjcm9zc2ZpbHRlcl9pbmRleChuLCBuKTtcbiAgZm9yICh2YXIgaSA9IC0xOyArK2kgPCBuOykgcmFuZ2VbaV0gPSBpO1xuICByZXR1cm4gcmFuZ2U7XG59XG5cbmZ1bmN0aW9uIGNyb3NzZmlsdGVyX2NhcGFjaXR5KHcpIHtcbiAgcmV0dXJuIHcgPT09IDhcbiAgICAgID8gMHgxMDAgOiB3ID09PSAxNlxuICAgICAgPyAweDEwMDAwXG4gICAgICA6IDB4MTAwMDAwMDAwO1xufVxufSkodHlwZW9mIGV4cG9ydHMgIT09ICd1bmRlZmluZWQnICYmIGV4cG9ydHMgfHwgdGhpcyk7XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiBub2RlX21vZHVsZXMvY3Jvc3NmaWx0ZXIvY3Jvc3NmaWx0ZXIuanNcbiAqKi8iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUpBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7OztBQVdBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFLQTtBQU5BO0FBQ0E7Ozs7Ozs7QUFiQTtBQTRCQTtBQUNBO0FBQ0E7QUFGQTtBQUtBO0FBTkE7QUFDQTtBQVFBO0FBQ0E7QUFDQTtBQXRDQTtBQXdDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFDQTs7O0FBTkE7QUFlQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBQ0E7Ozs7QUFmQTtBQXlCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQVZBO0FBQ0E7QUFZQTtBQUNBO0FBdENBO0FBd0NBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQUZBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQUZBO0FBQ0E7QUFTQTtBQXBCQTtBQUNBO0FBc0JBO0FBOUJBO0FBZ0NBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUpBO0FBTUE7QUFQQTtBQUNBO0FBU0E7QUFaQTs7OztBQTdJQTtBQUNBO0FBK0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUtBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBOztBQWhCQTtBQW1CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBOzs7QUE5QkE7QUFrQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7Ozs7QUF6Q0E7QUE4Q0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7O0FBZUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBTEE7QUFDQTs7Ozs7Ozs7QUFjQTtBQUNBO0FBQ0E7QUFDQTs7O0FBREE7QUFBQTs7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBT0E7QUFDQTs7O0FBRkE7QUFOQTtBQVBBO0FBVEE7QUFSQTtBQWhCQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUEwRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBTEE7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUZBO0FBQUE7O0FBUUE7O0FBRUE7QUFDQTtBQUNBO0FBSkE7O0FBT0E7QUFDQTtBQVJBO0FBVUE7QUFsQkE7QUFGQTtBQURBO0FBUEE7QUFGQTtBQTNFQTtBQUNBOzs7Ozs7QUEvQ0E7QUFxS0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7QUF4S0E7QUFnTEE7QUFDQTtBQUNBOzs7QUFHQTtBQUhBO0FBQ0E7Ozs7O0FBbkxBO0FBNkxBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7OztBQUpBO0FBc0JBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFMQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRkE7QUFBQTs7QUFRQTs7QUFFQTtBQUNBO0FBQ0E7QUFKQTs7QUFPQTtBQUNBO0FBUkE7QUFVQTtBQWxCQTtBQUZBO0FBREE7QUFQQTtBQUZBO0FBckJBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7O0FBN0xBO0FBQUE7QUFDQTtBQXNRQTtBQWhSQTtBQUNBO0FBa1JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQURBO0FBRUE7QUFGQTtBQUdBO0FBSEE7QUFLQTtBQUNBO0FBUkE7QUFaQTtBQUNBO0FBdUJBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFIQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSEE7QUFDQTtBQVFBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFEQTtBQUNBO0FBR0E7QUFDQTtBQURBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFEQTtBQURBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFEQTtBQURBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFDQTtBQU9BOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBO0FBQ0E7O0FBakJBO0FBb0JBO0FBQ0E7QUFDQTs7Ozs7QUFIQTtBQVNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFIQTtBQUNBO0FBS0E7QUFkQTtBQUNBOztBQXBCQTtBQXNDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7O0FBSkE7QUFTQTtBQUFBO0FBQ0E7O0FBVkE7QUFZQTtBQUFBO0FBQ0E7O0FBYkE7QUFnQkE7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQU1BO0FBQ0E7QUF0QkE7QUFDQTs7QUF0Q0E7QUFnRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBWEE7QUFDQTtBQWFBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBO0FBQUE7QUFBQTtBQUNBOztBQUNBOztBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FBNUJBO0FBaUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFwQ0E7QUF3Q0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBOzs7QUE3Q0E7QUFDQTs7QUFrREE7QUFDQTtBQUNBO0FBQ0E7O0FBTkE7QUFRQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQURBO0FBS0E7QUFDQTtBQU5BO0FBQ0E7OztBQVZBO0FBcUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFoQ0E7QUFtQ0E7QUFDQTs7QUFwQ0E7QUF1Q0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBTEE7QUFEQTtBQUNBOztBQXZDQTtBQWtEQTtBQUNBO0FBRkE7QUFDQTs7QUFsREE7QUF3REE7QUFDQTtBQUZBO0FBQ0E7O0FBeERBO0FBQUE7QUFDQTs7QUFqREE7QUFrSEE7QUFBQTtBQUFBO0FBQ0E7QUFGQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFEQTtBQU9BO0FBQ0E7QUFDQTs7QUFWQTtBQWFBO0FBYkE7QUFDQTs7O0FBdkhBO0FBeUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQWpCQTtBQW9CQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBTUE7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQUNBOztBQXpCQTtBQWlDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBTUE7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBL0NBO0FBQ0E7Ozs7O0FBeklBO0FBK0xBO0FBREE7QUFDQTs7QUEvTEE7QUF3TUE7QUFEQTtBQUNBOzs7QUF4TUE7QUE4TUE7QUFEQTtBQUNBOztBQTlNQTtBQW1OQTtBQURBO0FBQ0E7O0FBbk5BO0FBd05BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFSQTtBQUNBO0FBVUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQURBO0FBTUE7QUFBQTtBQUFBO0FBYkE7QUFDQTs7O0FBbk9BO0FBcVBBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBQ0E7QUFNQTtBQVpBO0FBQ0E7OztBQXJQQTtBQXNRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUxBO0FBQ0E7QUFPQTtBQWJBO0FBQ0E7O0FBdFFBO0FBdVJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFWQTtBQUNBOztBQUZBO0FBQ0E7QUFnQkE7O0FBQ0E7O0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQWpDQTtBQXNDQTtBQUNBO0FBQ0E7O0FBeENBO0FBQ0E7OztBQURBO0FBK0NBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7QUFDQTs7QUFkQTtBQUNBOzs7QUFEQTtBQXFCQTtBQUNBOztBQXRCQTtBQUNBOztBQURBO0FBQ0E7O0FBREE7QUFDQTs7O0FBaUNBO0FBQ0E7QUFDQTs7QUFGQTtBQUNBOztBQURBO0FBQUE7QUFTQTtBQVRBO0FBQ0E7O0FBTEE7QUFDQTs7O0FBREE7QUFzQkE7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQUNBO0FBTUE7QUE1QkE7QUFDQTs7OztBQS9CQTtBQWlFQTtBQUNBO0FBRkE7QUFDQTs7O0FBakVBO0FBd0VBO0FBREE7QUFDQTs7Ozs7O0FBeEVBO0FBaUZBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFMQTtBQU9BO0FBZkE7QUFpQkE7QUFDQTs7O0FBbkdBO0FBdUdBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFEQTtBQXRHQTtBQUNBO0FBOEdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBSkE7QUFRQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBQ0E7Ozs7QUFSQTtBQWtCQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFDQTtBQU1BOztBQUVBO0FBRkE7QUFJQTtBQUpBO0FBTUE7QUEvQkE7QUFvQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQXBDQTtBQUNBOzs7QUE5SkE7QUE2TUE7QUFDQTtBQUNBO0FBQ0E7O0FBSkE7QUFVQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBQ0E7O0FBVkE7QUFrQkE7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQWpCQTtBQUNBOzs7QUE3TUE7QUF3T0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBUEE7QUFVQTtBQUNBO0FBREE7QUFEQTtBQUNBOztBQVZBO0FBaUJBO0FBQ0E7QUFEQTtBQURBO0FBaEJBO0FBQ0E7OztBQXhPQTtBQWlRQTtBQUNBOztBQUZBO0FBTUE7QUFEQTtBQUNBOztBQU5BO0FBV0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQVZBO0FBQ0E7OztBQWpRQTtBQXFSQTtBQUNBO0FBQ0E7O0FBSEE7QUFDQTs7QUFEQTtBQVNBO0FBQ0E7QUFEQTtBQURBO0FBUkE7QUFDQTs7QUFyUkE7QUFxU0E7QUFDQTtBQUZBO0FBQ0E7O0FBclNBO0FBMlNBO0FBQ0E7QUFGQTtBQUNBOzs7QUEzU0E7QUFrVEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBQ0E7O0FBbFRBO0FBMlRBO0FBREE7QUFDQTs7QUEzVEE7QUFnVUE7QUFEQTtBQUNBOztBQWhVQTtBQXFVQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFKQTtBQUNBOztBQXJVQTtBQTZVQTtBQURBO0FBQ0E7O0FBN1VBO0FBa1ZBO0FBREE7QUFDQTs7QUFsVkE7QUF1VkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFQQTtBQUNBO0FBU0E7QUFoV0E7QUFDQTs7QUF2UkE7QUEybkJBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFSQTtBQUNBOztBQTNuQkE7QUF1b0JBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFUQTtBQUNBO0FBV0E7QUFscEJBO0FBQ0E7OztBQWhFQTtBQXV0QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFOQTtBQUNBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FBZkE7QUFvQkE7QUFDQTs7QUFyQkE7QUFDQTs7QUFEQTtBQTJCQTtBQUNBO0FBQ0E7QUFDQTs7QUFKQTtBQU9BO0FBQ0E7QUFEQTtBQURBO0FBTkE7QUFDQTs7QUEzQkE7QUF5Q0E7QUFDQTtBQUdBO0FBQ0E7O0FBTkE7QUFTQTtBQUNBO0FBREE7QUFEQTtBQUNBOztBQVRBO0FBZ0JBO0FBQ0E7QUFEQTtBQURBO0FBZkE7QUFDQTs7QUF6Q0E7QUFnRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQURBO0FBTEE7QUFDQTs7O0FBaEVBO0FBOEVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQUNBOztBQTlFQTtBQXVGQTtBQURBO0FBQ0E7O0FBdkZBO0FBNEZBO0FBREE7QUFDQTs7QUE1RkE7QUFpR0E7QUFDQTtBQUZBO0FBQ0E7O0FBakdBO0FBdUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQUNBO0FBT0E7QUE5R0E7QUFDQTs7QUF2dEJBO0FBeTBCQTtBQURBO0FBQ0E7QUFHQTtBQTUwQkE7QUFDQTs7QUFuaEJBO0FBcTJDQTtBQURBO0FBQ0E7O0FBcjJDQTtBQTYyQ0E7QUFDQTtBQUNBO0FBSEE7QUFDQTtBQUtBO0FBQ0E7QUFEQTtBQWwzQ0EiLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 4 */
/***/ function(module, exports) {

	eval("'use strict';\n\nvar hasOwn = Object.prototype.hasOwnProperty;\nvar toStr = Object.prototype.toString;\n\nvar isArray = function isArray(arr) {\n\tif (typeof Array.isArray === 'function') {\n\t\treturn Array.isArray(arr);\n\t}\n\n\treturn toStr.call(arr) === '[object Array]';\n};\n\nvar isPlainObject = function isPlainObject(obj) {\n\tif (!obj || toStr.call(obj) !== '[object Object]') {\n\t\treturn false;\n\t}\n\n\tvar hasOwnConstructor = hasOwn.call(obj, 'constructor');\n\tvar hasIsPrototypeOf = obj.constructor && obj.constructor.prototype && hasOwn.call(obj.constructor.prototype, 'isPrototypeOf');\n\t// Not own constructor property must be Object\n\tif (obj.constructor && !hasOwnConstructor && !hasIsPrototypeOf) {\n\t\treturn false;\n\t}\n\n\t// Own properties are enumerated firstly, so to speed up,\n\t// if last one is own, then all properties are own.\n\tvar key;\n\tfor (key in obj) {/**/}\n\n\treturn typeof key === 'undefined' || hasOwn.call(obj, key);\n};\n\nmodule.exports = function extend() {\n\tvar options,\n\t    name,\n\t    src,\n\t    copy,\n\t    copyIsArray,\n\t    clone,\n\t    target = arguments[0],\n\t    i = 1,\n\t    length = arguments.length,\n\t    deep = false;\n\n\t// Handle a deep copy situation\n\tif (typeof target === 'boolean') {\n\t\tdeep = target;\n\t\ttarget = arguments[1] || {};\n\t\t// skip the boolean and the target\n\t\ti = 2;\n\t} else if (typeof target !== 'object' && typeof target !== 'function' || target == null) {\n\t\ttarget = {};\n\t}\n\n\tfor (; i < length; ++i) {\n\t\toptions = arguments[i];\n\t\t// Only deal with non-null/undefined values\n\t\tif (options != null) {\n\t\t\t// Extend the base object\n\t\t\tfor (name in options) {\n\t\t\t\tsrc = target[name];\n\t\t\t\tcopy = options[name];\n\n\t\t\t\t// Prevent never-ending loop\n\t\t\t\tif (target !== copy) {\n\t\t\t\t\t// Recurse if we're merging plain objects or arrays\n\t\t\t\t\tif (deep && copy && (isPlainObject(copy) || (copyIsArray = isArray(copy)))) {\n\t\t\t\t\t\tif (copyIsArray) {\n\t\t\t\t\t\t\tcopyIsArray = false;\n\t\t\t\t\t\t\tclone = src && isArray(src) ? src : [];\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tclone = src && isPlainObject(src) ? src : {};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Never move original objects, clone them\n\t\t\t\t\t\ttarget[name] = extend(deep, clone, copy);\n\n\t\t\t\t\t\t// Don't bring in undefined values\n\t\t\t\t\t} else if (typeof copy !== 'undefined') {\n\t\t\t\t\t\t\ttarget[name] = copy;\n\t\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Return the modified object\n\treturn target;\n};//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9ub2RlX21vZHVsZXMvZXh0ZW5kL2luZGV4LmpzP2U1YjkiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG52YXIgaGFzT3duID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcbnZhciB0b1N0ciA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7XG5cbnZhciBpc0FycmF5ID0gZnVuY3Rpb24gaXNBcnJheShhcnIpIHtcblx0aWYgKHR5cGVvZiBBcnJheS5pc0FycmF5ID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0cmV0dXJuIEFycmF5LmlzQXJyYXkoYXJyKTtcblx0fVxuXG5cdHJldHVybiB0b1N0ci5jYWxsKGFycikgPT09ICdbb2JqZWN0IEFycmF5XSc7XG59O1xuXG52YXIgaXNQbGFpbk9iamVjdCA9IGZ1bmN0aW9uIGlzUGxhaW5PYmplY3Qob2JqKSB7XG5cdGlmICghb2JqIHx8IHRvU3RyLmNhbGwob2JqKSAhPT0gJ1tvYmplY3QgT2JqZWN0XScpIHtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHR2YXIgaGFzT3duQ29uc3RydWN0b3IgPSBoYXNPd24uY2FsbChvYmosICdjb25zdHJ1Y3RvcicpO1xuXHR2YXIgaGFzSXNQcm90b3R5cGVPZiA9IG9iai5jb25zdHJ1Y3RvciAmJiBvYmouY29uc3RydWN0b3IucHJvdG90eXBlICYmIGhhc093bi5jYWxsKG9iai5jb25zdHJ1Y3Rvci5wcm90b3R5cGUsICdpc1Byb3RvdHlwZU9mJyk7XG5cdC8vIE5vdCBvd24gY29uc3RydWN0b3IgcHJvcGVydHkgbXVzdCBiZSBPYmplY3Rcblx0aWYgKG9iai5jb25zdHJ1Y3RvciAmJiAhaGFzT3duQ29uc3RydWN0b3IgJiYgIWhhc0lzUHJvdG90eXBlT2YpIHtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHQvLyBPd24gcHJvcGVydGllcyBhcmUgZW51bWVyYXRlZCBmaXJzdGx5LCBzbyB0byBzcGVlZCB1cCxcblx0Ly8gaWYgbGFzdCBvbmUgaXMgb3duLCB0aGVuIGFsbCBwcm9wZXJ0aWVzIGFyZSBvd24uXG5cdHZhciBrZXk7XG5cdGZvciAoa2V5IGluIG9iaikgey8qKi99XG5cblx0cmV0dXJuIHR5cGVvZiBrZXkgPT09ICd1bmRlZmluZWQnIHx8IGhhc093bi5jYWxsKG9iaiwga2V5KTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZXh0ZW5kKCkge1xuXHR2YXIgb3B0aW9ucywgbmFtZSwgc3JjLCBjb3B5LCBjb3B5SXNBcnJheSwgY2xvbmUsXG5cdFx0dGFyZ2V0ID0gYXJndW1lbnRzWzBdLFxuXHRcdGkgPSAxLFxuXHRcdGxlbmd0aCA9IGFyZ3VtZW50cy5sZW5ndGgsXG5cdFx0ZGVlcCA9IGZhbHNlO1xuXG5cdC8vIEhhbmRsZSBhIGRlZXAgY29weSBzaXR1YXRpb25cblx0aWYgKHR5cGVvZiB0YXJnZXQgPT09ICdib29sZWFuJykge1xuXHRcdGRlZXAgPSB0YXJnZXQ7XG5cdFx0dGFyZ2V0ID0gYXJndW1lbnRzWzFdIHx8IHt9O1xuXHRcdC8vIHNraXAgdGhlIGJvb2xlYW4gYW5kIHRoZSB0YXJnZXRcblx0XHRpID0gMjtcblx0fSBlbHNlIGlmICgodHlwZW9mIHRhcmdldCAhPT0gJ29iamVjdCcgJiYgdHlwZW9mIHRhcmdldCAhPT0gJ2Z1bmN0aW9uJykgfHwgdGFyZ2V0ID09IG51bGwpIHtcblx0XHR0YXJnZXQgPSB7fTtcblx0fVxuXG5cdGZvciAoOyBpIDwgbGVuZ3RoOyArK2kpIHtcblx0XHRvcHRpb25zID0gYXJndW1lbnRzW2ldO1xuXHRcdC8vIE9ubHkgZGVhbCB3aXRoIG5vbi1udWxsL3VuZGVmaW5lZCB2YWx1ZXNcblx0XHRpZiAob3B0aW9ucyAhPSBudWxsKSB7XG5cdFx0XHQvLyBFeHRlbmQgdGhlIGJhc2Ugb2JqZWN0XG5cdFx0XHRmb3IgKG5hbWUgaW4gb3B0aW9ucykge1xuXHRcdFx0XHRzcmMgPSB0YXJnZXRbbmFtZV07XG5cdFx0XHRcdGNvcHkgPSBvcHRpb25zW25hbWVdO1xuXG5cdFx0XHRcdC8vIFByZXZlbnQgbmV2ZXItZW5kaW5nIGxvb3Bcblx0XHRcdFx0aWYgKHRhcmdldCAhPT0gY29weSkge1xuXHRcdFx0XHRcdC8vIFJlY3Vyc2UgaWYgd2UncmUgbWVyZ2luZyBwbGFpbiBvYmplY3RzIG9yIGFycmF5c1xuXHRcdFx0XHRcdGlmIChkZWVwICYmIGNvcHkgJiYgKGlzUGxhaW5PYmplY3QoY29weSkgfHwgKGNvcHlJc0FycmF5ID0gaXNBcnJheShjb3B5KSkpKSB7XG5cdFx0XHRcdFx0XHRpZiAoY29weUlzQXJyYXkpIHtcblx0XHRcdFx0XHRcdFx0Y29weUlzQXJyYXkgPSBmYWxzZTtcblx0XHRcdFx0XHRcdFx0Y2xvbmUgPSBzcmMgJiYgaXNBcnJheShzcmMpID8gc3JjIDogW107XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRjbG9uZSA9IHNyYyAmJiBpc1BsYWluT2JqZWN0KHNyYykgPyBzcmMgOiB7fTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0Ly8gTmV2ZXIgbW92ZSBvcmlnaW5hbCBvYmplY3RzLCBjbG9uZSB0aGVtXG5cdFx0XHRcdFx0XHR0YXJnZXRbbmFtZV0gPSBleHRlbmQoZGVlcCwgY2xvbmUsIGNvcHkpO1xuXG5cdFx0XHRcdFx0Ly8gRG9uJ3QgYnJpbmcgaW4gdW5kZWZpbmVkIHZhbHVlc1xuXHRcdFx0XHRcdH0gZWxzZSBpZiAodHlwZW9mIGNvcHkgIT09ICd1bmRlZmluZWQnKSB7XG5cdFx0XHRcdFx0XHR0YXJnZXRbbmFtZV0gPSBjb3B5O1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdC8vIFJldHVybiB0aGUgbW9kaWZpZWQgb2JqZWN0XG5cdHJldHVybiB0YXJnZXQ7XG59O1xuXG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiBub2RlX21vZHVsZXMvZXh0ZW5kL2luZGV4LmpzXG4gKiovIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUdBO0FBTEE7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFHQTtBQUNBOztBQU5BO0FBU0E7QUFEQTtBQUNBOzs7QUFUQTtBQWVBO0FBQ0E7QUFDQTtBQWpCQTtBQUNBO0FBbUJBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFOQTtBQVNBO0FBQ0E7O0FBRkE7QUFBQTtBQU1BO0FBREE7QUFDQTtBQUdBO0FBQ0E7O0FBREE7O0FBS0E7QUFDQTtBQUNBO0FBQ0E7O0FBSEE7O0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBSkE7QUFDQTs7QUFGQTtBQUNBOztBQURBO0FBYUE7QUFEQTtBQWRBO0FBTEE7QUFGQTtBQUhBO0FBQ0E7O0FBbEJBO0FBQUEiLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 5 */
/***/ function(module, exports) {

	eval("\n/* Utility functions\n * ----------------------------------------------------------------------- */\nmodule.exports = {\n  normal_name: function (d, max_char) {\n    var inst_name = d.name.replace(/_/g, ' ').split('#')[0];\n    if (inst_name.length > max_char) {\n      inst_name = inst_name.substring(0, max_char) + '..';\n    }\n    return inst_name;\n  },\n  is_supported_order: function (order) {\n    return order === 'ini' || order === 'clust' || order === 'rank' || order === 'class';\n  },\n\n  /* Returns whether or not an object has a certain property.\n   */\n  has: function (obj, key) {\n    return obj != null && hasOwnProperty.call(obj, key);\n  },\n\n  /* Returns true if the object is undefined.\n   */\n  is_undefined: function (obj) {\n    return obj === void 0;\n  },\n\n  /* Mixes two objects in together, overwriting a target with a source.\n   */\n  extend: function (target, source) {\n    target = target || {};\n    for (var prop in source) {\n      if (typeof source[prop] === 'object') {\n        target[prop] = this.extend(target[prop], source[prop]);\n      } else {\n        target[prop] = source[prop];\n      }\n    }\n    return target;\n  }\n};//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvdXRpbHMuanM/MmI0YyJdLCJzb3VyY2VzQ29udGVudCI6WyJcbi8qIFV0aWxpdHkgZnVuY3Rpb25zXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xubW9kdWxlLmV4cG9ydHMgPSB7XG4gIG5vcm1hbF9uYW1lOiBmdW5jdGlvbihkLCBtYXhfY2hhcikge1xuICAgIHZhciBpbnN0X25hbWUgPSBkLm5hbWUucmVwbGFjZSgvXy9nLCAnICcpLnNwbGl0KCcjJylbMF07XG4gICAgaWYgKGluc3RfbmFtZS5sZW5ndGggPiBtYXhfY2hhcikge1xuICAgICAgaW5zdF9uYW1lID0gaW5zdF9uYW1lLnN1YnN0cmluZygwLCBtYXhfY2hhcikgKyAnLi4nO1xuICAgIH1cbiAgICByZXR1cm4gaW5zdF9uYW1lO1xuICB9LFxuICBpc19zdXBwb3J0ZWRfb3JkZXI6IGZ1bmN0aW9uKG9yZGVyKSB7XG4gICAgcmV0dXJuIG9yZGVyID09PSAnaW5pJyB8fCBvcmRlciA9PT0gJ2NsdXN0JyB8fCBvcmRlciA9PT0gJ3JhbmsnIHx8IG9yZGVyID09PSAnY2xhc3MnO1xuICB9LFxuXG4gIC8qIFJldHVybnMgd2hldGhlciBvciBub3QgYW4gb2JqZWN0IGhhcyBhIGNlcnRhaW4gcHJvcGVydHkuXG4gICAqL1xuICBoYXM6IGZ1bmN0aW9uKG9iaiwga2V5KSB7XG4gICAgcmV0dXJuIG9iaiAhPSBudWxsICYmIGhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpO1xuICB9LFxuXG4gIC8qIFJldHVybnMgdHJ1ZSBpZiB0aGUgb2JqZWN0IGlzIHVuZGVmaW5lZC5cbiAgICovXG4gIGlzX3VuZGVmaW5lZDogZnVuY3Rpb24ob2JqKSB7XG4gICAgcmV0dXJuIG9iaiA9PT0gdm9pZCAwO1xuICB9LFxuXG4gIC8qIE1peGVzIHR3byBvYmplY3RzIGluIHRvZ2V0aGVyLCBvdmVyd3JpdGluZyBhIHRhcmdldCB3aXRoIGEgc291cmNlLlxuICAgKi9cbiAgZXh0ZW5kOiBmdW5jdGlvbih0YXJnZXQsIHNvdXJjZSkge1xuICAgIHRhcmdldCA9IHRhcmdldCB8fCB7fTtcbiAgICBmb3IgKHZhciBwcm9wIGluIHNvdXJjZSkge1xuICAgICAgaWYgKHR5cGVvZiBzb3VyY2VbcHJvcF0gPT09ICdvYmplY3QnKSB7XG4gICAgICAgIHRhcmdldFtwcm9wXSA9IHRoaXMuZXh0ZW5kKHRhcmdldFtwcm9wXSwgc291cmNlW3Byb3BdKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRhcmdldFtwcm9wXSA9IHNvdXJjZVtwcm9wXTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRhcmdldDtcbiAgfVxufTtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIHNyYy91dGlscy5qc1xuICoqLyJdLCJtYXBwaW5ncyI6Ijs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFMQTtBQU9BO0FBQ0E7QUFEQTtBQUNBOzs7QUFLQTtBQUNBO0FBREE7QUFDQTs7O0FBS0E7QUFDQTtBQURBO0FBQ0E7OztBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBSEE7QUFEQTtBQU9BO0FBVEE7QUExQkEiLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 6 */
/***/ function(module, exports, __webpack_require__) {

	eval("var utils = __webpack_require__(5);\nvar filter_using_new_nodes = __webpack_require__(7);\n\nmodule.exports = function (params, orig_network_data, change_view) {\n  var views = orig_network_data.views;\n\n  console.log('change_network_view');\n\n  // Get Row Filtering View\n  ///////////////////////////////////////////////////////////////\n  // change_view has the name of the new view (e.g. {N_row_sum:20})\n  // this view name is used to pull up the view information. The view consists\n  // of a description of the view (e.g N_row_sum number and distance type) and\n  // the nodes of the view (e.g. row_nodes and col_nodes). With the new set of\n  // nodes, new_nodes, the links will be filtered in order to only keep links\n  // between nodes that still exist in the view\n\n  console.log('in change_network_view');\n  console.log(change_view);\n\n  if (utils.has(change_view, 'filter_row')) {\n\n    // failsafe if there is only row+col filtering from front-end\n    var filt_views = _.filter(views, function (d) {\n\n      // failsafe from json\n      if (utils.has(d, 'filter_row')) {\n        // filter_row_value is the same as filter_row\n        return d.filter_row == change_view.filter_row;\n      } else {\n        return d.filt == change_view.filter_row;\n      }\n    });\n  } else if (utils.has(change_view, 'filter_row_value')) {\n\n    // filter row value\n    var filt_views = _.filter(views, function (d) {\n\n      // failsafe from json\n      return d.filter_row_value == change_view.filter_row_value;\n    });\n  } else if (utils.has(change_view, 'filter_row_sum')) {\n\n    var filt_views = _.filter(views, function (d) {\n      return d.filter_row_sum == change_view.filter_row_sum;\n    });\n  } else if (utils.has(change_view, 'filter_row_num')) {\n\n    var filt_views = _.filter(views, function (d) {\n      return d.filter_row_num == change_view.filter_row_num;\n    });\n  } else if (utils.has(change_view, 'N_row_sum')) {\n\n    var filt_views = _.filter(views, function (d) {\n      return d.N_row_sum == change_view.N_row_sum;\n    });\n\n    if (typeof filt_views === 'undefined') {\n      filt_views = [views[0]];\n    }\n  }\n\n  if (change_view === 'default') {\n    filt_views = [views[0]];\n  }\n\n  /*\n  get the inst_view\n  */\n\n  // get the single view that will be used to update the network from\n  // the array of filtered views\n  if (params.show_categories === false) {\n    console.log('\\nview defined by filter only, no category\\n');\n    console.log('there are ' + String(filt_views.length) + ' views with this N_row_sum');\n    var inst_view = filt_views[0];\n\n    if (utils.has(change_view, 'enr_score_type')) {\n\n      inst_view = _.filter(filt_views, function (d) {\n        return d.enr_score_type == change_view.enr_score_type;\n      })[0];\n\n      console.log('\\n\\n final inst_view ');\n      console.log(inst_view);\n    }\n  }\n\n  if (params.show_categories) {\n    console.log('\\nview defined by filter and category\\n');\n    // apply category filtering if necessary\n    var inst_view = _.find(filt_views, function (d) {\n      return d.col_cat === params.current_col_cat;\n    });\n  }\n\n  /*\n  assign the inst_view, if it is defined\n  */\n  if (typeof inst_view !== 'undefined') {\n\n    var new_nodes = inst_view.nodes;\n    var links = orig_network_data.links;\n    var new_network_data = filter_using_new_nodes(new_nodes, links, views);\n  } else {\n    var new_network_data = orig_network_data;\n  }\n\n  return new_network_data;\n};//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvbmV0d29yay9jaGFuZ2VfbmV0d29ya192aWV3LmpzP2U4YmYiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIHV0aWxzID0gcmVxdWlyZSgnLi4vdXRpbHMnKTtcbnZhciBmaWx0ZXJfdXNpbmdfbmV3X25vZGVzID0gcmVxdWlyZSgnLi9maWx0ZXJfdXNpbmdfbmV3X25vZGVzJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24ocGFyYW1zLCBvcmlnX25ldHdvcmtfZGF0YSwgY2hhbmdlX3ZpZXcpIHtcbiAgdmFyIHZpZXdzID0gb3JpZ19uZXR3b3JrX2RhdGEudmlld3M7XG5cbiAgY29uc29sZS5sb2coJ2NoYW5nZV9uZXR3b3JrX3ZpZXcnKTtcblxuICAvLyBHZXQgUm93IEZpbHRlcmluZyBWaWV3XG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAvLyBjaGFuZ2VfdmlldyBoYXMgdGhlIG5hbWUgb2YgdGhlIG5ldyB2aWV3IChlLmcuIHtOX3Jvd19zdW06MjB9KVxuICAvLyB0aGlzIHZpZXcgbmFtZSBpcyB1c2VkIHRvIHB1bGwgdXAgdGhlIHZpZXcgaW5mb3JtYXRpb24uIFRoZSB2aWV3IGNvbnNpc3RzXG4gIC8vIG9mIGEgZGVzY3JpcHRpb24gb2YgdGhlIHZpZXcgKGUuZyBOX3Jvd19zdW0gbnVtYmVyIGFuZCBkaXN0YW5jZSB0eXBlKSBhbmRcbiAgLy8gdGhlIG5vZGVzIG9mIHRoZSB2aWV3IChlLmcuIHJvd19ub2RlcyBhbmQgY29sX25vZGVzKS4gV2l0aCB0aGUgbmV3IHNldCBvZlxuICAvLyBub2RlcywgbmV3X25vZGVzLCB0aGUgbGlua3Mgd2lsbCBiZSBmaWx0ZXJlZCBpbiBvcmRlciB0byBvbmx5IGtlZXAgbGlua3NcbiAgLy8gYmV0d2VlbiBub2RlcyB0aGF0IHN0aWxsIGV4aXN0IGluIHRoZSB2aWV3XG5cbiAgY29uc29sZS5sb2coJ2luIGNoYW5nZV9uZXR3b3JrX3ZpZXcnKTtcbiAgY29uc29sZS5sb2coY2hhbmdlX3ZpZXcpO1xuXG4gIGlmICh1dGlscy5oYXMoY2hhbmdlX3ZpZXcsJ2ZpbHRlcl9yb3cnKSl7XG5cbiAgICAvLyBmYWlsc2FmZSBpZiB0aGVyZSBpcyBvbmx5IHJvdytjb2wgZmlsdGVyaW5nIGZyb20gZnJvbnQtZW5kXG4gICAgdmFyIGZpbHRfdmlld3MgPSBfLmZpbHRlcih2aWV3cywgZnVuY3Rpb24oZCl7XG5cbiAgICAgIC8vIGZhaWxzYWZlIGZyb20ganNvblxuICAgICAgaWYgKHV0aWxzLmhhcyhkLCAnZmlsdGVyX3JvdycpKXtcbiAgICAgICAgLy8gZmlsdGVyX3Jvd192YWx1ZSBpcyB0aGUgc2FtZSBhcyBmaWx0ZXJfcm93XG4gICAgICAgIHJldHVybiBkLmZpbHRlcl9yb3cgPT0gY2hhbmdlX3ZpZXcuZmlsdGVyX3JvdztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBkLmZpbHQgPT0gY2hhbmdlX3ZpZXcuZmlsdGVyX3JvdztcbiAgICAgIH1cblxuICAgIH0pO1xuXG4gIH0gZWxzZSBpZiAodXRpbHMuaGFzKGNoYW5nZV92aWV3LCAnZmlsdGVyX3Jvd192YWx1ZScpKSB7XG5cbiAgICAvLyBmaWx0ZXIgcm93IHZhbHVlXG4gICAgdmFyIGZpbHRfdmlld3MgPSBfLmZpbHRlcih2aWV3cywgZnVuY3Rpb24oZCl7XG5cbiAgICAgIC8vIGZhaWxzYWZlIGZyb20ganNvblxuICAgICAgcmV0dXJuIGQuZmlsdGVyX3Jvd192YWx1ZSA9PSBjaGFuZ2Vfdmlldy5maWx0ZXJfcm93X3ZhbHVlO1xuXG4gICAgfSk7XG5cbiAgfSBlbHNlIGlmICh1dGlscy5oYXMoY2hhbmdlX3ZpZXcsJ2ZpbHRlcl9yb3dfc3VtJykpIHtcblxuICAgIHZhciBmaWx0X3ZpZXdzID0gXy5maWx0ZXIodmlld3MsIGZ1bmN0aW9uKGQpe1xuICAgICAgcmV0dXJuIGQuZmlsdGVyX3Jvd19zdW0gPT0gY2hhbmdlX3ZpZXcuZmlsdGVyX3Jvd19zdW07XG4gICAgfSk7XG5cbiAgfSBlbHNlIGlmICh1dGlscy5oYXMoY2hhbmdlX3ZpZXcsJ2ZpbHRlcl9yb3dfbnVtJykpIHtcblxuICAgIHZhciBmaWx0X3ZpZXdzID0gXy5maWx0ZXIodmlld3MsIGZ1bmN0aW9uKGQpe1xuICAgICAgcmV0dXJuIGQuZmlsdGVyX3Jvd19udW0gPT0gY2hhbmdlX3ZpZXcuZmlsdGVyX3Jvd19udW07XG4gICAgfSk7XG5cbiAgfSBlbHNlIGlmICh1dGlscy5oYXMoY2hhbmdlX3ZpZXcsICdOX3Jvd19zdW0nKSl7XG5cbiAgICB2YXIgZmlsdF92aWV3cyA9IF8uZmlsdGVyKHZpZXdzLCBmdW5jdGlvbihkKXtcbiAgICAgIHJldHVybiBkLk5fcm93X3N1bSA9PSBjaGFuZ2Vfdmlldy5OX3Jvd19zdW07XG4gICAgfSk7XG5cbiAgICBpZih0eXBlb2YgZmlsdF92aWV3cyA9PT0gJ3VuZGVmaW5lZCcpe1xuICAgICAgICBmaWx0X3ZpZXdzID0gW3ZpZXdzWzBdXTtcbiAgICB9XG5cbiAgfVxuXG4gIGlmIChjaGFuZ2Vfdmlldz09PSdkZWZhdWx0Jyl7XG4gICAgZmlsdF92aWV3cyA9IFt2aWV3c1swXV07XG4gIH1cblxuICAvKlxuICBnZXQgdGhlIGluc3Rfdmlld1xuICAqL1xuXG4gIC8vIGdldCB0aGUgc2luZ2xlIHZpZXcgdGhhdCB3aWxsIGJlIHVzZWQgdG8gdXBkYXRlIHRoZSBuZXR3b3JrIGZyb21cbiAgLy8gdGhlIGFycmF5IG9mIGZpbHRlcmVkIHZpZXdzXG4gIGlmICggcGFyYW1zLnNob3dfY2F0ZWdvcmllcyA9PT0gZmFsc2UgKXtcbiAgICBjb25zb2xlLmxvZygnXFxudmlldyBkZWZpbmVkIGJ5IGZpbHRlciBvbmx5LCBubyBjYXRlZ29yeVxcbicpO1xuICAgIGNvbnNvbGUubG9nKCd0aGVyZSBhcmUgJytTdHJpbmcoZmlsdF92aWV3cy5sZW5ndGgpKycgdmlld3Mgd2l0aCB0aGlzIE5fcm93X3N1bScpO1xuICAgIHZhciBpbnN0X3ZpZXcgPSBmaWx0X3ZpZXdzWzBdO1xuXG4gICAgaWYgKHV0aWxzLmhhcyhjaGFuZ2VfdmlldywnZW5yX3Njb3JlX3R5cGUnKSl7XG5cbiAgICAgIGluc3RfdmlldyA9IF8uZmlsdGVyKGZpbHRfdmlld3MsIGZ1bmN0aW9uKGQpe1xuICAgICAgICByZXR1cm4gZC5lbnJfc2NvcmVfdHlwZSA9PSBjaGFuZ2Vfdmlldy5lbnJfc2NvcmVfdHlwZTtcbiAgICAgIH0pWzBdO1xuXG4gICAgICBjb25zb2xlLmxvZygnXFxuXFxuIGZpbmFsIGluc3RfdmlldyAnKTtcbiAgICAgIGNvbnNvbGUubG9nKGluc3Rfdmlldyk7XG4gICAgfVxuXG4gIH1cblxuICBpZiAocGFyYW1zLnNob3dfY2F0ZWdvcmllcyl7XG4gICAgY29uc29sZS5sb2coJ1xcbnZpZXcgZGVmaW5lZCBieSBmaWx0ZXIgYW5kIGNhdGVnb3J5XFxuJyk7XG4gICAgLy8gYXBwbHkgY2F0ZWdvcnkgZmlsdGVyaW5nIGlmIG5lY2Vzc2FyeVxuICAgIHZhciBpbnN0X3ZpZXcgPSBfLmZpbmQoZmlsdF92aWV3cywgZnVuY3Rpb24oZCl7XG4gICAgICByZXR1cm4gZC5jb2xfY2F0ID09PSBwYXJhbXMuY3VycmVudF9jb2xfY2F0O1xuICAgIH0pO1xuICB9XG5cbiAgLypcbiAgYXNzaWduIHRoZSBpbnN0X3ZpZXcsIGlmIGl0IGlzIGRlZmluZWRcbiAgKi9cbiAgaWYgKHR5cGVvZiBpbnN0X3ZpZXcgIT09ICd1bmRlZmluZWQnKXtcblxuICAgIHZhciBuZXdfbm9kZXMgPSBpbnN0X3ZpZXcubm9kZXM7XG4gICAgdmFyIGxpbmtzID0gb3JpZ19uZXR3b3JrX2RhdGEubGlua3M7XG4gICAgdmFyIG5ld19uZXR3b3JrX2RhdGEgPSBmaWx0ZXJfdXNpbmdfbmV3X25vZGVzKG5ld19ub2RlcywgbGlua3MsIHZpZXdzKTtcblxuICB9IGVsc2Uge1xuICAgIHZhciBuZXdfbmV0d29ya19kYXRhID0gb3JpZ19uZXR3b3JrX2RhdGE7XG4gIH1cblxuICByZXR1cm4gbmV3X25ldHdvcmtfZGF0YTtcbn07XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiBzcmMvbmV0d29yay9jaGFuZ2VfbmV0d29ya192aWV3LmpzXG4gKiovIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7O0FBSkE7QUFlQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBRkE7QUFJQTtBQUpBO0FBSEE7QUFIQTtBQUNBOztBQWlCQTtBQUNBOztBQUVBO0FBSEE7QUFIQTtBQUNBO0FBV0E7QUFDQTtBQURBO0FBRkE7QUFDQTtBQU9BO0FBQ0E7QUFEQTtBQUZBO0FBQ0E7QUFPQTtBQUNBO0FBREE7QUFDQTtBQUdBO0FBQ0E7QUFEQTtBQU5BO0FBQ0E7QUFXQTtBQUNBO0FBREE7QUFDQTs7Ozs7OztBQW5FQTtBQTZFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUdBO0FBQ0E7QUFQQTtBQUxBO0FBQ0E7QUFnQkE7QUFDQTs7QUFEQTtBQUlBO0FBREE7QUFIQTtBQUNBOzs7O0FBOUZBO0FBQ0E7QUF5R0E7QUFDQTtBQUNBO0FBSkE7QUFPQTtBQVBBO0FBQ0E7QUFTQTtBQWxIQSIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ },
/* 7 */
/***/ function(module, exports) {

	eval("module.exports = function (new_nodes, links, views) {\n  // get new names of rows and cols\n  var row_names = _.pluck(new_nodes.row_nodes, 'name');\n  var col_names = _.pluck(new_nodes.col_nodes, 'name');\n\n  var new_links = _.filter(links, function (d) {\n    var inst_row = d.name.split('_')[0];\n    var inst_col = d.name.split('_')[1];\n\n    var row_index = _.indexOf(row_names, inst_row);\n    var col_index = _.indexOf(col_names, inst_col);\n\n    if (row_index > -1 & col_index > -1) {\n      // redefine source and target\n      d.source = row_index;\n      d.target = col_index;\n      return d;\n    }\n  });\n\n  // set up new_network_data\n  var new_network_data = {};\n  // rows\n  new_network_data.row_nodes = new_nodes.row_nodes;\n  new_network_data.row_nodes_names = row_names;\n  // cols\n  new_network_data.col_nodes = new_nodes.col_nodes;\n  new_network_data.col_nodes_names = col_names;\n  // links\n  new_network_data.links = new_links;\n\n  // save all links\n  new_network_data.all_links = links;\n\n  // pass on all views\n  new_network_data.views = views;\n\n  return new_network_data;\n};//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvbmV0d29yay9maWx0ZXJfdXNpbmdfbmV3X25vZGVzLmpzPzg0MjAiXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihuZXdfbm9kZXMsIGxpbmtzLCB2aWV3cykge1xuICAvLyBnZXQgbmV3IG5hbWVzIG9mIHJvd3MgYW5kIGNvbHNcbiAgdmFyIHJvd19uYW1lcyA9IF8ucGx1Y2sobmV3X25vZGVzLnJvd19ub2RlcywgJ25hbWUnKTtcbiAgdmFyIGNvbF9uYW1lcyA9IF8ucGx1Y2sobmV3X25vZGVzLmNvbF9ub2RlcywgJ25hbWUnKTtcblxuICB2YXIgbmV3X2xpbmtzID0gXy5maWx0ZXIobGlua3MsIGZ1bmN0aW9uKGQpe1xuICAgIHZhciBpbnN0X3JvdyA9IGQubmFtZS5zcGxpdCgnXycpWzBdO1xuICAgIHZhciBpbnN0X2NvbCA9IGQubmFtZS5zcGxpdCgnXycpWzFdO1xuXG4gICAgdmFyIHJvd19pbmRleCA9IF8uaW5kZXhPZihyb3dfbmFtZXMsIGluc3Rfcm93KTtcbiAgICB2YXIgY29sX2luZGV4ID0gXy5pbmRleE9mKGNvbF9uYW1lcywgaW5zdF9jb2wpO1xuXG4gICAgaWYgKCByb3dfaW5kZXggPi0xICYgY29sX2luZGV4ID4tMSApe1xuICAgICAgLy8gcmVkZWZpbmUgc291cmNlIGFuZCB0YXJnZXRcbiAgICAgIGQuc291cmNlID0gcm93X2luZGV4O1xuICAgICAgZC50YXJnZXQgPSBjb2xfaW5kZXg7XG4gICAgICByZXR1cm4gZDtcbiAgICB9XG4gIH0pO1xuXG4gIC8vIHNldCB1cCBuZXdfbmV0d29ya19kYXRhXG4gIHZhciBuZXdfbmV0d29ya19kYXRhID0ge307XG4gIC8vIHJvd3NcbiAgbmV3X25ldHdvcmtfZGF0YS5yb3dfbm9kZXMgPSBuZXdfbm9kZXMucm93X25vZGVzO1xuICBuZXdfbmV0d29ya19kYXRhLnJvd19ub2Rlc19uYW1lcyA9IHJvd19uYW1lcztcbiAgLy8gY29sc1xuICBuZXdfbmV0d29ya19kYXRhLmNvbF9ub2RlcyA9IG5ld19ub2Rlcy5jb2xfbm9kZXM7XG4gIG5ld19uZXR3b3JrX2RhdGEuY29sX25vZGVzX25hbWVzID0gY29sX25hbWVzO1xuICAvLyBsaW5rc1xuICBuZXdfbmV0d29ya19kYXRhLmxpbmtzID0gbmV3X2xpbmtzO1xuXG4gIC8vIHNhdmUgYWxsIGxpbmtzXG4gIG5ld19uZXR3b3JrX2RhdGEuYWxsX2xpbmtzID0gbGlua3M7XG5cbiAgLy8gcGFzcyBvbiBhbGwgdmlld3NcbiAgbmV3X25ldHdvcmtfZGF0YS52aWV3cyA9IHZpZXdzO1xuXG4gIHJldHVybiBuZXdfbmV0d29ya19kYXRhO1xufTtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIHNyYy9uZXR3b3JrL2ZpbHRlcl91c2luZ19uZXdfbm9kZXMuanNcbiAqKi8iXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBSkE7QUFQQTtBQUNBOztBQU5BOztBQUFBO0FBd0JBOztBQXhCQTtBQTJCQTs7QUEzQkE7QUFDQTs7QUFEQTtBQUNBOztBQURBO0FBQ0E7QUFvQ0E7QUFyQ0EiLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 8 */
/***/ function(module, exports) {

	eval("// resize parent div\nmodule.exports = function (params) {\n\n  // get outer_margins\n  if (params.viz.expand === false) {\n    var outer_margins = params.viz.outer_margins;\n  } else {\n    var outer_margins = params.viz.outer_margins_expand;\n  }\n\n  if (params.viz.resize) {\n\n    // get the size of the window\n    var screen_width = window.innerWidth;\n    var screen_height = window.innerHeight;\n\n    var cont_dim = {};\n    cont_dim.width = screen_width - outer_margins.left - outer_margins.right;\n    cont_dim.height = screen_height - outer_margins.top - outer_margins.bottom;\n\n    // resize and position\n    d3.select(params.viz.viz_wrapper).style('float', 'right').style('margin-top', outer_margins.top + 'px').style('width', cont_dim.width + 'px').style('height', cont_dim.height + 'px');\n  } else {\n\n    // position\n    d3.select(params.viz.viz_wrapper).style('float', 'right').style('margin-top', outer_margins.top + 'px');\n  }\n};//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvcGFyZW50X2Rpdl9zaXplLmpzPzFjMDIiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gcmVzaXplIHBhcmVudCBkaXZcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24ocGFyYW1zKSB7XG5cbiAgLy8gZ2V0IG91dGVyX21hcmdpbnNcbiAgaWYgKHBhcmFtcy52aXouZXhwYW5kID09PSBmYWxzZSkge1xuICAgIHZhciBvdXRlcl9tYXJnaW5zID0gcGFyYW1zLnZpei5vdXRlcl9tYXJnaW5zO1xuICB9IGVsc2Uge1xuICAgIHZhciBvdXRlcl9tYXJnaW5zID0gcGFyYW1zLnZpei5vdXRlcl9tYXJnaW5zX2V4cGFuZDtcbiAgfVxuXG4gIGlmIChwYXJhbXMudml6LnJlc2l6ZSkge1xuXG4gICAgLy8gZ2V0IHRoZSBzaXplIG9mIHRoZSB3aW5kb3dcbiAgICB2YXIgc2NyZWVuX3dpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XG4gICAgdmFyIHNjcmVlbl9oZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XG5cbiAgICB2YXIgY29udF9kaW0gPSB7fTtcbiAgICBjb250X2RpbS53aWR0aCA9IHNjcmVlbl93aWR0aCAtIG91dGVyX21hcmdpbnMubGVmdCAtIG91dGVyX21hcmdpbnMucmlnaHQ7XG4gICAgY29udF9kaW0uaGVpZ2h0ID0gc2NyZWVuX2hlaWdodCAtIG91dGVyX21hcmdpbnMudG9wIC0gb3V0ZXJfbWFyZ2lucy5ib3R0b207XG5cbiAgICAvLyByZXNpemUgYW5kIHBvc2l0aW9uXG4gICAgZDMuc2VsZWN0KHBhcmFtcy52aXoudml6X3dyYXBwZXIpXG4gICAgICAuc3R5bGUoJ2Zsb2F0JywgJ3JpZ2h0JylcbiAgICAgIC5zdHlsZSgnbWFyZ2luLXRvcCcsIG91dGVyX21hcmdpbnMudG9wICsgJ3B4JylcbiAgICAgIC5zdHlsZSgnd2lkdGgnLCBjb250X2RpbS53aWR0aCArICdweCcpXG4gICAgICAuc3R5bGUoJ2hlaWdodCcsIGNvbnRfZGltLmhlaWdodCArICdweCcpO1xuXG4gIH0gZWxzZSB7XG5cbiAgICAvLyBwb3NpdGlvblxuICAgIGQzLnNlbGVjdChwYXJhbXMudml6LnZpel93cmFwcGVyKVxuICAgICAgLnN0eWxlKCdmbG9hdCcsICdyaWdodCcpXG4gICAgICAuc3R5bGUoJ21hcmdpbi10b3AnLCBvdXRlcl9tYXJnaW5zLnRvcCArICdweCcpO1xuICB9XG59O1xuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogc3JjL3BhcmVudF9kaXZfc2l6ZS5qc1xuICoqLyJdLCJtYXBwaW5ncyI6IjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQURBO0FBR0E7QUFIQTtBQUNBO0FBS0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFUQTtBQUFBO0FBQ0E7O0FBbUJBO0FBcEJBO0FBVEEiLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 9 */
/***/ function(module, exports, __webpack_require__) {

	eval("var utils = __webpack_require__(5);\n\nmodule.exports = function (network_data) {\n  var matrix = [];\n\n  network_data.row_nodes.forEach(function (tmp, row_index) {\n\n    matrix[row_index] = {};\n    matrix[row_index].name = network_data.row_nodes[row_index].name;\n    matrix[row_index].row_data = d3.range(network_data.col_nodes.length).map(function (col_index) {\n\n      if (utils.has(network_data.links[0], 'value_up') || utils.has(network_data.links[0], 'value_dn')) {\n        var ini_object = {\n          pos_x: col_index,\n          pos_y: row_index,\n          value: 0,\n          value_up: 0,\n          value_dn: 0,\n          highlight: 0\n        };\n      } else {\n\n        var ini_object = {\n          pos_x: col_index,\n          pos_y: row_index,\n          value: 0,\n          highlight: 0\n        };\n      }\n      return ini_object;\n    });\n  });\n\n  network_data.links.forEach(function (link) {\n\n    // transfer additional link information is necessary\n    matrix[link.source].row_data[link.target].value = link.value;\n    matrix[link.source].row_data[link.target].row_name = link.row_name;\n    matrix[link.source].row_data[link.target].col_name = link.col_name;\n\n    if (utils.has(link, 'value_up') || utils.has(link, 'value_dn')) {\n      matrix[link.source].row_data[link.target].value_up = link.value_up;\n      matrix[link.source].row_data[link.target].value_dn = link.value_dn;\n    }\n\n    if (link.highlight) {\n      matrix[link.source].row_data[link.target].highlight = link.highlight;\n    }\n    if (link.info) {\n      matrix[link.source].row_data[link.target].info = link.info;\n    }\n  });\n\n  return matrix;\n};//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvaW5pdGlhbGl6ZV9tYXRyaXguanM/NTcxYSJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24obmV0d29ya19kYXRhKSB7XG4gIHZhciBtYXRyaXggPSBbXTtcblxuICBuZXR3b3JrX2RhdGEucm93X25vZGVzLmZvckVhY2goZnVuY3Rpb24gKHRtcCwgcm93X2luZGV4KSB7XG5cbiAgICBtYXRyaXhbcm93X2luZGV4XSA9IHt9O1xuICAgIG1hdHJpeFtyb3dfaW5kZXhdLm5hbWUgPSBuZXR3b3JrX2RhdGEucm93X25vZGVzW3Jvd19pbmRleF0ubmFtZTtcbiAgICBtYXRyaXhbcm93X2luZGV4XS5yb3dfZGF0YSA9IGQzLnJhbmdlKG5ldHdvcmtfZGF0YS5jb2xfbm9kZXMubGVuZ3RoKS5tYXAoXG4gICAgICBmdW5jdGlvbiAoY29sX2luZGV4KSB7XG5cbiAgICAgICAgaWYgKHV0aWxzLmhhcyhuZXR3b3JrX2RhdGEubGlua3NbMF0sICd2YWx1ZV91cCcpIHx8IHV0aWxzLmhhcyhuZXR3b3JrX2RhdGEubGlua3NbMF0sICd2YWx1ZV9kbicpKSB7XG4gICAgICAgICAgdmFyIGluaV9vYmplY3QgPSB7XG4gICAgICAgICAgICBwb3NfeDogY29sX2luZGV4LFxuICAgICAgICAgICAgcG9zX3k6IHJvd19pbmRleCxcbiAgICAgICAgICAgIHZhbHVlOiAwLFxuICAgICAgICAgICAgdmFsdWVfdXA6IDAsXG4gICAgICAgICAgICB2YWx1ZV9kbjogMCxcbiAgICAgICAgICAgIGhpZ2hsaWdodDogMFxuICAgICAgICAgIH07XG5cbiAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgIHZhciBpbmlfb2JqZWN0ID0ge1xuICAgICAgICAgICAgcG9zX3g6IGNvbF9pbmRleCxcbiAgICAgICAgICAgIHBvc195OiByb3dfaW5kZXgsXG4gICAgICAgICAgICB2YWx1ZTogMCxcbiAgICAgICAgICAgIGhpZ2hsaWdodDogMFxuICAgICAgICAgIH07XG5cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaW5pX29iamVjdDtcbiAgICAgIH0pO1xuXG4gIH0pO1xuXG4gIG5ldHdvcmtfZGF0YS5saW5rcy5mb3JFYWNoKGZ1bmN0aW9uIChsaW5rKSB7XG5cbiAgICAvLyB0cmFuc2ZlciBhZGRpdGlvbmFsIGxpbmsgaW5mb3JtYXRpb24gaXMgbmVjZXNzYXJ5XG4gICAgbWF0cml4W2xpbmsuc291cmNlXS5yb3dfZGF0YVtsaW5rLnRhcmdldF0udmFsdWUgPSBsaW5rLnZhbHVlO1xuICAgIG1hdHJpeFtsaW5rLnNvdXJjZV0ucm93X2RhdGFbbGluay50YXJnZXRdLnJvd19uYW1lID0gbGluay5yb3dfbmFtZTtcbiAgICBtYXRyaXhbbGluay5zb3VyY2VdLnJvd19kYXRhW2xpbmsudGFyZ2V0XS5jb2xfbmFtZSA9IGxpbmsuY29sX25hbWU7XG5cbiAgICBpZiAodXRpbHMuaGFzKGxpbmssICd2YWx1ZV91cCcpIHx8IHV0aWxzLmhhcyhsaW5rLCAndmFsdWVfZG4nKSkge1xuICAgICAgbWF0cml4W2xpbmsuc291cmNlXS5yb3dfZGF0YVtsaW5rLnRhcmdldF0udmFsdWVfdXAgPSBsaW5rLnZhbHVlX3VwO1xuICAgICAgbWF0cml4W2xpbmsuc291cmNlXS5yb3dfZGF0YVtsaW5rLnRhcmdldF0udmFsdWVfZG4gPSBsaW5rLnZhbHVlX2RuO1xuICAgIH1cblxuICAgIGlmIChsaW5rLmhpZ2hsaWdodCkge1xuICAgICAgbWF0cml4W2xpbmsuc291cmNlXS5yb3dfZGF0YVtsaW5rLnRhcmdldF0uaGlnaGxpZ2h0ID0gbGluay5oaWdobGlnaHQ7XG4gICAgfVxuICAgIGlmIChsaW5rLmluZm8pIHtcbiAgICAgIG1hdHJpeFtsaW5rLnNvdXJjZV0ucm93X2RhdGFbbGluay50YXJnZXRdLmluZm8gPSBsaW5rLmluZm87XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gbWF0cml4O1xufTtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIHNyYy9pbml0aWFsaXplX21hdHJpeC5qc1xuICoqLyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFOQTtBQURBO0FBQ0E7QUFXQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFaQTtBQW9CQTtBQXRCQTtBQUxBO0FBQ0E7QUErQkE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBQ0E7QUFJQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBREE7QUFmQTtBQUNBO0FBbUJBO0FBdkRBIiwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 10 */
/***/ function(module, exports, __webpack_require__) {

	eval("var apply_transformation = __webpack_require__(11);\nvar Params = __webpack_require__(1);\n\nmodule.exports = function () {\n  var params = Params.get();\n  var zoom_x = d3.event.scale,\n      zoom_y = d3.event.scale,\n      trans_x = d3.event.translate[0] - params.viz.clust.margin.left,\n      trans_y = d3.event.translate[1] - params.viz.clust.margin.top;\n\n  apply_transformation(trans_x, trans_y, zoom_x, zoom_y);\n};//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL3pvb21lZC5qcz82MzFhIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBhcHBseV90cmFuc2Zvcm1hdGlvbiA9IHJlcXVpcmUoJy4vYXBwbHlfdHJhbnNmb3JtYXRpb24nKTtcbnZhciBQYXJhbXMgPSByZXF1aXJlKCcuL3BhcmFtcycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuICB2YXIgcGFyYW1zID0gUGFyYW1zLmdldCgpO1xuICB2YXIgem9vbV94ID0gZDMuZXZlbnQuc2NhbGUsXG4gICAgem9vbV95ID0gZDMuZXZlbnQuc2NhbGUsXG4gICAgdHJhbnNfeCA9IGQzLmV2ZW50LnRyYW5zbGF0ZVswXSAtIHBhcmFtcy52aXouY2x1c3QubWFyZ2luLmxlZnQsXG4gICAgdHJhbnNfeSA9IGQzLmV2ZW50LnRyYW5zbGF0ZVsxXSAtIHBhcmFtcy52aXouY2x1c3QubWFyZ2luLnRvcDtcblxuICBhcHBseV90cmFuc2Zvcm1hdGlvbih0cmFuc194LCB0cmFuc195LCB6b29tX3gsIHpvb21feSk7XG59O1xuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogc3JjL3pvb21lZC5qc1xuICoqLyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVBBIiwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 11 */
/***/ function(module, exports, __webpack_require__) {

	eval("var Params = __webpack_require__(1);\nvar utils = __webpack_require__(5);\nvar constrain_font_size = __webpack_require__(12);\n\nmodule.exports = function (trans_x, trans_y, zoom_x, zoom_y) {\n  var params = Params.get();\n\n  var d3_scale = zoom_x;\n\n  // y - rules\n  ///////////////////////////////////////////////////\n  // available panning room in the y direction\n  // multiple extra room (zoom - 1) by the width\n  // always defined in the same way\n  var pan_room_y = (d3_scale - 1) * params.viz.clust.dim.height;\n\n  // do not translate if translate in y direction is positive\n  if (trans_y >= 0) {\n    // restrict transformation parameters\n    // no panning in either direction\n    trans_y = 0;\n  }\n  // restrict y pan to pan_room_y if necessary\n  else if (trans_y <= -pan_room_y) {\n      trans_y = -pan_room_y;\n    }\n\n  // x - rules\n  ///////////////////////////////////////////////////\n  // zoom in y direction only - translate in y only\n  if (d3_scale < params.viz.zoom_switch) {\n    // no x translate or zoom\n    trans_x = 0;\n    zoom_x = 1;\n  }\n  // zoom in both directions\n  // scale is greater than params.viz.zoom_switch\n  else {\n      // available panning room in the x direction\n      // multiple extra room (zoom - 1) by the width\n      var pan_room_x = (d3_scale / params.viz.zoom_switch - 1) * params.viz.clust.dim.width;\n\n      // no panning in the positive direction\n      if (trans_x > 0) {\n        // restrict transformation parameters\n        // no panning in the x direction\n        trans_x = 0;\n        // set zoom_x\n        zoom_x = d3_scale / params.viz.zoom_switch;\n      }\n      // restrict panning to pan_room_x\n      else if (trans_x <= -pan_room_x) {\n          // restrict transformation parameters\n          // no panning in the x direction\n          trans_x = -pan_room_x;\n          // set zoom_x\n          zoom_x = d3_scale / params.viz.zoom_switch;\n        }\n        // allow two dimensional panning\n        else {\n            // restrict transformation parameters\n            // set zoom_x\n            zoom_x = d3_scale / params.viz.zoom_switch;\n          }\n    }\n\n  // update visible links\n  var min_rect_height = 3;\n\n  // apply transformation and reset translate vector\n  // the zoom vector (zoom.scale) never gets reset\n  ///////////////////////////////////////////////////\n  // translate clustergram\n  // viz.get_clust_group()\n  d3.select(params.root + ' .clust_group').attr('transform', 'translate(' + [trans_x, trans_y] + ') scale(' + zoom_x + ',' + zoom_y + ')');\n\n  // transform row labels\n  d3.select(params.root + ' .row_label_zoom_container').attr('transform', 'translate(' + [0, trans_y] + ') scale(' + zoom_y + ')');\n\n  // transform row_zoom_container\n  // use the offset saved in params, only zoom in the y direction\n  d3.select(params.root + ' .row_zoom_container').attr('transform', 'translate(' + [0, trans_y] + ') scale( 1,' + zoom_y + ')');\n\n  // transform col labels\n  // move down col labels as zooming occurs, subtract trans_x - 20 almost works\n  d3.select(params.root + ' .col_zoom_container').attr('transform', 'translate(' + [trans_x, 0] + ') scale(' + zoom_x + ')');\n\n  // transform col_class\n  d3.select('.col_viz_zoom_container').attr('transform', 'translate(' + [trans_x, 0] + ') scale(' + zoom_x + ',1)');\n\n  // reset translate vector - add back margins to trans_x and trans_y\n  params.zoom_behavior.translate([trans_x + params.viz.clust.margin.left, trans_y + params.viz.clust.margin.top]);\n\n  var trans = false;\n  constrain_font_size(params, trans);\n\n  // resize label bars if necessary\n  ////////////////////////////////////\n\n  if (utils.has(params.network_data.row_nodes[0], 'value')) {\n    d3.selectAll('.row_bars').attr('width', function (d) {\n      var inst_value = 0;\n      inst_value = params.labels.bar_scale_row(Math.abs(d.value)) / zoom_y;\n      return inst_value;\n    }).attr('x', function (d) {\n      var inst_value = 0;\n      inst_value = -params.labels.bar_scale_row(Math.abs(d.value)) / zoom_y;\n      return inst_value;\n    });\n  }\n\n  if (utils.has(params.network_data.col_nodes[0], 'value')) {\n    d3.selectAll('.col_bars').attr('width', function (d) {\n      var inst_value = 0;\n      if (d.value > 0) {\n        inst_value = params.labels.bar_scale_col(d.value) / zoom_x;\n      }\n      return inst_value;\n    });\n  }\n};//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTEuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL2FwcGx5X3RyYW5zZm9ybWF0aW9uLmpzPzIzMDciXSwic291cmNlc0NvbnRlbnQiOlsidmFyIFBhcmFtcyA9IHJlcXVpcmUoJy4vcGFyYW1zJyk7XG52YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XG52YXIgY29uc3RyYWluX2ZvbnRfc2l6ZSA9IHJlcXVpcmUoJy4vY29uc3RyYWluX2ZvbnRfc2l6ZScpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHRyYW5zX3gsIHRyYW5zX3ksIHpvb21feCwgem9vbV95KSB7XG4gIHZhciBwYXJhbXMgPSBQYXJhbXMuZ2V0KCk7XG5cbiAgdmFyIGQzX3NjYWxlID0gem9vbV94O1xuXG4gIC8vIHkgLSBydWxlc1xuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgLy8gYXZhaWxhYmxlIHBhbm5pbmcgcm9vbSBpbiB0aGUgeSBkaXJlY3Rpb25cbiAgLy8gbXVsdGlwbGUgZXh0cmEgcm9vbSAoem9vbSAtIDEpIGJ5IHRoZSB3aWR0aFxuICAvLyBhbHdheXMgZGVmaW5lZCBpbiB0aGUgc2FtZSB3YXlcbiAgdmFyIHBhbl9yb29tX3kgPSAoZDNfc2NhbGUgLSAxKSAqIHBhcmFtcy52aXouY2x1c3QuZGltLmhlaWdodDtcblxuICAvLyBkbyBub3QgdHJhbnNsYXRlIGlmIHRyYW5zbGF0ZSBpbiB5IGRpcmVjdGlvbiBpcyBwb3NpdGl2ZVxuICBpZiAodHJhbnNfeSA+PSAwKSB7XG4gICAgLy8gcmVzdHJpY3QgdHJhbnNmb3JtYXRpb24gcGFyYW1ldGVyc1xuICAgIC8vIG5vIHBhbm5pbmcgaW4gZWl0aGVyIGRpcmVjdGlvblxuICAgIHRyYW5zX3kgPSAwO1xuICB9XG4gIC8vIHJlc3RyaWN0IHkgcGFuIHRvIHBhbl9yb29tX3kgaWYgbmVjZXNzYXJ5XG4gIGVsc2UgaWYgKHRyYW5zX3kgPD0gLXBhbl9yb29tX3kpIHtcbiAgICB0cmFuc195ID0gLXBhbl9yb29tX3k7XG4gIH1cblxuICAvLyB4IC0gcnVsZXNcbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gIC8vIHpvb20gaW4geSBkaXJlY3Rpb24gb25seSAtIHRyYW5zbGF0ZSBpbiB5IG9ubHlcbiAgaWYgKGQzX3NjYWxlIDwgcGFyYW1zLnZpei56b29tX3N3aXRjaCkge1xuICAgIC8vIG5vIHggdHJhbnNsYXRlIG9yIHpvb21cbiAgICB0cmFuc194ID0gMDtcbiAgICB6b29tX3ggPSAxO1xuICB9XG4gIC8vIHpvb20gaW4gYm90aCBkaXJlY3Rpb25zXG4gIC8vIHNjYWxlIGlzIGdyZWF0ZXIgdGhhbiBwYXJhbXMudml6Lnpvb21fc3dpdGNoXG4gIGVsc2Uge1xuICAgIC8vIGF2YWlsYWJsZSBwYW5uaW5nIHJvb20gaW4gdGhlIHggZGlyZWN0aW9uXG4gICAgLy8gbXVsdGlwbGUgZXh0cmEgcm9vbSAoem9vbSAtIDEpIGJ5IHRoZSB3aWR0aFxuICAgIHZhciBwYW5fcm9vbV94ID0gKGQzX3NjYWxlIC8gcGFyYW1zLnZpei56b29tX3N3aXRjaCAtIDEpICogcGFyYW1zLnZpei5jbHVzdC5kaW0ud2lkdGg7XG5cbiAgICAvLyBubyBwYW5uaW5nIGluIHRoZSBwb3NpdGl2ZSBkaXJlY3Rpb25cbiAgICBpZiAodHJhbnNfeCA+IDApIHtcbiAgICAgIC8vIHJlc3RyaWN0IHRyYW5zZm9ybWF0aW9uIHBhcmFtZXRlcnNcbiAgICAgIC8vIG5vIHBhbm5pbmcgaW4gdGhlIHggZGlyZWN0aW9uXG4gICAgICB0cmFuc194ID0gMDtcbiAgICAgIC8vIHNldCB6b29tX3hcbiAgICAgIHpvb21feCA9IGQzX3NjYWxlIC8gcGFyYW1zLnZpei56b29tX3N3aXRjaDtcbiAgICB9XG4gICAgLy8gcmVzdHJpY3QgcGFubmluZyB0byBwYW5fcm9vbV94XG4gICAgZWxzZSBpZiAodHJhbnNfeCA8PSAtcGFuX3Jvb21feCkge1xuICAgICAgLy8gcmVzdHJpY3QgdHJhbnNmb3JtYXRpb24gcGFyYW1ldGVyc1xuICAgICAgLy8gbm8gcGFubmluZyBpbiB0aGUgeCBkaXJlY3Rpb25cbiAgICAgIHRyYW5zX3ggPSAtcGFuX3Jvb21feDtcbiAgICAgIC8vIHNldCB6b29tX3hcbiAgICAgIHpvb21feCA9IGQzX3NjYWxlIC8gcGFyYW1zLnZpei56b29tX3N3aXRjaDtcbiAgICB9XG4gICAgLy8gYWxsb3cgdHdvIGRpbWVuc2lvbmFsIHBhbm5pbmdcbiAgICBlbHNlIHtcbiAgICAgIC8vIHJlc3RyaWN0IHRyYW5zZm9ybWF0aW9uIHBhcmFtZXRlcnNcbiAgICAgIC8vIHNldCB6b29tX3hcbiAgICAgIHpvb21feCA9IGQzX3NjYWxlIC8gcGFyYW1zLnZpei56b29tX3N3aXRjaDtcbiAgICB9XG4gIH1cblxuICAvLyB1cGRhdGUgdmlzaWJsZSBsaW5rc1xuICB2YXIgbWluX3JlY3RfaGVpZ2h0ID0gMztcblxuICAvLyBhcHBseSB0cmFuc2Zvcm1hdGlvbiBhbmQgcmVzZXQgdHJhbnNsYXRlIHZlY3RvclxuICAvLyB0aGUgem9vbSB2ZWN0b3IgKHpvb20uc2NhbGUpIG5ldmVyIGdldHMgcmVzZXRcbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gIC8vIHRyYW5zbGF0ZSBjbHVzdGVyZ3JhbVxuICAvLyB2aXouZ2V0X2NsdXN0X2dyb3VwKClcbiAgZDMuc2VsZWN0KHBhcmFtcy5yb290KycgLmNsdXN0X2dyb3VwJylcbiAgICAuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgnICsgW3RyYW5zX3gsIHRyYW5zX3ldICsgJykgc2NhbGUoJyArXG4gICAgem9vbV94ICsgJywnICsgem9vbV95ICsgJyknKTtcblxuICAvLyB0cmFuc2Zvcm0gcm93IGxhYmVsc1xuICBkMy5zZWxlY3QocGFyYW1zLnJvb3QrJyAucm93X2xhYmVsX3pvb21fY29udGFpbmVyJylcbiAgICAuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgnICsgWzAsIHRyYW5zX3ldICsgJykgc2NhbGUoJyArIHpvb21feSArXG4gICAgJyknKTtcblxuICAvLyB0cmFuc2Zvcm0gcm93X3pvb21fY29udGFpbmVyXG4gIC8vIHVzZSB0aGUgb2Zmc2V0IHNhdmVkIGluIHBhcmFtcywgb25seSB6b29tIGluIHRoZSB5IGRpcmVjdGlvblxuICBkMy5zZWxlY3QocGFyYW1zLnJvb3QrJyAucm93X3pvb21fY29udGFpbmVyJylcbiAgICAuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgnICsgWzAsIHRyYW5zX3ldICsgJykgc2NhbGUoIDEsJyArXG4gICAgem9vbV95ICsgJyknKTtcblxuICAvLyB0cmFuc2Zvcm0gY29sIGxhYmVsc1xuICAvLyBtb3ZlIGRvd24gY29sIGxhYmVscyBhcyB6b29taW5nIG9jY3Vycywgc3VidHJhY3QgdHJhbnNfeCAtIDIwIGFsbW9zdCB3b3Jrc1xuICBkMy5zZWxlY3QocGFyYW1zLnJvb3QrJyAuY29sX3pvb21fY29udGFpbmVyJylcbiAgICAuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgnICsgW3RyYW5zX3gsIDBdICsgJykgc2NhbGUoJyArIHpvb21feCArXG4gICAgJyknKTtcblxuICAvLyB0cmFuc2Zvcm0gY29sX2NsYXNzXG4gIGQzLnNlbGVjdCgnLmNvbF92aXpfem9vbV9jb250YWluZXInKVxuICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKCcgKyBbdHJhbnNfeCwgMF0gKyAnKSBzY2FsZSgnICsgem9vbV94ICtcbiAgICAnLDEpJyk7XG5cbiAgLy8gcmVzZXQgdHJhbnNsYXRlIHZlY3RvciAtIGFkZCBiYWNrIG1hcmdpbnMgdG8gdHJhbnNfeCBhbmQgdHJhbnNfeVxuICBwYXJhbXMuem9vbV9iZWhhdmlvclxuICAgIC50cmFuc2xhdGUoW3RyYW5zX3ggKyBwYXJhbXMudml6LmNsdXN0Lm1hcmdpbi5sZWZ0LCB0cmFuc195ICsgcGFyYW1zLnZpei5jbHVzdC5tYXJnaW4udG9wXG4gICAgXSk7XG5cbiAgdmFyIHRyYW5zID0gZmFsc2U7XG4gIGNvbnN0cmFpbl9mb250X3NpemUocGFyYW1zLCB0cmFucyk7XG5cblxuICAvLyByZXNpemUgbGFiZWwgYmFycyBpZiBuZWNlc3NhcnlcbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgaWYgKHV0aWxzLmhhcyhwYXJhbXMubmV0d29ya19kYXRhLnJvd19ub2Rlc1swXSwgJ3ZhbHVlJykpIHtcbiAgICBkMy5zZWxlY3RBbGwoJy5yb3dfYmFycycpXG4gICAgLmF0dHIoJ3dpZHRoJywgZnVuY3Rpb24oZCkge1xuICAgICAgdmFyIGluc3RfdmFsdWUgPSAwO1xuICAgICAgaW5zdF92YWx1ZSA9IHBhcmFtcy5sYWJlbHMuYmFyX3NjYWxlX3JvdyhNYXRoLmFicyhkLnZhbHVlKSkvem9vbV95O1xuICAgICAgcmV0dXJuIGluc3RfdmFsdWU7XG4gICAgfSlcbiAgICAuYXR0cigneCcsIGZ1bmN0aW9uKGQpIHtcbiAgICAgIHZhciBpbnN0X3ZhbHVlID0gMDtcbiAgICAgIGluc3RfdmFsdWUgPSAtcGFyYW1zLmxhYmVscy5iYXJfc2NhbGVfcm93KE1hdGguYWJzKGQudmFsdWUpKS96b29tX3k7XG4gICAgICByZXR1cm4gaW5zdF92YWx1ZTtcbiAgICB9KTtcbiAgfVxuXG4gIGlmICh1dGlscy5oYXMocGFyYW1zLm5ldHdvcmtfZGF0YS5jb2xfbm9kZXNbMF0sICd2YWx1ZScpKSB7XG4gICAgZDMuc2VsZWN0QWxsKCcuY29sX2JhcnMnKVxuICAgICAgLmF0dHIoJ3dpZHRoJywgZnVuY3Rpb24oZCkge1xuICAgICAgICB2YXIgaW5zdF92YWx1ZSA9IDA7XG4gICAgICAgIGlmIChkLnZhbHVlID4gMCl7XG4gICAgICAgICAgaW5zdF92YWx1ZSA9IHBhcmFtcy5sYWJlbHMuYmFyX3NjYWxlX2NvbChkLnZhbHVlKS96b29tX3g7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGluc3RfdmFsdWU7XG4gICAgICB9KTtcbiAgICB9XG59O1xuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogc3JjL2FwcGx5X3RyYW5zZm9ybWF0aW9uLmpzXG4gKiovIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQUpBO0FBQ0E7O0FBREE7OztBQWdCQTs7O0FBSEE7QUFPQTtBQURBO0FBQ0E7Ozs7QUFwQkE7O0FBNEJBO0FBQ0E7Ozs7QUFIQTs7O0FBVUE7QUFDQTs7QUFKQTs7O0FBU0E7O0FBSEE7OztBQUFBOzs7QUFXQTs7QUFIQTs7O0FBQUE7OztBQVdBO0FBWEE7QUFyQkE7QUFDQTs7QUEzQkE7QUFDQTs7Ozs7O0FBREE7QUFDQTs7QUFEQTtBQUNBOzs7QUFEQTtBQUNBOzs7QUFEQTtBQUNBOztBQURBO0FBQ0E7O0FBREE7QUFDQTtBQW9HQTtBQUNBO0FBQ0E7Ozs7QUF2R0E7QUE2R0E7QUFFQTtBQUNBO0FBQ0E7QUFIQTtBQU1BO0FBQ0E7QUFDQTtBQUhBO0FBUEE7QUFDQTtBQWFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBTEE7QUFGQTtBQTFIQSIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ },
/* 12 */
/***/ function(module, exports, __webpack_require__) {

	eval("var Params = __webpack_require__(1);\nvar utils = __webpack_require__(5);\nvar trim_text = __webpack_require__(13);\n\nmodule.exports = function (trans) {\n  var params = Params.get();\n\n  var trans_time;\n\n  if (trans) {\n    trans_time = 700;\n  } else {\n    trans_time = 0;\n  }\n\n  var fraction_keep = {};\n\n  var keep_width = {};\n  keep_width.row = params.bounding_width_max.row * params.labels.row_keep * params.zoom_behavior.scale();\n  keep_width.col = params.bounding_width_max.col * params.labels.col_keep * params.zoom_behavior.scale() / params.viz.zoom_switch;\n\n  if (keep_width.row > params.norm_label.width.row) {\n\n    params.viz.zoom_scale_font.row = params.norm_label.width.row / keep_width.row;\n    // params.viz.zoom_scale_font.row = params.norm_label.width.row / keep_width.row;\n\n    d3.selectAll('.row_label_text').each(function () {\n      if (trans) {\n\n        d3.select(this).select('text').style('font-size', params.labels.default_fs_row * params.viz.zoom_scale_font.row + 'px').attr('y', params.matrix.rect_height * 0.5 + params.labels.default_fs_row * 0.35 * params.viz.zoom_scale_font.row).style('opacity', 0.20).transition().duration(700).style('opacity', 1);\n      } else {\n\n        d3.select(this).select('text').style('font-size', params.labels.default_fs_row * params.viz.zoom_scale_font.row + 'px').attr('y', params.matrix.rect_height * 0.5 + params.labels.default_fs_row * 0.35 * params.viz.zoom_scale_font.row);\n      }\n    });\n  } else {\n\n    d3.selectAll('.row_label_text').each(function () {\n      if (trans) {\n\n        d3.select(this).select('text').style('font-size', params.labels.default_fs_row + 'px')\n        // do not scale by params.viz.zoom_scale_font.row, since this is 1\n        .attr('y', params.matrix.rect_height * 0.5 + params.labels.default_fs_row * 0.35);\n\n        d3.select(this).select('text').text(function (d) {\n          return utils.normal_name(d, params.labels.max_label_char);\n        }).style('opacity', 0.20).transition().duration(700).style('opacity', 1);\n      } else {\n\n        d3.select(this).select('text').style('font-size', params.labels.default_fs_row + 'px').text(function (d) {\n          return utils.normal_name(d, params.labels.max_label_char);\n        });\n      }\n    });\n  }\n\n  if (keep_width.col > params.norm_label.width.col) {\n\n    params.viz.zoom_scale_font.col = params.norm_label.width.col / keep_width.col;\n\n    d3.selectAll('.col_label_click').each(function () {\n      if (trans) {\n        d3.select(this).select('text').style('font-size', params.labels.default_fs_col * params.viz.zoom_scale_font.col + 'px').style('opacity', 0.20).transition().duration(700).style('opacity', 1);\n      } else {\n        d3.select(this).select('text').style('font-size', params.labels.default_fs_col * params.viz.zoom_scale_font.col + 'px');\n      }\n    });\n  } else {\n    d3.selectAll('.col_label_click').each(function () {\n      if (trans) {\n        d3.select(this).select('text').style('font-size', params.labels.default_fs_col + 'px');\n        d3.select(this).select('text').text(function (d) {\n          return utils.normal_name(d, params.labels.max_label_char);\n        }).style('opacity', 0.20).transition().duration(700).style('opacity', 1);\n      } else {\n        d3.select(this).select('text').style('font-size', params.labels.default_fs_col + 'px').text(function (d) {\n          return utils.normal_name(d, params.labels.max_label_char);\n        });\n      }\n    });\n  }\n\n  var max_row_width = params.norm_label.width.row;\n  var max_col_width = params.norm_label.width.col;\n\n  // constrain text after zooming\n  if (params.labels.row_keep < 1) {\n    d3.selectAll('.row_label_text').each(function () {\n      trim_text(this, 'row');\n    });\n  }\n  if (params.labels.col_keep < 1) {\n    d3.selectAll('.col_label_click').each(function () {\n      trim_text(this, 'col');\n    });\n  }\n\n  // // constrain column text highlight bars\n  // // change the size of the highlighting rects\n  // d3.selectAll('.col_label_click')\n  //   .each(function(d) {\n  //     var bbox = d3.select(this)\n  //       .select('text')[0][0]\n  //       .getBBox();\n\n  //     d3.select(this)\n  //       .select('rect')\n  //       .attr('width', bbox.width * 1.1)\n  //       .attr('height', 0.67*params.matrix.rect_width);\n  //       // .style('fill', function(d){\n  //       //   var inst_color = 'white';\n  //       //   if (params.labels.show_categories){\n  //       //     inst_color = params.labels.class_colors.col[d.cl];\n  //       //   }\n  //       //   return inst_color\n  //       // })\n  //       // .style('opacity', 0.25);\n\n  //   });\n};undefined\n//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTIuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL2NvbnN0cmFpbl9mb250X3NpemUuanM/ZjM0NSJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgUGFyYW1zID0gcmVxdWlyZSgnLi9wYXJhbXMnKTtcbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcbnZhciB0cmltX3RleHQgPSByZXF1aXJlKCcuL3RyaW1fdGV4dCcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHRyYW5zKSB7XG4gIHZhciBwYXJhbXMgPSBQYXJhbXMuZ2V0KCk7XG5cbiAgdmFyIHRyYW5zX3RpbWU7XG5cbiAgaWYgKHRyYW5zKSB7XG4gICAgdHJhbnNfdGltZSA9IDcwMDtcbiAgfSBlbHNlIHtcbiAgICB0cmFuc190aW1lID0gMDtcbiAgfVxuXG4gIHZhciBmcmFjdGlvbl9rZWVwID0ge307XG5cbiAgdmFyIGtlZXBfd2lkdGggPSB7fTtcbiAga2VlcF93aWR0aC5yb3cgPSBwYXJhbXMuYm91bmRpbmdfd2lkdGhfbWF4LnJvdyAqIHBhcmFtcy5sYWJlbHMucm93X2tlZXBcbiAgICAqIHBhcmFtcy56b29tX2JlaGF2aW9yLnNjYWxlKCk7XG4gIGtlZXBfd2lkdGguY29sID0gcGFyYW1zLmJvdW5kaW5nX3dpZHRoX21heC5jb2wgKiBwYXJhbXMubGFiZWxzLmNvbF9rZWVwXG4gICAgKiBwYXJhbXMuem9vbV9iZWhhdmlvci5zY2FsZSgpIC8gcGFyYW1zLnZpei56b29tX3N3aXRjaDtcblxuXG5cbiAgaWYgKGtlZXBfd2lkdGgucm93ID4gcGFyYW1zLm5vcm1fbGFiZWwud2lkdGgucm93KSB7XG5cbiAgICBwYXJhbXMudml6Lnpvb21fc2NhbGVfZm9udC5yb3cgPSBwYXJhbXMubm9ybV9sYWJlbC53aWR0aC5yb3cgLyBrZWVwX3dpZHRoLnJvdztcbiAgICAvLyBwYXJhbXMudml6Lnpvb21fc2NhbGVfZm9udC5yb3cgPSBwYXJhbXMubm9ybV9sYWJlbC53aWR0aC5yb3cgLyBrZWVwX3dpZHRoLnJvdztcblxuICAgIGQzLnNlbGVjdEFsbCgnLnJvd19sYWJlbF90ZXh0JykuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgIGlmICh0cmFucyl7XG5cbiAgICAgICAgZDMuc2VsZWN0KHRoaXMpLnNlbGVjdCgndGV4dCcpXG4gICAgICAgICAgLnN0eWxlKCdmb250LXNpemUnLCBwYXJhbXMubGFiZWxzLmRlZmF1bHRfZnNfcm93ICogcGFyYW1zLnZpei56b29tX3NjYWxlX2ZvbnQucm93ICsgJ3B4JylcbiAgICAgICAgICAuYXR0cigneScsIHBhcmFtcy5tYXRyaXgucmVjdF9oZWlnaHQgKiAwLjUgKyBwYXJhbXMubGFiZWxzLmRlZmF1bHRfZnNfcm93KjAuMzUqcGFyYW1zLnZpei56b29tX3NjYWxlX2ZvbnQucm93IClcbiAgICAgICAgICAuc3R5bGUoJ29wYWNpdHknLDAuMjApLnRyYW5zaXRpb24oKS5kdXJhdGlvbig3MDApXG4gICAgICAgICAgLnN0eWxlKCdvcGFjaXR5JywxKTtcblxuICAgICAgfSBlbHNlIHtcblxuICAgICAgICBkMy5zZWxlY3QodGhpcykuc2VsZWN0KCd0ZXh0JylcbiAgICAgICAgICAuc3R5bGUoJ2ZvbnQtc2l6ZScsIHBhcmFtcy5sYWJlbHMuZGVmYXVsdF9mc19yb3cgKiBwYXJhbXMudml6Lnpvb21fc2NhbGVfZm9udC5yb3cgKyAncHgnKVxuICAgICAgICAgIC5hdHRyKCd5JywgcGFyYW1zLm1hdHJpeC5yZWN0X2hlaWdodCAqIDAuNSArIHBhcmFtcy5sYWJlbHMuZGVmYXVsdF9mc19yb3cqMC4zNSpwYXJhbXMudml6Lnpvb21fc2NhbGVfZm9udC5yb3cgKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSBlbHNlIHtcblxuICAgIGQzLnNlbGVjdEFsbCgnLnJvd19sYWJlbF90ZXh0JykuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgIGlmICh0cmFucyl7XG5cbiAgICAgICAgZDMuc2VsZWN0KHRoaXMpLnNlbGVjdCgndGV4dCcpXG4gICAgICAgICAgLnN0eWxlKCdmb250LXNpemUnLCBwYXJhbXMubGFiZWxzLmRlZmF1bHRfZnNfcm93ICsgJ3B4JylcbiAgICAgICAgICAvLyBkbyBub3Qgc2NhbGUgYnkgcGFyYW1zLnZpei56b29tX3NjYWxlX2ZvbnQucm93LCBzaW5jZSB0aGlzIGlzIDFcbiAgICAgICAgICAuYXR0cigneScsIHBhcmFtcy5tYXRyaXgucmVjdF9oZWlnaHQgKiAwLjUgKyBwYXJhbXMubGFiZWxzLmRlZmF1bHRfZnNfcm93KjAuMzUgKTtcblxuICAgICAgICBkMy5zZWxlY3QodGhpcykuc2VsZWN0KCd0ZXh0JylcbiAgICAgICAgICAudGV4dChmdW5jdGlvbihkKXsgcmV0dXJuIHV0aWxzLm5vcm1hbF9uYW1lKGQsIHBhcmFtcy5sYWJlbHMubWF4X2xhYmVsX2NoYXIpO30pXG4gICAgICAgICAgLnN0eWxlKCdvcGFjaXR5JywwLjIwKS50cmFuc2l0aW9uKCkuZHVyYXRpb24oNzAwKVxuICAgICAgICAgIC5zdHlsZSgnb3BhY2l0eScsMSk7XG5cbiAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgZDMuc2VsZWN0KHRoaXMpLnNlbGVjdCgndGV4dCcpXG4gICAgICAgICAgLnN0eWxlKCdmb250LXNpemUnLCBwYXJhbXMubGFiZWxzLmRlZmF1bHRfZnNfcm93ICsgJ3B4JylcbiAgICAgICAgICAudGV4dChmdW5jdGlvbihkKXsgcmV0dXJuIHV0aWxzLm5vcm1hbF9uYW1lKGQsIHBhcmFtcy5sYWJlbHMubWF4X2xhYmVsX2NoYXIpO30pO1xuXG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuXG4gIGlmIChrZWVwX3dpZHRoLmNvbCA+IHBhcmFtcy5ub3JtX2xhYmVsLndpZHRoLmNvbCkge1xuXG4gICAgcGFyYW1zLnZpei56b29tX3NjYWxlX2ZvbnQuY29sID0gcGFyYW1zLm5vcm1fbGFiZWwud2lkdGguY29sIC8ga2VlcF93aWR0aC5jb2w7XG5cbiAgICBkMy5zZWxlY3RBbGwoJy5jb2xfbGFiZWxfY2xpY2snKS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKHRyYW5zKXtcbiAgICAgICAgZDMuc2VsZWN0KHRoaXMpLnNlbGVjdCgndGV4dCcpXG4gICAgICAgICAgLnN0eWxlKCdmb250LXNpemUnLCBwYXJhbXMubGFiZWxzLmRlZmF1bHRfZnNfY29sICpcbiAgICAgICAgICAgIHBhcmFtcy52aXouem9vbV9zY2FsZV9mb250LmNvbCArICdweCcpXG4gICAgICAgICAgLnN0eWxlKCdvcGFjaXR5JywwLjIwKS50cmFuc2l0aW9uKCkuZHVyYXRpb24oNzAwKVxuICAgICAgICAgIC5zdHlsZSgnb3BhY2l0eScsMSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkMy5zZWxlY3QodGhpcykuc2VsZWN0KCd0ZXh0JylcbiAgICAgICAgICAuc3R5bGUoJ2ZvbnQtc2l6ZScsIHBhcmFtcy5sYWJlbHMuZGVmYXVsdF9mc19jb2wgKlxuICAgICAgICAgICAgcGFyYW1zLnZpei56b29tX3NjYWxlX2ZvbnQuY29sICsgJ3B4Jyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgZDMuc2VsZWN0QWxsKCcuY29sX2xhYmVsX2NsaWNrJykuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgIGlmICh0cmFucyl7XG4gICAgICAgIGQzLnNlbGVjdCh0aGlzKS5zZWxlY3QoJ3RleHQnKVxuICAgICAgICAgIC5zdHlsZSgnZm9udC1zaXplJywgcGFyYW1zLmxhYmVscy5kZWZhdWx0X2ZzX2NvbCArICdweCcpO1xuICAgICAgICBkMy5zZWxlY3QodGhpcykuc2VsZWN0KCd0ZXh0JylcbiAgICAgICAgICAudGV4dChmdW5jdGlvbihkKXsgcmV0dXJuIHV0aWxzLm5vcm1hbF9uYW1lKGQsIHBhcmFtcy5sYWJlbHMubWF4X2xhYmVsX2NoYXIpO30pXG4gICAgICAgICAgLnN0eWxlKCdvcGFjaXR5JywwLjIwKS50cmFuc2l0aW9uKCkuZHVyYXRpb24oNzAwKVxuICAgICAgICAgIC5zdHlsZSgnb3BhY2l0eScsMSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkMy5zZWxlY3QodGhpcykuc2VsZWN0KCd0ZXh0JylcbiAgICAgICAgICAuc3R5bGUoJ2ZvbnQtc2l6ZScsIHBhcmFtcy5sYWJlbHMuZGVmYXVsdF9mc19jb2wgKyAncHgnKVxuICAgICAgICAgIC50ZXh0KGZ1bmN0aW9uKGQpeyByZXR1cm4gdXRpbHMubm9ybWFsX25hbWUoZCwgcGFyYW1zLmxhYmVscy5tYXhfbGFiZWxfY2hhcik7fSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuXG4gIHZhciBtYXhfcm93X3dpZHRoID0gcGFyYW1zLm5vcm1fbGFiZWwud2lkdGgucm93O1xuICB2YXIgbWF4X2NvbF93aWR0aCA9IHBhcmFtcy5ub3JtX2xhYmVsLndpZHRoLmNvbDtcblxuICAvLyBjb25zdHJhaW4gdGV4dCBhZnRlciB6b29taW5nXG4gIGlmIChwYXJhbXMubGFiZWxzLnJvd19rZWVwIDwgMSl7XG4gICAgZDMuc2VsZWN0QWxsKCcucm93X2xhYmVsX3RleHQnICkuZWFjaChmdW5jdGlvbigpIHsgdHJpbV90ZXh0KHRoaXMsICdyb3cnKTsgfSk7XG4gIH1cbiAgaWYgKHBhcmFtcy5sYWJlbHMuY29sX2tlZXAgPCAxKXtcbiAgICBkMy5zZWxlY3RBbGwoJy5jb2xfbGFiZWxfY2xpY2snKS5lYWNoKGZ1bmN0aW9uKCkgeyB0cmltX3RleHQodGhpcywgJ2NvbCcpOyB9KTtcbiAgfVxuXG4gIC8vIC8vIGNvbnN0cmFpbiBjb2x1bW4gdGV4dCBoaWdobGlnaHQgYmFyc1xuICAvLyAvLyBjaGFuZ2UgdGhlIHNpemUgb2YgdGhlIGhpZ2hsaWdodGluZyByZWN0c1xuICAvLyBkMy5zZWxlY3RBbGwoJy5jb2xfbGFiZWxfY2xpY2snKVxuICAvLyAgIC5lYWNoKGZ1bmN0aW9uKGQpIHtcbiAgLy8gICAgIHZhciBiYm94ID0gZDMuc2VsZWN0KHRoaXMpXG4gIC8vICAgICAgIC5zZWxlY3QoJ3RleHQnKVswXVswXVxuICAvLyAgICAgICAuZ2V0QkJveCgpO1xuXG4gIC8vICAgICBkMy5zZWxlY3QodGhpcylcbiAgLy8gICAgICAgLnNlbGVjdCgncmVjdCcpXG4gIC8vICAgICAgIC5hdHRyKCd3aWR0aCcsIGJib3gud2lkdGggKiAxLjEpXG4gIC8vICAgICAgIC5hdHRyKCdoZWlnaHQnLCAwLjY3KnBhcmFtcy5tYXRyaXgucmVjdF93aWR0aCk7XG4gIC8vICAgICAgIC8vIC5zdHlsZSgnZmlsbCcsIGZ1bmN0aW9uKGQpe1xuICAvLyAgICAgICAvLyAgIHZhciBpbnN0X2NvbG9yID0gJ3doaXRlJztcbiAgLy8gICAgICAgLy8gICBpZiAocGFyYW1zLmxhYmVscy5zaG93X2NhdGVnb3JpZXMpe1xuICAvLyAgICAgICAvLyAgICAgaW5zdF9jb2xvciA9IHBhcmFtcy5sYWJlbHMuY2xhc3NfY29sb3JzLmNvbFtkLmNsXTtcbiAgLy8gICAgICAgLy8gICB9XG4gIC8vICAgICAgIC8vICAgcmV0dXJuIGluc3RfY29sb3JcbiAgLy8gICAgICAgLy8gfSlcbiAgLy8gICAgICAgLy8gLnN0eWxlKCdvcGFjaXR5JywgMC4yNSk7XG5cbiAgLy8gICB9KTtcblxufTtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIHNyYy9jb25zdHJhaW5fZm9udF9zaXplLmpzXG4gKiovIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUhBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7OztBQUZBO0FBTUE7QUFDQTtBQUNBO0FBRkE7QUFDQTtBQVNBO0FBVkE7QUFEQTtBQUxBO0FBQ0E7QUFzQkE7QUFDQTtBQUNBO0FBQ0E7O0FBQUE7QUFDQTtBQUlBO0FBQ0E7QUFBQTtBQVJBO0FBQ0E7QUFhQTtBQUVBO0FBQUE7QUFoQkE7QUFEQTtBQXZCQTtBQUNBO0FBOENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFPQTtBQVBBO0FBREE7QUFKQTtBQWtCQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFKQTtBQVFBO0FBRUE7QUFBQTtBQVZBO0FBREE7QUFsQkE7QUFDQTtBQWtDQTtBQUNBO0FBQ0E7O0FBekdBO0FBNEdBO0FBQUE7QUFBQTtBQURBO0FBR0E7QUFDQTtBQUFBO0FBQUE7QUFEQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQS9HQUFBQUE7Iiwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 13 */
/***/ function(module, exports, __webpack_require__) {

	eval("var Params = __webpack_require__(1);\n\nmodule.exports = function (inst_selection, inst_rc) {\n  var params = Params.get();\n\n  var max_width, inst_zoom;\n\n  var safe_row_trim_text = 0.9;\n\n  if (inst_rc === 'row') {\n    max_width = params.norm_label.width.row * safe_row_trim_text;\n    inst_zoom = params.zoom_behavior.scale();\n  } else {\n    // the column label has extra length since its rotated\n    max_width = params.norm_label.width.col;\n    inst_zoom = params.zoom_behavior.scale() / params.viz.zoom_switch;\n  }\n\n  var tmp_width = d3.select(inst_selection).select('text').node().getBBox().width;\n  var inst_text = d3.select(inst_selection).select('text').text();\n  var actual_width = tmp_width * inst_zoom;\n\n  if (actual_width > max_width) {\n\n    var trim_fraction = max_width / actual_width;\n    var keep_num_char = Math.floor(inst_text.length * trim_fraction) - 3;\n    var trimmed_text = inst_text.substring(0, keep_num_char) + '..';\n    d3.select(inst_selection).select('text').text(trimmed_text);\n  }\n};//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL3RyaW1fdGV4dC5qcz9mMmJlIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBQYXJhbXMgPSByZXF1aXJlKCcuL3BhcmFtcycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGluc3Rfc2VsZWN0aW9uLCBpbnN0X3JjKSB7XG4gIHZhciBwYXJhbXMgPSBQYXJhbXMuZ2V0KCk7XG5cbiAgdmFyIG1heF93aWR0aCxcbiAgICAgIGluc3Rfem9vbTtcblxuICB2YXIgc2FmZV9yb3dfdHJpbV90ZXh0ID0gMC45O1xuXG4gIGlmIChpbnN0X3JjID09PSAncm93Jyl7XG4gICAgbWF4X3dpZHRoID0gcGFyYW1zLm5vcm1fbGFiZWwud2lkdGgucm93ICogc2FmZV9yb3dfdHJpbV90ZXh0O1xuICAgIGluc3Rfem9vbSA9IHBhcmFtcy56b29tX2JlaGF2aW9yLnNjYWxlKCk7XG4gIH0gZWxzZSB7XG4gICAgLy8gdGhlIGNvbHVtbiBsYWJlbCBoYXMgZXh0cmEgbGVuZ3RoIHNpbmNlIGl0cyByb3RhdGVkXG4gICAgbWF4X3dpZHRoID0gcGFyYW1zLm5vcm1fbGFiZWwud2lkdGguY29sO1xuICAgIGluc3Rfem9vbSA9IHBhcmFtcy56b29tX2JlaGF2aW9yLnNjYWxlKCkvcGFyYW1zLnZpei56b29tX3N3aXRjaDtcbiAgfVxuXG4gIHZhciB0bXBfd2lkdGggPSBkMy5zZWxlY3QoaW5zdF9zZWxlY3Rpb24pLnNlbGVjdCgndGV4dCcpLm5vZGUoKS5nZXRCQm94KCkud2lkdGg7XG4gIHZhciBpbnN0X3RleHQgPSBkMy5zZWxlY3QoaW5zdF9zZWxlY3Rpb24pLnNlbGVjdCgndGV4dCcpLnRleHQoKTtcbiAgdmFyIGFjdHVhbF93aWR0aCA9IHRtcF93aWR0aCppbnN0X3pvb207XG5cbiAgaWYgKGFjdHVhbF93aWR0aD5tYXhfd2lkdGgpe1xuXG4gICAgdmFyIHRyaW1fZnJhY3Rpb24gPSBtYXhfd2lkdGgvYWN0dWFsX3dpZHRoO1xuICAgIHZhciBrZWVwX251bV9jaGFyID0gTWF0aC5mbG9vcihpbnN0X3RleHQubGVuZ3RoKnRyaW1fZnJhY3Rpb24pLTM7XG4gICAgdmFyIHRyaW1tZWRfdGV4dCA9IGluc3RfdGV4dC5zdWJzdHJpbmcoMCxrZWVwX251bV9jaGFyKSsnLi4nO1xuICAgIGQzLnNlbGVjdChpbnN0X3NlbGVjdGlvbikuc2VsZWN0KCd0ZXh0JylcbiAgICAgIC50ZXh0KHRyaW1tZWRfdGV4dCk7XG4gIH1cblxufTtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIHNyYy90cmltX3RleHQuanNcbiAqKi8iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBOztBQUtBO0FBQ0E7QUFOQTtBQUNBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQXJCQSIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ },
/* 14 */
/***/ function(module, exports, __webpack_require__) {

	eval("var Params = __webpack_require__(1);\nvar generate_matrix = __webpack_require__(15);\nvar generate_dendro = __webpack_require__(19);\nvar make_rows = __webpack_require__(25);\nvar make_cols = __webpack_require__(30);\nvar generate_super_labels = __webpack_require__(33);\nvar run_spillover = __webpack_require__(34);\nvar run_search = __webpack_require__(35);\nvar two_translate_zoom = __webpack_require__(36);\nvar initialize_resizing = __webpack_require__(37);\nvar ini_doubleclick = __webpack_require__(40);\n\nvar params = Params.get();\nvar svg_group = d3.select(params.viz.viz_wrapper).append('svg').attr('class', 'viz_svg').attr('width', params.viz.svg_dim.width).attr('height', params.viz.svg_dim.height);\n\nsvg_group.append('rect').attr('class', 'super_background').style('width', params.viz.svg_dim.width).style('height', params.viz.svg_dim.height).style('fill', 'white');\n\nvar matrix = generate_matrix(svg_group);\n\n// var labels = generate_labels(params);\n\nvar delay_text = 0;\nmake_rows(delay_text);\nvar container_all_col = make_cols(delay_text);\n\nif (params.viz.show_dendrogram) {\n\n  var row_dendrogram = generate_dendro('row');\n\n  container_all_col.append('g').attr('class', 'col_viz_outer_container').attr('transform', function () {\n    var inst_offset = params.norm_label.width.col + 2;\n    return 'translate(0,' + inst_offset + ')';\n  }).append('g').attr('class', 'col_viz_zoom_container');\n\n  var col_dendrogram = generate_dendro('col');\n}\n\nrun_spillover(container_all_col);\n\nif (params.labels.super_labels) {\n  generate_super_labels();\n}\n\nfunction border_colors() {\n  var inst_color = params.viz.super_border_color;\n  if (params.viz.expand) {\n    inst_color = 'white';\n  }\n  return inst_color;\n}\n\n// left border\nd3.select(params.viz.viz_svg).append('rect').classed('left_border', true).classed('borders', true).attr('fill', border_colors).attr('width', params.viz.grey_border_width).attr('height', params.viz.svg_dim.height).attr('transform', 'translate(0,0)');\n\n// right border\nd3.select(params.viz.viz_svg).append('rect').classed('right_border', true).classed('borders', true).attr('fill', border_colors).attr('width', params.viz.grey_border_width).attr('height', params.viz.svg_dim.height).attr('transform', function () {\n  var inst_offset = params.viz.svg_dim.width - params.viz.grey_border_width;\n  return 'translate(' + inst_offset + ',0)';\n});\n\n// top border\nd3.select(params.viz.viz_svg).append('rect').classed('top_border', true).classed('borders', true).attr('fill', border_colors).attr('width', params.viz.svg_dim.width).attr('height', params.viz.grey_border_width).attr('transform', function () {\n  var inst_offset = 0;\n  return 'translate(' + inst_offset + ',0)';\n});\n\n// bottom border\nd3.select(params.viz.viz_svg).append('rect').classed('bottom_border', true).classed('borders', true).attr('fill', border_colors).attr('width', params.viz.svg_dim.width).attr('height', params.viz.grey_border_width).attr('transform', function () {\n  var inst_offset = params.viz.svg_dim.height - params.viz.grey_border_width;\n  return 'translate(0,' + inst_offset + ')';\n});\n\ninitialize_resizing();\n\nini_doubleclick();\n\nif (params.viz.do_zoom) {\n  svg_group.call(params.zoom_behavior);\n}\n\nd3.select(params.viz.viz_svg).on('dblclick.zoom', null);\n\nvar gene_search = run_search(params.network_data.row_nodes, 'name');\n\nvar opacity_slider = function (inst_slider) {\n\n  // var max_link = params.matrix.max_link;\n  var slider_scale = d3.scale.linear().domain([0, 1]).range([1, 0.1]);\n\n  var slider_factor = slider_scale(inst_slider);\n\n  if (params.matrix.opacity_function === 'linear') {\n    params.matrix.opacity_scale = d3.scale.linear().domain([0, slider_factor * Math.abs(params.matrix.max_link)]).clamp(true).range([0.0, 1.0]);\n  } else if (params.matrix.opacity_function === 'log') {\n    params.matrix.opacity_scale = d3.scale.log().domain([0.0001, slider_factor * Math.abs(params.matrix.max_link)]).clamp(true).range([0.0, 1.0]);\n  }\n\n  d3.selectAll('.tile').style('fill-opacity', function (d) {\n    return params.matrix.opacity_scale(Math.abs(d.value));\n  });\n};\n\nfunction reset_zoom(inst_scale) {\n  two_translate_zoom(0, 0, inst_scale);\n}\n\nmodule.exports = {\n  change_groups: function (inst_rc, inst_index) {\n    if (inst_rc === 'row') {\n      row_dendrogram.change_groups(inst_rc, inst_index);\n    } else {\n      col_dendrogram.change_groups(inst_rc, inst_index);\n    }\n  },\n  get_clust_group: function () {\n    return matrix.get_clust_group();\n  },\n  get_matrix: function () {\n    return matrix.get_matrix();\n  },\n  get_nodes: function (type) {\n    return matrix.get_nodes(type);\n  },\n  reorder: __webpack_require__(41),\n  search: gene_search,\n  opacity_slider: opacity_slider,\n  run_reset_visualization_size: __webpack_require__(39),\n  update_network: __webpack_require__(42),\n  draw_gridlines: matrix.draw_gridlines,\n  reset_zoom: reset_zoom\n};//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTQuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL3Zpei5qcz8xMGU3Il0sInNvdXJjZXNDb250ZW50IjpbInZhciBQYXJhbXMgPSByZXF1aXJlKCcuL3BhcmFtcycpO1xudmFyIGdlbmVyYXRlX21hdHJpeCA9IHJlcXVpcmUoJy4vbWF0cml4Jyk7XG52YXIgZ2VuZXJhdGVfZGVuZHJvID0gcmVxdWlyZSgnLi9kZW5kcm9ncmFtJyk7XG52YXIgbWFrZV9yb3dzID0gcmVxdWlyZSgnLi9sYWJlbHMvbWFrZV9yb3dzJyk7XG52YXIgbWFrZV9jb2xzID0gcmVxdWlyZSgnLi9sYWJlbHMvbWFrZV9jb2xzJyk7XG52YXIgZ2VuZXJhdGVfc3VwZXJfbGFiZWxzID0gcmVxdWlyZSgnLi9sYWJlbHMvc3VwZXJfbGFiZWxzJyk7XG52YXIgcnVuX3NwaWxsb3ZlciA9IHJlcXVpcmUoJy4vc3BpbGxvdmVyJyk7XG52YXIgcnVuX3NlYXJjaCA9IHJlcXVpcmUoJy4vc2VhcmNoJyk7XG52YXIgdHdvX3RyYW5zbGF0ZV96b29tID0gcmVxdWlyZSgnLi90d29fdHJhbnNsYXRlX3pvb20nKTtcbnZhciBpbml0aWFsaXplX3Jlc2l6aW5nID0gcmVxdWlyZSgnLi9pbml0aWFsaXplX3Jlc2l6aW5nJyk7XG52YXIgaW5pX2RvdWJsZWNsaWNrID0gcmVxdWlyZSgnLi9pbmlfZG91YmxlY2xpY2snKTtcblxudmFyIHBhcmFtcyA9IFBhcmFtcy5nZXQoKTtcbnZhciBzdmdfZ3JvdXAgPSBkMy5zZWxlY3QocGFyYW1zLnZpei52aXpfd3JhcHBlcilcbiAgLmFwcGVuZCgnc3ZnJylcbiAgLmF0dHIoJ2NsYXNzJywgJ3Zpel9zdmcnKVxuICAuYXR0cignd2lkdGgnLCBwYXJhbXMudml6LnN2Z19kaW0ud2lkdGgpXG4gIC5hdHRyKCdoZWlnaHQnLCBwYXJhbXMudml6LnN2Z19kaW0uaGVpZ2h0KTtcblxuc3ZnX2dyb3VwXG4gIC5hcHBlbmQoJ3JlY3QnKVxuICAuYXR0cignY2xhc3MnLCAnc3VwZXJfYmFja2dyb3VuZCcpXG4gIC5zdHlsZSgnd2lkdGgnLCBwYXJhbXMudml6LnN2Z19kaW0ud2lkdGgpXG4gIC5zdHlsZSgnaGVpZ2h0JywgcGFyYW1zLnZpei5zdmdfZGltLmhlaWdodClcbiAgLnN0eWxlKCdmaWxsJywgJ3doaXRlJyk7XG5cbnZhciBtYXRyaXggPSBnZW5lcmF0ZV9tYXRyaXgoc3ZnX2dyb3VwKTtcblxuLy8gdmFyIGxhYmVscyA9IGdlbmVyYXRlX2xhYmVscyhwYXJhbXMpO1xuXG52YXIgZGVsYXlfdGV4dCA9IDA7XG5tYWtlX3Jvd3MoZGVsYXlfdGV4dCk7XG52YXIgY29udGFpbmVyX2FsbF9jb2wgPSBtYWtlX2NvbHMoZGVsYXlfdGV4dCk7XG5cblxuaWYgKHBhcmFtcy52aXouc2hvd19kZW5kcm9ncmFtKSB7XG5cbiAgdmFyIHJvd19kZW5kcm9ncmFtID0gZ2VuZXJhdGVfZGVuZHJvKCdyb3cnKTtcblxuICBjb250YWluZXJfYWxsX2NvbFxuICAgIC5hcHBlbmQoJ2cnKVxuICAgIC5hdHRyKCdjbGFzcycsICdjb2xfdml6X291dGVyX2NvbnRhaW5lcicpXG4gICAgLmF0dHIoJ3RyYW5zZm9ybScsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBpbnN0X29mZnNldCA9IHBhcmFtcy5ub3JtX2xhYmVsLndpZHRoLmNvbCArIDI7XG4gICAgICByZXR1cm4gJ3RyYW5zbGF0ZSgwLCcgKyBpbnN0X29mZnNldCArICcpJztcbiAgICB9KVxuICAgIC5hcHBlbmQoJ2cnKVxuICAgIC5hdHRyKCdjbGFzcycsICdjb2xfdml6X3pvb21fY29udGFpbmVyJyk7XG5cbiAgdmFyIGNvbF9kZW5kcm9ncmFtID0gZ2VuZXJhdGVfZGVuZHJvKCdjb2wnKTtcblxufVxuXG5ydW5fc3BpbGxvdmVyKGNvbnRhaW5lcl9hbGxfY29sKTtcblxuaWYgKHBhcmFtcy5sYWJlbHMuc3VwZXJfbGFiZWxzKSB7XG4gIGdlbmVyYXRlX3N1cGVyX2xhYmVscygpO1xufVxuXG5mdW5jdGlvbiBib3JkZXJfY29sb3JzKCkge1xuICB2YXIgaW5zdF9jb2xvciA9IHBhcmFtcy52aXouc3VwZXJfYm9yZGVyX2NvbG9yO1xuICBpZiAocGFyYW1zLnZpei5leHBhbmQpIHtcbiAgICBpbnN0X2NvbG9yID0gJ3doaXRlJztcbiAgfVxuICByZXR1cm4gaW5zdF9jb2xvcjtcbn1cblxuLy8gbGVmdCBib3JkZXJcbmQzLnNlbGVjdChwYXJhbXMudml6LnZpel9zdmcpXG4gIC5hcHBlbmQoJ3JlY3QnKVxuICAuY2xhc3NlZCgnbGVmdF9ib3JkZXInLHRydWUpXG4gIC5jbGFzc2VkKCdib3JkZXJzJyx0cnVlKVxuICAuYXR0cignZmlsbCcsIGJvcmRlcl9jb2xvcnMpXG4gIC5hdHRyKCd3aWR0aCcsIHBhcmFtcy52aXouZ3JleV9ib3JkZXJfd2lkdGgpXG4gIC5hdHRyKCdoZWlnaHQnLCBwYXJhbXMudml6LnN2Z19kaW0uaGVpZ2h0KVxuICAuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgwLDApJyk7XG5cbi8vIHJpZ2h0IGJvcmRlclxuZDMuc2VsZWN0KHBhcmFtcy52aXoudml6X3N2ZylcbiAgLmFwcGVuZCgncmVjdCcpXG4gIC5jbGFzc2VkKCdyaWdodF9ib3JkZXInLHRydWUpXG4gIC5jbGFzc2VkKCdib3JkZXJzJyx0cnVlKVxuICAuYXR0cignZmlsbCcsIGJvcmRlcl9jb2xvcnMpXG4gIC5hdHRyKCd3aWR0aCcsIHBhcmFtcy52aXouZ3JleV9ib3JkZXJfd2lkdGgpXG4gIC5hdHRyKCdoZWlnaHQnLCBwYXJhbXMudml6LnN2Z19kaW0uaGVpZ2h0KVxuICAuYXR0cigndHJhbnNmb3JtJywgZnVuY3Rpb24gKCkge1xuICAgIHZhciBpbnN0X29mZnNldCA9IHBhcmFtcy52aXouc3ZnX2RpbS53aWR0aCAtIHBhcmFtcy52aXouZ3JleV9ib3JkZXJfd2lkdGg7XG4gICAgcmV0dXJuICd0cmFuc2xhdGUoJyArIGluc3Rfb2Zmc2V0ICsgJywwKSc7XG4gIH0pO1xuXG4vLyB0b3AgYm9yZGVyXG5kMy5zZWxlY3QocGFyYW1zLnZpei52aXpfc3ZnKVxuICAuYXBwZW5kKCdyZWN0JylcbiAgLmNsYXNzZWQoJ3RvcF9ib3JkZXInLHRydWUpXG4gIC5jbGFzc2VkKCdib3JkZXJzJyx0cnVlKVxuICAuYXR0cignZmlsbCcsIGJvcmRlcl9jb2xvcnMpXG4gIC5hdHRyKCd3aWR0aCcsIHBhcmFtcy52aXouc3ZnX2RpbS53aWR0aClcbiAgLmF0dHIoJ2hlaWdodCcsIHBhcmFtcy52aXouZ3JleV9ib3JkZXJfd2lkdGgpXG4gIC5hdHRyKCd0cmFuc2Zvcm0nLCBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGluc3Rfb2Zmc2V0ID0gMDtcbiAgICByZXR1cm4gJ3RyYW5zbGF0ZSgnICsgaW5zdF9vZmZzZXQgKyAnLDApJztcbiAgfSk7XG5cbi8vIGJvdHRvbSBib3JkZXJcbmQzLnNlbGVjdChwYXJhbXMudml6LnZpel9zdmcpXG4gIC5hcHBlbmQoJ3JlY3QnKVxuICAuY2xhc3NlZCgnYm90dG9tX2JvcmRlcicsdHJ1ZSlcbiAgLmNsYXNzZWQoJ2JvcmRlcnMnLHRydWUpXG4gIC5hdHRyKCdmaWxsJywgYm9yZGVyX2NvbG9ycylcbiAgLmF0dHIoJ3dpZHRoJywgcGFyYW1zLnZpei5zdmdfZGltLndpZHRoKVxuICAuYXR0cignaGVpZ2h0JywgcGFyYW1zLnZpei5ncmV5X2JvcmRlcl93aWR0aClcbiAgLmF0dHIoJ3RyYW5zZm9ybScsIGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgaW5zdF9vZmZzZXQgPSBwYXJhbXMudml6LnN2Z19kaW0uaGVpZ2h0IC0gcGFyYW1zLnZpei5ncmV5X2JvcmRlcl93aWR0aDtcbiAgICByZXR1cm4gJ3RyYW5zbGF0ZSgwLCcgKyBpbnN0X29mZnNldCArICcpJztcbiAgfSk7XG5cbmluaXRpYWxpemVfcmVzaXppbmcoKTtcblxuaW5pX2RvdWJsZWNsaWNrKCk7XG5cbmlmIChwYXJhbXMudml6LmRvX3pvb20pIHtcbiAgc3ZnX2dyb3VwLmNhbGwocGFyYW1zLnpvb21fYmVoYXZpb3IpO1xufVxuXG5kMy5zZWxlY3QocGFyYW1zLnZpei52aXpfc3ZnKS5vbignZGJsY2xpY2suem9vbScsIG51bGwpO1xuXG52YXIgZ2VuZV9zZWFyY2ggPSBydW5fc2VhcmNoKHBhcmFtcy5uZXR3b3JrX2RhdGEucm93X25vZGVzLCAnbmFtZScpO1xuXG52YXIgb3BhY2l0eV9zbGlkZXIgPSBmdW5jdGlvbiAoaW5zdF9zbGlkZXIpIHtcblxuICAvLyB2YXIgbWF4X2xpbmsgPSBwYXJhbXMubWF0cml4Lm1heF9saW5rO1xuICB2YXIgc2xpZGVyX3NjYWxlID0gZDMuc2NhbGVcbiAgICAubGluZWFyKClcbiAgICAuZG9tYWluKFswLCAxXSlcbiAgICAucmFuZ2UoWzEsIDAuMV0pO1xuXG4gIHZhciBzbGlkZXJfZmFjdG9yID0gc2xpZGVyX3NjYWxlKGluc3Rfc2xpZGVyKTtcblxuICBpZiAocGFyYW1zLm1hdHJpeC5vcGFjaXR5X2Z1bmN0aW9uID09PSAnbGluZWFyJykge1xuICAgIHBhcmFtcy5tYXRyaXgub3BhY2l0eV9zY2FsZSA9IGQzLnNjYWxlLmxpbmVhcigpXG4gICAgICAuZG9tYWluKFswLCBzbGlkZXJfZmFjdG9yICogTWF0aC5hYnMocGFyYW1zLm1hdHJpeC5tYXhfbGluayldKVxuICAgICAgLmNsYW1wKHRydWUpXG4gICAgICAucmFuZ2UoWzAuMCwgMS4wXSk7XG4gIH0gZWxzZSBpZiAocGFyYW1zLm1hdHJpeC5vcGFjaXR5X2Z1bmN0aW9uID09PSAnbG9nJykge1xuICAgIHBhcmFtcy5tYXRyaXgub3BhY2l0eV9zY2FsZSA9IGQzLnNjYWxlLmxvZygpXG4gICAgICAuZG9tYWluKFswLjAwMDEsIHNsaWRlcl9mYWN0b3IgKiBNYXRoLmFicyhwYXJhbXMubWF0cml4Lm1heF9saW5rKV0pXG4gICAgICAuY2xhbXAodHJ1ZSlcbiAgICAgIC5yYW5nZShbMC4wLCAxLjBdKTtcbiAgfVxuXG4gIGQzLnNlbGVjdEFsbCgnLnRpbGUnKVxuICAgIC5zdHlsZSgnZmlsbC1vcGFjaXR5JywgZnVuY3Rpb24gKGQpIHtcbiAgICAgIHJldHVybiBwYXJhbXMubWF0cml4Lm9wYWNpdHlfc2NhbGUoTWF0aC5hYnMoZC52YWx1ZSkpO1xuICAgIH0pO1xuXG59O1xuXG5mdW5jdGlvbiByZXNldF96b29tKGluc3Rfc2NhbGUpIHtcbiAgdHdvX3RyYW5zbGF0ZV96b29tKDAsIDAsIGluc3Rfc2NhbGUpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgY2hhbmdlX2dyb3VwczogZnVuY3Rpb24gKGluc3RfcmMsIGluc3RfaW5kZXgpIHtcbiAgICBpZiAoaW5zdF9yYyA9PT0gJ3JvdycpIHtcbiAgICAgIHJvd19kZW5kcm9ncmFtLmNoYW5nZV9ncm91cHMoaW5zdF9yYywgaW5zdF9pbmRleCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbF9kZW5kcm9ncmFtLmNoYW5nZV9ncm91cHMoaW5zdF9yYywgaW5zdF9pbmRleCk7XG4gICAgfVxuICB9LFxuICBnZXRfY2x1c3RfZ3JvdXA6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gbWF0cml4LmdldF9jbHVzdF9ncm91cCgpO1xuICB9LFxuICBnZXRfbWF0cml4OiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIG1hdHJpeC5nZXRfbWF0cml4KCk7XG4gIH0sXG4gIGdldF9ub2RlczogZnVuY3Rpb24gKHR5cGUpIHtcbiAgICByZXR1cm4gbWF0cml4LmdldF9ub2Rlcyh0eXBlKTtcbiAgfSxcbiAgcmVvcmRlcjogcmVxdWlyZSgnLi9yZW9yZGVyL2FsbF9yZW9yZGVyJyksXG4gIHNlYXJjaDogZ2VuZV9zZWFyY2gsXG4gIG9wYWNpdHlfc2xpZGVyOiBvcGFjaXR5X3NsaWRlcixcbiAgcnVuX3Jlc2V0X3Zpc3VhbGl6YXRpb25fc2l6ZTogcmVxdWlyZSgnLi9yZXNldF9zaXplL3J1bl9yZXNldF92aXN1YWxpemF0aW9uX3NpemUnKSxcbiAgdXBkYXRlX25ldHdvcms6IHJlcXVpcmUoJy4vbmV0d29yay91cGRhdGVfbmV0d29yaycpLFxuICBkcmF3X2dyaWRsaW5lczogbWF0cml4LmRyYXdfZ3JpZGxpbmVzLFxuICByZXNldF96b29tOiByZXNldF96b29tXG59O1xuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogc3JjL3Zpei5qc1xuICoqLyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQU1BO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFGQTtBQUNBO0FBTUE7QUFkQTtBQUNBO0FBaUJBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUxBO0FBQ0E7O0FBUUE7QUFDQTs7QUFTQTtBQVFBO0FBQ0E7QUFGQTtBQUNBOztBQUtBO0FBUUE7QUFDQTtBQUZBO0FBQ0E7O0FBS0E7QUFRQTtBQUNBO0FBRkE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFNQTtBQURBO0FBQ0E7QUFNQTtBQUVBO0FBREE7QUF2QkE7QUFDQTtBQTRCQTtBQUNBO0FBREE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUhBO0FBREE7QUFPQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXZCQSIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ },
/* 15 */
/***/ function(module, exports, __webpack_require__) {

	eval("var Params = __webpack_require__(1);\nvar utils = __webpack_require__(5);\nvar draw_gridlines = __webpack_require__(16);\nvar make_simple_rows = __webpack_require__(17);\nvar add_click_hlight = __webpack_require__(18);\n\nmodule.exports = function (svg_elem) {\n  var params = Params.get();\n\n  var network_data = params.network_data;\n\n  var matrix = [],\n      row_nodes = network_data.row_nodes,\n      col_nodes = network_data.col_nodes,\n      clust_group;\n\n  var row_nodes_names = _.pluck(row_nodes, 'name');\n  var col_nodes_names = _.pluck(col_nodes, 'name');\n\n  // append a group that will hold clust_group and position it once\n  clust_group = svg_elem.append('g').attr('class', 'clust_container').attr('transform', 'translate(' + params.viz.clust.margin.left + ',' + params.viz.clust.margin.top + ')').append('g').attr('class', 'clust_group');\n\n  if (params.matrix.show_tile_tooltips) {\n    // d3-tooltip - for tiles\n    var tip = d3.tip().attr('class', 'd3-tip').direction('n').offset([0, 0]).html(params.matrix.make_tile_tooltip);\n    d3.select(params.root + ' .clust_group').call(tip);\n  }\n\n  // clustergram background rect\n  clust_group.append('rect').classed('background', true).classed('grey_background', true).style('fill', '#eee').attr('width', params.viz.clust.dim.width).attr('height', params.viz.clust.dim.height);\n\n  // make row matrix - add key names to rows in matrix\n  var row_groups = clust_group.selectAll('.row').data(params.matrix.matrix, function (d) {\n    return d.name;\n  }).enter().append('g').attr('class', 'row').attr('transform', function (d) {\n    var tmp_index = _.indexOf(row_nodes_names, d.name);\n    return 'translate(0,' + params.matrix.y_scale(tmp_index) + ')';\n  }).each(make_simple_rows);\n\n  // add callback function to tile group - if one is supplied by the user\n  if (typeof params.click_tile === 'function') {\n    d3.selectAll('.tile').on('click', function (d) {\n\n      // export row/col name and value from tile\n      var tile_info = {};\n      tile_info.row = params.network_data.row_nodes[d.pos_y].name;\n      tile_info.col = params.network_data.col_nodes[d.pos_x].name;\n      tile_info.value = d.value;\n\n      if (utils.has(d, 'value_up')) {\n        tile_info.value_up = d.value_up;\n      }\n      if (utils.has(d, 'value_dn')) {\n        tile_info.value_dn = d.value_dn;\n      }\n      if (utils.has(d, 'info')) {\n        tile_info.info = d.info;\n      }\n      // run the user supplied callback function\n      params.click_tile(tile_info);\n      add_click_hlight(this);\n    });\n  } else {\n\n    // highlight clicked tile\n    if (params.tile_click_hlight) {\n      d3.selectAll('.tile').on('click', function () {\n        add_click_hlight(this);\n      });\n    }\n  }\n\n  // draw grid lines after drawing tiles\n  draw_gridlines(row_nodes, col_nodes);\n\n  // Matrix API\n  return {\n    get_clust_group: function () {\n      return clust_group;\n    },\n    get_matrix: function () {\n      return matrix;\n    },\n    get_nodes: function (type) {\n      if (type === 'row') {\n        return network_data.row_nodes;\n      }\n      return network_data.col_nodes;\n    }\n  };\n};//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTUuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL21hdHJpeC9pbmRleC5qcz80ODZjIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBQYXJhbXMgPSByZXF1aXJlKCcuLi9wYXJhbXMnKTtcbnZhciB1dGlscyA9IHJlcXVpcmUoJy4uL3V0aWxzJyk7XG52YXIgZHJhd19ncmlkbGluZXMgPSByZXF1aXJlKCcuLi9kcmF3X2dyaWRsaW5lcycpO1xudmFyIG1ha2Vfc2ltcGxlX3Jvd3MgPSByZXF1aXJlKCcuL21ha2Vfc2ltcGxlX3Jvd3MnKTtcbnZhciBhZGRfY2xpY2tfaGxpZ2h0ID0gcmVxdWlyZSgnLi9hZGRfY2xpY2tfaGxpZ2h0Jyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oc3ZnX2VsZW0pIHtcbiAgdmFyIHBhcmFtcyA9IFBhcmFtcy5nZXQoKTtcblxuICB2YXIgbmV0d29ya19kYXRhID0gcGFyYW1zLm5ldHdvcmtfZGF0YTtcblxuICB2YXIgbWF0cml4ID0gW10sXG4gIHJvd19ub2RlcyA9IG5ldHdvcmtfZGF0YS5yb3dfbm9kZXMsXG4gIGNvbF9ub2RlcyA9IG5ldHdvcmtfZGF0YS5jb2xfbm9kZXMsXG4gIGNsdXN0X2dyb3VwO1xuXG4gIHZhciByb3dfbm9kZXNfbmFtZXMgPSBfLnBsdWNrKHJvd19ub2RlcywgJ25hbWUnKTtcbiAgdmFyIGNvbF9ub2Rlc19uYW1lcyA9IF8ucGx1Y2soY29sX25vZGVzLCAnbmFtZScpO1xuXG4gIC8vIGFwcGVuZCBhIGdyb3VwIHRoYXQgd2lsbCBob2xkIGNsdXN0X2dyb3VwIGFuZCBwb3NpdGlvbiBpdCBvbmNlXG4gIGNsdXN0X2dyb3VwID0gc3ZnX2VsZW1cbiAgICAuYXBwZW5kKCdnJylcbiAgICAuYXR0cignY2xhc3MnLCdjbHVzdF9jb250YWluZXInKVxuICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKCcgK1xuICAgICAgcGFyYW1zLnZpei5jbHVzdC5tYXJnaW4ubGVmdCArICcsJyArXG4gICAgICBwYXJhbXMudml6LmNsdXN0Lm1hcmdpbi50b3AgKyAnKScpXG4gICAgLmFwcGVuZCgnZycpXG4gICAgLmF0dHIoJ2NsYXNzJywgJ2NsdXN0X2dyb3VwJyk7XG5cbiAgaWYgKHBhcmFtcy5tYXRyaXguc2hvd190aWxlX3Rvb2x0aXBzKXtcbiAgICAvLyBkMy10b29sdGlwIC0gZm9yIHRpbGVzXG4gICAgdmFyIHRpcCA9IGQzLnRpcCgpXG4gICAgICAuYXR0cignY2xhc3MnLCAnZDMtdGlwJylcbiAgICAgIC5kaXJlY3Rpb24oJ24nKVxuICAgICAgLm9mZnNldChbMCwgMF0pXG4gICAgICAuaHRtbChwYXJhbXMubWF0cml4Lm1ha2VfdGlsZV90b29sdGlwKTtcbiAgICBkMy5zZWxlY3QocGFyYW1zLnJvb3QrJyAuY2x1c3RfZ3JvdXAnKVxuICAgICAgLmNhbGwodGlwKTtcbiAgfVxuXG4gIC8vIGNsdXN0ZXJncmFtIGJhY2tncm91bmQgcmVjdFxuICBjbHVzdF9ncm91cFxuICAgIC5hcHBlbmQoJ3JlY3QnKVxuICAgIC5jbGFzc2VkKCdiYWNrZ3JvdW5kJyx0cnVlKVxuICAgIC5jbGFzc2VkKCdncmV5X2JhY2tncm91bmQnLHRydWUpXG4gICAgLnN0eWxlKCdmaWxsJywgJyNlZWUnKVxuICAgIC5hdHRyKCd3aWR0aCcsIHBhcmFtcy52aXouY2x1c3QuZGltLndpZHRoKVxuICAgIC5hdHRyKCdoZWlnaHQnLCBwYXJhbXMudml6LmNsdXN0LmRpbS5oZWlnaHQpO1xuXG4gIC8vIG1ha2Ugcm93IG1hdHJpeCAtIGFkZCBrZXkgbmFtZXMgdG8gcm93cyBpbiBtYXRyaXhcbiAgdmFyIHJvd19ncm91cHMgPSBjbHVzdF9ncm91cC5zZWxlY3RBbGwoJy5yb3cnKVxuICAgIC5kYXRhKHBhcmFtcy5tYXRyaXgubWF0cml4LCBmdW5jdGlvbihkKXtyZXR1cm4gZC5uYW1lO30pXG4gICAgLmVudGVyKClcbiAgICAuYXBwZW5kKCdnJylcbiAgICAuYXR0cignY2xhc3MnLCAncm93JylcbiAgICAuYXR0cigndHJhbnNmb3JtJywgZnVuY3Rpb24oZCkge1xuICAgICAgdmFyIHRtcF9pbmRleCA9IF8uaW5kZXhPZihyb3dfbm9kZXNfbmFtZXMsIGQubmFtZSk7XG4gICAgICByZXR1cm4gJ3RyYW5zbGF0ZSgwLCcgKyBwYXJhbXMubWF0cml4Lnlfc2NhbGUodG1wX2luZGV4KSArICcpJztcbiAgICB9KVxuICAgIC5lYWNoKG1ha2Vfc2ltcGxlX3Jvd3MpO1xuXG4gIC8vIGFkZCBjYWxsYmFjayBmdW5jdGlvbiB0byB0aWxlIGdyb3VwIC0gaWYgb25lIGlzIHN1cHBsaWVkIGJ5IHRoZSB1c2VyXG4gIGlmICh0eXBlb2YgcGFyYW1zLmNsaWNrX3RpbGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICBkMy5zZWxlY3RBbGwoJy50aWxlJylcbiAgICAub24oJ2NsaWNrJywgZnVuY3Rpb24oZCkge1xuXG4gICAgICAvLyBleHBvcnQgcm93L2NvbCBuYW1lIGFuZCB2YWx1ZSBmcm9tIHRpbGVcbiAgICAgIHZhciB0aWxlX2luZm8gPSB7fTtcbiAgICAgIHRpbGVfaW5mby5yb3cgPSBwYXJhbXMubmV0d29ya19kYXRhLnJvd19ub2Rlc1tkLnBvc195XS5uYW1lO1xuICAgICAgdGlsZV9pbmZvLmNvbCA9IHBhcmFtcy5uZXR3b3JrX2RhdGEuY29sX25vZGVzW2QucG9zX3hdLm5hbWU7XG4gICAgICB0aWxlX2luZm8udmFsdWUgPSBkLnZhbHVlO1xuXG4gICAgICBpZiAodXRpbHMuaGFzKGQsICd2YWx1ZV91cCcpKSB7XG4gICAgICAgIHRpbGVfaW5mby52YWx1ZV91cCA9IGQudmFsdWVfdXA7XG4gICAgICB9XG4gICAgICBpZiAodXRpbHMuaGFzKGQsICd2YWx1ZV9kbicpKSB7XG4gICAgICAgIHRpbGVfaW5mby52YWx1ZV9kbiA9IGQudmFsdWVfZG47XG4gICAgICB9XG4gICAgICBpZiAodXRpbHMuaGFzKGQsICdpbmZvJykpIHtcbiAgICAgICAgdGlsZV9pbmZvLmluZm8gPSBkLmluZm87XG4gICAgICB9XG4gICAgICAvLyBydW4gdGhlIHVzZXIgc3VwcGxpZWQgY2FsbGJhY2sgZnVuY3Rpb25cbiAgICAgIHBhcmFtcy5jbGlja190aWxlKHRpbGVfaW5mbyk7XG4gICAgICBhZGRfY2xpY2tfaGxpZ2h0KHRoaXMpO1xuXG4gICAgfSk7XG5cbiAgfSBlbHNlIHtcblxuICAgIC8vIGhpZ2hsaWdodCBjbGlja2VkIHRpbGVcbiAgICBpZiAocGFyYW1zLnRpbGVfY2xpY2tfaGxpZ2h0KXtcbiAgICAgIGQzLnNlbGVjdEFsbCgnLnRpbGUnKVxuICAgICAgICAub24oJ2NsaWNrJyxmdW5jdGlvbigpIHtcbiAgICAgICAgICBhZGRfY2xpY2tfaGxpZ2h0KHRoaXMpO1xuICAgICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvLyBkcmF3IGdyaWQgbGluZXMgYWZ0ZXIgZHJhd2luZyB0aWxlc1xuICBkcmF3X2dyaWRsaW5lcyhyb3dfbm9kZXMsIGNvbF9ub2Rlcyk7XG5cbiAgLy8gTWF0cml4IEFQSVxuICByZXR1cm4ge1xuICAgIGdldF9jbHVzdF9ncm91cDogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gY2x1c3RfZ3JvdXA7XG4gICAgfSxcbiAgICBnZXRfbWF0cml4OiBmdW5jdGlvbigpe1xuICAgICAgcmV0dXJuIG1hdHJpeDtcbiAgICB9LFxuICAgIGdldF9ub2RlczogZnVuY3Rpb24odHlwZSl7XG4gICAgICBpZiAodHlwZSA9PT0gJ3JvdycpIHtcbiAgICAgICAgcmV0dXJuIG5ldHdvcmtfZGF0YS5yb3dfbm9kZXM7XG4gICAgICB9XG4gICAgICByZXR1cm4gbmV0d29ya19kYXRhLmNvbF9ub2RlcztcbiAgICB9XG4gIH07XG5cbn07XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiBzcmMvbWF0cml4L2luZGV4LmpzXG4gKiovIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFaQTtBQUNBO0FBc0JBOztBQUVBO0FBS0E7QUFQQTtBQUNBOztBQXhCQTtBQUNBOztBQURBO0FBNkNBO0FBQUE7QUFLQTtBQUNBO0FBRkE7QUFDQTs7QUFsREE7QUF5REE7QUFDQTs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQURBOztBQWRBO0FBbUJBO0FBbkJBO0FBRkE7QUFDQTs7QUEyQkE7QUFDQTtBQUVBO0FBREE7QUFGQTtBQTVCQTtBQUNBOztBQXpEQTtBQUNBOztBQURBO0FBaUdBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFKQTtBQVBBO0FBaEdBIiwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 16 */
/***/ function(module, exports, __webpack_require__) {

	eval("var Params = __webpack_require__(1);\n\nmodule.exports = function (row_nodes, col_nodes) {\n  var params = Params.get();\n\n  var row_nodes_names = params.network_data.row_nodes_names;\n  var col_nodes_names = params.network_data.col_nodes_names;\n\n  d3.selectAll('.horz_lines').remove();\n\n  d3.selectAll('.vert_lines').remove();\n\n  // append horizontal lines\n  d3.select(params.root + ' .clust_group').selectAll('.horz_lines').data(row_nodes, function (d) {\n    return d.name;\n  }).enter().append('g').attr('class', 'horz_lines').attr('transform', function (d) {\n    var inst_index = _.indexOf(row_nodes_names, d.name);\n    return 'translate(0,' + params.matrix.y_scale(inst_index) + ') rotate(0)';\n  }).append('line').attr('x1', 0).attr('x2', params.viz.clust.dim.width).style('stroke-width', params.viz.border_width / params.viz.zoom_switch + 'px').style('stroke', 'white');\n\n  // append vertical line groups\n  d3.select(params.root + ' .clust_group').selectAll('.vert_lines').data(col_nodes).enter().append('g').attr('class', 'vert_lines').attr('transform', function (d) {\n    var inst_index = _.indexOf(col_nodes_names, d.name);\n    return 'translate(' + params.matrix.x_scale(inst_index) + ') rotate(-90)';\n  }).append('line').attr('x1', 0).attr('x2', -params.viz.clust.dim.height).style('stroke-width', params.viz.border_width + 'px').style('stroke', 'white');\n};//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTYuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL2RyYXdfZ3JpZGxpbmVzLmpzPzYzMTYiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIFBhcmFtcyA9IHJlcXVpcmUoJy4vcGFyYW1zJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24ocm93X25vZGVzLCBjb2xfbm9kZXMpIHtcbiAgdmFyIHBhcmFtcyA9IFBhcmFtcy5nZXQoKTtcblxuICB2YXIgcm93X25vZGVzX25hbWVzID0gcGFyYW1zLm5ldHdvcmtfZGF0YS5yb3dfbm9kZXNfbmFtZXM7XG4gIHZhciBjb2xfbm9kZXNfbmFtZXMgPSBwYXJhbXMubmV0d29ya19kYXRhLmNvbF9ub2Rlc19uYW1lcztcblxuICBkMy5zZWxlY3RBbGwoJy5ob3J6X2xpbmVzJylcbiAgICAucmVtb3ZlKCk7XG5cbiAgZDMuc2VsZWN0QWxsKCcudmVydF9saW5lcycpXG4gICAgLnJlbW92ZSgpO1xuXG4gIC8vIGFwcGVuZCBob3Jpem9udGFsIGxpbmVzXG4gIGQzLnNlbGVjdChwYXJhbXMucm9vdCsnIC5jbHVzdF9ncm91cCcpXG4gICAgLnNlbGVjdEFsbCgnLmhvcnpfbGluZXMnKVxuICAgIC5kYXRhKHJvd19ub2RlcywgZnVuY3Rpb24oZCl7cmV0dXJuIGQubmFtZTt9KVxuICAgIC5lbnRlcigpXG4gICAgLmFwcGVuZCgnZycpXG4gICAgLmF0dHIoJ2NsYXNzJywnaG9yel9saW5lcycpXG4gICAgLmF0dHIoJ3RyYW5zZm9ybScsIGZ1bmN0aW9uKGQpIHtcbiAgICAgIHZhciBpbnN0X2luZGV4ID0gXy5pbmRleE9mKHJvd19ub2Rlc19uYW1lcywgZC5uYW1lKTtcbiAgICAgIHJldHVybiAndHJhbnNsYXRlKDAsJyArIHBhcmFtcy5tYXRyaXgueV9zY2FsZShpbnN0X2luZGV4KSArICcpIHJvdGF0ZSgwKSc7XG4gICAgfSlcbiAgICAuYXBwZW5kKCdsaW5lJylcbiAgICAuYXR0cigneDEnLDApXG4gICAgLmF0dHIoJ3gyJyxwYXJhbXMudml6LmNsdXN0LmRpbS53aWR0aClcbiAgICAuc3R5bGUoJ3N0cm9rZS13aWR0aCcsIHBhcmFtcy52aXouYm9yZGVyX3dpZHRoL3BhcmFtcy52aXouem9vbV9zd2l0Y2grJ3B4JylcbiAgICAuc3R5bGUoJ3N0cm9rZScsJ3doaXRlJyk7XG5cbiAgLy8gYXBwZW5kIHZlcnRpY2FsIGxpbmUgZ3JvdXBzXG4gIGQzLnNlbGVjdChwYXJhbXMucm9vdCsnIC5jbHVzdF9ncm91cCcpXG4gICAgLnNlbGVjdEFsbCgnLnZlcnRfbGluZXMnKVxuICAgIC5kYXRhKGNvbF9ub2RlcylcbiAgICAuZW50ZXIoKVxuICAgIC5hcHBlbmQoJ2cnKVxuICAgIC5hdHRyKCdjbGFzcycsICd2ZXJ0X2xpbmVzJylcbiAgICAuYXR0cigndHJhbnNmb3JtJywgZnVuY3Rpb24oZCkge1xuICAgICAgdmFyIGluc3RfaW5kZXggPSBfLmluZGV4T2YoY29sX25vZGVzX25hbWVzLCBkLm5hbWUpO1xuICAgICAgcmV0dXJuICd0cmFuc2xhdGUoJyArIHBhcmFtcy5tYXRyaXgueF9zY2FsZShpbnN0X2luZGV4KSArICcpIHJvdGF0ZSgtOTApJztcbiAgICB9KVxuICAgIC5hcHBlbmQoJ2xpbmUnKVxuICAgIC5hdHRyKCd4MScsIDApXG4gICAgLmF0dHIoJ3gyJywgLXBhcmFtcy52aXouY2x1c3QuZGltLmhlaWdodClcbiAgICAuc3R5bGUoJ3N0cm9rZS13aWR0aCcsIHBhcmFtcy52aXouYm9yZGVyX3dpZHRoICsgJ3B4JylcbiAgICAuc3R5bGUoJ3N0cm9rZScsICd3aGl0ZScpO1xufTtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIHNyYy9kcmF3X2dyaWRsaW5lcy5qc1xuICoqLyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBOztBQVZBO0FBZUE7QUFBQTtBQUtBO0FBQ0E7QUFGQTtBQUNBOztBQXBCQTtBQXFDQTtBQUNBO0FBRkE7QUFwQ0EiLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 17 */
/***/ function(module, exports, __webpack_require__) {

	eval("var Params = __webpack_require__(1);\n\n// make each row in the clustergram\nmodule.exports = function (ini_inp_row_data, tip) {\n  var params = Params.get();\n\n  var inp_row_data = ini_inp_row_data.row_data;\n\n  // value: remove zero values to make visualization faster\n  var row_values = _.filter(inp_row_data, function (num) {\n    return num.value !== 0;\n  });\n\n  // generate tiles in the current row\n  var tile = d3.select(this).selectAll('rect').data(row_values, function (d) {\n    return d.col_name;\n  }).enter().append('rect').attr('class', 'tile row_tile').attr('width', params.matrix.rect_width).attr('height', params.matrix.rect_height)\n  // switch the color based on up/dn value\n  .style('fill', function (d) {\n    return d.value > 0 ? params.matrix.tile_colors[0] : params.matrix.tile_colors[1];\n  }).on('mouseover', function (p) {\n\n    // highlight row - set text to active if\n    d3.selectAll('.row_label_text text').classed('active', function (d) {\n      return p.row_name.replace(/_/g, ' ') === d.name;\n    });\n\n    d3.selectAll('.col_label_text text').classed('active', function (d) {\n      return p.col_name === d.name;\n    });\n\n    if (params.matrix.show_tile_tooltips) {\n      tip.show(p);\n    }\n  }).on('mouseout', function (d) {\n    d3.selectAll('text').classed('active', false);\n    if (params.matrix.show_tile_tooltips) {\n      tip.hide();\n    }\n  }).attr('title', function (d) {\n    return d.value;\n  }).style('fill-opacity', function (d) {\n    // calculate output opacity using the opacity scale\n    var output_opacity = params.matrix.opacity_scale(Math.abs(d.value));\n    return output_opacity;\n  }).attr('transform', function (d) {\n    var x_pos = params.matrix.x_scale(d.pos_x) + 0.5 * params.viz.border_width;\n    var y_pos = 0.5 * params.viz.border_width / params.viz.zoom_switch;\n    return 'translate(' + x_pos + ',' + y_pos + ')';\n  });\n\n  if (params.matrix.tile_type == 'updn') {\n\n    // value split\n    var row_split_data = _.filter(inp_row_data, function (num) {\n      return num.value_up != 0 || num.value_dn != 0;\n    });\n\n    // tile_up\n    d3.select(this).selectAll('.tile_up').data(row_split_data, function (d) {\n      return d.col_name;\n    }).enter().append('path').attr('class', 'tile_up').attr('d', function (d) {\n\n      // up triangle\n      var start_x = 0;\n      var final_x = params.matrix.x_scale.rangeBand();\n      var start_y = 0;\n      var final_y = params.matrix.y_scale.rangeBand() - params.matrix.y_scale.rangeBand() / 60;\n\n      var output_string = 'M' + start_x + ',' + start_y + ', L' + start_x + ', ' + final_y + ', L' + final_x + ',0 Z';\n\n      return output_string;\n    }).attr('transform', function (d) {\n      var x_pos = params.matrix.x_scale(d.pos_x) + 0.5 * params.viz.border_width;\n      var y_pos = 0.5 * params.viz.border_width / params.viz.zoom_switch;\n      return 'translate(' + x_pos + ',' + y_pos + ')';\n    }).style('fill', function () {\n      return params.matrix.tile_colors[0];\n    }).style('fill-opacity', function (d) {\n      var inst_opacity = 0;\n      if (Math.abs(d.value_dn) > 0) {\n        inst_opacity = params.matrix.opacity_scale(Math.abs(d.value_up));\n      }\n      return inst_opacity;\n    }).on('mouseover', function (p) {\n      // highlight row - set text to active if\n      d3.selectAll('.row_label_text text').classed('active', function (d) {\n        return p.row_name.replace(/_/g, ' ') === d.name;\n      });\n\n      d3.selectAll('.col_label_text text').classed('active', function (d) {\n        return p.col_name === d.name;\n      });\n      if (params.matrix.show_tile_tooltips) {\n        tip.show(p);\n      }\n    }).on('mouseout', function (d) {\n      d3.selectAll('text').classed('active', false);\n      if (params.matrix.show_tile_tooltips) {\n        tip.hide();\n      }\n    });\n\n    // tile_dn\n    d3.select(this).selectAll('.tile_dn').data(row_split_data, function (d) {\n      return d.col_name;\n    }).enter().append('path').attr('class', 'tile_dn').attr('d', function (d) {\n\n      // dn triangle\n      var start_x = 0;\n      var final_x = params.matrix.x_scale.rangeBand();\n      var start_y = params.matrix.y_scale.rangeBand() - params.matrix.y_scale.rangeBand() / 60;\n      var final_y = params.matrix.y_scale.rangeBand() - params.matrix.y_scale.rangeBand() / 60;\n\n      var output_string = 'M' + start_x + ', ' + start_y + ' ,   L' + final_x + ', ' + final_y + ',  L' + final_x + ',0 Z';\n\n      return output_string;\n    }).attr('transform', function (d) {\n      var x_pos = params.matrix.x_scale(d.pos_x) + 0.5 * params.viz.border_width;\n      var y_pos = 0.5 * params.viz.border_width / params.viz.zoom_switch;\n      return 'translate(' + x_pos + ',' + y_pos + ')';\n    }).style('fill', function () {\n      return params.matrix.tile_colors[1];\n    }).style('fill-opacity', function (d) {\n      var inst_opacity = 0;\n      if (Math.abs(d.value_up) > 0) {\n        inst_opacity = params.matrix.opacity_scale(Math.abs(d.value_dn));\n      }\n      return inst_opacity;\n    }).on('mouseover', function (p) {\n      // highlight row - set text to active if\n      d3.selectAll('.row_label_text text').classed('active', function (d) {\n        return p.row_name.replace(/_/g, ' ') === d.name;\n      });\n\n      d3.selectAll('.col_label_text text').classed('active', function (d) {\n        return p.col_name === d.name;\n      });\n      if (params.matrix.show_tile_tooltips) {\n        tip.show(p);\n      }\n    }).on('mouseout', function (d) {\n      d3.selectAll('text').classed('active', false);\n      if (params.matrix.show_tile_tooltips) {\n        tip.hide();\n      }\n    });\n\n    // remove tiles when splitting is done\n    tile.each(function (d) {\n      if (Math.abs(d.value_up) > 0 && Math.abs(d.value_dn) > 0) {\n        d3.select(this).remove();\n      }\n    });\n  }\n\n  // append title to group\n  if (params.matrix.tile_title) {\n    tile.append('title').text(function (d) {\n      var inst_string = 'value: ' + d.value;\n      return inst_string;\n    });\n  }\n};//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTcuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL21hdHJpeC9tYWtlX3NpbXBsZV9yb3dzLmpzPzg4NGIiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIFBhcmFtcyA9IHJlcXVpcmUoJy4uL3BhcmFtcycpO1xuXG4vLyBtYWtlIGVhY2ggcm93IGluIHRoZSBjbHVzdGVyZ3JhbVxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpbmlfaW5wX3Jvd19kYXRhLCB0aXApIHtcbiAgdmFyIHBhcmFtcyA9IFBhcmFtcy5nZXQoKTtcblxuICB2YXIgaW5wX3Jvd19kYXRhID0gaW5pX2lucF9yb3dfZGF0YS5yb3dfZGF0YTtcblxuICAvLyB2YWx1ZTogcmVtb3ZlIHplcm8gdmFsdWVzIHRvIG1ha2UgdmlzdWFsaXphdGlvbiBmYXN0ZXJcbiAgdmFyIHJvd192YWx1ZXMgPSBfLmZpbHRlcihpbnBfcm93X2RhdGEsIGZ1bmN0aW9uKG51bSkge1xuICAgIHJldHVybiBudW0udmFsdWUgIT09IDA7XG4gIH0pO1xuXG4gIC8vIGdlbmVyYXRlIHRpbGVzIGluIHRoZSBjdXJyZW50IHJvd1xuICB2YXIgdGlsZSA9IGQzLnNlbGVjdCh0aGlzKVxuICAgIC5zZWxlY3RBbGwoJ3JlY3QnKVxuICAgIC5kYXRhKHJvd192YWx1ZXMsIGZ1bmN0aW9uKGQpeyByZXR1cm4gZC5jb2xfbmFtZTsgfSlcbiAgICAuZW50ZXIoKVxuICAgIC5hcHBlbmQoJ3JlY3QnKVxuICAgIC5hdHRyKCdjbGFzcycsICd0aWxlIHJvd190aWxlJylcbiAgICAuYXR0cignd2lkdGgnLCBwYXJhbXMubWF0cml4LnJlY3Rfd2lkdGgpXG4gICAgLmF0dHIoJ2hlaWdodCcsIHBhcmFtcy5tYXRyaXgucmVjdF9oZWlnaHQpXG4gICAgLy8gc3dpdGNoIHRoZSBjb2xvciBiYXNlZCBvbiB1cC9kbiB2YWx1ZVxuICAgIC5zdHlsZSgnZmlsbCcsIGZ1bmN0aW9uKGQpIHtcbiAgICAgIHJldHVybiBkLnZhbHVlID4gMCA/IHBhcmFtcy5tYXRyaXgudGlsZV9jb2xvcnNbMF0gOiBwYXJhbXMubWF0cml4LnRpbGVfY29sb3JzWzFdO1xuICAgIH0pXG4gICAgLm9uKCdtb3VzZW92ZXInLCBmdW5jdGlvbihwKSB7XG5cbiAgICAgIC8vIGhpZ2hsaWdodCByb3cgLSBzZXQgdGV4dCB0byBhY3RpdmUgaWZcbiAgICAgIGQzLnNlbGVjdEFsbCgnLnJvd19sYWJlbF90ZXh0IHRleHQnKVxuICAgICAgICAuY2xhc3NlZCgnYWN0aXZlJywgZnVuY3Rpb24oZCkge1xuICAgICAgICAgIHJldHVybiBwLnJvd19uYW1lLnJlcGxhY2UoL18vZywgJyAnKSA9PT0gZC5uYW1lO1xuICAgICAgICB9KTtcblxuICAgICAgZDMuc2VsZWN0QWxsKCcuY29sX2xhYmVsX3RleHQgdGV4dCcpXG4gICAgICAgIC5jbGFzc2VkKCdhY3RpdmUnLCBmdW5jdGlvbihkKSB7XG4gICAgICAgICAgcmV0dXJuIHAuY29sX25hbWUgPT09IGQubmFtZTtcbiAgICAgICAgfSk7XG5cbiAgICAgIGlmIChwYXJhbXMubWF0cml4LnNob3dfdGlsZV90b29sdGlwcyl7XG4gICAgICAgIHRpcC5zaG93KHApO1xuICAgICAgfVxuXG4gICAgfSlcbiAgICAub24oJ21vdXNlb3V0JywgZnVuY3Rpb24oZCkge1xuICAgICAgZDMuc2VsZWN0QWxsKCd0ZXh0JykuY2xhc3NlZCgnYWN0aXZlJywgZmFsc2UpO1xuICAgICAgaWYgKHBhcmFtcy5tYXRyaXguc2hvd190aWxlX3Rvb2x0aXBzKXtcbiAgICAgICAgdGlwLmhpZGUoKTtcbiAgICAgIH1cbiAgICB9KVxuICAgIC5hdHRyKCd0aXRsZScsIGZ1bmN0aW9uKGQpIHtcbiAgICAgIHJldHVybiBkLnZhbHVlO1xuICAgIH0pXG4gICAgLnN0eWxlKCdmaWxsLW9wYWNpdHknLCBmdW5jdGlvbihkKSB7XG4gICAgICAvLyBjYWxjdWxhdGUgb3V0cHV0IG9wYWNpdHkgdXNpbmcgdGhlIG9wYWNpdHkgc2NhbGVcbiAgICAgIHZhciBvdXRwdXRfb3BhY2l0eSA9IHBhcmFtcy5tYXRyaXgub3BhY2l0eV9zY2FsZShNYXRoLmFicyhkLnZhbHVlKSk7XG4gICAgICByZXR1cm4gb3V0cHV0X29wYWNpdHk7XG4gICAgfSlcbiAgICAuYXR0cigndHJhbnNmb3JtJywgZnVuY3Rpb24oZCkge1xuICAgICAgdmFyIHhfcG9zID0gcGFyYW1zLm1hdHJpeC54X3NjYWxlKGQucG9zX3gpICsgMC41KnBhcmFtcy52aXouYm9yZGVyX3dpZHRoO1xuICAgICAgdmFyIHlfcG9zID0gMC41KnBhcmFtcy52aXouYm9yZGVyX3dpZHRoL3BhcmFtcy52aXouem9vbV9zd2l0Y2g7XG4gICAgICByZXR1cm4gJ3RyYW5zbGF0ZSgnICsgeF9wb3MgKyAnLCcreV9wb3MrJyknO1xuICAgIH0pO1xuXG4gIGlmIChwYXJhbXMubWF0cml4LnRpbGVfdHlwZSA9PSAndXBkbicpe1xuXG4gICAgLy8gdmFsdWUgc3BsaXRcbiAgICB2YXIgcm93X3NwbGl0X2RhdGEgPSBfLmZpbHRlcihpbnBfcm93X2RhdGEsIGZ1bmN0aW9uKG51bSl7XG4gICAgICByZXR1cm4gbnVtLnZhbHVlX3VwICE9IDAgfHwgbnVtLnZhbHVlX2RuICE9MCA7XG4gICAgfSk7XG5cbiAgICAvLyB0aWxlX3VwXG4gICAgZDMuc2VsZWN0KHRoaXMpXG4gICAgICAuc2VsZWN0QWxsKCcudGlsZV91cCcpXG4gICAgICAuZGF0YShyb3dfc3BsaXRfZGF0YSwgZnVuY3Rpb24oZCl7cmV0dXJuIGQuY29sX25hbWU7fSlcbiAgICAgIC5lbnRlcigpXG4gICAgICAuYXBwZW5kKCdwYXRoJylcbiAgICAgIC5hdHRyKCdjbGFzcycsJ3RpbGVfdXAnKVxuICAgICAgLmF0dHIoJ2QnLCBmdW5jdGlvbihkKSB7XG5cbiAgICAgICAgLy8gdXAgdHJpYW5nbGVcbiAgICAgICAgdmFyIHN0YXJ0X3ggPSAwO1xuICAgICAgICB2YXIgZmluYWxfeCA9IHBhcmFtcy5tYXRyaXgueF9zY2FsZS5yYW5nZUJhbmQoKTtcbiAgICAgICAgdmFyIHN0YXJ0X3kgPSAwO1xuICAgICAgICB2YXIgZmluYWxfeSA9IHBhcmFtcy5tYXRyaXgueV9zY2FsZS5yYW5nZUJhbmQoKSAtIHBhcmFtcy5tYXRyaXgueV9zY2FsZS5yYW5nZUJhbmQoKSAvNjA7XG5cbiAgICAgICAgdmFyIG91dHB1dF9zdHJpbmcgPSAnTScgKyBzdGFydF94ICsgJywnICsgc3RhcnRfeSArICcsIEwnICtcbiAgICAgICAgc3RhcnRfeCArICcsICcgKyBmaW5hbF95ICsgJywgTCcgKyBmaW5hbF94ICsgJywwIFonO1xuXG4gICAgICAgIHJldHVybiBvdXRwdXRfc3RyaW5nO1xuICAgICAgfSlcbiAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCBmdW5jdGlvbihkKSB7XG4gICAgICAgIHZhciB4X3BvcyA9IHBhcmFtcy5tYXRyaXgueF9zY2FsZShkLnBvc194KSArIDAuNSpwYXJhbXMudml6LmJvcmRlcl93aWR0aDtcbiAgICAgICAgdmFyIHlfcG9zID0gMC41KnBhcmFtcy52aXouYm9yZGVyX3dpZHRoL3BhcmFtcy52aXouem9vbV9zd2l0Y2g7XG4gICAgICAgIHJldHVybiAndHJhbnNsYXRlKCcgKyB4X3BvcyArICcsJyt5X3BvcysnKSc7XG4gICAgICB9KVxuICAgICAgLnN0eWxlKCdmaWxsJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBwYXJhbXMubWF0cml4LnRpbGVfY29sb3JzWzBdO1xuICAgICAgfSlcbiAgICAgIC5zdHlsZSgnZmlsbC1vcGFjaXR5JyxmdW5jdGlvbihkKXtcbiAgICAgICAgdmFyIGluc3Rfb3BhY2l0eSA9IDA7XG4gICAgICAgIGlmIChNYXRoLmFicyhkLnZhbHVlX2RuKT4wKXtcbiAgICAgICAgICBpbnN0X29wYWNpdHkgPSBwYXJhbXMubWF0cml4Lm9wYWNpdHlfc2NhbGUoTWF0aC5hYnMoZC52YWx1ZV91cCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpbnN0X29wYWNpdHk7XG4gICAgICB9KVxuICAgICAgLm9uKCdtb3VzZW92ZXInLCBmdW5jdGlvbihwKSB7XG4gICAgICAvLyBoaWdobGlnaHQgcm93IC0gc2V0IHRleHQgdG8gYWN0aXZlIGlmXG4gICAgICBkMy5zZWxlY3RBbGwoJy5yb3dfbGFiZWxfdGV4dCB0ZXh0JylcbiAgICAgICAgLmNsYXNzZWQoJ2FjdGl2ZScsIGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICByZXR1cm4gcC5yb3dfbmFtZS5yZXBsYWNlKC9fL2csICcgJykgPT09IGQubmFtZTtcbiAgICAgICAgfSk7XG5cbiAgICAgIGQzLnNlbGVjdEFsbCgnLmNvbF9sYWJlbF90ZXh0IHRleHQnKVxuICAgICAgICAuY2xhc3NlZCgnYWN0aXZlJywgZnVuY3Rpb24oZCkge1xuICAgICAgICAgIHJldHVybiBwLmNvbF9uYW1lID09PSBkLm5hbWU7XG4gICAgICAgIH0pO1xuICAgICAgaWYgKHBhcmFtcy5tYXRyaXguc2hvd190aWxlX3Rvb2x0aXBzKXtcbiAgICAgICAgdGlwLnNob3cocCk7XG4gICAgICB9XG4gICAgfSlcbiAgICAub24oJ21vdXNlb3V0JywgZnVuY3Rpb24oZCkge1xuICAgICAgZDMuc2VsZWN0QWxsKCd0ZXh0JykuY2xhc3NlZCgnYWN0aXZlJywgZmFsc2UpO1xuICAgICAgaWYgKHBhcmFtcy5tYXRyaXguc2hvd190aWxlX3Rvb2x0aXBzKXtcbiAgICAgICAgdGlwLmhpZGUoKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIHRpbGVfZG5cbiAgICBkMy5zZWxlY3QodGhpcylcbiAgICAgIC5zZWxlY3RBbGwoJy50aWxlX2RuJylcbiAgICAgIC5kYXRhKHJvd19zcGxpdF9kYXRhLCBmdW5jdGlvbihkKXtyZXR1cm4gZC5jb2xfbmFtZTt9KVxuICAgICAgLmVudGVyKClcbiAgICAgIC5hcHBlbmQoJ3BhdGgnKVxuICAgICAgLmF0dHIoJ2NsYXNzJywndGlsZV9kbicpXG4gICAgICAuYXR0cignZCcsIGZ1bmN0aW9uKGQpIHtcblxuICAgICAgICAvLyBkbiB0cmlhbmdsZVxuICAgICAgICB2YXIgc3RhcnRfeCA9IDA7XG4gICAgICAgIHZhciBmaW5hbF94ID0gcGFyYW1zLm1hdHJpeC54X3NjYWxlLnJhbmdlQmFuZCgpO1xuICAgICAgICB2YXIgc3RhcnRfeSA9IHBhcmFtcy5tYXRyaXgueV9zY2FsZS5yYW5nZUJhbmQoKSAtIHBhcmFtcy5tYXRyaXgueV9zY2FsZS5yYW5nZUJhbmQoKSAvNjA7XG4gICAgICAgIHZhciBmaW5hbF95ID0gcGFyYW1zLm1hdHJpeC55X3NjYWxlLnJhbmdlQmFuZCgpIC0gcGFyYW1zLm1hdHJpeC55X3NjYWxlLnJhbmdlQmFuZCgpIC82MDtcblxuICAgICAgICB2YXIgb3V0cHV0X3N0cmluZyA9ICdNJyArIHN0YXJ0X3ggKyAnLCAnICsgc3RhcnRfeSArICcgLCAgIEwnICtcbiAgICAgICAgZmluYWxfeCArICcsICcgKyBmaW5hbF95ICsgJywgIEwnICsgZmluYWxfeCArICcsMCBaJztcblxuICAgICAgICByZXR1cm4gb3V0cHV0X3N0cmluZztcbiAgICAgIH0pXG4gICAgICAuYXR0cigndHJhbnNmb3JtJywgZnVuY3Rpb24oZCkge1xuICAgICAgICB2YXIgeF9wb3MgPSBwYXJhbXMubWF0cml4Lnhfc2NhbGUoZC5wb3NfeCkgKyAwLjUqcGFyYW1zLnZpei5ib3JkZXJfd2lkdGg7XG4gICAgICAgIHZhciB5X3BvcyA9IDAuNSpwYXJhbXMudml6LmJvcmRlcl93aWR0aC9wYXJhbXMudml6Lnpvb21fc3dpdGNoO1xuICAgICAgICByZXR1cm4gJ3RyYW5zbGF0ZSgnICsgeF9wb3MgKyAnLCcreV9wb3MrJyknO1xuICAgICAgfSlcbiAgICAgIC5zdHlsZSgnZmlsbCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gcGFyYW1zLm1hdHJpeC50aWxlX2NvbG9yc1sxXTtcbiAgICAgIH0pXG4gICAgICAuc3R5bGUoJ2ZpbGwtb3BhY2l0eScsZnVuY3Rpb24oZCl7XG4gICAgICAgIHZhciBpbnN0X29wYWNpdHkgPSAwO1xuICAgICAgICBpZiAoTWF0aC5hYnMoZC52YWx1ZV91cCk+MCl7XG4gICAgICAgICAgaW5zdF9vcGFjaXR5ID0gcGFyYW1zLm1hdHJpeC5vcGFjaXR5X3NjYWxlKE1hdGguYWJzKGQudmFsdWVfZG4pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaW5zdF9vcGFjaXR5O1xuICAgICAgfSlcbiAgICAgIC5vbignbW91c2VvdmVyJywgZnVuY3Rpb24ocCkge1xuICAgICAgLy8gaGlnaGxpZ2h0IHJvdyAtIHNldCB0ZXh0IHRvIGFjdGl2ZSBpZlxuICAgICAgZDMuc2VsZWN0QWxsKCcucm93X2xhYmVsX3RleHQgdGV4dCcpXG4gICAgICAgIC5jbGFzc2VkKCdhY3RpdmUnLCBmdW5jdGlvbihkKSB7XG4gICAgICAgICAgcmV0dXJuIHAucm93X25hbWUucmVwbGFjZSgvXy9nLCAnICcpID09PSBkLm5hbWU7XG4gICAgICAgIH0pO1xuXG4gICAgICBkMy5zZWxlY3RBbGwoJy5jb2xfbGFiZWxfdGV4dCB0ZXh0JylcbiAgICAgICAgLmNsYXNzZWQoJ2FjdGl2ZScsIGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICByZXR1cm4gcC5jb2xfbmFtZSA9PT0gZC5uYW1lO1xuICAgICAgICB9KTtcbiAgICAgIGlmIChwYXJhbXMubWF0cml4LnNob3dfdGlsZV90b29sdGlwcyl7XG4gICAgICAgIHRpcC5zaG93KHApO1xuICAgICAgfVxuICAgIH0pXG4gICAgLm9uKCdtb3VzZW91dCcsIGZ1bmN0aW9uKGQpIHtcbiAgICAgIGQzLnNlbGVjdEFsbCgndGV4dCcpLmNsYXNzZWQoJ2FjdGl2ZScsIGZhbHNlKTtcbiAgICAgIGlmIChwYXJhbXMubWF0cml4LnNob3dfdGlsZV90b29sdGlwcyl7XG4gICAgICAgIHRpcC5oaWRlKCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyByZW1vdmUgdGlsZXMgd2hlbiBzcGxpdHRpbmcgaXMgZG9uZVxuICAgIHRpbGVcbiAgICAgIC5lYWNoKGZ1bmN0aW9uKGQpe1xuICAgICAgICBpZiAoIE1hdGguYWJzKGQudmFsdWVfdXApPjAgJiYgTWF0aC5hYnMoZC52YWx1ZV9kbik+MCApe1xuICAgICAgICAgIGQzLnNlbGVjdCh0aGlzKS5yZW1vdmUoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgfVxuXG4gIC8vIGFwcGVuZCB0aXRsZSB0byBncm91cFxuICBpZiAocGFyYW1zLm1hdHJpeC50aWxlX3RpdGxlKSB7XG4gICAgdGlsZS5hcHBlbmQoJ3RpdGxlJylcbiAgICAudGV4dChmdW5jdGlvbihkKSB7XG4gICAgICB2YXIgaW5zdF9zdHJpbmcgPSAndmFsdWU6ICcgKyBkLnZhbHVlO1xuICAgICAgcmV0dXJuIGluc3Rfc3RyaW5nO1xuICAgIH0pO1xuICB9XG5cbn07XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiBzcmMvbWF0cml4L21ha2Vfc2ltcGxlX3Jvd3MuanNcbiAqKi8iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFKQTtBQU9BO0FBREE7QUFDQTs7QUFQQTtBQWFBO0FBQUE7O0FBRkE7QUFVQTtBQURBO0FBQ0E7O0FBS0E7QUFFQTtBQURBO0FBQ0E7QUFHQTtBQUVBO0FBREE7QUFDQTtBQUdBO0FBQ0E7QUFEQTtBQWJBO0FBbUJBO0FBQ0E7QUFDQTtBQURBO0FBRkE7QUFPQTtBQURBOztBQUtBO0FBQ0E7QUFIQTtBQU1BO0FBQ0E7QUFDQTtBQUhBO0FBQ0E7QUFLQTtBQUNBOztBQUVBO0FBQ0E7QUFEQTtBQUNBOztBQUpBO0FBVUE7QUFBQTtBQUNBOztBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFYQTtBQWNBO0FBQ0E7QUFDQTtBQUhBO0FBTUE7QUFEQTtBQUlBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFMQTs7QUFTQTtBQUVBO0FBREE7QUFDQTtBQUdBO0FBRUE7QUFEQTtBQUdBO0FBQ0E7QUFEQTtBQVhBO0FBZ0JBO0FBQ0E7QUFDQTtBQURBO0FBRkE7QUFDQTs7QUExREE7QUFtRUE7QUFBQTtBQUNBOztBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFYQTtBQWNBO0FBQ0E7QUFDQTtBQUhBO0FBTUE7QUFEQTtBQUlBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFMQTs7QUFTQTtBQUVBO0FBREE7QUFDQTtBQUdBO0FBRUE7QUFEQTtBQUdBO0FBQ0E7QUFEQTtBQVhBO0FBZ0JBO0FBQ0E7QUFDQTtBQURBO0FBRkE7QUFDQTs7QUFuSEE7QUE0SEE7QUFDQTtBQURBO0FBREE7QUEzSEE7QUFDQTs7QUE5REE7QUFrTUE7QUFFQTtBQUNBO0FBRkE7QUFGQTtBQWpNQSIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ },
/* 18 */
/***/ function(module, exports, __webpack_require__) {

	eval("var Params = __webpack_require__(1);\n\nmodule.exports = function (clicked_rect) {\n  var params = Params.get();\n\n  // get x position of rectangle\n  d3.select(clicked_rect).each(function (d) {\n    var pos_x = d.pos_x;\n    var pos_y = d.pos_y;\n\n    d3.selectAll('.click_hlight').remove();\n\n    if (pos_x != params.matrix.click_hlight_x || pos_y != params.matrix.click_hlight_y) {\n\n      // save pos_x to params.viz.click_hlight_x\n      params.matrix.click_hlight_x = pos_x;\n      params.matrix.click_hlight_y = pos_y;\n\n      // draw the highlighting rectangle as four rectangles\n      // so that the width and height can be controlled\n      // separately\n\n      var rel_width_hlight = 6;\n      var opacity_hlight = 0.85;\n\n      var hlight_width = rel_width_hlight * params.viz.border_width;\n      var hlight_height = rel_width_hlight * params.viz.border_width / params.viz.zoom_switch;\n\n      // top highlight\n      d3.select(clicked_rect.parentNode).append('rect').classed('click_hlight', true).classed('top_hlight', true).attr('width', params.matrix.x_scale.rangeBand()).attr('height', hlight_height).attr('fill', params.matrix.hlight_color).attr('transform', function () {\n        return 'translate(' + params.matrix.x_scale(pos_x) + ',0)';\n      }).attr('opacity', opacity_hlight);\n\n      // left highlight\n      d3.select(clicked_rect.parentNode).append('rect').classed('click_hlight', true).classed('left_hlight', true).attr('width', hlight_width).attr('height', params.matrix.y_scale.rangeBand() - hlight_height * 0.99).attr('fill', params.matrix.hlight_color).attr('transform', function () {\n        return 'translate(' + params.matrix.x_scale(pos_x) + ',' + hlight_height * 0.99 + ')';\n      }).attr('opacity', opacity_hlight);\n\n      // right highlight\n      d3.select(clicked_rect.parentNode).append('rect').classed('click_hlight', true).classed('right_hlight', true).attr('width', hlight_width).attr('height', params.matrix.y_scale.rangeBand() - hlight_height * 0.99).attr('fill', params.matrix.hlight_color).attr('transform', function () {\n        var tmp_translate = params.matrix.x_scale(pos_x) + params.matrix.x_scale.rangeBand() - hlight_width;\n        return 'translate(' + tmp_translate + ',' + hlight_height * 0.99 + ')';\n      }).attr('opacity', opacity_hlight);\n\n      // bottom highlight\n      d3.select(clicked_rect.parentNode).append('rect').classed('click_hlight', true).classed('bottom_hlight', true).attr('width', function () {\n        return params.matrix.x_scale.rangeBand() - 1.98 * hlight_width;\n      }).attr('height', hlight_height).attr('fill', params.matrix.hlight_color).attr('transform', function () {\n        var tmp_translate_x = params.matrix.x_scale(pos_x) + hlight_width * 0.99;\n        var tmp_translate_y = params.matrix.y_scale.rangeBand() - hlight_height;\n        return 'translate(' + tmp_translate_x + ',' + tmp_translate_y + ')';\n      }).attr('opacity', opacity_hlight);\n    } else {\n      params.matrix.click_hlight_x = -666;\n      params.matrix.click_hlight_y = -666;\n    }\n  });\n};//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTguanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL21hdHJpeC9hZGRfY2xpY2tfaGxpZ2h0LmpzP2NiY2QiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIFBhcmFtcyA9IHJlcXVpcmUoJy4uL3BhcmFtcycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGNsaWNrZWRfcmVjdCl7XG4gIHZhciBwYXJhbXMgPSBQYXJhbXMuZ2V0KCk7XG5cbiAgLy8gZ2V0IHggcG9zaXRpb24gb2YgcmVjdGFuZ2xlXG4gIGQzLnNlbGVjdChjbGlja2VkX3JlY3QpLmVhY2goZnVuY3Rpb24oZCl7XG4gICAgdmFyIHBvc194ID0gZC5wb3NfeDtcbiAgICB2YXIgcG9zX3kgPSBkLnBvc195O1xuXG4gICAgZDMuc2VsZWN0QWxsKCcuY2xpY2tfaGxpZ2h0JylcbiAgICAgIC5yZW1vdmUoKTtcblxuICAgIGlmIChwb3NfeCE9cGFyYW1zLm1hdHJpeC5jbGlja19obGlnaHRfeCB8fCBwb3NfeSE9cGFyYW1zLm1hdHJpeC5jbGlja19obGlnaHRfeSl7XG5cbiAgICAgIC8vIHNhdmUgcG9zX3ggdG8gcGFyYW1zLnZpei5jbGlja19obGlnaHRfeFxuICAgICAgcGFyYW1zLm1hdHJpeC5jbGlja19obGlnaHRfeCA9IHBvc194O1xuICAgICAgcGFyYW1zLm1hdHJpeC5jbGlja19obGlnaHRfeSA9IHBvc195O1xuXG4gICAgICAvLyBkcmF3IHRoZSBoaWdobGlnaHRpbmcgcmVjdGFuZ2xlIGFzIGZvdXIgcmVjdGFuZ2xlc1xuICAgICAgLy8gc28gdGhhdCB0aGUgd2lkdGggYW5kIGhlaWdodCBjYW4gYmUgY29udHJvbGxlZFxuICAgICAgLy8gc2VwYXJhdGVseVxuXG4gICAgICB2YXIgcmVsX3dpZHRoX2hsaWdodCA9IDY7XG4gICAgICB2YXIgb3BhY2l0eV9obGlnaHQgPSAwLjg1O1xuXG4gICAgICB2YXIgaGxpZ2h0X3dpZHRoICA9IHJlbF93aWR0aF9obGlnaHQqcGFyYW1zLnZpei5ib3JkZXJfd2lkdGg7XG4gICAgICB2YXIgaGxpZ2h0X2hlaWdodCA9IHJlbF93aWR0aF9obGlnaHQqcGFyYW1zLnZpei5ib3JkZXJfd2lkdGgvcGFyYW1zLnZpei56b29tX3N3aXRjaDtcblxuICAgICAgLy8gdG9wIGhpZ2hsaWdodFxuICAgICAgZDMuc2VsZWN0KGNsaWNrZWRfcmVjdC5wYXJlbnROb2RlKVxuICAgICAgICAuYXBwZW5kKCdyZWN0JylcbiAgICAgICAgLmNsYXNzZWQoJ2NsaWNrX2hsaWdodCcsdHJ1ZSlcbiAgICAgICAgLmNsYXNzZWQoJ3RvcF9obGlnaHQnLHRydWUpXG4gICAgICAgIC5hdHRyKCd3aWR0aCcsIHBhcmFtcy5tYXRyaXgueF9zY2FsZS5yYW5nZUJhbmQoKSlcbiAgICAgICAgLmF0dHIoJ2hlaWdodCcsIGhsaWdodF9oZWlnaHQpXG4gICAgICAgIC5hdHRyKCdmaWxsJyxwYXJhbXMubWF0cml4LmhsaWdodF9jb2xvcilcbiAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiAndHJhbnNsYXRlKCcgKyBwYXJhbXMubWF0cml4Lnhfc2NhbGUocG9zX3gpICsgJywwKSc7XG4gICAgICAgIH0pXG4gICAgICAgIC5hdHRyKCdvcGFjaXR5JyxvcGFjaXR5X2hsaWdodCk7XG5cbiAgICAgIC8vIGxlZnQgaGlnaGxpZ2h0XG4gICAgICBkMy5zZWxlY3QoY2xpY2tlZF9yZWN0LnBhcmVudE5vZGUpXG4gICAgICAgIC5hcHBlbmQoJ3JlY3QnKVxuICAgICAgICAuY2xhc3NlZCgnY2xpY2tfaGxpZ2h0Jyx0cnVlKVxuICAgICAgICAuY2xhc3NlZCgnbGVmdF9obGlnaHQnLHRydWUpXG4gICAgICAgIC5hdHRyKCd3aWR0aCcsIGhsaWdodF93aWR0aClcbiAgICAgICAgLmF0dHIoJ2hlaWdodCcsIHBhcmFtcy5tYXRyaXgueV9zY2FsZS5yYW5nZUJhbmQoKSAtIGhsaWdodF9oZWlnaHQqMC45OSApXG4gICAgICAgIC5hdHRyKCdmaWxsJyxwYXJhbXMubWF0cml4LmhsaWdodF9jb2xvcilcbiAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiAndHJhbnNsYXRlKCcgKyBwYXJhbXMubWF0cml4Lnhfc2NhbGUocG9zX3gpICsgJywnK1xuICAgICAgICAgICAgaGxpZ2h0X2hlaWdodCowLjk5KycpJztcbiAgICAgICAgfSlcbiAgICAgICAgLmF0dHIoJ29wYWNpdHknLG9wYWNpdHlfaGxpZ2h0KTtcblxuICAgICAgLy8gcmlnaHQgaGlnaGxpZ2h0XG4gICAgICBkMy5zZWxlY3QoY2xpY2tlZF9yZWN0LnBhcmVudE5vZGUpXG4gICAgICAgIC5hcHBlbmQoJ3JlY3QnKVxuICAgICAgICAuY2xhc3NlZCgnY2xpY2tfaGxpZ2h0Jyx0cnVlKVxuICAgICAgICAuY2xhc3NlZCgncmlnaHRfaGxpZ2h0Jyx0cnVlKVxuICAgICAgICAuYXR0cignd2lkdGgnLCBobGlnaHRfd2lkdGgpXG4gICAgICAgIC5hdHRyKCdoZWlnaHQnLCBwYXJhbXMubWF0cml4Lnlfc2NhbGUucmFuZ2VCYW5kKCkgLSBobGlnaHRfaGVpZ2h0KjAuOTkgKVxuICAgICAgICAuYXR0cignZmlsbCcscGFyYW1zLm1hdHJpeC5obGlnaHRfY29sb3IpXG4gICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICB2YXIgdG1wX3RyYW5zbGF0ZSA9IHBhcmFtcy5tYXRyaXgueF9zY2FsZShwb3NfeCkgKyBwYXJhbXMubWF0cml4Lnhfc2NhbGUucmFuZ2VCYW5kKCkgLSBobGlnaHRfd2lkdGg7XG4gICAgICAgICAgcmV0dXJuICd0cmFuc2xhdGUoJyArIHRtcF90cmFuc2xhdGUgKyAnLCcrXG4gICAgICAgICAgICBobGlnaHRfaGVpZ2h0KjAuOTkrJyknO1xuICAgICAgICB9KVxuICAgICAgICAuYXR0cignb3BhY2l0eScsb3BhY2l0eV9obGlnaHQpO1xuXG4gICAgICAvLyBib3R0b20gaGlnaGxpZ2h0XG4gICAgICBkMy5zZWxlY3QoY2xpY2tlZF9yZWN0LnBhcmVudE5vZGUpXG4gICAgICAgIC5hcHBlbmQoJ3JlY3QnKVxuICAgICAgICAuY2xhc3NlZCgnY2xpY2tfaGxpZ2h0Jyx0cnVlKVxuICAgICAgICAuY2xhc3NlZCgnYm90dG9tX2hsaWdodCcsdHJ1ZSlcbiAgICAgICAgLmF0dHIoJ3dpZHRoJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICByZXR1cm4gcGFyYW1zLm1hdHJpeC54X3NjYWxlLnJhbmdlQmFuZCgpIC0gMS45OCpobGlnaHRfd2lkdGg7fSlcbiAgICAgICAgLmF0dHIoJ2hlaWdodCcsIGhsaWdodF9oZWlnaHQpXG4gICAgICAgIC5hdHRyKCdmaWxsJyxwYXJhbXMubWF0cml4LmhsaWdodF9jb2xvcilcbiAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZhciB0bXBfdHJhbnNsYXRlX3ggPSBwYXJhbXMubWF0cml4Lnhfc2NhbGUocG9zX3gpICsgaGxpZ2h0X3dpZHRoKjAuOTk7XG4gICAgICAgICAgdmFyIHRtcF90cmFuc2xhdGVfeSA9IHBhcmFtcy5tYXRyaXgueV9zY2FsZS5yYW5nZUJhbmQoKSAtIGhsaWdodF9oZWlnaHQ7XG4gICAgICAgICAgcmV0dXJuICd0cmFuc2xhdGUoJyArIHRtcF90cmFuc2xhdGVfeCArICcsJytcbiAgICAgICAgICAgIHRtcF90cmFuc2xhdGVfeSsnKSc7XG4gICAgICAgIH0pXG4gICAgICAgIC5hdHRyKCdvcGFjaXR5JyxvcGFjaXR5X2hsaWdodCk7XG5cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBhcmFtcy5tYXRyaXguY2xpY2tfaGxpZ2h0X3ggPSAtNjY2O1xuICAgICAgICBwYXJhbXMubWF0cml4LmNsaWNrX2hsaWdodF95ID0gLTY2NjtcbiAgICAgIH1cblxuXG4gIH0pO1xufTtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIHNyYy9tYXRyaXgvYWRkX2NsaWNrX2hsaWdodC5qc1xuICoqLyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFGQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7Ozs7QUFMQTtBQVdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBZkE7QUF5QkE7QUFEQTtBQUNBOztBQXpCQTtBQXNDQTtBQURBO0FBQ0E7O0FBdENBO0FBb0RBO0FBQ0E7QUFGQTtBQUNBOztBQXBEQTtBQWdFQTtBQURBO0FBS0E7QUFDQTtBQUNBO0FBSEE7QUFuRUE7QUE0RUE7QUFDQTtBQTdFQTtBQVBBO0FBSkEiLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 19 */
/***/ function(module, exports, __webpack_require__) {

	eval("var Params = __webpack_require__(1);\nvar build_row_dendro = __webpack_require__(20);\nvar build_col_dendro = __webpack_require__(24);\nvar group_colors = __webpack_require__(22);\n\n/* Dendrogram color bar.\n */\nmodule.exports = function (type) {\n  var params = Params.get();\n  var dom_class;\n\n  if (type === 'row') {\n    dom_class = 'row_class_rect';\n    build_row_dendro(dom_class);\n  } else {\n    dom_class = 'col_class_rect';\n    build_col_dendro(dom_class);\n  }\n\n  /* Changes the groupings (x- and y-axis color bars).\n   */\n  function change_groups(inst_rc, inst_index) {\n    d3.selectAll('.' + dom_class).style('fill', function (d) {\n      return group_colors.get_group_color(d.group[inst_index]);\n    });\n\n    if (inst_rc === 'row') {\n      params.group_level.row = inst_index;\n    } else if (inst_rc === 'col') {\n      params.group_level.col = inst_index;\n    }\n  }\n\n  return {\n    color_group: group_colors.color_group,\n    get_group_color: group_colors.get_group_color,\n    change_groups: change_groups\n  };\n};//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTkuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL2RlbmRyb2dyYW0vaW5kZXguanM/ZGMwOSJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgUGFyYW1zID0gcmVxdWlyZSgnLi4vcGFyYW1zJyk7XG52YXIgYnVpbGRfcm93X2RlbmRybyA9IHJlcXVpcmUoJy4vYnVpbGRfcm93X2RlbmRybycpO1xudmFyIGJ1aWxkX2NvbF9kZW5kcm8gPSByZXF1aXJlKCcuL2J1aWxkX2NvbF9kZW5kcm8nKTtcbnZhciBncm91cF9jb2xvcnMgPSByZXF1aXJlKCcuL2dyb3VwX2NvbG9ycycpO1xuXG4vKiBEZW5kcm9ncmFtIGNvbG9yIGJhci5cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbih0eXBlKSB7XG4gIHZhciBwYXJhbXMgPSBQYXJhbXMuZ2V0KCk7XG4gIHZhciBkb21fY2xhc3M7XG5cbiAgaWYgKHR5cGUgPT09ICdyb3cnKSB7XG4gICAgZG9tX2NsYXNzID0gJ3Jvd19jbGFzc19yZWN0JztcbiAgICBidWlsZF9yb3dfZGVuZHJvKGRvbV9jbGFzcyk7XG4gIH0gZWxzZSB7XG4gICAgZG9tX2NsYXNzID0gJ2NvbF9jbGFzc19yZWN0JztcbiAgICBidWlsZF9jb2xfZGVuZHJvKGRvbV9jbGFzcyk7XG4gIH1cblxuICAvKiBDaGFuZ2VzIHRoZSBncm91cGluZ3MgKHgtIGFuZCB5LWF4aXMgY29sb3IgYmFycykuXG4gICAqL1xuICBmdW5jdGlvbiBjaGFuZ2VfZ3JvdXBzKGluc3RfcmMsIGluc3RfaW5kZXgpIHtcbiAgICBkMy5zZWxlY3RBbGwoJy4nICsgZG9tX2NsYXNzKVxuICAgICAgLnN0eWxlKCdmaWxsJywgZnVuY3Rpb24oZCkge1xuICAgICAgICByZXR1cm4gZ3JvdXBfY29sb3JzLmdldF9ncm91cF9jb2xvcihkLmdyb3VwW2luc3RfaW5kZXhdKTtcbiAgICAgIH0pO1xuXG4gICAgaWYgKGluc3RfcmM9PT0ncm93Jyl7XG4gICAgICBwYXJhbXMuZ3JvdXBfbGV2ZWwucm93ID0gaW5zdF9pbmRleDtcbiAgICB9IGVsc2UgaWYgKGluc3RfcmM9PT0nY29sJyl7XG4gICAgICBwYXJhbXMuZ3JvdXBfbGV2ZWwuY29sID0gaW5zdF9pbmRleDtcbiAgICB9XG5cbiAgfVxuXG4gIHJldHVybiB7XG4gICAgY29sb3JfZ3JvdXA6IGdyb3VwX2NvbG9ycy5jb2xvcl9ncm91cCxcbiAgICBnZXRfZ3JvdXBfY29sb3I6IGdyb3VwX2NvbG9ycy5nZXRfZ3JvdXBfY29sb3IsXG4gICAgY2hhbmdlX2dyb3VwczogY2hhbmdlX2dyb3Vwc1xuICB9O1xufTtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIHNyYy9kZW5kcm9ncmFtL2luZGV4LmpzXG4gKiovIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUxBO0FBQ0E7OztBQUxBO0FBZUE7QUFFQTtBQURBO0FBQ0E7QUFHQTtBQUNBO0FBREE7QUFHQTtBQURBO0FBUkE7QUFDQTtBQWFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUE1QkEiLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 20 */
/***/ function(module, exports, __webpack_require__) {

	eval("var Params = __webpack_require__(1);\nvar get_inst_group = __webpack_require__(21);\nvar group_colors = __webpack_require__(22);\n\nmodule.exports = function (dom_class) {\n  var params = Params.get();\n\n  d3.selectAll('.row_viz_group').each(function () {\n\n    var inst_level = params.group_level.row;\n\n    var dendro_rect = d3.select(this).append('rect').attr('class', dom_class).attr('width', function () {\n      var inst_width = params.class_room.symbol_width - 1;\n      return inst_width + 'px';\n    }).attr('height', params.matrix.y_scale.rangeBand()).style('fill', function (d) {\n      if (_.has(d, 'group')) {\n        var inst_color = group_colors.get_group_color(d.group[inst_level]);\n      } else {\n        inst_color = '#eee';\n      }\n\n      return inst_color;\n    }).attr('x', function () {\n      var inst_offset = params.class_room.symbol_width + 1;\n      return inst_offset + 'px';\n    });\n\n    // show group in modal\n    if (typeof params.click_group === 'function') {\n      dendro_rect.on('click', function (d) {\n        var group_nodes_list = get_inst_group('row', d);\n        params.click_group('row', group_nodes_list);\n      });\n    }\n  });\n};//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL2RlbmRyb2dyYW0vYnVpbGRfcm93X2RlbmRyby5qcz9hZTQ4Il0sInNvdXJjZXNDb250ZW50IjpbInZhciBQYXJhbXMgPSByZXF1aXJlKCcuLi9wYXJhbXMnKTtcbnZhciBnZXRfaW5zdF9ncm91cCA9IHJlcXVpcmUoJy4vZ2V0X2luc3RfZ3JvdXAnKTtcbnZhciBncm91cF9jb2xvcnMgPSByZXF1aXJlKCcuL2dyb3VwX2NvbG9ycycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGRvbV9jbGFzcykge1xuICB2YXIgcGFyYW1zID0gUGFyYW1zLmdldCgpO1xuXG4gIGQzLnNlbGVjdEFsbCgnLnJvd192aXpfZ3JvdXAnKVxuICAgIC5lYWNoKGZ1bmN0aW9uKCkge1xuXG4gICAgICB2YXIgaW5zdF9sZXZlbCA9IHBhcmFtcy5ncm91cF9sZXZlbC5yb3c7XG5cbiAgICAgIHZhciBkZW5kcm9fcmVjdCA9IGQzLnNlbGVjdCh0aGlzKVxuICAgICAgICAuYXBwZW5kKCdyZWN0JylcbiAgICAgICAgLmF0dHIoJ2NsYXNzJywgZG9tX2NsYXNzKVxuICAgICAgICAuYXR0cignd2lkdGgnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICB2YXIgaW5zdF93aWR0aCA9IHBhcmFtcy5jbGFzc19yb29tLnN5bWJvbF93aWR0aCAtIDE7XG4gICAgICAgICAgcmV0dXJuIGluc3Rfd2lkdGggKyAncHgnO1xuICAgICAgICB9KVxuICAgICAgICAuYXR0cignaGVpZ2h0JywgcGFyYW1zLm1hdHJpeC55X3NjYWxlLnJhbmdlQmFuZCgpKVxuICAgICAgICAuc3R5bGUoJ2ZpbGwnLCBmdW5jdGlvbihkKSB7XG4gICAgICAgICAgaWYgKF8uaGFzKGQsJ2dyb3VwJykpe1xuICAgICAgICAgICAgdmFyIGluc3RfY29sb3IgPSBncm91cF9jb2xvcnMuZ2V0X2dyb3VwX2NvbG9yKGQuZ3JvdXBbaW5zdF9sZXZlbF0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpbnN0X2NvbG9yID0gJyNlZWUnO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiBpbnN0X2NvbG9yO1xuICAgICAgICB9KVxuICAgICAgICAuYXR0cigneCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZhciBpbnN0X29mZnNldCA9IHBhcmFtcy5jbGFzc19yb29tLnN5bWJvbF93aWR0aCArIDE7XG4gICAgICAgICAgcmV0dXJuIGluc3Rfb2Zmc2V0ICsgJ3B4JztcbiAgICAgICAgfSk7XG5cbiAgICAgIC8vIHNob3cgZ3JvdXAgaW4gbW9kYWxcbiAgICAgIGlmICh0eXBlb2YgcGFyYW1zLmNsaWNrX2dyb3VwID09PSAnZnVuY3Rpb24nKXtcbiAgICAgICAgZGVuZHJvX3JlY3RcbiAgICAgICAgICAub24oJ2NsaWNrJywgZnVuY3Rpb24oZCl7XG4gICAgICAgICAgICB2YXIgZ3JvdXBfbm9kZXNfbGlzdCA9IGdldF9pbnN0X2dyb3VwKCdyb3cnLGQpO1xuICAgICAgICAgICAgcGFyYW1zLmNsaWNrX2dyb3VwKCdyb3cnLCBncm91cF9ub2Rlc19saXN0KTtcbiAgICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgIH0pO1xuXG59O1xuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogc3JjL2RlbmRyb2dyYW0vYnVpbGRfcm93X2RlbmRyby5qc1xuICoqLyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUZBO0FBTUE7QUFDQTtBQURBO0FBR0E7QUFIQTtBQUNBO0FBS0E7QUFQQTtBQVVBO0FBQ0E7QUFGQTtBQUNBOztBQXRCQTtBQTRCQTtBQUVBO0FBQ0E7QUFGQTtBQUZBO0FBM0JBO0FBSkEiLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 21 */
/***/ function(module, exports, __webpack_require__) {

	eval("var Params = __webpack_require__(1);\n\nmodule.exports = function (inst_rc, d) {\n  var params = Params.get();\n\n  var inst_level;\n  var inst_nodes;\n\n  if (inst_rc === 'col') {\n    inst_level = params.group_level.col;\n    inst_nodes = params.network_data.col_nodes;\n  } else if (inst_rc === 'row') {\n    inst_level = params.group_level.row;\n    inst_nodes = params.network_data.row_nodes;\n  }\n\n  var inst_group = d.group[inst_level];\n  var group_nodes_list = [];\n\n  inst_nodes.forEach(function (node) {\n    if (node.group[inst_level] === inst_group) {\n      group_nodes_list.push(node.name);\n    }\n  });\n\n  return group_nodes_list;\n};//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjEuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL2RlbmRyb2dyYW0vZ2V0X2luc3RfZ3JvdXAuanM/NDM3YiJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgUGFyYW1zID0gcmVxdWlyZSgnLi4vcGFyYW1zJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaW5zdF9yYyxkKSB7XG4gIHZhciBwYXJhbXMgPSBQYXJhbXMuZ2V0KCk7XG5cbiAgdmFyIGluc3RfbGV2ZWw7XG4gIHZhciBpbnN0X25vZGVzO1xuXG4gIGlmIChpbnN0X3JjID09PSAnY29sJykge1xuICAgIGluc3RfbGV2ZWwgPSBwYXJhbXMuZ3JvdXBfbGV2ZWwuY29sO1xuICAgIGluc3Rfbm9kZXMgPSBwYXJhbXMubmV0d29ya19kYXRhLmNvbF9ub2RlcztcbiAgfSBlbHNlIGlmIChpbnN0X3JjID09PSAncm93Jykge1xuICAgIGluc3RfbGV2ZWwgPSBwYXJhbXMuZ3JvdXBfbGV2ZWwucm93O1xuICAgIGluc3Rfbm9kZXMgPSBwYXJhbXMubmV0d29ya19kYXRhLnJvd19ub2RlcztcbiAgfVxuXG4gIHZhciBpbnN0X2dyb3VwID0gZC5ncm91cFtpbnN0X2xldmVsXTtcbiAgdmFyIGdyb3VwX25vZGVzX2xpc3QgPSBbXTtcblxuICBpbnN0X25vZGVzLmZvckVhY2goZnVuY3Rpb24obm9kZSkge1xuICAgIGlmIChub2RlLmdyb3VwW2luc3RfbGV2ZWxdID09PSBpbnN0X2dyb3VwKXtcbiAgICAgIGdyb3VwX25vZGVzX2xpc3QucHVzaChub2RlLm5hbWUpO1xuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIGdyb3VwX25vZGVzX2xpc3Q7XG59O1xuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogc3JjL2RlbmRyb2dyYW0vZ2V0X2luc3RfZ3JvdXAuanNcbiAqKi8iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFGQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFEQTtBQUNBO0FBS0E7QUF2QkEiLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 22 */
/***/ function(module, exports, __webpack_require__) {

	eval("var Params = __webpack_require__(1);\nvar colors = __webpack_require__(23);\n\nvar group_colors = [];\n\nfunction build() {\n  if (group_colors.length) {\n    return group_colors;\n  }\n\n  var params = Params.get();\n  // var max_groups;\n  //\n  // if (params.network_data.row_nodes.length > params.network_data.col_nodes.length) {\n  //   max_groups = params.network_data.row_nodes;\n  // } else {\n  //   max_groups = params.network_data.col_nodes;\n  // }\n\n  for (var i = 0; i < params.network_data.row_nodes.length; i++) {\n    // grab colors from the list\n    if (i === 1) {\n      group_colors[i] = colors.get_default_color();\n    } else {\n      group_colors[i] = colors.get_random_color(i);\n    }\n  }\n\n  return group_colors;\n}\n\nmodule.exports = {\n  build: build,\n  get: function () {\n    if (group_colors.length < 1) {\n      group_colors = build();\n    }\n    return group_colors;\n  },\n  color_group: function (index) {\n    if (group_colors.length < 1) {\n      group_colors = build();\n    }\n    return group_colors[index];\n  },\n  get_group_color: function (index) {\n    if (group_colors.length < 1) {\n      group_colors = build();\n    }\n    return group_colors[index];\n  }\n};//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjIuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL2RlbmRyb2dyYW0vZ3JvdXBfY29sb3JzLmpzPzk5NWEiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIFBhcmFtcyA9IHJlcXVpcmUoJy4uL3BhcmFtcycpO1xudmFyIGNvbG9ycyA9IHJlcXVpcmUoJy4uL2NvbG9ycycpO1xuXG52YXIgZ3JvdXBfY29sb3JzID0gW107XG5cbmZ1bmN0aW9uIGJ1aWxkKCkge1xuICBpZiAoZ3JvdXBfY29sb3JzLmxlbmd0aCkge1xuICAgIHJldHVybiBncm91cF9jb2xvcnM7XG4gIH1cblxuICB2YXIgcGFyYW1zID0gUGFyYW1zLmdldCgpO1xuICAvLyB2YXIgbWF4X2dyb3VwcztcbiAgLy9cbiAgLy8gaWYgKHBhcmFtcy5uZXR3b3JrX2RhdGEucm93X25vZGVzLmxlbmd0aCA+IHBhcmFtcy5uZXR3b3JrX2RhdGEuY29sX25vZGVzLmxlbmd0aCkge1xuICAvLyAgIG1heF9ncm91cHMgPSBwYXJhbXMubmV0d29ya19kYXRhLnJvd19ub2RlcztcbiAgLy8gfSBlbHNlIHtcbiAgLy8gICBtYXhfZ3JvdXBzID0gcGFyYW1zLm5ldHdvcmtfZGF0YS5jb2xfbm9kZXM7XG4gIC8vIH1cblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHBhcmFtcy5uZXR3b3JrX2RhdGEucm93X25vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgLy8gZ3JhYiBjb2xvcnMgZnJvbSB0aGUgbGlzdFxuICAgIGlmIChpID09PSAxKSB7XG4gICAgICBncm91cF9jb2xvcnNbaV0gPSBjb2xvcnMuZ2V0X2RlZmF1bHRfY29sb3IoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZ3JvdXBfY29sb3JzW2ldID0gY29sb3JzLmdldF9yYW5kb21fY29sb3IoaSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGdyb3VwX2NvbG9ycztcblxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgYnVpbGQ6IGJ1aWxkLFxuICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgIGlmIChncm91cF9jb2xvcnMubGVuZ3RoIDwgMSkge1xuICAgICAgZ3JvdXBfY29sb3JzID0gYnVpbGQoKTtcbiAgICB9XG4gICAgcmV0dXJuIGdyb3VwX2NvbG9ycztcbiAgfSxcbiAgY29sb3JfZ3JvdXA6IGZ1bmN0aW9uKGluZGV4KSB7XG4gICAgaWYgKGdyb3VwX2NvbG9ycy5sZW5ndGggPCAxKSB7XG4gICAgICBncm91cF9jb2xvcnMgPSBidWlsZCgpO1xuICAgIH1cbiAgICByZXR1cm4gZ3JvdXBfY29sb3JzW2luZGV4XTtcbiAgfSxcbiAgZ2V0X2dyb3VwX2NvbG9yOiBmdW5jdGlvbihpbmRleCkge1xuICAgIGlmIChncm91cF9jb2xvcnMubGVuZ3RoIDwgMSkge1xuICAgICAgZ3JvdXBfY29sb3JzID0gYnVpbGQoKTtcbiAgICB9XG4gICAgcmV0dXJuIGdyb3VwX2NvbG9yc1tpbmRleF07XG4gIH1cbn07XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiBzcmMvZGVuZHJvZ3JhbS9ncm91cF9jb2xvcnMuanNcbiAqKi8iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBR0E7Ozs7Ozs7OztBQUxBOztBQWdCQTtBQUNBO0FBREE7QUFHQTtBQUhBO0FBRkE7QUFDQTtBQVFBO0FBdkJBO0FBQ0E7QUEwQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFKQTtBQU1BO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFKQTtBQU1BO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFKQTtBQWRBIiwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 23 */
/***/ function(module, exports) {

	eval("// colors from http://graphicdesign.stackexchange.com/revisions/3815/8\nvar rand_colors;\n\n// generate random colors\nvar tmp0 = ['#000000', '#FF34FF', '#FFFF00', '#FF4A46'];\nvar tmp1 = d3.scale.category20().range().reverse();\nvar tmp2 = d3.scale.category20b().range();\nvar tmp3 = d3.scale.category20c().range();\nrand_colors = tmp0.concat(tmp1).concat(tmp2).concat(tmp3);\n\nfunction get_default_color() {\n  //return rand_colors[0];\n  return '#EEE';\n}\n\nfunction get_random_color(i) {\n  return rand_colors[i % get_num_colors()];\n}\n\nfunction get_num_colors() {\n  return rand_colors.length;\n}\n\nmodule.exports = {\n  get_default_color: get_default_color,\n  get_random_color: get_random_color,\n  get_num_colors: get_num_colors\n};//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL2NvbG9ycy5qcz8xOWVjIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIGNvbG9ycyBmcm9tIGh0dHA6Ly9ncmFwaGljZGVzaWduLnN0YWNrZXhjaGFuZ2UuY29tL3JldmlzaW9ucy8zODE1LzhcbnZhciByYW5kX2NvbG9ycztcblxuLy8gZ2VuZXJhdGUgcmFuZG9tIGNvbG9yc1xudmFyIHRtcDAgPSBbJyMwMDAwMDAnLCAnI0ZGMzRGRicsICcjRkZGRjAwJywgJyNGRjRBNDYnXTtcbnZhciB0bXAxID0gZDMuc2NhbGUuY2F0ZWdvcnkyMCgpLnJhbmdlKCkucmV2ZXJzZSgpO1xudmFyIHRtcDIgPSBkMy5zY2FsZS5jYXRlZ29yeTIwYigpLnJhbmdlKCk7XG52YXIgdG1wMyA9IGQzLnNjYWxlLmNhdGVnb3J5MjBjKCkucmFuZ2UoKTtcbnJhbmRfY29sb3JzID0gdG1wMC5jb25jYXQodG1wMSkuY29uY2F0KHRtcDIpLmNvbmNhdCh0bXAzKTtcblxuZnVuY3Rpb24gZ2V0X2RlZmF1bHRfY29sb3IoKSB7XG4gIC8vcmV0dXJuIHJhbmRfY29sb3JzWzBdO1xuICByZXR1cm4gJyNFRUUnO1xufVxuXG5mdW5jdGlvbiBnZXRfcmFuZG9tX2NvbG9yKGkpIHtcbiAgcmV0dXJuIHJhbmRfY29sb3JzW2kgJSBnZXRfbnVtX2NvbG9ycygpXTtcbn1cblxuZnVuY3Rpb24gZ2V0X251bV9jb2xvcnMoKSB7XG4gIHJldHVybiByYW5kX2NvbG9ycy5sZW5ndGg7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBnZXRfZGVmYXVsdF9jb2xvcjogZ2V0X2RlZmF1bHRfY29sb3IsXG4gIGdldF9yYW5kb21fY29sb3I6IGdldF9yYW5kb21fY29sb3IsXG4gIGdldF9udW1fY29sb3JzOiBnZXRfbnVtX2NvbG9yc1xufTtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIHNyYy9jb2xvcnMuanNcbiAqKi8iXSwibWFwcGluZ3MiOiI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBRkE7QUFDQTtBQUlBO0FBQ0E7QUFEQTtBQUNBO0FBR0E7QUFDQTtBQURBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUhBIiwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 24 */
/***/ function(module, exports, __webpack_require__) {

	eval("var Params = __webpack_require__(1);\nvar get_inst_group = __webpack_require__(21);\nvar group_colors = __webpack_require__(22);\n\nmodule.exports = function (dom_class) {\n  var params = Params.get();\n  var col_nodes = params.network_data.col_nodes;\n  var col_nodes_names = _.pluck(col_nodes, 'name');\n\n  // append groups - each will hold a classification rect\n  d3.select('.col_viz_zoom_container').selectAll('g').data(col_nodes, function (d) {\n    return d.name;\n  }).enter().append('g').attr('class', 'col_viz_group').attr('transform', function (d) {\n    var inst_index = _.indexOf(col_nodes_names, d.name);\n    return 'translate(' + params.matrix.x_scale(inst_index) + ',0)';\n  });\n\n  d3.selectAll('.col_viz_group').each(function () {\n\n    var inst_level = params.group_level.col;\n\n    var dendro_rect = d3.select(this).append('rect').attr('class', dom_class).attr('width', params.matrix.x_scale.rangeBand()).attr('height', function () {\n      var inst_height = params.class_room.col - 1;\n      return inst_height;\n    }).style('fill', function (d) {\n      if (_.has(d, 'group')) {\n        var inst_color = group_colors.get_group_color(d.group[inst_level]);\n      } else {\n        inst_color = '#eee';\n      }\n      return inst_color;\n    });\n\n    if (typeof params.click_group === 'function') {\n      dendro_rect.on('click', function (d) {\n        var group_nodes_list = get_inst_group('col', d);\n        params.click_group('col', group_nodes_list);\n      });\n    }\n  });\n};//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjQuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL2RlbmRyb2dyYW0vYnVpbGRfY29sX2RlbmRyby5qcz85Y2Y3Il0sInNvdXJjZXNDb250ZW50IjpbInZhciBQYXJhbXMgPSByZXF1aXJlKCcuLi9wYXJhbXMnKTtcbnZhciBnZXRfaW5zdF9ncm91cCA9IHJlcXVpcmUoJy4vZ2V0X2luc3RfZ3JvdXAnKTtcbnZhciBncm91cF9jb2xvcnMgPSByZXF1aXJlKCcuL2dyb3VwX2NvbG9ycycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChkb21fY2xhc3MpIHtcbiAgdmFyIHBhcmFtcyA9IFBhcmFtcy5nZXQoKTtcbiAgdmFyIGNvbF9ub2RlcyA9IHBhcmFtcy5uZXR3b3JrX2RhdGEuY29sX25vZGVzO1xuICB2YXIgY29sX25vZGVzX25hbWVzID0gXy5wbHVjayhjb2xfbm9kZXMsICduYW1lJyk7XG5cbiAgLy8gYXBwZW5kIGdyb3VwcyAtIGVhY2ggd2lsbCBob2xkIGEgY2xhc3NpZmljYXRpb24gcmVjdFxuICBkMy5zZWxlY3QoJy5jb2xfdml6X3pvb21fY29udGFpbmVyJylcbiAgICAuc2VsZWN0QWxsKCdnJylcbiAgICAuZGF0YShjb2xfbm9kZXMsIGZ1bmN0aW9uKGQpeyByZXR1cm4gZC5uYW1lOyB9KVxuICAgIC5lbnRlcigpXG4gICAgLmFwcGVuZCgnZycpXG4gICAgLmF0dHIoJ2NsYXNzJywgJ2NvbF92aXpfZ3JvdXAnKVxuICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCBmdW5jdGlvbihkKSB7XG4gICAgICB2YXIgaW5zdF9pbmRleCA9IF8uaW5kZXhPZihjb2xfbm9kZXNfbmFtZXMsIGQubmFtZSk7XG4gICAgICByZXR1cm4gJ3RyYW5zbGF0ZSgnICsgcGFyYW1zLm1hdHJpeC54X3NjYWxlKGluc3RfaW5kZXgpICsgJywwKSc7XG4gICAgfSk7XG5cbiAgZDMuc2VsZWN0QWxsKCcuY29sX3Zpel9ncm91cCcpXG4gICAgLmVhY2goZnVuY3Rpb24oKSB7XG5cbiAgICAgIHZhciBpbnN0X2xldmVsID0gcGFyYW1zLmdyb3VwX2xldmVsLmNvbDtcblxuICAgICAgdmFyIGRlbmRyb19yZWN0ID0gZDMuc2VsZWN0KHRoaXMpXG4gICAgICAgIC5hcHBlbmQoJ3JlY3QnKVxuICAgICAgICAuYXR0cignY2xhc3MnLCBkb21fY2xhc3MpXG4gICAgICAgIC5hdHRyKCd3aWR0aCcsIHBhcmFtcy5tYXRyaXgueF9zY2FsZS5yYW5nZUJhbmQoKSlcbiAgICAgICAgLmF0dHIoJ2hlaWdodCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZhciBpbnN0X2hlaWdodCA9IHBhcmFtcy5jbGFzc19yb29tLmNvbCAtIDE7XG4gICAgICAgICAgcmV0dXJuIGluc3RfaGVpZ2h0O1xuICAgICAgICB9KVxuICAgICAgICAuc3R5bGUoJ2ZpbGwnLCBmdW5jdGlvbihkKSB7XG4gICAgICAgICAgaWYgKF8uaGFzKGQsJ2dyb3VwJykpe1xuICAgICAgICAgICAgdmFyIGluc3RfY29sb3IgPSBncm91cF9jb2xvcnMuZ2V0X2dyb3VwX2NvbG9yKGQuZ3JvdXBbaW5zdF9sZXZlbF0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpbnN0X2NvbG9yID0gJyNlZWUnO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gaW5zdF9jb2xvcjtcbiAgICAgICAgfSk7XG5cbiAgICAgIGlmICh0eXBlb2YgcGFyYW1zLmNsaWNrX2dyb3VwID09PSAnZnVuY3Rpb24nKXtcbiAgICAgICAgZGVuZHJvX3JlY3RcbiAgICAgICAgICAub24oJ2NsaWNrJyxmdW5jdGlvbihkKXtcbiAgICAgICAgICAgIHZhciBncm91cF9ub2Rlc19saXN0ID0gZ2V0X2luc3RfZ3JvdXAoJ2NvbCcsIGQpO1xuICAgICAgICAgICAgcGFyYW1zLmNsaWNrX2dyb3VwKCdjb2wnLCBncm91cF9ub2Rlc19saXN0KTtcbiAgICAgICAgICB9KTtcbiAgICAgIH1cblxuICB9KTtcbn07XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiBzcmMvZGVuZHJvZ3JhbS9idWlsZF9jb2xfZGVuZHJvLmpzXG4gKiovIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBSkE7QUFRQTtBQUFBO0FBS0E7QUFDQTtBQUZBO0FBQ0E7QUFJQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQURBO0FBR0E7QUFIQTtBQUtBO0FBTkE7QUFDQTtBQVFBO0FBQ0E7QUFFQTtBQUNBO0FBRkE7QUFGQTtBQXJCQTtBQWxCQSIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ },
/* 25 */
/***/ function(module, exports, __webpack_require__) {

	eval("var Params = __webpack_require__(1);\nvar utils = __webpack_require__(5);\nvar add_row_click_hlight = __webpack_require__(26);\nvar row_reorder = __webpack_require__(27);\n\nmodule.exports = function (text_delay) {\n  var params = Params.get();\n\n  var row_nodes = params.network_data.row_nodes;\n\n  var row_nodes_names = params.network_data.row_nodes_names;\n\n  // row container holds all row text and row visualizations (triangles rects)\n  if (d3.select(params.viz.vis_svg + ' .row_container').empty()) {\n    var row_container = d3.select(params.viz.viz_svg).append('g').attr('class', 'row_container').attr('transform', 'translate(' + params.norm_label.margin.left + ',' + params.viz.clust.margin.top + ')');\n  } else {\n    var row_container = d3.select(params.viz.viz_svg).select('.row_container').attr('transform', 'translate(' + params.norm_label.margin.left + ',' + params.viz.clust.margin.top + ')');\n  }\n\n  if (d3.select(params.root + ' .row_white_background').empty()) {\n    row_container.append('rect').classed('row_white_background', true).classed('white_bars', true).attr('fill', params.viz.background_color).attr('width', params.norm_label.background.row).attr('height', 30 * params.viz.clust.dim.height + 'px');\n  }\n\n  // container to hold text row labels\n  row_container.append('g').attr('class', 'row_label_container').attr('transform', 'translate(' + params.norm_label.width.row + ',0)').append('g').attr('class', 'row_label_zoom_container');\n\n  var row_labels = d3.select(params.root + ' .row_label_zoom_container').selectAll('g').data(row_nodes, function (d) {\n    return d.name;\n  }).enter().append('g').attr('class', 'row_label_text').attr('transform', function (d) {\n    var inst_index = _.indexOf(row_nodes_names, d.name);\n    return 'translate(0,' + params.matrix.y_scale(inst_index) + ')';\n  });\n\n  d3.select(params.root + ' .row_label_zoom_container').selectAll('.row_label_text').on('dblclick', function (d) {\n    console.log('double clicking row');\n    row_reorder.call(this);\n    if (params.tile_click_hlight) {\n      add_row_click_hlight(this, d.ini);\n    }\n  });\n\n  if (params.labels.show_label_tooltips) {\n\n    // d3-tooltip\n    var tip = d3.tip().attr('class', 'd3-tip').direction('e').offset([0, 10]).html(function (d) {\n      var inst_name = d.name.replace(/_/g, ' ').split('#')[0];\n      return \"<span>\" + inst_name + \"</span>\";\n    });\n\n    d3.select(params.viz.viz_wrapper).select(params.root + ' .row_container').call(tip);\n\n    row_labels.on('mouseover', function (d) {\n      d3.select(this).select('text').classed('active', true);\n      tip.show(d);\n    }).on('mouseout', function mouseout(d) {\n      d3.select(this).select('text').classed('active', false);\n      tip.hide(d);\n    });\n  } else {\n    row_labels.on('mouseover', function (d) {\n      d3.select(this).select('text').classed('active', true);\n    }).on('mouseout', function mouseout(d) {\n      d3.select(this).select('text').classed('active', false);\n    });\n  }\n\n  // append rectangle behind text\n  row_labels.insert('rect').style('opacity', 0);\n\n  // append row label text\n  row_labels.append('text').attr('y', params.matrix.rect_height * 0.5 + params.labels.default_fs_row * 0.35).attr('text-anchor', 'end').style('font-size', params.labels.default_fs_row + 'px').text(function (d) {\n    return utils.normal_name(d, params.labels.max_label_char);\n  }).attr('pointer-events', 'none').style('opacity', 0).transition().delay(text_delay).duration(text_delay).style('opacity', 1);\n\n  // change the size of the highlighting rects\n  row_labels.each(function () {\n    var bbox = d3.select(this).select('text')[0][0].getBBox();\n    d3.select(this).select('rect').attr('x', bbox.x).attr('y', 0).attr('width', bbox.width).attr('height', params.matrix.y_scale.rangeBand()).style('fill', function () {\n      var inst_hl = 'yellow';\n      return inst_hl;\n    }).style('opacity', function (d) {\n      var inst_opacity = 0;\n      // highlight target genes\n      if (d.target === 1) {\n        inst_opacity = 1;\n      }\n      return inst_opacity;\n    });\n  });\n\n  // label the widest row and col labels\n  params.bounding_width_max = {};\n  params.bounding_width_max.row = 0;\n\n  d3.selectAll('.row_label_text').each(function () {\n    var tmp_width = d3.select(this).select('text').node().getBBox().width;\n    if (tmp_width > params.bounding_width_max.row) {\n      params.bounding_width_max.row = tmp_width;\n    }\n  });\n\n  // row visualizations - classification triangles and colorbar rects\n  var row_viz_container = row_container.append('g').attr('class', 'row_viz_container').attr('transform', 'translate(' + params.norm_label.width.row + ',0)').append('g').attr('class', 'row_zoom_container');\n\n  // white background for triangle\n  if (d3.select(params.root + ' .row_zoom_container').select('.white_bars').empty()) {\n    row_viz_container.append('rect').attr('class', 'white_bars').attr('fill', params.viz.background_color).attr('width', params.class_room.row + 'px').attr('height', function () {\n      var inst_height = params.viz.clust.dim.height;\n      return inst_height;\n    });\n  } else {\n    row_viz_container.select('class', 'white_bars').attr('fill', params.viz.background_color).attr('width', params.class_room.row + 'px').attr('height', function () {\n      var inst_height = params.viz.clust.dim.height;\n      return inst_height;\n    });\n  }\n\n  // groups that hold classification triangle and colorbar rect\n  var row_viz_group = d3.select(params.root + ' .row_zoom_container').selectAll('g').data(row_nodes, function (d) {\n    return d.name;\n  }).enter().append('g').attr('class', 'row_viz_group').attr('transform', function (d) {\n    var inst_index = _.indexOf(row_nodes_names, d.name);\n    return 'translate(0, ' + params.matrix.y_scale(inst_index) + ')';\n  });\n\n  // add triangles\n  row_viz_group.append('path').attr('d', function (d) {\n    var origin_x = params.class_room.symbol_width - 1;\n    var origin_y = 0;\n    var mid_x = 1;\n    var mid_y = params.matrix.y_scale.rangeBand() / 2;\n    var final_x = params.class_room.symbol_width - 1;\n    var final_y = params.matrix.y_scale.rangeBand();\n    var output_string = 'M ' + origin_x + ',' + origin_y + ' L ' + mid_x + ',' + mid_y + ', L ' + final_x + ',' + final_y + ' Z';\n    return output_string;\n  }).attr('fill', function (d) {\n    // initailize color\n    var inst_color = '#eee';\n    if (params.labels.show_categories) {\n      inst_color = params.labels.class_colors.row[d.cl];\n    }\n    return inst_color;\n  }).style('opacity', 0).transition().delay(text_delay).duration(text_delay).style('opacity', 1);\n\n  if (utils.has(params.network_data.row_nodes[0], 'value')) {\n\n    row_labels.append('rect').attr('class', 'row_bars').attr('width', function (d) {\n      var inst_value = 0;\n      inst_value = params.labels.bar_scale_row(Math.abs(d.value));\n      return inst_value;\n    }).attr('x', function (d) {\n      var inst_value = 0;\n      inst_value = -params.labels.bar_scale_row(Math.abs(d.value));\n      return inst_value;\n    }).attr('height', params.matrix.y_scale.rangeBand()).attr('fill', function (d) {\n      return d.value > 0 ? params.matrix.bar_colors[0] : params.matrix.bar_colors[1];\n    }).attr('opacity', 0.4);\n  }\n\n  // add row callback function\n  d3.selectAll('.row_label_text').on('click', function (d) {\n    if (typeof params.click_label == 'function') {\n      params.click_label(d.name, 'row');\n      add_row_click_hlight(this, d.ini);\n    } else {\n      if (params.tile_click_hlight) {\n        add_row_click_hlight(this, d.ini);\n      }\n    }\n  });\n\n  // row label text will not spillover initially since\n  // the font-size is set up to not allow spillover\n  // it can spillover during zooming and must be constrained\n\n  // return row_viz_group so that the dendrogram can be made\n  return row_viz_group;\n};//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjUuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL2xhYmVscy9tYWtlX3Jvd3MuanM/NjE4MyJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgUGFyYW1zID0gcmVxdWlyZSgnLi4vcGFyYW1zJyk7XG52YXIgdXRpbHMgPSByZXF1aXJlKCcuLi91dGlscycpO1xudmFyIGFkZF9yb3dfY2xpY2tfaGxpZ2h0ID0gcmVxdWlyZSgnLi9hZGRfcm93X2NsaWNrX2hsaWdodCcpO1xudmFyIHJvd19yZW9yZGVyID0gcmVxdWlyZSgnLi4vcmVvcmRlci9yb3dfcmVvcmRlcicpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHRleHRfZGVsYXkpIHtcbiAgdmFyIHBhcmFtcyA9IFBhcmFtcy5nZXQoKTtcblxuICB2YXIgcm93X25vZGVzID0gcGFyYW1zLm5ldHdvcmtfZGF0YS5yb3dfbm9kZXM7XG5cbiAgdmFyIHJvd19ub2Rlc19uYW1lcyA9IHBhcmFtcy5uZXR3b3JrX2RhdGEucm93X25vZGVzX25hbWVzO1xuXG4gIC8vIHJvdyBjb250YWluZXIgaG9sZHMgYWxsIHJvdyB0ZXh0IGFuZCByb3cgdmlzdWFsaXphdGlvbnMgKHRyaWFuZ2xlcyByZWN0cylcbiAgaWYgKCBkMy5zZWxlY3QocGFyYW1zLnZpei52aXNfc3ZnICsgJyAucm93X2NvbnRhaW5lcicpLmVtcHR5KCkgKXtcbiAgICB2YXIgcm93X2NvbnRhaW5lciA9IGQzLnNlbGVjdChwYXJhbXMudml6LnZpel9zdmcpXG4gICAgICAuYXBwZW5kKCdnJylcbiAgICAgIC5hdHRyKCdjbGFzcycsJ3Jvd19jb250YWluZXInKVxuICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoJyArIHBhcmFtcy5ub3JtX2xhYmVsLm1hcmdpbi5sZWZ0ICsgJywnICtcbiAgICAgIHBhcmFtcy52aXouY2x1c3QubWFyZ2luLnRvcCArICcpJyk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIHJvd19jb250YWluZXIgPSBkMy5zZWxlY3QocGFyYW1zLnZpei52aXpfc3ZnKVxuICAgICAgLnNlbGVjdCgnLnJvd19jb250YWluZXInKVxuICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoJyArIHBhcmFtcy5ub3JtX2xhYmVsLm1hcmdpbi5sZWZ0ICsgJywnICtcbiAgICAgIHBhcmFtcy52aXouY2x1c3QubWFyZ2luLnRvcCArICcpJyk7XG4gIH1cblxuICBpZiAoZDMuc2VsZWN0KHBhcmFtcy5yb290KycgLnJvd193aGl0ZV9iYWNrZ3JvdW5kJykuZW1wdHkoKSl7XG4gICAgcm93X2NvbnRhaW5lclxuICAgICAgLmFwcGVuZCgncmVjdCcpXG4gICAgICAuY2xhc3NlZCgncm93X3doaXRlX2JhY2tncm91bmQnLHRydWUpXG4gICAgICAuY2xhc3NlZCgnd2hpdGVfYmFycycsdHJ1ZSlcbiAgICAgIC5hdHRyKCdmaWxsJywgcGFyYW1zLnZpei5iYWNrZ3JvdW5kX2NvbG9yKVxuICAgICAgLmF0dHIoJ3dpZHRoJywgcGFyYW1zLm5vcm1fbGFiZWwuYmFja2dyb3VuZC5yb3cpXG4gICAgICAuYXR0cignaGVpZ2h0JywgMzAqcGFyYW1zLnZpei5jbHVzdC5kaW0uaGVpZ2h0ICsgJ3B4Jyk7XG4gIH1cblxuICAvLyBjb250YWluZXIgdG8gaG9sZCB0ZXh0IHJvdyBsYWJlbHNcbiAgcm93X2NvbnRhaW5lclxuICAgIC5hcHBlbmQoJ2cnKVxuICAgIC5hdHRyKCdjbGFzcycsJ3Jvd19sYWJlbF9jb250YWluZXInKVxuICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKCcgKyBwYXJhbXMubm9ybV9sYWJlbC53aWR0aC5yb3cgKyAnLDApJylcbiAgICAuYXBwZW5kKCdnJylcbiAgICAuYXR0cignY2xhc3MnLCAncm93X2xhYmVsX3pvb21fY29udGFpbmVyJyk7XG5cbiAgdmFyIHJvd19sYWJlbHMgPSBkMy5zZWxlY3QocGFyYW1zLnJvb3QrJyAucm93X2xhYmVsX3pvb21fY29udGFpbmVyJylcbiAgICAuc2VsZWN0QWxsKCdnJylcbiAgICAuZGF0YShyb3dfbm9kZXMsIGZ1bmN0aW9uKGQpe3JldHVybiBkLm5hbWU7fSlcbiAgICAuZW50ZXIoKVxuICAgIC5hcHBlbmQoJ2cnKVxuICAgIC5hdHRyKCdjbGFzcycsICdyb3dfbGFiZWxfdGV4dCcpXG4gICAgLmF0dHIoJ3RyYW5zZm9ybScsIGZ1bmN0aW9uKGQpIHtcbiAgICAgIHZhciBpbnN0X2luZGV4ID0gXy5pbmRleE9mKHJvd19ub2Rlc19uYW1lcywgZC5uYW1lKTtcbiAgICAgIHJldHVybiAndHJhbnNsYXRlKDAsJyArIHBhcmFtcy5tYXRyaXgueV9zY2FsZShpbnN0X2luZGV4KSArICcpJztcbiAgICB9KTtcblxuICBkMy5zZWxlY3QocGFyYW1zLnJvb3QrJyAucm93X2xhYmVsX3pvb21fY29udGFpbmVyJylcbiAgICAuc2VsZWN0QWxsKCcucm93X2xhYmVsX3RleHQnKVxuICAgIC5vbignZGJsY2xpY2snLCBmdW5jdGlvbihkKSB7XG4gICAgICBjb25zb2xlLmxvZygnZG91YmxlIGNsaWNraW5nIHJvdycpO1xuICAgICAgcm93X3Jlb3JkZXIuY2FsbCh0aGlzKTtcbiAgICAgIGlmIChwYXJhbXMudGlsZV9jbGlja19obGlnaHQpe1xuICAgICAgICBhZGRfcm93X2NsaWNrX2hsaWdodCh0aGlzLGQuaW5pKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICBpZiAocGFyYW1zLmxhYmVscy5zaG93X2xhYmVsX3Rvb2x0aXBzKXtcblxuICAgIC8vIGQzLXRvb2x0aXBcbiAgICB2YXIgdGlwID0gZDMudGlwKClcbiAgICAgIC5hdHRyKCdjbGFzcycsICdkMy10aXAnKVxuICAgICAgLmRpcmVjdGlvbignZScpXG4gICAgICAub2Zmc2V0KFswLCAxMF0pXG4gICAgICAuaHRtbChmdW5jdGlvbihkKSB7XG4gICAgICAgIHZhciBpbnN0X25hbWUgPSBkLm5hbWUucmVwbGFjZSgvXy9nLCAnICcpLnNwbGl0KCcjJylbMF07XG4gICAgICAgIHJldHVybiBcIjxzcGFuPlwiICsgaW5zdF9uYW1lICsgXCI8L3NwYW4+XCI7XG4gICAgICB9KTtcblxuICAgIGQzLnNlbGVjdChwYXJhbXMudml6LnZpel93cmFwcGVyKVxuICAgICAgLnNlbGVjdChwYXJhbXMucm9vdCsnIC5yb3dfY29udGFpbmVyJylcbiAgICAgIC5jYWxsKHRpcCk7XG5cbiAgICByb3dfbGFiZWxzXG4gICAgICAub24oJ21vdXNlb3ZlcicsIGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgZDMuc2VsZWN0KHRoaXMpXG4gICAgICAgICAgLnNlbGVjdCgndGV4dCcpXG4gICAgICAgICAgLmNsYXNzZWQoJ2FjdGl2ZScsdHJ1ZSk7XG4gICAgICAgIHRpcC5zaG93KGQpO1xuICAgICAgfSlcbiAgICAgIC5vbignbW91c2VvdXQnLCBmdW5jdGlvbiBtb3VzZW91dChkKSB7XG4gICAgICAgIGQzLnNlbGVjdCh0aGlzKVxuICAgICAgICAgIC5zZWxlY3QoJ3RleHQnKVxuICAgICAgICAgIC5jbGFzc2VkKCdhY3RpdmUnLGZhbHNlKTtcbiAgICAgICAgdGlwLmhpZGUoZCk7XG4gICAgICB9KTtcbiAgfSBlbHNle1xuICAgIHJvd19sYWJlbHNcbiAgICAgIC5vbignbW91c2VvdmVyJywgZnVuY3Rpb24oZCkge1xuICAgICAgICBkMy5zZWxlY3QodGhpcylcbiAgICAgICAgICAuc2VsZWN0KCd0ZXh0JylcbiAgICAgICAgICAuY2xhc3NlZCgnYWN0aXZlJyx0cnVlKTtcbiAgICAgIH0pXG4gICAgICAub24oJ21vdXNlb3V0JywgZnVuY3Rpb24gbW91c2VvdXQoZCkge1xuICAgICAgICBkMy5zZWxlY3QodGhpcylcbiAgICAgICAgICAuc2VsZWN0KCd0ZXh0JylcbiAgICAgICAgICAuY2xhc3NlZCgnYWN0aXZlJyxmYWxzZSk7XG4gICAgICB9KTtcbiAgfVxuXG4gIC8vIGFwcGVuZCByZWN0YW5nbGUgYmVoaW5kIHRleHRcbiAgcm93X2xhYmVsc1xuICAgIC5pbnNlcnQoJ3JlY3QnKVxuICAgIC5zdHlsZSgnb3BhY2l0eScsIDApO1xuXG4gIC8vIGFwcGVuZCByb3cgbGFiZWwgdGV4dFxuICByb3dfbGFiZWxzXG4gICAgLmFwcGVuZCgndGV4dCcpXG4gICAgLmF0dHIoJ3knLCBwYXJhbXMubWF0cml4LnJlY3RfaGVpZ2h0ICogMC41ICsgcGFyYW1zLmxhYmVscy5kZWZhdWx0X2ZzX3JvdyowLjM1IClcbiAgICAuYXR0cigndGV4dC1hbmNob3InLCAnZW5kJylcbiAgICAuc3R5bGUoJ2ZvbnQtc2l6ZScsIHBhcmFtcy5sYWJlbHMuZGVmYXVsdF9mc19yb3cgKyAncHgnKVxuICAgIC50ZXh0KGZ1bmN0aW9uKGQpeyByZXR1cm4gdXRpbHMubm9ybWFsX25hbWUoZCwgcGFyYW1zLmxhYmVscy5tYXhfbGFiZWxfY2hhcik7IH0pXG4gICAgLmF0dHIoJ3BvaW50ZXItZXZlbnRzJywnbm9uZScpXG4gICAgLnN0eWxlKCdvcGFjaXR5JywwKVxuICAgIC50cmFuc2l0aW9uKCkuZGVsYXkodGV4dF9kZWxheSkuZHVyYXRpb24odGV4dF9kZWxheSlcbiAgICAuc3R5bGUoJ29wYWNpdHknLDEpO1xuXG4gIC8vIGNoYW5nZSB0aGUgc2l6ZSBvZiB0aGUgaGlnaGxpZ2h0aW5nIHJlY3RzXG4gIHJvd19sYWJlbHNcbiAgICAuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgIHZhciBiYm94ID0gZDMuc2VsZWN0KHRoaXMpXG4gICAgICAgICAgLnNlbGVjdCgndGV4dCcpWzBdWzBdXG4gICAgICAgIC5nZXRCQm94KCk7XG4gICAgICBkMy5zZWxlY3QodGhpcylcbiAgICAgICAgLnNlbGVjdCgncmVjdCcpXG4gICAgICAgIC5hdHRyKCd4JywgYmJveC54IClcbiAgICAgICAgLmF0dHIoJ3knLCAwKVxuICAgICAgICAuYXR0cignd2lkdGgnLCBiYm94LndpZHRoIClcbiAgICAgICAgLmF0dHIoJ2hlaWdodCcsIHBhcmFtcy5tYXRyaXgueV9zY2FsZS5yYW5nZUJhbmQoKSlcbiAgICAgICAgLnN0eWxlKCdmaWxsJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBpbnN0X2hsID0gJ3llbGxvdyc7XG4gICAgICAgIHJldHVybiBpbnN0X2hsO1xuICAgICAgICB9KVxuICAgICAgICAuc3R5bGUoJ29wYWNpdHknLCBmdW5jdGlvbihkKSB7XG4gICAgICAgIHZhciBpbnN0X29wYWNpdHkgPSAwO1xuICAgICAgICAvLyBoaWdobGlnaHQgdGFyZ2V0IGdlbmVzXG4gICAgICAgIGlmIChkLnRhcmdldCA9PT0gMSkge1xuICAgICAgICAgIGluc3Rfb3BhY2l0eSA9IDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGluc3Rfb3BhY2l0eTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgLy8gbGFiZWwgdGhlIHdpZGVzdCByb3cgYW5kIGNvbCBsYWJlbHNcbiAgcGFyYW1zLmJvdW5kaW5nX3dpZHRoX21heCA9IHt9O1xuICBwYXJhbXMuYm91bmRpbmdfd2lkdGhfbWF4LnJvdyA9IDA7XG5cbiAgZDMuc2VsZWN0QWxsKCcucm93X2xhYmVsX3RleHQnKS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgIHZhciB0bXBfd2lkdGggPSBkMy5zZWxlY3QodGhpcykuc2VsZWN0KCd0ZXh0Jykubm9kZSgpLmdldEJCb3goKS53aWR0aDtcbiAgICBpZiAodG1wX3dpZHRoID4gcGFyYW1zLmJvdW5kaW5nX3dpZHRoX21heC5yb3cpIHtcbiAgICAgIHBhcmFtcy5ib3VuZGluZ193aWR0aF9tYXgucm93ID0gdG1wX3dpZHRoO1xuICAgIH1cbiAgfSk7XG5cbiAgLy8gcm93IHZpc3VhbGl6YXRpb25zIC0gY2xhc3NpZmljYXRpb24gdHJpYW5nbGVzIGFuZCBjb2xvcmJhciByZWN0c1xuICB2YXIgcm93X3Zpel9jb250YWluZXIgPSByb3dfY29udGFpbmVyXG4gICAgLmFwcGVuZCgnZycpXG4gICAgLmF0dHIoJ2NsYXNzJywncm93X3Zpel9jb250YWluZXInKVxuICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKCcgKyBwYXJhbXMubm9ybV9sYWJlbC53aWR0aC5yb3cgKyAnLDApJylcbiAgICAuYXBwZW5kKCdnJylcbiAgICAuYXR0cignY2xhc3MnLCAncm93X3pvb21fY29udGFpbmVyJyk7XG5cbiAgLy8gd2hpdGUgYmFja2dyb3VuZCBmb3IgdHJpYW5nbGVcbiAgaWYgKGQzLnNlbGVjdChwYXJhbXMucm9vdCsnIC5yb3dfem9vbV9jb250YWluZXInKS5zZWxlY3QoJy53aGl0ZV9iYXJzJykuZW1wdHkoKSl7XG4gICAgICAgIHJvd192aXpfY29udGFpbmVyXG4gICAgICAgICAgLmFwcGVuZCgncmVjdCcpXG4gICAgICAgICAgLmF0dHIoJ2NsYXNzJywnd2hpdGVfYmFycycpXG4gICAgICAgICAgLmF0dHIoJ2ZpbGwnLCBwYXJhbXMudml6LmJhY2tncm91bmRfY29sb3IpXG4gICAgICAgICAgLmF0dHIoJ3dpZHRoJywgcGFyYW1zLmNsYXNzX3Jvb20ucm93ICsgJ3B4JylcbiAgICAgICAgICAuYXR0cignaGVpZ2h0JywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgaW5zdF9oZWlnaHQgPSBwYXJhbXMudml6LmNsdXN0LmRpbS5oZWlnaHQ7XG4gICAgICAgICAgICByZXR1cm4gaW5zdF9oZWlnaHQ7XG4gICAgICAgICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgcm93X3Zpel9jb250YWluZXJcbiAgICAgIC5zZWxlY3QoJ2NsYXNzJywnd2hpdGVfYmFycycpXG4gICAgICAuYXR0cignZmlsbCcsIHBhcmFtcy52aXouYmFja2dyb3VuZF9jb2xvcilcbiAgICAgIC5hdHRyKCd3aWR0aCcsIHBhcmFtcy5jbGFzc19yb29tLnJvdyArICdweCcpXG4gICAgICAuYXR0cignaGVpZ2h0JywgZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBpbnN0X2hlaWdodCA9IHBhcmFtcy52aXouY2x1c3QuZGltLmhlaWdodDtcbiAgICAgICAgcmV0dXJuIGluc3RfaGVpZ2h0O1xuICAgICAgfSk7XG4gIH1cblxuICAvLyBncm91cHMgdGhhdCBob2xkIGNsYXNzaWZpY2F0aW9uIHRyaWFuZ2xlIGFuZCBjb2xvcmJhciByZWN0XG4gIHZhciByb3dfdml6X2dyb3VwID0gZDMuc2VsZWN0KHBhcmFtcy5yb290KycgLnJvd196b29tX2NvbnRhaW5lcicpXG4gICAgLnNlbGVjdEFsbCgnZycpXG4gICAgLmRhdGEocm93X25vZGVzLCBmdW5jdGlvbihkKXtyZXR1cm4gZC5uYW1lO30pXG4gICAgLmVudGVyKClcbiAgICAuYXBwZW5kKCdnJylcbiAgICAuYXR0cignY2xhc3MnLCAncm93X3Zpel9ncm91cCcpXG4gICAgLmF0dHIoJ3RyYW5zZm9ybScsIGZ1bmN0aW9uKGQpIHtcbiAgICAgIHZhciBpbnN0X2luZGV4ID0gXy5pbmRleE9mKHJvd19ub2Rlc19uYW1lcywgZC5uYW1lKTtcbiAgICAgIHJldHVybiAndHJhbnNsYXRlKDAsICcgKyBwYXJhbXMubWF0cml4Lnlfc2NhbGUoaW5zdF9pbmRleCkgKyAnKSc7XG4gICAgfSk7XG5cbiAgLy8gYWRkIHRyaWFuZ2xlc1xuICByb3dfdml6X2dyb3VwXG4gICAgLmFwcGVuZCgncGF0aCcpXG4gICAgLmF0dHIoJ2QnLCBmdW5jdGlvbihkKSB7XG4gICAgICB2YXIgb3JpZ2luX3ggPSBwYXJhbXMuY2xhc3Nfcm9vbS5zeW1ib2xfd2lkdGggLSAxO1xuICAgICAgdmFyIG9yaWdpbl95ID0gMDtcbiAgICAgIHZhciBtaWRfeCA9IDE7XG4gICAgICB2YXIgbWlkX3kgPSBwYXJhbXMubWF0cml4Lnlfc2NhbGUucmFuZ2VCYW5kKCkgLyAyO1xuICAgICAgdmFyIGZpbmFsX3ggPSBwYXJhbXMuY2xhc3Nfcm9vbS5zeW1ib2xfd2lkdGggLSAxO1xuICAgICAgdmFyIGZpbmFsX3kgPSBwYXJhbXMubWF0cml4Lnlfc2NhbGUucmFuZ2VCYW5kKCk7XG4gICAgICB2YXIgb3V0cHV0X3N0cmluZyA9ICdNICcgKyBvcmlnaW5feCArICcsJyArIG9yaWdpbl95ICsgJyBMICcgK1xuICAgICAgICBtaWRfeCArICcsJyArIG1pZF95ICsgJywgTCAnICsgZmluYWxfeCArICcsJyArIGZpbmFsX3kgKyAnIFonO1xuICAgICAgcmV0dXJuIG91dHB1dF9zdHJpbmc7XG4gICAgfSlcbiAgICAuYXR0cignZmlsbCcsIGZ1bmN0aW9uKGQpIHtcbiAgICAgIC8vIGluaXRhaWxpemUgY29sb3JcbiAgICAgIHZhciBpbnN0X2NvbG9yID0gJyNlZWUnO1xuICAgICAgaWYgKHBhcmFtcy5sYWJlbHMuc2hvd19jYXRlZ29yaWVzKSB7XG4gICAgICAgIGluc3RfY29sb3IgPSBwYXJhbXMubGFiZWxzLmNsYXNzX2NvbG9ycy5yb3dbZC5jbF07XG4gICAgICB9XG4gICAgICByZXR1cm4gaW5zdF9jb2xvcjtcbiAgICB9KVxuICAgIC5zdHlsZSgnb3BhY2l0eScsMClcbiAgICAudHJhbnNpdGlvbigpLmRlbGF5KHRleHRfZGVsYXkpLmR1cmF0aW9uKHRleHRfZGVsYXkpXG4gICAgLnN0eWxlKCdvcGFjaXR5JywxKTtcblxuXG4gICAgaWYgKHV0aWxzLmhhcyhwYXJhbXMubmV0d29ya19kYXRhLnJvd19ub2Rlc1swXSwgJ3ZhbHVlJykpIHtcblxuICAgICAgcm93X2xhYmVsc1xuICAgICAgICAuYXBwZW5kKCdyZWN0JylcbiAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ3Jvd19iYXJzJylcbiAgICAgICAgLmF0dHIoJ3dpZHRoJywgZnVuY3Rpb24oZCkge1xuICAgICAgICAgIHZhciBpbnN0X3ZhbHVlID0gMDtcbiAgICAgICAgICBpbnN0X3ZhbHVlID0gcGFyYW1zLmxhYmVscy5iYXJfc2NhbGVfcm93KCBNYXRoLmFicyhkLnZhbHVlKSApO1xuICAgICAgICAgIHJldHVybiBpbnN0X3ZhbHVlO1xuICAgICAgICB9KVxuICAgICAgICAuYXR0cigneCcsIGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICB2YXIgaW5zdF92YWx1ZSA9IDA7XG4gICAgICAgICAgaW5zdF92YWx1ZSA9IC1wYXJhbXMubGFiZWxzLmJhcl9zY2FsZV9yb3coIE1hdGguYWJzKGQudmFsdWUpICk7XG4gICAgICAgICAgcmV0dXJuIGluc3RfdmFsdWU7XG4gICAgICAgIH0pXG4gICAgICAgIC5hdHRyKCdoZWlnaHQnLCBwYXJhbXMubWF0cml4Lnlfc2NhbGUucmFuZ2VCYW5kKCkgKVxuICAgICAgICAuYXR0cignZmlsbCcsIGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICByZXR1cm4gZC52YWx1ZSA+IDAgPyBwYXJhbXMubWF0cml4LmJhcl9jb2xvcnNbMF0gOiBwYXJhbXMubWF0cml4LmJhcl9jb2xvcnNbMV07XG4gICAgICAgIH0pXG4gICAgICAgIC5hdHRyKCdvcGFjaXR5JywgMC40KTtcblxuICAgICAgfVxuXG4gICAgLy8gYWRkIHJvdyBjYWxsYmFjayBmdW5jdGlvblxuICAgIGQzLnNlbGVjdEFsbCgnLnJvd19sYWJlbF90ZXh0JylcbiAgICAgIC5vbignY2xpY2snLGZ1bmN0aW9uKGQpe1xuICAgICAgICBpZiAodHlwZW9mIHBhcmFtcy5jbGlja19sYWJlbCA9PSAnZnVuY3Rpb24nKXtcbiAgICAgICAgICBwYXJhbXMuY2xpY2tfbGFiZWwoZC5uYW1lLCAncm93Jyk7XG4gICAgICAgICAgYWRkX3Jvd19jbGlja19obGlnaHQodGhpcywgZC5pbmkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChwYXJhbXMudGlsZV9jbGlja19obGlnaHQpe1xuICAgICAgICAgICAgYWRkX3Jvd19jbGlja19obGlnaHQodGhpcyxkLmluaSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgIH0pO1xuXG5cbiAgICAvLyByb3cgbGFiZWwgdGV4dCB3aWxsIG5vdCBzcGlsbG92ZXIgaW5pdGlhbGx5IHNpbmNlXG4gICAgLy8gdGhlIGZvbnQtc2l6ZSBpcyBzZXQgdXAgdG8gbm90IGFsbG93IHNwaWxsb3ZlclxuICAgIC8vIGl0IGNhbiBzcGlsbG92ZXIgZHVyaW5nIHpvb21pbmcgYW5kIG11c3QgYmUgY29uc3RyYWluZWRcblxuICAgIC8vIHJldHVybiByb3dfdml6X2dyb3VwIHNvIHRoYXQgdGhlIGRlbmRyb2dyYW0gY2FuIGJlIG1hZGVcbiAgICByZXR1cm4gcm93X3Zpel9ncm91cDtcbn07XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiBzcmMvbGFiZWxzL21ha2Vfcm93cy5qc1xuICoqLyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQU5BO0FBU0E7QUFEQTtBQU9BO0FBUEE7QUFDQTtBQVlBO0FBQ0E7QUFEQTtBQUNBOztBQXRCQTtBQUNBO0FBc0NBO0FBRUE7QUFBQTtBQUtBO0FBQ0E7QUFGQTtBQUNBO0FBSUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBSEE7QUFDQTtBQU9BO0FBQ0E7O0FBRUE7QUFLQTtBQUNBO0FBRkE7QUFDQTtBQUlBO0FBQ0E7QUFHQTtBQUVBO0FBR0E7QUFKQTtBQU9BO0FBR0E7QUFKQTtBQXZCQTtBQThCQTtBQUVBO0FBREE7QUFNQTtBQURBO0FBcENBO0FBQ0E7O0FBN0RBO0FBQ0E7O0FBREE7QUFrSEE7QUFBQTtBQUNBOztBQW5IQTtBQTJIQTtBQUdBO0FBT0E7QUFDQTtBQUZBO0FBS0E7O0FBREE7QUFJQTtBQURBO0FBR0E7QUFOQTtBQWRBO0FBQ0E7O0FBM0hBO0FBb0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBRkE7QUFDQTs7QUF2SkE7QUFDQTs7QUFEQTtBQXVLQTtBQU1BO0FBQ0E7QUFGQTtBQU5BO0FBV0E7QUFLQTtBQUNBO0FBRkE7QUFmQTtBQUNBOztBQXZLQTtBQThMQTtBQUFBO0FBS0E7QUFDQTtBQUZBO0FBQ0E7O0FBbk1BO0FBMk1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFUQTs7QUFhQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBTkE7QUFDQTtBQVlBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUhBO0FBTUE7QUFDQTtBQUNBO0FBSEE7QUFPQTtBQURBO0FBaEJBO0FBQ0E7O0FBbk9BO0FBNFBBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQURBO0FBSkE7QUFEQTtBQUNBOzs7Ozs7QUE1UEE7QUFBQSIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ },
/* 26 */
/***/ function(module, exports, __webpack_require__) {

	eval("var Params = __webpack_require__(1);\n\nmodule.exports = function (clicked_row, id_clicked_row) {\n  var params = Params.get();\n\n  if (id_clicked_row != params.click_hlight_row) {\n\n    var rel_width_hlight = 6;\n    var opacity_hlight = 0.85;\n    var hlight_width = rel_width_hlight * params.viz.border_width;\n    var hlight_height = rel_width_hlight * params.viz.border_width / params.viz.zoom_switch;\n\n    d3.selectAll('.click_hlight').remove();\n\n    // // highlight selected row\n    // d3.selectAll('.row_label_text')\n    //   .select('rect')\n    // d3.select(this)\n    //   .select('rect')\n    //   .style('opacity', 1);\n\n    d3.select(clicked_row).append('rect').classed('click_hlight', true).classed('row_top_hlight', true).attr('width', params.viz.svg_dim.width).attr('height', hlight_height).attr('fill', params.matrix.hlight_color).attr('opacity', opacity_hlight);\n\n    d3.select(clicked_row).append('rect').classed('click_hlight', true).classed('row_bottom_hlight', true).attr('width', params.viz.svg_dim.width).attr('height', hlight_height).attr('fill', params.matrix.hlight_color).attr('opacity', opacity_hlight).attr('transform', function () {\n      var tmp_translate_y = params.matrix.y_scale.rangeBand() - hlight_height;\n      return 'translate(0,' + tmp_translate_y + ')';\n    });\n  } else {\n    d3.selectAll('.click_hlight').remove();\n    params.click_hlight_row = -666;\n  }\n};//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjYuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL2xhYmVscy9hZGRfcm93X2NsaWNrX2hsaWdodC5qcz9jMjUxIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBQYXJhbXMgPSByZXF1aXJlKCcuLi9wYXJhbXMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihjbGlja2VkX3JvdywgaWRfY2xpY2tlZF9yb3cpIHtcbiAgdmFyIHBhcmFtcyA9IFBhcmFtcy5nZXQoKTtcblxuICBpZiAoaWRfY2xpY2tlZF9yb3cgIT0gcGFyYW1zLmNsaWNrX2hsaWdodF9yb3cpe1xuXG4gICAgdmFyIHJlbF93aWR0aF9obGlnaHQgPSA2O1xuICAgIHZhciBvcGFjaXR5X2hsaWdodCA9IDAuODU7XG4gICAgdmFyIGhsaWdodF93aWR0aCAgPSByZWxfd2lkdGhfaGxpZ2h0KnBhcmFtcy52aXouYm9yZGVyX3dpZHRoO1xuICAgIHZhciBobGlnaHRfaGVpZ2h0ID0gcmVsX3dpZHRoX2hsaWdodCpwYXJhbXMudml6LmJvcmRlcl93aWR0aC9wYXJhbXMudml6Lnpvb21fc3dpdGNoO1xuXG4gICAgZDMuc2VsZWN0QWxsKCcuY2xpY2tfaGxpZ2h0JylcbiAgICAgIC5yZW1vdmUoKTtcblxuICAgIC8vIC8vIGhpZ2hsaWdodCBzZWxlY3RlZCByb3dcbiAgICAvLyBkMy5zZWxlY3RBbGwoJy5yb3dfbGFiZWxfdGV4dCcpXG4gICAgLy8gICAuc2VsZWN0KCdyZWN0JylcbiAgICAvLyBkMy5zZWxlY3QodGhpcylcbiAgICAvLyAgIC5zZWxlY3QoJ3JlY3QnKVxuICAgIC8vICAgLnN0eWxlKCdvcGFjaXR5JywgMSk7XG5cbiAgICBkMy5zZWxlY3QoY2xpY2tlZF9yb3cpXG4gICAgICAuYXBwZW5kKCdyZWN0JylcbiAgICAgIC5jbGFzc2VkKCdjbGlja19obGlnaHQnLHRydWUpXG4gICAgICAuY2xhc3NlZCgncm93X3RvcF9obGlnaHQnLHRydWUpXG4gICAgICAuYXR0cignd2lkdGgnLHBhcmFtcy52aXouc3ZnX2RpbS53aWR0aClcbiAgICAgIC5hdHRyKCdoZWlnaHQnLGhsaWdodF9oZWlnaHQpXG4gICAgICAuYXR0cignZmlsbCcscGFyYW1zLm1hdHJpeC5obGlnaHRfY29sb3IpXG4gICAgICAuYXR0cignb3BhY2l0eScsb3BhY2l0eV9obGlnaHQpO1xuXG4gICAgZDMuc2VsZWN0KGNsaWNrZWRfcm93KVxuICAgICAgLmFwcGVuZCgncmVjdCcpXG4gICAgICAuY2xhc3NlZCgnY2xpY2tfaGxpZ2h0Jyx0cnVlKVxuICAgICAgLmNsYXNzZWQoJ3Jvd19ib3R0b21faGxpZ2h0Jyx0cnVlKVxuICAgICAgLmF0dHIoJ3dpZHRoJyxwYXJhbXMudml6LnN2Z19kaW0ud2lkdGgpXG4gICAgICAuYXR0cignaGVpZ2h0JyxobGlnaHRfaGVpZ2h0KVxuICAgICAgLmF0dHIoJ2ZpbGwnLHBhcmFtcy5tYXRyaXguaGxpZ2h0X2NvbG9yKVxuICAgICAgLmF0dHIoJ29wYWNpdHknLG9wYWNpdHlfaGxpZ2h0KVxuICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsIGZ1bmN0aW9uKCl7XG4gICAgICAgIHZhciB0bXBfdHJhbnNsYXRlX3kgPSBwYXJhbXMubWF0cml4Lnlfc2NhbGUucmFuZ2VCYW5kKCkgLSBobGlnaHRfaGVpZ2h0O1xuICAgICAgICByZXR1cm4gJ3RyYW5zbGF0ZSgwLCcrdG1wX3RyYW5zbGF0ZV95KycpJztcbiAgICAgIH0pO1xuICB9IGVsc2V7XG4gICAgZDMuc2VsZWN0QWxsKCcuY2xpY2tfaGxpZ2h0JylcbiAgICAucmVtb3ZlKCk7XG4gICAgcGFyYW1zLmNsaWNrX2hsaWdodF9yb3cgPSAtNjY2O1xuICB9XG5cbn07XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiBzcmMvbGFiZWxzL2FkZF9yb3dfY2xpY2tfaGxpZ2h0LmpzXG4gKiovIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7OztBQVJBO0FBQ0E7QUF5QkE7QUFTQTtBQUNBO0FBRkE7QUFsQ0E7QUF1Q0E7QUFFQTtBQXpDQTtBQUhBIiwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 27 */
/***/ function(module, exports, __webpack_require__) {

	eval("var Params = __webpack_require__(1);\nvar crossfilter = __webpack_require__(2);\nvar end_reorder = __webpack_require__(28);\nvar reposition_tile_highlight = __webpack_require__(29);\n\nmodule.exports = function () {\n  var params = Params.get();\n\n  // get inst row (gene)\n  var inst_row = d3.select(this).select('text').text();\n\n  // get row and col nodes\n  params.viz.run_trans = true;\n\n  var mat = params.matrix.matrix;\n  var row_nodes = params.network_data.row_nodes;\n  var col_nodes = params.network_data.col_nodes;\n\n  var col_nodes_names = _.pluck(col_nodes, 'name');\n\n  // find the index of the row\n  var tmp_arr = [];\n  row_nodes.forEach(function (node) {\n    tmp_arr.push(node.name);\n  });\n\n  // find index\n  var inst_row = _.indexOf(tmp_arr, inst_row);\n\n  // gather the values of the input genes\n  tmp_arr = [];\n  col_nodes.forEach(function (node, index) {\n    tmp_arr.push(mat[inst_row].row_data[index].value);\n  });\n\n  // sort the rows\n  var tmp_sort = d3.range(tmp_arr.length).sort(function (a, b) {\n    return tmp_arr[b] - tmp_arr[a];\n  });\n\n  // resort cols\n  params.matrix.x_scale.domain(tmp_sort);\n\n  // reorder matrix\n  ////////////////////\n  if (params.network_data.links.length > params.matrix.def_large_matrix) {\n\n    // define the t variable as the transition function\n    var t = this.viz.get_clust_group();\n\n    // Move Col Labels\n    d3.select(params.root + ' .col_zoom_container').selectAll('.col_label_text').attr('transform', function (d) {\n      var inst_index = _.indexOf(col_nodes_names, d.name);\n      return 'translate(' + params.matrix.x_scale(inst_index) + ')rotate(-90)';\n    });\n\n    // reorder col_class groups\n    d3.selectAll('.col_viz_group').attr('transform', function (d) {\n      var inst_index = _.indexOf(col_nodes_names, d.name);\n      return 'translate(' + params.matrix.x_scale(inst_index) + ',0)';\n    });\n\n    setTimeout(end_reorder, 250);\n  } else {\n\n    // define the t variable as the transition function\n    var t = this.viz.get_clust_group().transition().duration(2500);\n\n    // Move Col Labels\n    d3.select(params.root + ' .col_zoom_container').selectAll('.col_label_text').transition().duration(2500).attr('transform', function (d) {\n      var inst_index = _.indexOf(col_nodes_names, d.name);\n      return 'translate(' + params.matrix.x_scale(inst_index) + ')rotate(-90)';\n    });\n\n    // reorder col_class groups\n    d3.selectAll('.col_viz_group').transition().duration(2500).attr('transform', function (d) {\n      var inst_index = _.indexOf(col_nodes_names, d.name);\n      return 'translate(' + params.matrix.x_scale(inst_index) + ',0)';\n    }).each('end', function () {\n      // set running transition to 0\n      params.viz.run_trans = false;\n    });\n  }\n\n  // reorder matrix\n  t.selectAll('.tile').attr('transform', function (d) {\n    return 'translate(' + params.matrix.x_scale(d.pos_x) + ',0)';\n  });\n\n  t.selectAll('.tile_up').attr('transform', function (d) {\n    return 'translate(' + params.matrix.x_scale(d.pos_x) + ',0)';\n  });\n\n  t.selectAll('.tile_dn').attr('transform', function (d) {\n    return 'translate(' + params.matrix.x_scale(d.pos_x) + ',0)';\n  });\n\n  // highlight selected column\n  ///////////////////////////////\n  // unhilight and unbold all columns (already unbolded earlier)\n  d3.selectAll('.row_label_text').select('rect').style('opacity', 0);\n  // highlight column name\n  d3.select(this).select('rect').style('opacity', 1);\n\n  reposition_tile_highlight();\n\n  // redefine x and y positions\n  params.network_data.links.forEach(function (d) {\n    d.x = params.matrix.x_scale(d.target);\n    d.y = params.matrix.y_scale(d.source);\n  });\n\n  // rename crossfilter\n  params.cf = {};\n  params.cf.links = crossfilter(params.network_data.links);\n  params.cf.dim_x = params.cf.links.dimension(function (d) {\n    return d.x;\n  });\n  params.cf.dim_y = params.cf.links.dimension(function (d) {\n    return d.y;\n  });\n\n  // backup allow programmatic zoom\n  setTimeout(end_reorder, 2500);\n};//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjcuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL3Jlb3JkZXIvcm93X3Jlb3JkZXIuanM/ZDA4MSJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgUGFyYW1zID0gcmVxdWlyZSgnLi4vcGFyYW1zJyk7XG52YXIgY3Jvc3NmaWx0ZXIgPSByZXF1aXJlKCdjcm9zc2ZpbHRlcicpO1xudmFyIGVuZF9yZW9yZGVyID0gcmVxdWlyZSgnLi9lbmRfcmVvcmRlcicpO1xudmFyIHJlcG9zaXRpb25fdGlsZV9oaWdobGlnaHQgPSByZXF1aXJlKCcuL3JlcG9zaXRpb25fdGlsZV9oaWdobGlnaHQnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHtcbiAgdmFyIHBhcmFtcyA9IFBhcmFtcy5nZXQoKTtcblxuICAvLyBnZXQgaW5zdCByb3cgKGdlbmUpXG4gIHZhciBpbnN0X3JvdyA9IGQzLnNlbGVjdCh0aGlzKS5zZWxlY3QoJ3RleHQnKS50ZXh0KCk7XG5cbiAgLy8gZ2V0IHJvdyBhbmQgY29sIG5vZGVzXG4gIHBhcmFtcy52aXoucnVuX3RyYW5zID0gdHJ1ZTtcblxuICB2YXIgbWF0ICAgICAgID0gcGFyYW1zLm1hdHJpeC5tYXRyaXg7XG4gIHZhciByb3dfbm9kZXMgPSBwYXJhbXMubmV0d29ya19kYXRhLnJvd19ub2RlcztcbiAgdmFyIGNvbF9ub2RlcyA9IHBhcmFtcy5uZXR3b3JrX2RhdGEuY29sX25vZGVzO1xuXG4gIHZhciBjb2xfbm9kZXNfbmFtZXMgPSBfLnBsdWNrKGNvbF9ub2RlcywgJ25hbWUnKTtcblxuICAvLyBmaW5kIHRoZSBpbmRleCBvZiB0aGUgcm93XG4gIHZhciB0bXBfYXJyID0gW107XG4gIHJvd19ub2Rlcy5mb3JFYWNoKGZ1bmN0aW9uKG5vZGUpIHtcbiAgICB0bXBfYXJyLnB1c2gobm9kZS5uYW1lKTtcbiAgfSk7XG5cbiAgLy8gZmluZCBpbmRleFxuICB2YXIgaW5zdF9yb3cgPSBfLmluZGV4T2YodG1wX2FyciwgaW5zdF9yb3cpO1xuXG4gIC8vIGdhdGhlciB0aGUgdmFsdWVzIG9mIHRoZSBpbnB1dCBnZW5lc1xuICB0bXBfYXJyID0gW107XG4gIGNvbF9ub2Rlcy5mb3JFYWNoKGZ1bmN0aW9uKG5vZGUsIGluZGV4KSB7XG4gICAgdG1wX2Fyci5wdXNoKCBtYXRbaW5zdF9yb3ddLnJvd19kYXRhW2luZGV4XS52YWx1ZSk7XG4gIH0pO1xuXG4gIC8vIHNvcnQgdGhlIHJvd3NcbiAgdmFyIHRtcF9zb3J0ID0gZDMucmFuZ2UodG1wX2Fyci5sZW5ndGgpLnNvcnQoZnVuY3Rpb24oYSwgYikge1xuICAgIHJldHVybiB0bXBfYXJyW2JdIC0gdG1wX2FyclthXTtcbiAgfSk7XG5cbiAgLy8gcmVzb3J0IGNvbHNcbiAgcGFyYW1zLm1hdHJpeC54X3NjYWxlLmRvbWFpbih0bXBfc29ydCk7XG5cbiAgLy8gcmVvcmRlciBtYXRyaXhcbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgaWYgKHBhcmFtcy5uZXR3b3JrX2RhdGEubGlua3MubGVuZ3RoID4gcGFyYW1zLm1hdHJpeC5kZWZfbGFyZ2VfbWF0cml4KXtcblxuICAgIC8vIGRlZmluZSB0aGUgdCB2YXJpYWJsZSBhcyB0aGUgdHJhbnNpdGlvbiBmdW5jdGlvblxuICAgIHZhciB0ID0gdGhpcy52aXouZ2V0X2NsdXN0X2dyb3VwKCk7XG5cbiAgICAvLyBNb3ZlIENvbCBMYWJlbHNcbiAgICBkMy5zZWxlY3QocGFyYW1zLnJvb3QrJyAuY29sX3pvb21fY29udGFpbmVyJylcbiAgICAgIC5zZWxlY3RBbGwoJy5jb2xfbGFiZWxfdGV4dCcpXG4gICAgICAuYXR0cigndHJhbnNmb3JtJywgZnVuY3Rpb24oZCkge1xuICAgICAgICB2YXIgaW5zdF9pbmRleCA9IF8uaW5kZXhPZihjb2xfbm9kZXNfbmFtZXMsIGQubmFtZSk7XG4gICAgICAgIHJldHVybiAndHJhbnNsYXRlKCcgKyBwYXJhbXMubWF0cml4Lnhfc2NhbGUoaW5zdF9pbmRleCkgKyAnKXJvdGF0ZSgtOTApJztcbiAgICAgIH0pO1xuXG4gICAgLy8gcmVvcmRlciBjb2xfY2xhc3MgZ3JvdXBzXG4gICAgZDMuc2VsZWN0QWxsKCcuY29sX3Zpel9ncm91cCcpXG4gICAgICAuYXR0cigndHJhbnNmb3JtJywgZnVuY3Rpb24oZCkge1xuICAgICAgICB2YXIgaW5zdF9pbmRleCA9IF8uaW5kZXhPZihjb2xfbm9kZXNfbmFtZXMsIGQubmFtZSk7XG4gICAgICAgIHJldHVybiAndHJhbnNsYXRlKCcgKyBwYXJhbXMubWF0cml4Lnhfc2NhbGUoaW5zdF9pbmRleCkgKyAnLDApJztcbiAgICAgIH0pO1xuXG4gICAgc2V0VGltZW91dChlbmRfcmVvcmRlciwgMjUwKTtcblxuICB9IGVsc2Uge1xuXG4gICAgLy8gZGVmaW5lIHRoZSB0IHZhcmlhYmxlIGFzIHRoZSB0cmFuc2l0aW9uIGZ1bmN0aW9uXG4gICAgdmFyIHQgPSB0aGlzLnZpei5nZXRfY2x1c3RfZ3JvdXAoKS50cmFuc2l0aW9uKCkuZHVyYXRpb24oMjUwMCk7XG5cbiAgICAvLyBNb3ZlIENvbCBMYWJlbHNcbiAgICBkMy5zZWxlY3QocGFyYW1zLnJvb3QrJyAuY29sX3pvb21fY29udGFpbmVyJylcbiAgICAgIC5zZWxlY3RBbGwoJy5jb2xfbGFiZWxfdGV4dCcpXG4gICAgICAudHJhbnNpdGlvbigpLmR1cmF0aW9uKDI1MDApXG4gICAgICAuYXR0cigndHJhbnNmb3JtJywgZnVuY3Rpb24oZCkge1xuICAgICAgICB2YXIgaW5zdF9pbmRleCA9IF8uaW5kZXhPZihjb2xfbm9kZXNfbmFtZXMsIGQubmFtZSk7XG4gICAgICAgIHJldHVybiAndHJhbnNsYXRlKCcgKyBwYXJhbXMubWF0cml4Lnhfc2NhbGUoaW5zdF9pbmRleCkgKyAnKXJvdGF0ZSgtOTApJztcbiAgICAgIH0pO1xuXG4gICAgLy8gcmVvcmRlciBjb2xfY2xhc3MgZ3JvdXBzXG4gICAgZDMuc2VsZWN0QWxsKCcuY29sX3Zpel9ncm91cCcpXG4gICAgICAudHJhbnNpdGlvbigpLmR1cmF0aW9uKDI1MDApXG4gICAgICAuYXR0cigndHJhbnNmb3JtJywgZnVuY3Rpb24oZCkge1xuICAgICAgICB2YXIgaW5zdF9pbmRleCA9IF8uaW5kZXhPZihjb2xfbm9kZXNfbmFtZXMsIGQubmFtZSk7XG4gICAgICAgIHJldHVybiAndHJhbnNsYXRlKCcgKyBwYXJhbXMubWF0cml4Lnhfc2NhbGUoaW5zdF9pbmRleCkgKyAnLDApJztcbiAgICAgIH0pXG4gICAgICAuZWFjaCgnZW5kJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIHNldCBydW5uaW5nIHRyYW5zaXRpb24gdG8gMFxuICAgICAgICBwYXJhbXMudml6LnJ1bl90cmFucyA9IGZhbHNlO1xuICAgICAgfSk7XG4gIH1cblxuICAvLyByZW9yZGVyIG1hdHJpeFxuICB0LnNlbGVjdEFsbCgnLnRpbGUnKVxuICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCBmdW5jdGlvbihkKSB7XG4gICAgICByZXR1cm4gJ3RyYW5zbGF0ZSgnICsgcGFyYW1zLm1hdHJpeC54X3NjYWxlKGQucG9zX3gpICsgJywwKSc7XG4gICAgfSk7XG5cbiAgdC5zZWxlY3RBbGwoJy50aWxlX3VwJylcbiAgICAuYXR0cigndHJhbnNmb3JtJywgZnVuY3Rpb24oZCkge1xuICAgICAgcmV0dXJuICd0cmFuc2xhdGUoJyArIHBhcmFtcy5tYXRyaXgueF9zY2FsZShkLnBvc194KSArICcsMCknO1xuICAgIH0pO1xuXG4gIHQuc2VsZWN0QWxsKCcudGlsZV9kbicpXG4gICAgLmF0dHIoJ3RyYW5zZm9ybScsIGZ1bmN0aW9uKGQpIHtcbiAgICAgIHJldHVybiAndHJhbnNsYXRlKCcgKyBwYXJhbXMubWF0cml4Lnhfc2NhbGUoZC5wb3NfeCkgKyAnLDApJztcbiAgICB9KTtcblxuXG4gIC8vIGhpZ2hsaWdodCBzZWxlY3RlZCBjb2x1bW5cbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAvLyB1bmhpbGlnaHQgYW5kIHVuYm9sZCBhbGwgY29sdW1ucyAoYWxyZWFkeSB1bmJvbGRlZCBlYXJsaWVyKVxuICBkMy5zZWxlY3RBbGwoJy5yb3dfbGFiZWxfdGV4dCcpXG4gICAgLnNlbGVjdCgncmVjdCcpXG4gICAgLnN0eWxlKCdvcGFjaXR5JywgMCk7XG4gIC8vIGhpZ2hsaWdodCBjb2x1bW4gbmFtZVxuICBkMy5zZWxlY3QodGhpcylcbiAgICAuc2VsZWN0KCdyZWN0JylcbiAgICAuc3R5bGUoJ29wYWNpdHknLCAxKTtcblxuICByZXBvc2l0aW9uX3RpbGVfaGlnaGxpZ2h0KCk7XG5cbiAgLy8gcmVkZWZpbmUgeCBhbmQgeSBwb3NpdGlvbnNcbiAgcGFyYW1zLm5ldHdvcmtfZGF0YS5saW5rcy5mb3JFYWNoKGZ1bmN0aW9uKGQpe1xuICAgIGQueCA9IHBhcmFtcy5tYXRyaXgueF9zY2FsZShkLnRhcmdldCk7XG4gICAgZC55ID0gcGFyYW1zLm1hdHJpeC55X3NjYWxlKGQuc291cmNlKTtcbiAgfSk7XG5cbiAgLy8gcmVuYW1lIGNyb3NzZmlsdGVyXG4gIHBhcmFtcy5jZiA9IHt9O1xuICBwYXJhbXMuY2YubGlua3MgPSBjcm9zc2ZpbHRlcihwYXJhbXMubmV0d29ya19kYXRhLmxpbmtzKTtcbiAgcGFyYW1zLmNmLmRpbV94ID0gcGFyYW1zLmNmLmxpbmtzLmRpbWVuc2lvbihmdW5jdGlvbihkKXtyZXR1cm4gZC54O30pO1xuICBwYXJhbXMuY2YuZGltX3kgPSBwYXJhbXMuY2YubGlua3MuZGltZW5zaW9uKGZ1bmN0aW9uKGQpe3JldHVybiBkLnk7fSk7XG5cbiAgLy8gYmFja3VwIGFsbG93IHByb2dyYW1tYXRpYyB6b29tXG4gIHNldFRpbWVvdXQoZW5kX3Jlb3JkZXIsIDI1MDApO1xufTtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIHNyYy9yZW9yZGVyL3Jvd19yZW9yZGVyLmpzXG4gKiovIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUZBO0FBQ0E7O0FBREE7QUFDQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFkQTtBQWlCQTtBQUNBO0FBREE7QUFDQTs7QUFsQkE7QUFDQTs7QUFEQTtBQTBCQTtBQUNBO0FBREE7QUFDQTs7QUEzQkE7QUFnQ0E7QUFEQTtBQUNBOztBQWhDQTtBQUNBOzs7QUFEQTtBQUNBOztBQTBDQTtBQUNBOztBQUpBO0FBU0E7QUFDQTtBQUZBO0FBQ0E7O0FBVEE7QUFnQkE7QUFDQTtBQUZBO0FBQ0E7QUFJQTtBQXBCQTtBQUNBOztBQXdCQTtBQUNBOztBQUpBO0FBVUE7QUFDQTtBQUZBO0FBQ0E7O0FBVkE7QUFrQkE7QUFDQTtBQUZBOztBQU1BO0FBRkE7QUEzQ0E7QUFDQTs7QUF6Q0E7QUE0RkE7QUFEQTtBQUNBO0FBR0E7QUFFQTtBQURBO0FBQ0E7QUFHQTtBQUVBO0FBREE7QUFDQTs7OztBQXRHQTs7QUFBQTtBQUNBO0FBb0hBO0FBQ0E7O0FBdEhBO0FBeUhBO0FBQ0E7QUFGQTtBQUNBOztBQXpIQTtBQStIQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBOztBQWxJQTtBQUFBIiwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 28 */
/***/ function(module, exports, __webpack_require__) {

	eval("var Params = __webpack_require__(1);\nmodule.exports = function () {\n  var params = Params.get();\n  params.viz.run_trans = false;\n};//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjguanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL3Jlb3JkZXIvZW5kX3Jlb3JkZXIuanM/NzUyMCJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgUGFyYW1zID0gcmVxdWlyZSgnLi4vcGFyYW1zJyk7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuICB2YXIgcGFyYW1zID0gUGFyYW1zLmdldCgpO1xuICBwYXJhbXMudml6LnJ1bl90cmFucyA9IGZhbHNlO1xufTtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIHNyYy9yZW9yZGVyL2VuZF9yZW9yZGVyLmpzXG4gKiovIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBIiwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 29 */
/***/ function(module, exports, __webpack_require__) {

	eval("var Params = __webpack_require__(1);\n\nmodule.exports = function () {\n  var params = Params.get();\n\n  // resize click hlight\n  var rel_width_hlight = 6;\n  var opacity_hlight = 0.85;\n\n  var hlight_width = rel_width_hlight * params.viz.border_width;\n  var hlight_height = rel_width_hlight * params.viz.border_width / params.viz.zoom_switch;\n  // reposition tile highlight\n  ////////////////////////////////\n\n  // top highlight\n  d3.select(params.root + ' .top_hlight').attr('width', params.matrix.x_scale.rangeBand()).attr('height', hlight_height).transition().duration(2500).attr('transform', function () {\n    return 'translate(' + params.matrix.x_scale(params.matrix.click_hlight_x) + ',0)';\n  });\n\n  // left highlight\n  d3.select(params.root + ' .left_hlight').attr('width', hlight_width).attr('height', params.matrix.y_scale.rangeBand() - hlight_height * 0.99).transition().duration(2500).attr('transform', function () {\n    return 'translate(' + params.matrix.x_scale(params.matrix.click_hlight_x) + ',' + hlight_height * 0.99 + ')';\n  });\n\n  // right highlight\n  d3.select(params.root + ' .right_hlight').attr('width', hlight_width).attr('height', params.matrix.y_scale.rangeBand() - hlight_height * 0.99).transition().duration(2500).attr('transform', function () {\n    var tmp_translate = params.matrix.x_scale(params.matrix.click_hlight_x) + params.matrix.x_scale.rangeBand() - hlight_width;\n    return 'translate(' + tmp_translate + ',' + hlight_height * 0.99 + ')';\n  });\n\n  // bottom highlight\n  d3.select(params.root + ' .bottom_hlight').attr('width', function () {\n    return params.matrix.x_scale.rangeBand() - 1.98 * hlight_width;\n  }).attr('height', hlight_height).transition().duration(2500).attr('transform', function () {\n    var tmp_translate_x = params.matrix.x_scale(params.matrix.click_hlight_x) + hlight_width * 0.99;\n    var tmp_translate_y = params.matrix.y_scale.rangeBand() - hlight_height;\n    return 'translate(' + tmp_translate_x + ',' + tmp_translate_y + ')';\n  });\n};//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjkuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL3Jlb3JkZXIvcmVwb3NpdGlvbl90aWxlX2hpZ2hsaWdodC5qcz85ZjA2Il0sInNvdXJjZXNDb250ZW50IjpbInZhciBQYXJhbXMgPSByZXF1aXJlKCcuLi9wYXJhbXMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHtcbiAgdmFyIHBhcmFtcyA9IFBhcmFtcy5nZXQoKTtcblxuICAvLyByZXNpemUgY2xpY2sgaGxpZ2h0XG4gIHZhciByZWxfd2lkdGhfaGxpZ2h0ID0gNjtcbiAgdmFyIG9wYWNpdHlfaGxpZ2h0ID0gMC44NTtcblxuICB2YXIgaGxpZ2h0X3dpZHRoID0gcmVsX3dpZHRoX2hsaWdodCpwYXJhbXMudml6LmJvcmRlcl93aWR0aDtcbiAgdmFyIGhsaWdodF9oZWlnaHQgPSByZWxfd2lkdGhfaGxpZ2h0KnBhcmFtcy52aXouYm9yZGVyX3dpZHRoL3BhcmFtcy52aXouem9vbV9zd2l0Y2g7XG4gIC8vIHJlcG9zaXRpb24gdGlsZSBoaWdobGlnaHRcbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICAvLyB0b3AgaGlnaGxpZ2h0XG4gIGQzLnNlbGVjdChwYXJhbXMucm9vdCsnIC50b3BfaGxpZ2h0JylcbiAgICAuYXR0cignd2lkdGgnLCBwYXJhbXMubWF0cml4Lnhfc2NhbGUucmFuZ2VCYW5kKCkpXG4gICAgLmF0dHIoJ2hlaWdodCcsIGhsaWdodF9oZWlnaHQpXG4gICAgLnRyYW5zaXRpb24oKS5kdXJhdGlvbigyNTAwKVxuICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiAndHJhbnNsYXRlKCcgKyBwYXJhbXMubWF0cml4Lnhfc2NhbGUocGFyYW1zLm1hdHJpeC5jbGlja19obGlnaHRfeCkgKyAnLDApJztcbiAgICB9KTtcblxuICAvLyBsZWZ0IGhpZ2hsaWdodFxuICBkMy5zZWxlY3QocGFyYW1zLnJvb3QrJyAubGVmdF9obGlnaHQnKVxuICAgIC5hdHRyKCd3aWR0aCcsIGhsaWdodF93aWR0aClcbiAgICAuYXR0cignaGVpZ2h0JywgcGFyYW1zLm1hdHJpeC55X3NjYWxlLnJhbmdlQmFuZCgpIC0gaGxpZ2h0X2hlaWdodCowLjk5IClcbiAgICAudHJhbnNpdGlvbigpLmR1cmF0aW9uKDI1MDApXG4gICAgLmF0dHIoJ3RyYW5zZm9ybScsIGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuICd0cmFuc2xhdGUoJyArIHBhcmFtcy5tYXRyaXgueF9zY2FsZShwYXJhbXMubWF0cml4LmNsaWNrX2hsaWdodF94KSArICcsJytcbiAgICAgICAgaGxpZ2h0X2hlaWdodCowLjk5KycpJztcbiAgICB9KTtcblxuICAvLyByaWdodCBoaWdobGlnaHRcbiAgZDMuc2VsZWN0KHBhcmFtcy5yb290KycgLnJpZ2h0X2hsaWdodCcpXG4gICAgLmF0dHIoJ3dpZHRoJywgaGxpZ2h0X3dpZHRoKVxuICAgIC5hdHRyKCdoZWlnaHQnLCBwYXJhbXMubWF0cml4Lnlfc2NhbGUucmFuZ2VCYW5kKCkgLSBobGlnaHRfaGVpZ2h0KjAuOTkgKVxuICAgIC50cmFuc2l0aW9uKCkuZHVyYXRpb24oMjUwMClcbiAgICAuYXR0cigndHJhbnNmb3JtJywgZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgdG1wX3RyYW5zbGF0ZSA9IHBhcmFtcy5tYXRyaXgueF9zY2FsZShwYXJhbXMubWF0cml4LmNsaWNrX2hsaWdodF94KSArIHBhcmFtcy5tYXRyaXgueF9zY2FsZS5yYW5nZUJhbmQoKSAtIGhsaWdodF93aWR0aDtcbiAgICAgIHJldHVybiAndHJhbnNsYXRlKCcgKyB0bXBfdHJhbnNsYXRlICsgJywnK1xuICAgICAgICBobGlnaHRfaGVpZ2h0KjAuOTkrJyknO1xuICAgIH0pO1xuXG4gIC8vIGJvdHRvbSBoaWdobGlnaHRcbiAgZDMuc2VsZWN0KHBhcmFtcy5yb290KycgLmJvdHRvbV9obGlnaHQnKVxuICAgIC5hdHRyKCd3aWR0aCcsIGZ1bmN0aW9uKCl7XG4gICAgICByZXR1cm4gcGFyYW1zLm1hdHJpeC54X3NjYWxlLnJhbmdlQmFuZCgpIC0gMS45OCpobGlnaHRfd2lkdGg7fSlcbiAgICAuYXR0cignaGVpZ2h0JywgaGxpZ2h0X2hlaWdodClcbiAgICAudHJhbnNpdGlvbigpLmR1cmF0aW9uKDI1MDApXG4gICAgLmF0dHIoJ3RyYW5zZm9ybScsIGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHRtcF90cmFuc2xhdGVfeCA9IHBhcmFtcy5tYXRyaXgueF9zY2FsZShwYXJhbXMubWF0cml4LmNsaWNrX2hsaWdodF94KSArIGhsaWdodF93aWR0aCowLjk5O1xuICAgICAgdmFyIHRtcF90cmFuc2xhdGVfeSA9IHBhcmFtcy5tYXRyaXgueV9zY2FsZS5yYW5nZUJhbmQoKSAtIGhsaWdodF9oZWlnaHQ7XG4gICAgICByZXR1cm4gJ3RyYW5zbGF0ZSgnICsgdG1wX3RyYW5zbGF0ZV94ICsgJywnK1xuICAgICAgICB0bXBfdHJhbnNsYXRlX3krJyknO1xuICAgIH0pO1xuXG59O1xuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogc3JjL3Jlb3JkZXIvcmVwb3NpdGlvbl90aWxlX2hpZ2hsaWdodC5qc1xuICoqLyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFGQTtBQUtBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQVJBO0FBa0JBO0FBREE7QUFDQTs7QUFsQkE7QUEyQkE7QUFEQTtBQUNBOztBQTNCQTtBQXFDQTtBQUNBO0FBRkE7QUFDQTs7QUFyQ0E7QUE2Q0E7QUFEQTtBQUtBO0FBQ0E7QUFDQTtBQUhBO0FBaERBIiwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 30 */
/***/ function(module, exports, __webpack_require__) {

	eval("var Params = __webpack_require__(1);\nvar utils = __webpack_require__(5);\nvar trim_text = __webpack_require__(13);\nvar add_col_click_hlight = __webpack_require__(31);\nvar col_reorder = __webpack_require__(32);\n\nmodule.exports = function (text_delay) {\n  var params = Params.get();\n\n  var col_nodes = params.network_data.col_nodes;\n  var col_nodes_names = params.network_data.col_nodes_names;\n\n  // offset click group column label\n  var x_offset_click = params.matrix.x_scale.rangeBand() / 2 + params.viz.border_width;\n  // reduce width of rotated rects\n  var reduce_rect_width = params.matrix.x_scale.rangeBand() * 0.36;\n\n  // make container to pre-position zoomable elements\n  if (d3.select(params.root + ' .col_container').empty()) {\n\n    var container_all_col = d3.select(params.viz.viz_svg).append('g').attr('class', 'col_container').attr('transform', 'translate(' + params.viz.clust.margin.left + ',' + params.norm_label.margin.top + ')');\n\n    // white background rect for col labels\n    container_all_col.append('rect').attr('fill', params.viz.background_color) //!! prog_colors\n    .attr('width', 30 * params.viz.clust.dim.width + 'px').attr('height', params.norm_label.background.col).attr('class', 'white_bars');\n\n    // col labels\n    container_all_col.append('g').attr('class', 'col_label_outer_container')\n    // position the outer col label group\n    .attr('transform', 'translate(0,' + params.norm_label.width.col + ')').append('g').attr('class', 'col_zoom_container');\n  } else {\n\n    var container_all_col = d3.select(params.root + ' .col_container').attr('transform', 'translate(' + params.viz.clust.margin.left + ',' + params.norm_label.margin.top + ')');\n\n    // white background rect for col labels\n    container_all_col.select('.white_bars').attr('fill', params.viz.background_color) //!! prog_colors\n    .attr('width', 30 * params.viz.clust.dim.width + 'px').attr('height', params.norm_label.background.col);\n\n    // col labels\n    container_all_col.select(params.root + ' .col_label_outer_container');\n  }\n\n  // add main column label group\n  var col_label_obj = d3.select(params.root + ' .col_zoom_container').selectAll('.col_label_text').data(col_nodes, function (d) {\n    return d.name;\n  }).enter().append('g').attr('class', 'col_label_text').attr('transform', function (d) {\n    var inst_index = _.indexOf(col_nodes_names, d.name);\n    return 'translate(' + params.matrix.x_scale(inst_index) + ') rotate(-90)';\n  });\n\n  // append group for individual column label\n  var col_label_click = col_label_obj\n  // append new group for rect and label (not white lines)\n  .append('g').attr('class', 'col_label_click')\n  // rotate column labels\n  .attr('transform', 'translate(' + params.matrix.x_scale.rangeBand() / 2 + ',' + x_offset_click + ') rotate(45)').on('mouseover', function (d) {\n    d3.select(this).select('text').classed('active', true);\n  }).on('mouseout', function (d) {\n    d3.select(this).select('text').classed('active', false);\n  });\n\n  // append column value bars\n  if (utils.has(params.network_data.col_nodes[0], 'value')) {\n\n    d3.selectAll('col_bars').remove();\n\n    col_label_click.append('rect').attr('class', 'col_bars').attr('width', function (d) {\n      var inst_value = 0;\n      if (d.value > 0) {\n        inst_value = params.labels.bar_scale_col(d.value);\n      }\n      return inst_value;\n    })\n    // rotate labels - reduce width if rotating\n    .attr('height', params.matrix.x_scale.rangeBand() * 0.66).style('fill', function (d) {\n      return d.value > 0 ? params.matrix.bar_colors[0] : params.matrix.bar_colors[1];\n    }).attr('opacity', 0.4);\n  }\n\n  // add column label\n  col_label_click.append('text').attr('x', 0)\n  // manually tuned\n  .attr('y', params.matrix.x_scale.rangeBand() * 0.64).attr('dx', params.viz.border_width).attr('text-anchor', 'start').attr('full_name', function (d) {\n    return d.name;\n  })\n  // original font size\n  .style('font-size', params.labels.default_fs_col + 'px').text(function (d) {\n    return utils.normal_name(d, params.labels.max_label_char);\n  })\n  // .attr('pointer-events','none')\n  .style('opacity', 0).transition().delay(text_delay).duration(text_delay).style('opacity', 1);\n\n  if (params.labels.show_label_tooltips) {\n\n    // d3-tooltip\n    var tip = d3.tip().attr('class', 'd3-tip').direction('s').offset([20, 0]).html(function (d) {\n      var inst_name = d.name.replace(/_/g, ' ').split('#')[0];\n\n      if (params.show_categories) {\n        inst_name = inst_name + ': ' + String(d.cl);\n      }\n\n      return \"<span>\" + inst_name + \"</span>\";\n    });\n\n    d3.select(params.viz.viz_wrapper).select('svg').select(params.root + ' .col_container').call(tip);\n\n    col_label_obj\n    // .select('text')\n    .on('mouseover', tip.show).on('mouseout', tip.hide);\n  }\n\n  // bounding font size\n  /////////////////////////////\n\n  params.bounding_width_max.col = 0;\n  d3.selectAll('.col_label_click').each(function () {\n    var tmp_width = d3.select(this).select('text').node().getBBox().width;\n    if (tmp_width > params.bounding_width_max.col) {\n      // increase the apparent width of the column label since its rotated\n      // this will give more room for text\n      params.bounding_width_max.col = tmp_width;\n    }\n  });\n\n  // check if widest row or col are wider than the allowed label width\n  ////////////////////////////////////////////////////////////////////////\n  params.ini_scale_font = {};\n  params.ini_scale_font.row = 1;\n  params.ini_scale_font.col = 1;\n\n  if (params.bounding_width_max.row > params.norm_label.width.row) {\n\n    // calc reduction in font size\n    params.ini_scale_font.row = params.norm_label.width.row / params.bounding_width_max.row;\n    // redefine bounding_width_max.row\n    params.bounding_width_max.row = params.ini_scale_font.row * params.bounding_width_max.row;\n\n    // redefine default fs !! increase to make more readable\n    params.labels.default_fs_row = params.labels.default_fs_row * params.ini_scale_font.row;\n\n    // reduce font size\n    d3.selectAll('.row_label_text').each(function () {\n      d3.select(this).select('text').style('font-size', params.labels.default_fs_row + 'px');\n    });\n  }\n\n  // debugger;\n\n  if (params.bounding_width_max.col > params.norm_label.width.col) {\n\n    // calc reduction in font size\n    params.ini_scale_font.col = params.norm_label.width.col / params.bounding_width_max.col;\n    // redefine bounding_width_max.col\n    params.bounding_width_max.col = params.ini_scale_font.col * params.bounding_width_max.col;\n    // redefine default fs, !! increase to make more readable\n    params.labels.default_fs_col = params.labels.default_fs_col * params.ini_scale_font.col;\n\n    // reduce font size\n    d3.selectAll('.col_label_click').each(function () {\n      d3.select(this).select('text').style('font-size', params.labels.default_fs_col + 'px');\n    });\n  }\n\n  // constrain text after zooming\n  if (params.labels.row_keep < 1) {\n    d3.selectAll('.row_label_text').each(function () {\n      trim_text(this, 'row');\n    });\n  }\n  if (params.labels.col_keep < 1) {\n    d3.selectAll('.col_label_click').each(function () {\n      trim_text(this, 'col');\n    });\n  }\n\n  // append rectangle behind text\n  col_label_click.insert('rect').attr('class', '.highlight_rect').attr('x', 0).attr('y', 0).attr('width', 10 * params.matrix.rect_height).attr('height', 0.67 * params.matrix.rect_width).style('opacity', 0);\n\n  // // only run this if there are col categories\n  // if (params.labels.show_categories){\n  //   // change the size of the highlighting rects\n  //   col_label_click\n  //     .each(function(d) {\n  //       var bbox = d3.select(this)\n  //         .select('text')[0][0]\n  //         .getBBox();\n\n  //       d3.select(this)\n  //         .select('rect')\n  //         .attr('width', bbox.width * 1.1)\n  //         .attr('height', 0.67*params.matrix.rect_width)\n  //         .style('fill', function(d){\n  //           var inst_color = 'white';\n  //           inst_color = params.labels.class_colors.col[d.cl];\n  //           return inst_color\n  //         })\n  //         .style('opacity', 0.30);\n  //     });\n  // }\n\n  // add triangle under rotated labels\n  col_label_click.append('path').style('stroke-width', 0).attr('d', function () {\n    // x and y are flipped since its rotated\n    var origin_y = -params.viz.border_width;\n    var start_x = 0;\n    var final_x = params.matrix.x_scale.rangeBand() - reduce_rect_width;\n    var start_y = -(params.matrix.x_scale.rangeBand() - reduce_rect_width + params.viz.border_width);\n    var final_y = -params.viz.border_width;\n    var output_string = 'M ' + origin_y + ',0 L ' + start_y + ',' + start_x + ', L ' + final_y + ',' + final_x + ' Z';\n    return output_string;\n  }).attr('fill', function (d) {\n    var inst_color = '#eee';\n    if (params.labels.show_categories) {\n      inst_color = params.labels.class_colors.col[d.cl];\n    }\n    return inst_color;\n  }).style('opacity', 0).transition().delay(text_delay).duration(text_delay).style('opacity', 1);\n\n  // add col callback function\n  d3.selectAll('.col_label_text').on('click', function (d) {\n\n    if (typeof params.click_label == 'function') {\n      params.click_label(d.name, 'col');\n      add_col_click_hlight(this, d.ini);\n    } else {\n\n      if (params.tile_click_hlight) {\n        add_col_click_hlight(this, d.ini);\n      }\n    }\n  }).on('dblclick', function (d) {\n    console.log('double clicking col');\n    col_reorder.call(this);\n    if (params.tile_click_hlight) {\n      add_col_click_hlight(this, d.ini);\n    }\n  });\n\n  return container_all_col;\n};//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL2xhYmVscy9tYWtlX2NvbHMuanM/M2QxMyJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgUGFyYW1zID0gcmVxdWlyZSgnLi4vcGFyYW1zJyk7XG52YXIgdXRpbHMgPSByZXF1aXJlKCcuLi91dGlscycpO1xudmFyIHRyaW1fdGV4dCA9IHJlcXVpcmUoJy4uL3RyaW1fdGV4dCcpO1xudmFyIGFkZF9jb2xfY2xpY2tfaGxpZ2h0ID0gcmVxdWlyZSgnLi9hZGRfY29sX2NsaWNrX2hsaWdodCcpO1xudmFyIGNvbF9yZW9yZGVyID0gcmVxdWlyZSgnLi4vcmVvcmRlci9jb2xfcmVvcmRlcicpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHRleHRfZGVsYXkpIHtcbiAgdmFyIHBhcmFtcyA9IFBhcmFtcy5nZXQoKTtcblxuICB2YXIgY29sX25vZGVzID0gcGFyYW1zLm5ldHdvcmtfZGF0YS5jb2xfbm9kZXM7XG4gIHZhciBjb2xfbm9kZXNfbmFtZXMgPSBwYXJhbXMubmV0d29ya19kYXRhLmNvbF9ub2Rlc19uYW1lcztcblxuICAvLyBvZmZzZXQgY2xpY2sgZ3JvdXAgY29sdW1uIGxhYmVsXG4gIHZhciB4X29mZnNldF9jbGljayA9IHBhcmFtcy5tYXRyaXgueF9zY2FsZS5yYW5nZUJhbmQoKSAvIDIgKyBwYXJhbXMudml6LmJvcmRlcl93aWR0aDtcbiAgLy8gcmVkdWNlIHdpZHRoIG9mIHJvdGF0ZWQgcmVjdHNcbiAgdmFyIHJlZHVjZV9yZWN0X3dpZHRoID0gcGFyYW1zLm1hdHJpeC54X3NjYWxlLnJhbmdlQmFuZCgpICogMC4zNjtcblxuXG4gIC8vIG1ha2UgY29udGFpbmVyIHRvIHByZS1wb3NpdGlvbiB6b29tYWJsZSBlbGVtZW50c1xuICBpZiAoZDMuc2VsZWN0KHBhcmFtcy5yb290KycgLmNvbF9jb250YWluZXInKS5lbXB0eSgpKXtcblxuICAgIHZhciBjb250YWluZXJfYWxsX2NvbCA9IGQzLnNlbGVjdChwYXJhbXMudml6LnZpel9zdmcpXG4gICAgICAuYXBwZW5kKCdnJylcbiAgICAgIC5hdHRyKCdjbGFzcycsJ2NvbF9jb250YWluZXInKVxuICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoJyArIHBhcmFtcy52aXouY2x1c3QubWFyZ2luLmxlZnQgKyAnLCcgK1xuICAgICAgcGFyYW1zLm5vcm1fbGFiZWwubWFyZ2luLnRvcCArICcpJyk7XG5cbiAgICAvLyB3aGl0ZSBiYWNrZ3JvdW5kIHJlY3QgZm9yIGNvbCBsYWJlbHNcbiAgICBjb250YWluZXJfYWxsX2NvbFxuICAgICAgLmFwcGVuZCgncmVjdCcpXG4gICAgICAuYXR0cignZmlsbCcsIHBhcmFtcy52aXouYmFja2dyb3VuZF9jb2xvcikgLy8hISBwcm9nX2NvbG9yc1xuICAgICAgLmF0dHIoJ3dpZHRoJywgMzAgKiBwYXJhbXMudml6LmNsdXN0LmRpbS53aWR0aCArICdweCcpXG4gICAgICAuYXR0cignaGVpZ2h0JywgcGFyYW1zLm5vcm1fbGFiZWwuYmFja2dyb3VuZC5jb2wpXG4gICAgICAuYXR0cignY2xhc3MnLCAnd2hpdGVfYmFycycpO1xuXG4gICAgLy8gY29sIGxhYmVsc1xuICAgIGNvbnRhaW5lcl9hbGxfY29sXG4gICAgICAuYXBwZW5kKCdnJylcbiAgICAgIC5hdHRyKCdjbGFzcycsJ2NvbF9sYWJlbF9vdXRlcl9jb250YWluZXInKVxuICAgICAgLy8gcG9zaXRpb24gdGhlIG91dGVyIGNvbCBsYWJlbCBncm91cFxuICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoMCwnICsgcGFyYW1zLm5vcm1fbGFiZWwud2lkdGguY29sICsgJyknKVxuICAgICAgLmFwcGVuZCgnZycpXG4gICAgICAuYXR0cignY2xhc3MnLCAnY29sX3pvb21fY29udGFpbmVyJyk7XG5cbiAgfSBlbHNlIHtcblxuICAgIHZhciBjb250YWluZXJfYWxsX2NvbCA9IGQzLnNlbGVjdChwYXJhbXMucm9vdCsnIC5jb2xfY29udGFpbmVyJylcbiAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKCcgKyBwYXJhbXMudml6LmNsdXN0Lm1hcmdpbi5sZWZ0ICsgJywnICtcbiAgICAgIHBhcmFtcy5ub3JtX2xhYmVsLm1hcmdpbi50b3AgKyAnKScpO1xuXG4gICAgLy8gd2hpdGUgYmFja2dyb3VuZCByZWN0IGZvciBjb2wgbGFiZWxzXG4gICAgY29udGFpbmVyX2FsbF9jb2xcbiAgICAgIC5zZWxlY3QoJy53aGl0ZV9iYXJzJylcbiAgICAgIC5hdHRyKCdmaWxsJywgcGFyYW1zLnZpei5iYWNrZ3JvdW5kX2NvbG9yKSAvLyEhIHByb2dfY29sb3JzXG4gICAgICAuYXR0cignd2lkdGgnLCAzMCAqIHBhcmFtcy52aXouY2x1c3QuZGltLndpZHRoICsgJ3B4JylcbiAgICAgIC5hdHRyKCdoZWlnaHQnLCBwYXJhbXMubm9ybV9sYWJlbC5iYWNrZ3JvdW5kLmNvbCk7XG5cbiAgICAvLyBjb2wgbGFiZWxzXG4gICAgY29udGFpbmVyX2FsbF9jb2wuc2VsZWN0KHBhcmFtcy5yb290KycgLmNvbF9sYWJlbF9vdXRlcl9jb250YWluZXInKTtcblxuICB9XG5cblxuICAvLyBhZGQgbWFpbiBjb2x1bW4gbGFiZWwgZ3JvdXBcbiAgdmFyIGNvbF9sYWJlbF9vYmogPSBkMy5zZWxlY3QocGFyYW1zLnJvb3QrJyAuY29sX3pvb21fY29udGFpbmVyJylcbiAgICAuc2VsZWN0QWxsKCcuY29sX2xhYmVsX3RleHQnKVxuICAgIC5kYXRhKGNvbF9ub2RlcywgZnVuY3Rpb24oZCl7cmV0dXJuIGQubmFtZTt9KVxuICAgIC5lbnRlcigpXG4gICAgLmFwcGVuZCgnZycpXG4gICAgLmF0dHIoJ2NsYXNzJywgJ2NvbF9sYWJlbF90ZXh0JylcbiAgICAuYXR0cigndHJhbnNmb3JtJywgZnVuY3Rpb24oZCkge1xuICAgICAgdmFyIGluc3RfaW5kZXggPSBfLmluZGV4T2YoY29sX25vZGVzX25hbWVzLCBkLm5hbWUpO1xuICAgICAgcmV0dXJuICd0cmFuc2xhdGUoJyArIHBhcmFtcy5tYXRyaXgueF9zY2FsZShpbnN0X2luZGV4KSArICcpIHJvdGF0ZSgtOTApJztcbiAgICB9KTtcblxuICAvLyBhcHBlbmQgZ3JvdXAgZm9yIGluZGl2aWR1YWwgY29sdW1uIGxhYmVsXG4gIHZhciBjb2xfbGFiZWxfY2xpY2sgPSBjb2xfbGFiZWxfb2JqXG4gICAgLy8gYXBwZW5kIG5ldyBncm91cCBmb3IgcmVjdCBhbmQgbGFiZWwgKG5vdCB3aGl0ZSBsaW5lcylcbiAgICAuYXBwZW5kKCdnJylcbiAgICAuYXR0cignY2xhc3MnLCAnY29sX2xhYmVsX2NsaWNrJylcbiAgICAvLyByb3RhdGUgY29sdW1uIGxhYmVsc1xuICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKCcgKyBwYXJhbXMubWF0cml4Lnhfc2NhbGUucmFuZ2VCYW5kKCkgLyAyICsgJywnICsgeF9vZmZzZXRfY2xpY2sgKyAnKSByb3RhdGUoNDUpJylcbiAgICAub24oJ21vdXNlb3ZlcicsIGZ1bmN0aW9uKGQpIHtcbiAgICAgIGQzLnNlbGVjdCh0aGlzKS5zZWxlY3QoJ3RleHQnKVxuICAgICAgICAuY2xhc3NlZCgnYWN0aXZlJyx0cnVlKTtcbiAgICB9KVxuICAgIC5vbignbW91c2VvdXQnLCBmdW5jdGlvbihkKSB7XG4gICAgICBkMy5zZWxlY3QodGhpcykuc2VsZWN0KCd0ZXh0JylcbiAgICAgICAgLmNsYXNzZWQoJ2FjdGl2ZScsZmFsc2UpO1xuICAgIH0pO1xuXG5cblxuICAvLyBhcHBlbmQgY29sdW1uIHZhbHVlIGJhcnNcbiAgaWYgKHV0aWxzLmhhcyhwYXJhbXMubmV0d29ya19kYXRhLmNvbF9ub2Rlc1swXSwgJ3ZhbHVlJykpIHtcblxuICAgIGQzLnNlbGVjdEFsbCgnY29sX2JhcnMnKS5yZW1vdmUoKTtcblxuICAgIGNvbF9sYWJlbF9jbGlja1xuICAgICAgLmFwcGVuZCgncmVjdCcpXG4gICAgICAuYXR0cignY2xhc3MnLCAnY29sX2JhcnMnKVxuICAgICAgLmF0dHIoJ3dpZHRoJywgZnVuY3Rpb24oZCkge1xuICAgICAgICB2YXIgaW5zdF92YWx1ZSA9IDA7XG4gICAgICAgIGlmIChkLnZhbHVlID4gMCl7XG4gICAgICAgICAgaW5zdF92YWx1ZSA9IHBhcmFtcy5sYWJlbHMuYmFyX3NjYWxlX2NvbChkLnZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaW5zdF92YWx1ZTtcbiAgICAgIH0pXG4gICAgICAvLyByb3RhdGUgbGFiZWxzIC0gcmVkdWNlIHdpZHRoIGlmIHJvdGF0aW5nXG4gICAgICAuYXR0cignaGVpZ2h0JywgcGFyYW1zLm1hdHJpeC54X3NjYWxlLnJhbmdlQmFuZCgpICogMC42NilcbiAgICAgIC5zdHlsZSgnZmlsbCcsIGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgcmV0dXJuIGQudmFsdWUgPiAwID8gcGFyYW1zLm1hdHJpeC5iYXJfY29sb3JzWzBdIDogcGFyYW1zLm1hdHJpeC5iYXJfY29sb3JzWzFdO1xuICAgICAgfSlcbiAgICAgIC5hdHRyKCdvcGFjaXR5JywgMC40KTtcblxuICB9XG5cbiAgLy8gYWRkIGNvbHVtbiBsYWJlbFxuICBjb2xfbGFiZWxfY2xpY2tcbiAgICAuYXBwZW5kKCd0ZXh0JylcbiAgICAuYXR0cigneCcsIDApXG4gICAgLy8gbWFudWFsbHkgdHVuZWRcbiAgICAuYXR0cigneScsIHBhcmFtcy5tYXRyaXgueF9zY2FsZS5yYW5nZUJhbmQoKSAqIDAuNjQpXG4gICAgLmF0dHIoJ2R4JywgcGFyYW1zLnZpei5ib3JkZXJfd2lkdGgpXG4gICAgLmF0dHIoJ3RleHQtYW5jaG9yJywgJ3N0YXJ0JylcbiAgICAuYXR0cignZnVsbF9uYW1lJywgZnVuY3Rpb24oZCkge1xuICAgICAgcmV0dXJuIGQubmFtZTtcbiAgICB9KVxuICAgIC8vIG9yaWdpbmFsIGZvbnQgc2l6ZVxuICAgIC5zdHlsZSgnZm9udC1zaXplJywgcGFyYW1zLmxhYmVscy5kZWZhdWx0X2ZzX2NvbCArICdweCcpXG4gICAgLnRleHQoZnVuY3Rpb24oZCl7IHJldHVybiB1dGlscy5ub3JtYWxfbmFtZShkLCBwYXJhbXMubGFiZWxzLm1heF9sYWJlbF9jaGFyKTsgfSlcbiAgICAvLyAuYXR0cigncG9pbnRlci1ldmVudHMnLCdub25lJylcbiAgICAuc3R5bGUoJ29wYWNpdHknLDApXG4gICAgLnRyYW5zaXRpb24oKS5kZWxheSh0ZXh0X2RlbGF5KS5kdXJhdGlvbih0ZXh0X2RlbGF5KVxuICAgIC5zdHlsZSgnb3BhY2l0eScsMSk7XG5cbiAgaWYgKHBhcmFtcy5sYWJlbHMuc2hvd19sYWJlbF90b29sdGlwcyl7XG5cbiAgICAvLyBkMy10b29sdGlwXG4gICAgdmFyIHRpcCA9IGQzLnRpcCgpXG4gICAgICAuYXR0cignY2xhc3MnLCAnZDMtdGlwJylcbiAgICAgIC5kaXJlY3Rpb24oJ3MnKVxuICAgICAgLm9mZnNldChbMjAsIDBdKVxuICAgICAgLmh0bWwoZnVuY3Rpb24oZCkge1xuICAgICAgICB2YXIgaW5zdF9uYW1lID0gZC5uYW1lLnJlcGxhY2UoL18vZywgJyAnKS5zcGxpdCgnIycpWzBdO1xuXG4gICAgICAgIGlmIChwYXJhbXMuc2hvd19jYXRlZ29yaWVzKXtcbiAgICAgICAgICBpbnN0X25hbWUgPSBpbnN0X25hbWUgKyAnOiAnICsgU3RyaW5nKGQuY2wpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFwiPHNwYW4+XCIgKyBpbnN0X25hbWUgKyBcIjwvc3Bhbj5cIjtcbiAgICAgIH0pO1xuXG4gICAgZDMuc2VsZWN0KHBhcmFtcy52aXoudml6X3dyYXBwZXIpXG4gICAgICAuc2VsZWN0KCdzdmcnKVxuICAgICAgLnNlbGVjdChwYXJhbXMucm9vdCsnIC5jb2xfY29udGFpbmVyJylcbiAgICAgIC5jYWxsKHRpcCk7XG5cbiAgICBjb2xfbGFiZWxfb2JqXG4gICAgICAvLyAuc2VsZWN0KCd0ZXh0JylcbiAgICAgIC5vbignbW91c2VvdmVyJyx0aXAuc2hvdylcbiAgICAgIC5vbignbW91c2VvdXQnLHRpcC5oaWRlKTtcblxuICB9XG5cbiAgLy8gYm91bmRpbmcgZm9udCBzaXplXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgcGFyYW1zLmJvdW5kaW5nX3dpZHRoX21heC5jb2wgPSAwO1xuICBkMy5zZWxlY3RBbGwoJy5jb2xfbGFiZWxfY2xpY2snKS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgIHZhciB0bXBfd2lkdGggPSBkMy5zZWxlY3QodGhpcykuc2VsZWN0KCd0ZXh0Jykubm9kZSgpLmdldEJCb3goKS53aWR0aDtcbiAgICBpZiAodG1wX3dpZHRoID4gcGFyYW1zLmJvdW5kaW5nX3dpZHRoX21heC5jb2wpIHtcbiAgICAgIC8vIGluY3JlYXNlIHRoZSBhcHBhcmVudCB3aWR0aCBvZiB0aGUgY29sdW1uIGxhYmVsIHNpbmNlIGl0cyByb3RhdGVkXG4gICAgICAvLyB0aGlzIHdpbGwgZ2l2ZSBtb3JlIHJvb20gZm9yIHRleHRcbiAgICAgIHBhcmFtcy5ib3VuZGluZ193aWR0aF9tYXguY29sID0gdG1wX3dpZHRoO1xuICAgIH1cbiAgfSk7XG5cbiAgLy8gY2hlY2sgaWYgd2lkZXN0IHJvdyBvciBjb2wgYXJlIHdpZGVyIHRoYW4gdGhlIGFsbG93ZWQgbGFiZWwgd2lkdGhcbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gIHBhcmFtcy5pbmlfc2NhbGVfZm9udCA9IHt9O1xuICBwYXJhbXMuaW5pX3NjYWxlX2ZvbnQucm93ID0gMTtcbiAgcGFyYW1zLmluaV9zY2FsZV9mb250LmNvbCA9IDE7XG5cbiAgaWYgKHBhcmFtcy5ib3VuZGluZ193aWR0aF9tYXgucm93ID4gcGFyYW1zLm5vcm1fbGFiZWwud2lkdGgucm93KSB7XG5cbiAgICAvLyBjYWxjIHJlZHVjdGlvbiBpbiBmb250IHNpemVcbiAgICBwYXJhbXMuaW5pX3NjYWxlX2ZvbnQucm93ID0gcGFyYW1zLm5vcm1fbGFiZWwud2lkdGgucm93IC8gcGFyYW1zLmJvdW5kaW5nX3dpZHRoX21heC5yb3c7XG4gICAgLy8gcmVkZWZpbmUgYm91bmRpbmdfd2lkdGhfbWF4LnJvd1xuICAgIHBhcmFtcy5ib3VuZGluZ193aWR0aF9tYXgucm93ID0gcGFyYW1zLmluaV9zY2FsZV9mb250LnJvdyAqIHBhcmFtcy5ib3VuZGluZ193aWR0aF9tYXgucm93O1xuXG4gICAgLy8gcmVkZWZpbmUgZGVmYXVsdCBmcyAhISBpbmNyZWFzZSB0byBtYWtlIG1vcmUgcmVhZGFibGVcbiAgICBwYXJhbXMubGFiZWxzLmRlZmF1bHRfZnNfcm93ID0gcGFyYW1zLmxhYmVscy5kZWZhdWx0X2ZzX3JvdyAqIHBhcmFtcy5pbmlfc2NhbGVfZm9udC5yb3c7XG5cbiAgICAvLyByZWR1Y2UgZm9udCBzaXplXG4gICAgZDMuc2VsZWN0QWxsKCcucm93X2xhYmVsX3RleHQnKS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgIGQzLnNlbGVjdCh0aGlzKS5zZWxlY3QoJ3RleHQnKVxuICAgICAgLnN0eWxlKCdmb250LXNpemUnLCBwYXJhbXMubGFiZWxzLmRlZmF1bHRfZnNfcm93ICsgJ3B4Jyk7XG4gICAgfSk7XG4gIH1cblxuICAvLyBkZWJ1Z2dlcjtcblxuICBpZiAocGFyYW1zLmJvdW5kaW5nX3dpZHRoX21heC5jb2wgPiBwYXJhbXMubm9ybV9sYWJlbC53aWR0aC5jb2wpIHtcblxuICAgIC8vIGNhbGMgcmVkdWN0aW9uIGluIGZvbnQgc2l6ZVxuICAgIHBhcmFtcy5pbmlfc2NhbGVfZm9udC5jb2wgPSBwYXJhbXMubm9ybV9sYWJlbC53aWR0aC5jb2wgLyBwYXJhbXMuYm91bmRpbmdfd2lkdGhfbWF4LmNvbDtcbiAgICAvLyByZWRlZmluZSBib3VuZGluZ193aWR0aF9tYXguY29sXG4gICAgcGFyYW1zLmJvdW5kaW5nX3dpZHRoX21heC5jb2wgPSBwYXJhbXMuaW5pX3NjYWxlX2ZvbnQuY29sICogcGFyYW1zLmJvdW5kaW5nX3dpZHRoX21heC5jb2w7XG4gICAgLy8gcmVkZWZpbmUgZGVmYXVsdCBmcywgISEgaW5jcmVhc2UgdG8gbWFrZSBtb3JlIHJlYWRhYmxlXG4gICAgcGFyYW1zLmxhYmVscy5kZWZhdWx0X2ZzX2NvbCA9IHBhcmFtcy5sYWJlbHMuZGVmYXVsdF9mc19jb2wgKiBwYXJhbXMuaW5pX3NjYWxlX2ZvbnQuY29sO1xuXG4gICAgLy8gcmVkdWNlIGZvbnQgc2l6ZVxuICAgIGQzLnNlbGVjdEFsbCgnLmNvbF9sYWJlbF9jbGljaycpLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgZDMuc2VsZWN0KHRoaXMpLnNlbGVjdCgndGV4dCcpXG4gICAgICAuc3R5bGUoJ2ZvbnQtc2l6ZScsIHBhcmFtcy5sYWJlbHMuZGVmYXVsdF9mc19jb2wgKyAncHgnKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIGNvbnN0cmFpbiB0ZXh0IGFmdGVyIHpvb21pbmdcbiAgaWYgKHBhcmFtcy5sYWJlbHMucm93X2tlZXAgPCAxKXtcbiAgICBkMy5zZWxlY3RBbGwoJy5yb3dfbGFiZWxfdGV4dCcgKS5lYWNoKGZ1bmN0aW9uKCkgeyB0cmltX3RleHQodGhpcywgJ3JvdycpOyB9KTtcbiAgfVxuICBpZiAocGFyYW1zLmxhYmVscy5jb2xfa2VlcCA8IDEpe1xuICAgIGQzLnNlbGVjdEFsbCgnLmNvbF9sYWJlbF9jbGljaycpLmVhY2goZnVuY3Rpb24oKSB7IHRyaW1fdGV4dCh0aGlzLCAnY29sJyk7IH0pO1xuICB9XG5cblxuICAvLyBhcHBlbmQgcmVjdGFuZ2xlIGJlaGluZCB0ZXh0XG4gIGNvbF9sYWJlbF9jbGlja1xuICAgIC5pbnNlcnQoJ3JlY3QnKVxuICAgIC5hdHRyKCdjbGFzcycsJy5oaWdobGlnaHRfcmVjdCcpXG4gICAgLmF0dHIoJ3gnLCAwKVxuICAgIC5hdHRyKCd5JywgMClcbiAgICAuYXR0cignd2lkdGgnLCAxMCpwYXJhbXMubWF0cml4LnJlY3RfaGVpZ2h0KVxuICAgIC5hdHRyKCdoZWlnaHQnLCAwLjY3KnBhcmFtcy5tYXRyaXgucmVjdF93aWR0aClcbiAgICAuc3R5bGUoJ29wYWNpdHknLCAwKTtcblxuICAvLyAvLyBvbmx5IHJ1biB0aGlzIGlmIHRoZXJlIGFyZSBjb2wgY2F0ZWdvcmllc1xuICAvLyBpZiAocGFyYW1zLmxhYmVscy5zaG93X2NhdGVnb3JpZXMpe1xuICAvLyAgIC8vIGNoYW5nZSB0aGUgc2l6ZSBvZiB0aGUgaGlnaGxpZ2h0aW5nIHJlY3RzXG4gIC8vICAgY29sX2xhYmVsX2NsaWNrXG4gIC8vICAgICAuZWFjaChmdW5jdGlvbihkKSB7XG4gIC8vICAgICAgIHZhciBiYm94ID0gZDMuc2VsZWN0KHRoaXMpXG4gIC8vICAgICAgICAgLnNlbGVjdCgndGV4dCcpWzBdWzBdXG4gIC8vICAgICAgICAgLmdldEJCb3goKTtcblxuICAvLyAgICAgICBkMy5zZWxlY3QodGhpcylcbiAgLy8gICAgICAgICAuc2VsZWN0KCdyZWN0JylcbiAgLy8gICAgICAgICAuYXR0cignd2lkdGgnLCBiYm94LndpZHRoICogMS4xKVxuICAvLyAgICAgICAgIC5hdHRyKCdoZWlnaHQnLCAwLjY3KnBhcmFtcy5tYXRyaXgucmVjdF93aWR0aClcbiAgLy8gICAgICAgICAuc3R5bGUoJ2ZpbGwnLCBmdW5jdGlvbihkKXtcbiAgLy8gICAgICAgICAgIHZhciBpbnN0X2NvbG9yID0gJ3doaXRlJztcbiAgLy8gICAgICAgICAgIGluc3RfY29sb3IgPSBwYXJhbXMubGFiZWxzLmNsYXNzX2NvbG9ycy5jb2xbZC5jbF07XG4gIC8vICAgICAgICAgICByZXR1cm4gaW5zdF9jb2xvclxuICAvLyAgICAgICAgIH0pXG4gIC8vICAgICAgICAgLnN0eWxlKCdvcGFjaXR5JywgMC4zMCk7XG4gIC8vICAgICB9KTtcbiAgLy8gfVxuXG4gIC8vIGFkZCB0cmlhbmdsZSB1bmRlciByb3RhdGVkIGxhYmVsc1xuICBjb2xfbGFiZWxfY2xpY2tcbiAgICAuYXBwZW5kKCdwYXRoJylcbiAgICAuc3R5bGUoJ3N0cm9rZS13aWR0aCcsIDApXG4gICAgLmF0dHIoJ2QnLCBmdW5jdGlvbigpIHtcbiAgICAgIC8vIHggYW5kIHkgYXJlIGZsaXBwZWQgc2luY2UgaXRzIHJvdGF0ZWRcbiAgICAgIHZhciBvcmlnaW5feSA9IC1wYXJhbXMudml6LmJvcmRlcl93aWR0aDtcbiAgICAgIHZhciBzdGFydF94ID0gMDtcbiAgICAgIHZhciBmaW5hbF94ID0gcGFyYW1zLm1hdHJpeC54X3NjYWxlLnJhbmdlQmFuZCgpIC0gcmVkdWNlX3JlY3Rfd2lkdGg7XG4gICAgICB2YXIgc3RhcnRfeSA9IC0ocGFyYW1zLm1hdHJpeC54X3NjYWxlLnJhbmdlQmFuZCgpIC0gcmVkdWNlX3JlY3Rfd2lkdGggK1xuICAgICAgcGFyYW1zLnZpei5ib3JkZXJfd2lkdGgpO1xuICAgICAgdmFyIGZpbmFsX3kgPSAtcGFyYW1zLnZpei5ib3JkZXJfd2lkdGg7XG4gICAgICB2YXIgb3V0cHV0X3N0cmluZyA9ICdNICcgKyBvcmlnaW5feSArICcsMCBMICcgKyBzdGFydF95ICsgJywnICtcbiAgICAgICAgc3RhcnRfeCArICcsIEwgJyArIGZpbmFsX3kgKyAnLCcgKyBmaW5hbF94ICsgJyBaJztcbiAgICAgIHJldHVybiBvdXRwdXRfc3RyaW5nO1xuICAgIH0pXG4gICAgLmF0dHIoJ2ZpbGwnLCBmdW5jdGlvbihkKSB7XG4gICAgICB2YXIgaW5zdF9jb2xvciA9ICcjZWVlJztcbiAgICAgIGlmIChwYXJhbXMubGFiZWxzLnNob3dfY2F0ZWdvcmllcykge1xuICAgICAgICBpbnN0X2NvbG9yID0gcGFyYW1zLmxhYmVscy5jbGFzc19jb2xvcnMuY29sW2QuY2xdO1xuICAgICAgfVxuICAgIHJldHVybiBpbnN0X2NvbG9yO1xuICAgIH0pXG4gICAgLnN0eWxlKCdvcGFjaXR5JywwKVxuICAgIC50cmFuc2l0aW9uKCkuZGVsYXkodGV4dF9kZWxheSkuZHVyYXRpb24odGV4dF9kZWxheSlcbiAgICAuc3R5bGUoJ29wYWNpdHknLDEpO1xuXG5cbiAgLy8gYWRkIGNvbCBjYWxsYmFjayBmdW5jdGlvblxuICBkMy5zZWxlY3RBbGwoJy5jb2xfbGFiZWxfdGV4dCcpXG4gICAgLm9uKCdjbGljaycsZnVuY3Rpb24oZCl7XG5cbiAgICAgIGlmICh0eXBlb2YgcGFyYW1zLmNsaWNrX2xhYmVsID09ICdmdW5jdGlvbicpe1xuICAgICAgICBwYXJhbXMuY2xpY2tfbGFiZWwoZC5uYW1lLCAnY29sJyk7XG4gICAgICAgIGFkZF9jb2xfY2xpY2tfaGxpZ2h0KHRoaXMsIGQuaW5pKTtcbiAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgaWYgKHBhcmFtcy50aWxlX2NsaWNrX2hsaWdodCl7XG4gICAgICAgICAgYWRkX2NvbF9jbGlja19obGlnaHQodGhpcywgZC5pbmkpO1xuICAgICAgICB9XG5cbiAgICAgIH1cblxuICAgIH0pXG4gICAgLm9uKCdkYmxjbGljaycsIGZ1bmN0aW9uKGQpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdkb3VibGUgY2xpY2tpbmcgY29sJyk7XG4gICAgICBjb2xfcmVvcmRlci5jYWxsKHRoaXMpO1xuICAgICAgaWYgKHBhcmFtcy50aWxlX2NsaWNrX2hsaWdodCl7XG4gICAgICAgIGFkZF9jb2xfY2xpY2tfaGxpZ2h0KHRoaXMsZC5pbmkpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gIHJldHVybiBjb250YWluZXJfYWxsX2NvbDtcbn07XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiBzcmMvbGFiZWxzL21ha2VfY29scy5qc1xuICoqLyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUxBOztBQUFBO0FBQ0E7O0FBREE7QUFDQTtBQWNBO0FBQ0E7O0FBSEE7QUFTQTtBQUNBOztBQVZBOztBQXFCQTtBQXJCQTtBQUNBO0FBMEJBO0FBQ0E7O0FBSEE7QUFPQTtBQUNBOztBQVJBO0FBekJBO0FBQ0E7O0FBZEE7QUE0REE7QUFBQTtBQUtBO0FBQ0E7QUFGQTtBQUNBOztBQWpFQTs7QUF3RUE7O0FBR0E7QUFFQTtBQURBO0FBS0E7QUFEQTtBQUNBOztBQWpGQTtBQUNBO0FBeUZBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFMQTs7QUFIQTtBQWFBO0FBREE7QUFoQkE7QUFDQTs7QUF6RkE7O0FBb0hBO0FBSUE7QUFEQTs7QUFQQTtBQVlBO0FBQUE7O0FBWkE7QUFDQTtBQWlCQTtBQUNBOztBQUVBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBR0E7QUFQQTtBQUNBO0FBU0E7QUFDQTtBQUlBOztBQUVBO0FBeEJBO0FBQ0E7Ozs7QUFuSUE7QUFtS0E7QUFDQTtBQUNBOzs7QUFHQTtBQUhBO0FBRkE7QUFDQTs7O0FBcEtBO0FBK0tBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBSEE7QUFDQTs7QUFEQTtBQUNBOztBQURBO0FBWUE7QUFEQTtBQVhBO0FBQ0E7OztBQW5MQTtBQUNBOztBQXVNQTs7QUFIQTs7QUFBQTtBQUNBOztBQURBO0FBV0E7QUFEQTtBQVZBO0FBQ0E7O0FBdE1BO0FBdU5BO0FBQUE7QUFBQTtBQURBO0FBR0E7QUFDQTtBQUFBO0FBQUE7QUFEQTtBQUNBOztBQTFOQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFEQTs7QUFvUUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFWQTtBQWFBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFMQTtBQUNBOztBQS9RQTtBQUNBO0FBNlJBO0FBQ0E7QUFDQTtBQUZBO0FBQ0E7QUFJQTtBQUNBO0FBREE7QUFMQTtBQUZBO0FBZUE7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUhBO0FBQ0E7QUFPQTtBQWxUQSIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ },
/* 31 */
/***/ function(module, exports, __webpack_require__) {

	eval("var Params = __webpack_require__(1);\n\nmodule.exports = function (clicked_col, id_clicked_col) {\n  var params = Params.get();\n\n  if (id_clicked_col != params.click_hlight_col) {\n\n    params.click_hlight_col = id_clicked_col;\n\n    var rel_width_hlight = 6;\n    var opacity_hlight = 0.85;\n    var hlight_width = rel_width_hlight * params.viz.border_width;\n    var hlight_height = rel_width_hlight * params.viz.border_width / params.viz.zoom_switch;\n\n    d3.selectAll('.click_hlight').remove();\n\n    // // highlight selected column\n    // ///////////////////////////////\n    // // unhilight and unbold all columns (already unbolded earlier)\n    // d3.selectAll('.col_label_text')\n    //   .select('rect')\n    //   .style('opacity', 0);\n    // // highlight column name\n    // d3.select(clicked_col)\n    //   .select('rect')\n    //   .style('opacity', 1);\n\n    d3.select(clicked_col).append('rect').classed('click_hlight', true).classed('col_top_hlight', true).attr('width', params.viz.clust.dim.height).attr('height', hlight_width).attr('fill', params.matrix.hlight_color).attr('opacity', opacity_hlight).attr('transform', function () {\n      var tmp_translate_y = 0;\n      var tmp_translate_x = -(params.viz.clust.dim.height + params.class_room.col + params.viz.uni_margin);\n      return 'translate(' + tmp_translate_x + ',' + tmp_translate_y + ')';\n    });\n\n    d3.select(clicked_col).append('rect').classed('click_hlight', true).classed('col_bottom_hlight', true).attr('width', params.viz.clust.dim.height).attr('height', hlight_width).attr('fill', params.matrix.hlight_color).attr('opacity', opacity_hlight).attr('transform', function () {\n      // reverse x and y since rotated\n      var tmp_translate_y = params.matrix.x_scale.rangeBand() - hlight_width;\n      var tmp_translate_x = -(params.viz.clust.dim.height + params.class_room.col + params.viz.uni_margin);\n      return 'translate(' + tmp_translate_x + ',' + tmp_translate_y + ')';\n    });\n  } else {\n    d3.selectAll('.click_hlight').remove();\n    params.click_hlight_col = -666;\n  }\n};//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzEuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL2xhYmVscy9hZGRfY29sX2NsaWNrX2hsaWdodC5qcz83MGFiIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBQYXJhbXMgPSByZXF1aXJlKCcuLi9wYXJhbXMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihjbGlja2VkX2NvbCwgaWRfY2xpY2tlZF9jb2wpIHtcbiAgdmFyIHBhcmFtcyA9IFBhcmFtcy5nZXQoKTtcblxuICBpZiAoaWRfY2xpY2tlZF9jb2wgIT0gcGFyYW1zLmNsaWNrX2hsaWdodF9jb2wpe1xuXG4gICAgcGFyYW1zLmNsaWNrX2hsaWdodF9jb2wgPSBpZF9jbGlja2VkX2NvbDtcblxuICAgIHZhciByZWxfd2lkdGhfaGxpZ2h0ID0gNjtcbiAgICB2YXIgb3BhY2l0eV9obGlnaHQgPSAwLjg1O1xuICAgIHZhciBobGlnaHRfd2lkdGggID0gcmVsX3dpZHRoX2hsaWdodCpwYXJhbXMudml6LmJvcmRlcl93aWR0aDtcbiAgICB2YXIgaGxpZ2h0X2hlaWdodCA9IHJlbF93aWR0aF9obGlnaHQqcGFyYW1zLnZpei5ib3JkZXJfd2lkdGgvcGFyYW1zLnZpei56b29tX3N3aXRjaDtcblxuICAgIGQzLnNlbGVjdEFsbCgnLmNsaWNrX2hsaWdodCcpXG4gICAgICAucmVtb3ZlKCk7XG5cbiAgICAvLyAvLyBoaWdobGlnaHQgc2VsZWN0ZWQgY29sdW1uXG4gICAgLy8gLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAgIC8vIC8vIHVuaGlsaWdodCBhbmQgdW5ib2xkIGFsbCBjb2x1bW5zIChhbHJlYWR5IHVuYm9sZGVkIGVhcmxpZXIpXG4gICAgLy8gZDMuc2VsZWN0QWxsKCcuY29sX2xhYmVsX3RleHQnKVxuICAgIC8vICAgLnNlbGVjdCgncmVjdCcpXG4gICAgLy8gICAuc3R5bGUoJ29wYWNpdHknLCAwKTtcbiAgICAvLyAvLyBoaWdobGlnaHQgY29sdW1uIG5hbWVcbiAgICAvLyBkMy5zZWxlY3QoY2xpY2tlZF9jb2wpXG4gICAgLy8gICAuc2VsZWN0KCdyZWN0JylcbiAgICAvLyAgIC5zdHlsZSgnb3BhY2l0eScsIDEpO1xuXG4gICAgZDMuc2VsZWN0KGNsaWNrZWRfY29sKVxuICAgICAgLmFwcGVuZCgncmVjdCcpXG4gICAgICAuY2xhc3NlZCgnY2xpY2tfaGxpZ2h0Jyx0cnVlKVxuICAgICAgLmNsYXNzZWQoJ2NvbF90b3BfaGxpZ2h0Jyx0cnVlKVxuICAgICAgLmF0dHIoJ3dpZHRoJyxwYXJhbXMudml6LmNsdXN0LmRpbS5oZWlnaHQpXG4gICAgICAuYXR0cignaGVpZ2h0JyxobGlnaHRfd2lkdGgpXG4gICAgICAuYXR0cignZmlsbCcscGFyYW1zLm1hdHJpeC5obGlnaHRfY29sb3IpXG4gICAgICAuYXR0cignb3BhY2l0eScsb3BhY2l0eV9obGlnaHQpXG4gICAgICAuYXR0cigndHJhbnNmb3JtJyxmdW5jdGlvbigpe1xuICAgICAgICB2YXIgdG1wX3RyYW5zbGF0ZV95ID0gMDtcbiAgICAgICAgdmFyIHRtcF90cmFuc2xhdGVfeCA9IC0ocGFyYW1zLnZpei5jbHVzdC5kaW0uaGVpZ2h0K1xuICAgICAgICAgIHBhcmFtcy5jbGFzc19yb29tLmNvbCtwYXJhbXMudml6LnVuaV9tYXJnaW4pO1xuICAgICAgICByZXR1cm4gJ3RyYW5zbGF0ZSgnK3RtcF90cmFuc2xhdGVfeCsnLCcrdG1wX3RyYW5zbGF0ZV95KycpJztcbiAgICAgIH0pO1xuXG4gICAgZDMuc2VsZWN0KGNsaWNrZWRfY29sKVxuICAgICAgLmFwcGVuZCgncmVjdCcpXG4gICAgICAuY2xhc3NlZCgnY2xpY2tfaGxpZ2h0Jyx0cnVlKVxuICAgICAgLmNsYXNzZWQoJ2NvbF9ib3R0b21faGxpZ2h0Jyx0cnVlKVxuICAgICAgLmF0dHIoJ3dpZHRoJyxwYXJhbXMudml6LmNsdXN0LmRpbS5oZWlnaHQpXG4gICAgICAuYXR0cignaGVpZ2h0JyxobGlnaHRfd2lkdGgpXG4gICAgICAuYXR0cignZmlsbCcscGFyYW1zLm1hdHJpeC5obGlnaHRfY29sb3IpXG4gICAgICAuYXR0cignb3BhY2l0eScsb3BhY2l0eV9obGlnaHQpXG4gICAgICAuYXR0cigndHJhbnNmb3JtJywgZnVuY3Rpb24oKXtcbiAgICAgICAgLy8gcmV2ZXJzZSB4IGFuZCB5IHNpbmNlIHJvdGF0ZWRcbiAgICAgICAgdmFyIHRtcF90cmFuc2xhdGVfeSA9IHBhcmFtcy5tYXRyaXgueF9zY2FsZS5yYW5nZUJhbmQoKSAtIGhsaWdodF93aWR0aDtcbiAgICAgICAgdmFyIHRtcF90cmFuc2xhdGVfeCA9IC0ocGFyYW1zLnZpei5jbHVzdC5kaW0uaGVpZ2h0ICtcbiAgICAgICAgICBwYXJhbXMuY2xhc3Nfcm9vbS5jb2wrcGFyYW1zLnZpei51bmlfbWFyZ2luKTtcbiAgICAgICAgcmV0dXJuICd0cmFuc2xhdGUoJyt0bXBfdHJhbnNsYXRlX3grJywnK3RtcF90cmFuc2xhdGVfeSsnKSc7XG4gICAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICBkMy5zZWxlY3RBbGwoJy5jbGlja19obGlnaHQnKVxuICAgICAgLnJlbW92ZSgpO1xuICAgIHBhcmFtcy5jbGlja19obGlnaHRfY29sID0gLTY2NjtcbiAgfVxuXG59O1xuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogc3JjL2xhYmVscy9hZGRfY29sX2NsaWNrX2hsaWdodC5qc1xuICoqLyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQVZBO0FBZ0NBO0FBQ0E7QUFFQTtBQUpBO0FBQ0E7QUFNQTs7QUFVQTtBQUNBO0FBRUE7QUFMQTtBQTlDQTtBQXNEQTtBQUVBO0FBeERBO0FBSEEiLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 32 */
/***/ function(module, exports, __webpack_require__) {

	eval("var crossfilter = __webpack_require__(2);\nvar Params = __webpack_require__(1);\nvar end_reorder = __webpack_require__(28);\nvar reposition_tile_highlight = __webpack_require__(29);\n\nmodule.exports = function () {\n  var params = Params.get();\n\n  // set running transition value\n  params.viz.run_trans = true;\n\n  var mat = params.matrix.matrix;\n  var row_nodes = params.network_data.row_nodes;\n  var col_nodes = params.network_data.col_nodes;\n\n  var row_nodes_names = _.pluck(row_nodes, 'name');\n\n  // get inst col (term)\n  var inst_term = d3.select(this).select('text').attr('full_name');\n\n  // find the column number of this term from col_nodes\n  // gather column node names\n  var tmp_arr = [];\n  _.each(col_nodes, function (node) {\n    tmp_arr.push(node.name);\n  });\n\n  // find index\n  var inst_col = _.indexOf(tmp_arr, inst_term);\n\n  // gather the values of the input genes\n  tmp_arr = [];\n  _.each(row_nodes, function (node, index) {\n    tmp_arr.push(mat[index].row_data[inst_col].value);\n  });\n\n  // sort the cols\n  var tmp_sort = d3.range(tmp_arr.length).sort(function (a, b) {\n    return tmp_arr[b] - tmp_arr[a];\n  });\n\n  // resort cols\n  ////////////////////////////\n  params.matrix.y_scale.domain(tmp_sort);\n\n  // reorder\n  if (params.network_data.links.length > params.matrix.def_large_matrix) {\n    var t = this.viz.get_clust_group();\n\n    // reorder row_label_triangle groups\n    d3.selectAll('.row_viz_group').attr('transform', function (d) {\n      var inst_index = _.indexOf(row_nodes_names, d.name);\n      return 'translate(0,' + params.matrix.y_scale(inst_index) + ')';\n    });\n\n    // Move Row Labels\n    d3.select(params.root + ' .row_label_zoom_container').selectAll('.row_label_text').attr('transform', function (d) {\n      var inst_index = _.indexOf(row_nodes_names, d.name);\n      return 'translate(0,' + params.matrix.y_scale(inst_index) + ')';\n    });\n  } else {\n\n    var t = this.viz.get_clust_group().transition().duration(2500);\n\n    // reorder row_label_triangle groups\n    d3.selectAll('.row_viz_group').transition().duration(2500).attr('transform', function (d) {\n      var inst_index = _.indexOf(row_nodes_names, d.name);\n      return 'translate(0,' + params.matrix.y_scale(inst_index) + ')';\n    });\n\n    // Move Row Labels\n    d3.select(params.root + ' .row_label_zoom_container').selectAll('.row_label_text').transition().duration(2500).attr('transform', function (d) {\n      var inst_index = _.indexOf(row_nodes_names, d.name);\n      return 'translate(0,' + params.matrix.y_scale(inst_index) + ')';\n    });\n  }\n\n  // reorder matrix rows\n  t.selectAll('.row').attr('transform', function (d) {\n    var inst_index = _.indexOf(row_nodes_names, d.name);\n    return 'translate(0,' + params.matrix.y_scale(inst_index) + ')';\n  });\n\n  // highlight selected column\n  ///////////////////////////////\n  // unhilight and unbold all columns (already unbolded earlier)\n  d3.selectAll('.col_label_text').select('.highlight_rect').style('opacity', 0);\n  // highlight column name\n  d3.select(this).select('.highlight_rect').style('opacity', 1);\n\n  // redefine x and y positions\n  _.each(params.network_data.links, function (d) {\n    d.x = params.matrix.x_scale(d.target);\n    d.y = params.matrix.y_scale(d.source);\n  });\n\n  // rename crossfilter\n  params.cf = {};\n  params.cf.links = crossfilter(params.network_data.links);\n  params.cf.dim_x = params.cf.links.dimension(function (d) {\n    return d.x;\n  });\n  params.cf.dim_y = params.cf.links.dimension(function (d) {\n    return d.y;\n  });\n\n  reposition_tile_highlight();\n\n  // backup allow programmatic zoom\n  setTimeout(end_reorder, 2500);\n};//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzIuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL3Jlb3JkZXIvY29sX3Jlb3JkZXIuanM/NWFlNiJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgY3Jvc3NmaWx0ZXIgPSByZXF1aXJlKCdjcm9zc2ZpbHRlcicpO1xudmFyIFBhcmFtcyA9IHJlcXVpcmUoJy4uL3BhcmFtcycpO1xudmFyIGVuZF9yZW9yZGVyID0gcmVxdWlyZSgnLi9lbmRfcmVvcmRlcicpO1xudmFyIHJlcG9zaXRpb25fdGlsZV9oaWdobGlnaHQgPSByZXF1aXJlKCcuL3JlcG9zaXRpb25fdGlsZV9oaWdobGlnaHQnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHtcbiAgdmFyIHBhcmFtcyA9IFBhcmFtcy5nZXQoKTtcblxuICAvLyBzZXQgcnVubmluZyB0cmFuc2l0aW9uIHZhbHVlXG4gIHBhcmFtcy52aXoucnVuX3RyYW5zID0gdHJ1ZTtcblxuICB2YXIgbWF0ICAgICAgID0gcGFyYW1zLm1hdHJpeC5tYXRyaXg7XG4gIHZhciByb3dfbm9kZXMgPSBwYXJhbXMubmV0d29ya19kYXRhLnJvd19ub2RlcztcbiAgdmFyIGNvbF9ub2RlcyA9IHBhcmFtcy5uZXR3b3JrX2RhdGEuY29sX25vZGVzO1xuXG4gIHZhciByb3dfbm9kZXNfbmFtZXMgPSBfLnBsdWNrKHJvd19ub2RlcywgJ25hbWUnKTtcblxuICAvLyBnZXQgaW5zdCBjb2wgKHRlcm0pXG4gIHZhciBpbnN0X3Rlcm0gPSBkMy5zZWxlY3QodGhpcykuc2VsZWN0KCd0ZXh0JykuYXR0cignZnVsbF9uYW1lJyk7XG5cbiAgLy8gZmluZCB0aGUgY29sdW1uIG51bWJlciBvZiB0aGlzIHRlcm0gZnJvbSBjb2xfbm9kZXNcbiAgLy8gZ2F0aGVyIGNvbHVtbiBub2RlIG5hbWVzXG4gIHZhciB0bXBfYXJyID0gW107XG4gIF8uZWFjaChjb2xfbm9kZXMsIGZ1bmN0aW9uKG5vZGUpIHtcbiAgICB0bXBfYXJyLnB1c2gobm9kZS5uYW1lKTtcbiAgfSk7XG5cbiAgLy8gZmluZCBpbmRleFxuICB2YXIgaW5zdF9jb2wgPSBfLmluZGV4T2YodG1wX2FyciwgaW5zdF90ZXJtKTtcblxuICAvLyBnYXRoZXIgdGhlIHZhbHVlcyBvZiB0aGUgaW5wdXQgZ2VuZXNcbiAgdG1wX2FyciA9IFtdO1xuICBfLmVhY2gocm93X25vZGVzLCBmdW5jdGlvbihub2RlLCBpbmRleCkge1xuICAgIHRtcF9hcnIucHVzaCggbWF0W2luZGV4XS5yb3dfZGF0YVtpbnN0X2NvbF0udmFsdWUpO1xuICB9KTtcblxuICAvLyBzb3J0IHRoZSBjb2xzXG4gIHZhciB0bXBfc29ydCA9IGQzLnJhbmdlKHRtcF9hcnIubGVuZ3RoKS5zb3J0KGZ1bmN0aW9uKGEsIGIpIHtcbiAgICByZXR1cm4gdG1wX2FycltiXSAtIHRtcF9hcnJbYV07XG4gIH0pO1xuXG5cbiAgLy8gcmVzb3J0IGNvbHNcbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICBwYXJhbXMubWF0cml4Lnlfc2NhbGUuZG9tYWluKHRtcF9zb3J0KTtcblxuICAvLyByZW9yZGVyXG4gIGlmIChwYXJhbXMubmV0d29ya19kYXRhLmxpbmtzLmxlbmd0aCA+IHBhcmFtcy5tYXRyaXguZGVmX2xhcmdlX21hdHJpeCl7XG4gICAgdmFyIHQgPSB0aGlzLnZpei5nZXRfY2x1c3RfZ3JvdXAoKTtcblxuICAgIC8vIHJlb3JkZXIgcm93X2xhYmVsX3RyaWFuZ2xlIGdyb3Vwc1xuICAgIGQzLnNlbGVjdEFsbCgnLnJvd192aXpfZ3JvdXAnKVxuICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsIGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgdmFyIGluc3RfaW5kZXggPSBfLmluZGV4T2Yocm93X25vZGVzX25hbWVzLCBkLm5hbWUpO1xuICAgICAgICByZXR1cm4gJ3RyYW5zbGF0ZSgwLCcgKyBwYXJhbXMubWF0cml4Lnlfc2NhbGUoaW5zdF9pbmRleCkgKyAnKSc7XG4gICAgICB9KTtcblxuICAgIC8vIE1vdmUgUm93IExhYmVsc1xuICAgIGQzLnNlbGVjdChwYXJhbXMucm9vdCsnIC5yb3dfbGFiZWxfem9vbV9jb250YWluZXInKVxuICAgICAgLnNlbGVjdEFsbCgnLnJvd19sYWJlbF90ZXh0JylcbiAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCBmdW5jdGlvbihkKSB7XG4gICAgICAgIHZhciBpbnN0X2luZGV4ID0gXy5pbmRleE9mKHJvd19ub2Rlc19uYW1lcywgZC5uYW1lKTtcbiAgICAgICAgcmV0dXJuICd0cmFuc2xhdGUoMCwnICsgcGFyYW1zLm1hdHJpeC55X3NjYWxlKGluc3RfaW5kZXgpICsgJyknO1xuICAgICAgfSk7XG5cbiAgfSBlbHNlIHtcblxuICAgIHZhciB0ID0gdGhpcy52aXouZ2V0X2NsdXN0X2dyb3VwKCkudHJhbnNpdGlvbigpLmR1cmF0aW9uKDI1MDApO1xuXG4gICAgLy8gcmVvcmRlciByb3dfbGFiZWxfdHJpYW5nbGUgZ3JvdXBzXG4gICAgZDMuc2VsZWN0QWxsKCcucm93X3Zpel9ncm91cCcpXG4gICAgICAudHJhbnNpdGlvbigpLmR1cmF0aW9uKDI1MDApXG4gICAgICAuYXR0cigndHJhbnNmb3JtJywgZnVuY3Rpb24oZCkge1xuICAgICAgICB2YXIgaW5zdF9pbmRleCA9IF8uaW5kZXhPZihyb3dfbm9kZXNfbmFtZXMsIGQubmFtZSk7XG4gICAgICAgIHJldHVybiAndHJhbnNsYXRlKDAsJyArIHBhcmFtcy5tYXRyaXgueV9zY2FsZShpbnN0X2luZGV4KSArICcpJztcbiAgICAgIH0pO1xuXG4gICAgLy8gTW92ZSBSb3cgTGFiZWxzXG4gICAgZDMuc2VsZWN0KHBhcmFtcy5yb290KycgLnJvd19sYWJlbF96b29tX2NvbnRhaW5lcicpXG4gICAgICAuc2VsZWN0QWxsKCcucm93X2xhYmVsX3RleHQnKVxuICAgICAgLnRyYW5zaXRpb24oKS5kdXJhdGlvbigyNTAwKVxuICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsIGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgdmFyIGluc3RfaW5kZXggPSBfLmluZGV4T2Yocm93X25vZGVzX25hbWVzLCBkLm5hbWUpO1xuICAgICAgICByZXR1cm4gJ3RyYW5zbGF0ZSgwLCcgKyBwYXJhbXMubWF0cml4Lnlfc2NhbGUoaW5zdF9pbmRleCkgKyAnKSc7XG4gICAgICB9KTtcbiAgfVxuXG4gIC8vIHJlb3JkZXIgbWF0cml4IHJvd3NcbiAgdC5zZWxlY3RBbGwoJy5yb3cnKVxuICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCBmdW5jdGlvbihkKSB7XG4gICAgICB2YXIgaW5zdF9pbmRleCA9IF8uaW5kZXhPZihyb3dfbm9kZXNfbmFtZXMsIGQubmFtZSk7XG4gICAgICByZXR1cm4gJ3RyYW5zbGF0ZSgwLCcgKyBwYXJhbXMubWF0cml4Lnlfc2NhbGUoaW5zdF9pbmRleCkgKyAnKSc7XG4gICAgfSk7XG5cblxuICAvLyBoaWdobGlnaHQgc2VsZWN0ZWQgY29sdW1uXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgLy8gdW5oaWxpZ2h0IGFuZCB1bmJvbGQgYWxsIGNvbHVtbnMgKGFscmVhZHkgdW5ib2xkZWQgZWFybGllcilcbiAgZDMuc2VsZWN0QWxsKCcuY29sX2xhYmVsX3RleHQnKVxuICAgIC5zZWxlY3QoJy5oaWdobGlnaHRfcmVjdCcpXG4gICAgLnN0eWxlKCdvcGFjaXR5JywgMCk7XG4gIC8vIGhpZ2hsaWdodCBjb2x1bW4gbmFtZVxuICBkMy5zZWxlY3QodGhpcylcbiAgICAuc2VsZWN0KCcuaGlnaGxpZ2h0X3JlY3QnKVxuICAgIC5zdHlsZSgnb3BhY2l0eScsIDEpO1xuXG4gIC8vIHJlZGVmaW5lIHggYW5kIHkgcG9zaXRpb25zXG4gIF8uZWFjaChwYXJhbXMubmV0d29ya19kYXRhLmxpbmtzLCBmdW5jdGlvbihkKXtcbiAgICBkLnggPSBwYXJhbXMubWF0cml4Lnhfc2NhbGUoZC50YXJnZXQpO1xuICAgIGQueSA9IHBhcmFtcy5tYXRyaXgueV9zY2FsZShkLnNvdXJjZSk7XG4gIH0pO1xuXG4gIC8vIHJlbmFtZSBjcm9zc2ZpbHRlclxuICBwYXJhbXMuY2YgPSB7fTtcbiAgcGFyYW1zLmNmLmxpbmtzID0gY3Jvc3NmaWx0ZXIocGFyYW1zLm5ldHdvcmtfZGF0YS5saW5rcyk7XG4gIHBhcmFtcy5jZi5kaW1feCA9IHBhcmFtcy5jZi5saW5rcy5kaW1lbnNpb24oZnVuY3Rpb24oZCl7cmV0dXJuIGQueDt9KTtcbiAgcGFyYW1zLmNmLmRpbV95ID0gcGFyYW1zLmNmLmxpbmtzLmRpbWVuc2lvbihmdW5jdGlvbihkKXtyZXR1cm4gZC55O30pO1xuXG4gIHJlcG9zaXRpb25fdGlsZV9oaWdobGlnaHQoKTtcblxuICAvLyBiYWNrdXAgYWxsb3cgcHJvZ3JhbW1hdGljIHpvb21cbiAgc2V0VGltZW91dChlbmRfcmVvcmRlciwgMjUwMCk7XG59O1xuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogc3JjL3Jlb3JkZXIvY29sX3Jlb3JkZXIuanNcbiAqKi8iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRkE7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFYQTtBQUNBOzs7QUFEQTtBQWtCQTtBQUNBO0FBREE7QUFDQTs7QUFuQkE7QUFDQTs7QUFEQTtBQTJCQTtBQUNBO0FBREE7QUFDQTs7QUE1QkE7QUFpQ0E7QUFEQTtBQUNBOzs7QUFqQ0E7QUFDQTs7QUFEQTtBQTJDQTtBQUNBOztBQUZBO0FBTUE7QUFDQTtBQUZBO0FBQ0E7O0FBTkE7QUFjQTtBQUNBO0FBRkE7QUFiQTtBQUNBO0FBbUJBO0FBQ0E7O0FBSEE7QUFRQTtBQUNBO0FBRkE7QUFDQTs7QUFSQTtBQWlCQTtBQUNBO0FBRkE7QUFsQ0E7QUFDQTs7QUEzQ0E7QUFxRkE7QUFDQTtBQUZBO0FBQ0E7Ozs7QUFyRkE7O0FBQUE7QUFDQTs7QUFEQTtBQXVHQTtBQUNBO0FBRkE7QUFDQTs7QUF2R0E7QUE2R0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7O0FBbEhBO0FBQUEiLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 33 */
/***/ function(module, exports, __webpack_require__) {

	eval("var Params = __webpack_require__(1);\nmodule.exports = function () {\n  var params = Params.get();\n\n  // super col title\n  /////////////////////////////////////\n  // add super column title background\n  d3.select(params.viz.viz_svg).append('rect').attr('fill', params.viz.background_color).attr('height', params.labels.super_label_width + 'px').attr('width', '3000px').classed('super_col_bkg', true).classed('white_bars', true).attr('transform', 'translate(0,' + params.viz.grey_border_width + ')');\n\n  // super col title\n  d3.select(params.viz.viz_svg).append('text').attr('class', 'super_col').text(params.labels.super.col).attr('text-anchor', 'center').attr('transform', function () {\n\n    var inst_text_width = d3.select(this)[0][0].getBBox().width;\n\n    var inst_x = params.viz.clust.dim.width / 2 + params.norm_label.width.row - inst_text_width / 2;\n    var inst_y = params.labels.super_label_width - params.viz.uni_margin;\n    return 'translate(' + inst_x + ',' + inst_y + ')';\n  }).style('font-size', function () {\n    var inst_font_size = 14 * params.labels.super_label_scale;\n    return inst_font_size + 'px';\n  }).style('font-weight', 300);\n\n  // super row title\n  /////////////////////////////////////\n  d3.select(params.viz.viz_svg).append('rect').attr('fill', params.viz.background_color).attr('width', params.labels.super_label_width + 'px').attr('height', '3000px').classed('super_row_bkg', true).classed('white_bars', true).attr('transform', 'translate(' + params.viz.grey_border_width + ',0)');\n\n  // append super title row group\n  // this is used to separate translation from rotation\n  d3.select(params.viz.viz_svg).append('g').classed('super_row', true).attr('transform', function () {\n    // position in the middle of the clustergram\n    var inst_x = params.labels.super_label_width - params.viz.uni_margin;\n    var inst_y = params.viz.clust.dim.height / 2 + params.norm_label.width.col;\n    return 'translate(' + inst_x + ',' + inst_y + ')';\n  });\n\n  // super row label (rotate the already translated title )\n  d3.select(params.root + ' .super_row').append('text').text(params.labels.super.row).attr('text-anchor', 'center').attr('transform', function () {\n    var inst_text_width = d3.select(this)[0][0].getBBox().width;\n    var inst_x_offset = inst_text_width / 2 + params.norm_label.width.col;\n    var inst_offset = 'translate(0,' + inst_x_offset + '), rotate(-90)';\n    return inst_offset;\n  }).style('font-size', function () {\n    var inst_font_size = 14 * params.labels.super_label_scale;\n    return inst_font_size + 'px';\n  }).style('font-weight', 300);\n};//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL2xhYmVscy9zdXBlcl9sYWJlbHMuanM/YjgxNyJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgUGFyYW1zID0gcmVxdWlyZSgnLi4vcGFyYW1zJyk7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuICB2YXIgcGFyYW1zID0gUGFyYW1zLmdldCgpO1xuXG4gIC8vIHN1cGVyIGNvbCB0aXRsZVxuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gIC8vIGFkZCBzdXBlciBjb2x1bW4gdGl0bGUgYmFja2dyb3VuZFxuICBkMy5zZWxlY3QocGFyYW1zLnZpei52aXpfc3ZnKVxuICAgIC5hcHBlbmQoJ3JlY3QnKVxuICAgIC5hdHRyKCdmaWxsJywgcGFyYW1zLnZpei5iYWNrZ3JvdW5kX2NvbG9yKVxuICAgIC5hdHRyKCdoZWlnaHQnLCBwYXJhbXMubGFiZWxzLnN1cGVyX2xhYmVsX3dpZHRoICsgJ3B4JylcbiAgICAuYXR0cignd2lkdGgnLCAnMzAwMHB4JylcbiAgICAuY2xhc3NlZCgnc3VwZXJfY29sX2JrZycsdHJ1ZSlcbiAgICAuY2xhc3NlZCgnd2hpdGVfYmFycycsdHJ1ZSlcbiAgICAuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgwLCcgKyBwYXJhbXMudml6LmdyZXlfYm9yZGVyX3dpZHRoICsgJyknKTtcblxuICAvLyBzdXBlciBjb2wgdGl0bGVcbiAgZDMuc2VsZWN0KHBhcmFtcy52aXoudml6X3N2ZylcbiAgICAuYXBwZW5kKCd0ZXh0JylcbiAgICAuYXR0cignY2xhc3MnLCAnc3VwZXJfY29sJylcbiAgICAudGV4dChwYXJhbXMubGFiZWxzLnN1cGVyLmNvbClcbiAgICAuYXR0cigndGV4dC1hbmNob3InLCAnY2VudGVyJylcbiAgICAuYXR0cigndHJhbnNmb3JtJywgZnVuY3Rpb24gKCkge1xuXG4gICAgICB2YXIgaW5zdF90ZXh0X3dpZHRoID0gZDMuc2VsZWN0KHRoaXMpWzBdWzBdXG4gICAgICAgIC5nZXRCQm94KCkud2lkdGg7XG5cbiAgICAgIHZhciBpbnN0X3ggPSBwYXJhbXMudml6LmNsdXN0LmRpbS53aWR0aCAvIDIgKyBwYXJhbXMubm9ybV9sYWJlbC53aWR0aFxuICAgICAgICAgIC5yb3cgLSBpbnN0X3RleHRfd2lkdGggLyAyO1xuICAgICAgdmFyIGluc3RfeSA9IHBhcmFtcy5sYWJlbHMuc3VwZXJfbGFiZWxfd2lkdGggLSBwYXJhbXMudml6LnVuaV9tYXJnaW47XG4gICAgICByZXR1cm4gJ3RyYW5zbGF0ZSgnICsgaW5zdF94ICsgJywnICsgaW5zdF95ICsgJyknO1xuICAgIH0pXG4gICAgLnN0eWxlKCdmb250LXNpemUnLCBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgaW5zdF9mb250X3NpemUgPSAxNCAqIHBhcmFtcy5sYWJlbHMuc3VwZXJfbGFiZWxfc2NhbGU7XG4gICAgICByZXR1cm4gaW5zdF9mb250X3NpemUgKyAncHgnO1xuICAgIH0pXG4gICAgLnN0eWxlKCdmb250LXdlaWdodCcsIDMwMCk7XG5cbiAgLy8gc3VwZXIgcm93IHRpdGxlXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgZDMuc2VsZWN0KHBhcmFtcy52aXoudml6X3N2ZylcbiAgICAuYXBwZW5kKCdyZWN0JylcbiAgICAuYXR0cignZmlsbCcsIHBhcmFtcy52aXouYmFja2dyb3VuZF9jb2xvcilcbiAgICAuYXR0cignd2lkdGgnLCBwYXJhbXMubGFiZWxzLnN1cGVyX2xhYmVsX3dpZHRoICsgJ3B4JylcbiAgICAuYXR0cignaGVpZ2h0JywgJzMwMDBweCcpXG4gICAgLmNsYXNzZWQoJ3N1cGVyX3Jvd19ia2cnLHRydWUpXG4gICAgLmNsYXNzZWQoJ3doaXRlX2JhcnMnLHRydWUpXG4gICAgLmF0dHIoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoJyArIHBhcmFtcy52aXouZ3JleV9ib3JkZXJfd2lkdGggKyAnLDApJyk7XG5cbiAgLy8gYXBwZW5kIHN1cGVyIHRpdGxlIHJvdyBncm91cFxuICAvLyB0aGlzIGlzIHVzZWQgdG8gc2VwYXJhdGUgdHJhbnNsYXRpb24gZnJvbSByb3RhdGlvblxuICBkMy5zZWxlY3QocGFyYW1zLnZpei52aXpfc3ZnKVxuICAgIC5hcHBlbmQoJ2cnKVxuICAgIC5jbGFzc2VkKCdzdXBlcl9yb3cnLHRydWUpXG4gICAgLmF0dHIoJ3RyYW5zZm9ybScsIGZ1bmN0aW9uICgpIHtcbiAgICAgIC8vIHBvc2l0aW9uIGluIHRoZSBtaWRkbGUgb2YgdGhlIGNsdXN0ZXJncmFtXG4gICAgICB2YXIgaW5zdF94ID0gcGFyYW1zLmxhYmVscy5zdXBlcl9sYWJlbF93aWR0aCAtIHBhcmFtcy52aXoudW5pX21hcmdpbjtcbiAgICAgIHZhciBpbnN0X3kgPSBwYXJhbXMudml6LmNsdXN0LmRpbS5oZWlnaHQgLyAyICsgcGFyYW1zLm5vcm1fbGFiZWwud2lkdGhcbiAgICAgICAgICAuY29sO1xuICAgICAgcmV0dXJuICd0cmFuc2xhdGUoJyArIGluc3RfeCArICcsJyArIGluc3RfeSArICcpJztcbiAgICB9KTtcblxuICAvLyBzdXBlciByb3cgbGFiZWwgKHJvdGF0ZSB0aGUgYWxyZWFkeSB0cmFuc2xhdGVkIHRpdGxlIClcbiAgZDMuc2VsZWN0KHBhcmFtcy5yb290KycgLnN1cGVyX3JvdycpXG4gICAgLmFwcGVuZCgndGV4dCcpXG4gICAgLnRleHQocGFyYW1zLmxhYmVscy5zdXBlci5yb3cpXG4gICAgLmF0dHIoJ3RleHQtYW5jaG9yJywgJ2NlbnRlcicpXG4gICAgLmF0dHIoJ3RyYW5zZm9ybScsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBpbnN0X3RleHRfd2lkdGggPSBkMy5zZWxlY3QodGhpcylbMF1bMF0uZ2V0QkJveCgpLndpZHRoO1xuICAgICAgdmFyIGluc3RfeF9vZmZzZXQgPSBpbnN0X3RleHRfd2lkdGggLyAyICsgcGFyYW1zLm5vcm1fbGFiZWwud2lkdGguY29sO1xuICAgICAgdmFyIGluc3Rfb2Zmc2V0ID0gJ3RyYW5zbGF0ZSgwLCcgKyBpbnN0X3hfb2Zmc2V0ICsgJyksIHJvdGF0ZSgtOTApJztcbiAgICAgIHJldHVybiBpbnN0X29mZnNldDtcbiAgICB9KVxuICAgIC5zdHlsZSgnZm9udC1zaXplJywgZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGluc3RfZm9udF9zaXplID0gMTQgKiBwYXJhbXMubGFiZWxzLnN1cGVyX2xhYmVsX3NjYWxlO1xuICAgICAgcmV0dXJuIGluc3RfZm9udF9zaXplICsgJ3B4JztcbiAgICB9KVxuICAgIC5zdHlsZSgnZm9udC13ZWlnaHQnLCAzMDApO1xufTtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIHNyYy9sYWJlbHMvc3VwZXJfbGFiZWxzLmpzXG4gKiovIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTs7OztBQUZBO0FBQ0E7O0FBREE7QUFDQTtBQXNCQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBUkE7QUFXQTtBQUNBO0FBRkE7QUFDQTs7O0FBaENBO0FBQ0E7OztBQURBOztBQXVEQTtBQUNBO0FBRUE7QUFMQTtBQUNBOztBQXREQTtBQW1FQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBT0E7QUFDQTtBQUZBO0FBeEVBIiwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 34 */
/***/ function(module, exports, __webpack_require__) {

	eval("var Params = __webpack_require__(1);\n/* Spillover Module\n*/\nmodule.exports = function (container_all_col) {\n  var params = Params.get();\n  // make spillover protection divs\n  make(params, container_all_col);\n\n  function make(params, container_all_col) {\n    // Spillover Protection\n    //////////////////////////\n\n    // hide spillover from slanted column labels on right side\n    container_all_col.append('path').style('stroke-width', '0')\n    // mini-language for drawing path in d3, used to draw triangle\n    .attr('d', 'M 0,0 L 500,-500, L 500,0 Z').attr('fill', params.viz.background_color) //!! prog_colors\n    .attr('class', 'right_slant_triangle').attr('transform', 'translate(' + params.viz.clust.dim.width + ',' + params.norm_label.width.col + ')');\n\n    // hide spillover from slanted column labels on left side\n    container_all_col.append('path').style('stroke-width', '0')\n    // mini-language for drawing path in d3, used to draw triangle\n    .attr('d', 'M 0,0 L 500,-500, L 0,-500 Z').attr('fill', params.viz.background_color).attr('class', 'left_slant_triangle')\n    // shift left by 1 px to prevent cutting off labels\n    .attr('transform', 'translate(-1,' + params.norm_label.width.col + ')');\n\n    // top corner rect\n    ///////////////////////////////\n    // white rect to cover excess labels\n    d3.select(params.viz.viz_svg).append('rect').attr('fill', params.viz.background_color) //!! prog_colors\n    .attr('width', params.viz.clust.margin.left).attr('height', params.viz.clust.margin.top).attr('class', 'top_left_white');\n\n    // hide spillover from right\n    d3.select(params.viz.viz_svg).append('rect').attr('fill', params.viz.background_color) //!! prog_colors\n    .attr('width', '300px').attr('height', '3000px').attr('transform', function () {\n      var tmp_left = params.viz.clust.margin.left + params.viz.clust.dim.width;\n      var tmp_top = params.norm_label.margin.top + params.norm_label.width.col;\n      return 'translate(' + tmp_left + ',' + tmp_top + ')';\n    }).attr('class', 'white_bars').attr('class', 'right_spillover');\n\n    // white border bottom - prevent clustergram from hitting border\n    ///////////////////////////////////////////////////////////////////\n    d3.select(params.viz.viz_svg).append('rect').attr('class', 'bottom_spillover').attr('fill', params.viz.background_color) //!! prog_colors\n    .attr('width', params.viz.svg_dim.width)\n    // make this border twice the width of the grey border\n    .attr('height', 2 * params.viz.grey_border_width).attr('transform', function () {\n      // shift up enough to show the entire border width\n      var inst_offset = params.viz.svg_dim.height - 3 * params.viz.grey_border_width;\n      return 'translate(0,' + inst_offset + ')';\n    });\n  }\n};//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzQuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL3NwaWxsb3Zlci5qcz9mNTBhIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBQYXJhbXMgPSByZXF1aXJlKCcuL3BhcmFtcycpO1xuLyogU3BpbGxvdmVyIE1vZHVsZVxuKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oY29udGFpbmVyX2FsbF9jb2wpIHtcbiAgdmFyIHBhcmFtcyA9IFBhcmFtcy5nZXQoKTtcbiAgLy8gbWFrZSBzcGlsbG92ZXIgcHJvdGVjdGlvbiBkaXZzXG4gIG1ha2UocGFyYW1zLCBjb250YWluZXJfYWxsX2NvbCk7XG5cbiAgZnVuY3Rpb24gbWFrZSggcGFyYW1zLCBjb250YWluZXJfYWxsX2NvbCApe1xuICAgIC8vIFNwaWxsb3ZlciBQcm90ZWN0aW9uXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICAgIC8vIGhpZGUgc3BpbGxvdmVyIGZyb20gc2xhbnRlZCBjb2x1bW4gbGFiZWxzIG9uIHJpZ2h0IHNpZGVcbiAgICBjb250YWluZXJfYWxsX2NvbFxuICAgICAgLmFwcGVuZCgncGF0aCcpXG4gICAgICAuc3R5bGUoJ3N0cm9rZS13aWR0aCcsICcwJylcbiAgICAgIC8vIG1pbmktbGFuZ3VhZ2UgZm9yIGRyYXdpbmcgcGF0aCBpbiBkMywgdXNlZCB0byBkcmF3IHRyaWFuZ2xlXG4gICAgICAuYXR0cignZCcsICdNIDAsMCBMIDUwMCwtNTAwLCBMIDUwMCwwIFonKVxuICAgICAgLmF0dHIoJ2ZpbGwnLCBwYXJhbXMudml6LmJhY2tncm91bmRfY29sb3IpIC8vISEgcHJvZ19jb2xvcnNcbiAgICAgIC5hdHRyKCdjbGFzcycsICdyaWdodF9zbGFudF90cmlhbmdsZScpXG4gICAgICAuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgnICsgcGFyYW1zLnZpei5jbHVzdC5kaW0ud2lkdGggKyAnLCcgK1xuICAgICAgcGFyYW1zLm5vcm1fbGFiZWwud2lkdGguY29sICsgJyknKTtcblxuICAgIC8vIGhpZGUgc3BpbGxvdmVyIGZyb20gc2xhbnRlZCBjb2x1bW4gbGFiZWxzIG9uIGxlZnQgc2lkZVxuICAgIGNvbnRhaW5lcl9hbGxfY29sXG4gICAgICAuYXBwZW5kKCdwYXRoJylcbiAgICAgIC5zdHlsZSgnc3Ryb2tlLXdpZHRoJywgJzAnKVxuICAgICAgLy8gbWluaS1sYW5ndWFnZSBmb3IgZHJhd2luZyBwYXRoIGluIGQzLCB1c2VkIHRvIGRyYXcgdHJpYW5nbGVcbiAgICAgIC5hdHRyKCdkJywgJ00gMCwwIEwgNTAwLC01MDAsIEwgMCwtNTAwIFonKVxuICAgICAgLmF0dHIoJ2ZpbGwnLCBwYXJhbXMudml6LmJhY2tncm91bmRfY29sb3IpXG4gICAgICAuYXR0cignY2xhc3MnLCAnbGVmdF9zbGFudF90cmlhbmdsZScpXG4gICAgICAvLyBzaGlmdCBsZWZ0IGJ5IDEgcHggdG8gcHJldmVudCBjdXR0aW5nIG9mZiBsYWJlbHNcbiAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKC0xLCcgKyBwYXJhbXMubm9ybV9sYWJlbC53aWR0aC5jb2wgK1xuICAgICAgJyknKTtcblxuICAgIC8vIHRvcCBjb3JuZXIgcmVjdFxuICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAvLyB3aGl0ZSByZWN0IHRvIGNvdmVyIGV4Y2VzcyBsYWJlbHNcbiAgICBkMy5zZWxlY3QocGFyYW1zLnZpei52aXpfc3ZnKVxuICAgICAgLmFwcGVuZCgncmVjdCcpXG4gICAgICAuYXR0cignZmlsbCcsIHBhcmFtcy52aXouYmFja2dyb3VuZF9jb2xvcikgLy8hISBwcm9nX2NvbG9yc1xuICAgICAgLmF0dHIoJ3dpZHRoJywgcGFyYW1zLnZpei5jbHVzdC5tYXJnaW4ubGVmdClcbiAgICAgIC5hdHRyKCdoZWlnaHQnLCBwYXJhbXMudml6LmNsdXN0Lm1hcmdpbi50b3ApXG4gICAgICAuYXR0cignY2xhc3MnLCAndG9wX2xlZnRfd2hpdGUnKTtcblxuICAgIC8vIGhpZGUgc3BpbGxvdmVyIGZyb20gcmlnaHRcbiAgICBkMy5zZWxlY3QocGFyYW1zLnZpei52aXpfc3ZnKVxuICAgICAgLmFwcGVuZCgncmVjdCcpXG4gICAgICAuYXR0cignZmlsbCcsIHBhcmFtcy52aXouYmFja2dyb3VuZF9jb2xvcikgLy8hISBwcm9nX2NvbG9yc1xuICAgICAgLmF0dHIoJ3dpZHRoJywgJzMwMHB4JylcbiAgICAgIC5hdHRyKCdoZWlnaHQnLCAnMzAwMHB4JylcbiAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHRtcF9sZWZ0ID0gcGFyYW1zLnZpei5jbHVzdC5tYXJnaW4ubGVmdCArIHBhcmFtcy52aXouY2x1c3QuZGltLndpZHRoO1xuICAgICAgICB2YXIgdG1wX3RvcCA9IHBhcmFtcy5ub3JtX2xhYmVsLm1hcmdpbi50b3AgKyBwYXJhbXMubm9ybV9sYWJlbC53aWR0aFxuICAgICAgICAgIC5jb2w7XG4gICAgICAgIHJldHVybiAndHJhbnNsYXRlKCcgKyB0bXBfbGVmdCArICcsJyArIHRtcF90b3AgKyAnKSc7XG4gICAgICB9KVxuICAgICAgLmF0dHIoJ2NsYXNzJywgJ3doaXRlX2JhcnMnKVxuICAgICAgLmF0dHIoJ2NsYXNzJywncmlnaHRfc3BpbGxvdmVyJyk7XG5cbiAgICAvLyB3aGl0ZSBib3JkZXIgYm90dG9tIC0gcHJldmVudCBjbHVzdGVyZ3JhbSBmcm9tIGhpdHRpbmcgYm9yZGVyXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAgIGQzLnNlbGVjdChwYXJhbXMudml6LnZpel9zdmcpXG4gICAgICAuYXBwZW5kKCdyZWN0JylcbiAgICAgIC5hdHRyKCdjbGFzcycsJ2JvdHRvbV9zcGlsbG92ZXInKVxuICAgICAgLmF0dHIoJ2ZpbGwnLCBwYXJhbXMudml6LmJhY2tncm91bmRfY29sb3IpIC8vISEgcHJvZ19jb2xvcnNcbiAgICAgIC5hdHRyKCd3aWR0aCcsIHBhcmFtcy52aXouc3ZnX2RpbS53aWR0aClcbiAgICAgIC8vIG1ha2UgdGhpcyBib3JkZXIgdHdpY2UgdGhlIHdpZHRoIG9mIHRoZSBncmV5IGJvcmRlclxuICAgICAgLmF0dHIoJ2hlaWdodCcsIDIgKiBwYXJhbXMudml6LmdyZXlfYm9yZGVyX3dpZHRoKVxuICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyBzaGlmdCB1cCBlbm91Z2ggdG8gc2hvdyB0aGUgZW50aXJlIGJvcmRlciB3aWR0aFxuICAgICAgICB2YXIgaW5zdF9vZmZzZXQgPSBwYXJhbXMudml6LnN2Z19kaW0uaGVpZ2h0IC0gMyAqIHBhcmFtcy52aXouZ3JleV9ib3JkZXJfd2lkdGg7XG4gICAgICAgIHJldHVybiAndHJhbnNsYXRlKDAsJyArIGluc3Rfb2Zmc2V0ICsgJyknO1xuICAgICAgfSk7XG4gIH1cbn07XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiBzcmMvc3BpbGxvdmVyLmpzXG4gKiovIl0sIm1hcHBpbmdzIjoiQUFBQTs7O0FBR0E7QUFDQTs7QUFEQTtBQUNBO0FBSUE7Ozs7O0FBS0E7O0FBSUE7QUFKQTtBQUNBOztBQU5BOztBQW9CQTs7QUFJQTtBQUNBOzs7O0FBekJBO0FBOEJBO0FBQ0E7O0FBL0JBO0FBc0NBO0FBTUE7QUFDQTtBQUVBO0FBSkE7QUFDQTs7O0FBNUNBO0FBc0RBOztBQUFBOztBQVNBO0FBQ0E7QUFIQTtBQTdEQTtBQUxBIiwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 35 */
/***/ function(module, exports, __webpack_require__) {

	eval("var Params = __webpack_require__(1);\nvar two_translate_zoom = __webpack_require__(36);\n/* Handles searching rows or columns.\n !! need to generalize to column and row\n * ----------------------------------------------------------------------- */\nmodule.exports = function (nodes, prop) {\n  var params = Params.get();\n\n  /* Collect entities from row or columns.\n   */\n  var entities = [],\n      i;\n\n  for (i = 0; i < nodes.length; i++) {\n    entities.push(nodes[i][prop]);\n  }\n\n  /* Find a gene (row) in the clustergram.\n   */\n  function find_entities(search_term) {\n    if (entities.indexOf(search_term) !== -1) {\n      un_highlight_entities();\n      zoom_and_highlight_found_entity(search_term);\n      highlight_entity(search_term);\n    }\n  }\n\n  /* Zoom into and highlight the found the gene\n   */\n  function zoom_and_highlight_found_entity(search_term) {\n    var idx = _.indexOf(entities, search_term),\n        inst_y_pos = params.matrix.y_scale(idx),\n        pan_dy = params.viz.clust.dim.height / 2 - inst_y_pos;\n\n    two_translate_zoom(params, 0, pan_dy, params.viz.zoom_switch);\n  }\n\n  function un_highlight_entities() {\n    d3.selectAll('.row_label_text').select('rect').style('opacity', 0);\n  }\n\n  function highlight_entity(search_term) {\n\n    d3.selectAll('.row_label_text').filter(function (d) {\n      return d[prop] === search_term;\n    }).select('rect').style('opacity', 1);\n  }\n\n  /* Returns all the genes in the clustergram.\n   */\n  function get_entities() {\n    return entities;\n  }\n\n  return {\n    find_entities: find_entities,\n    get_entities: get_entities\n  };\n};//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzUuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL3NlYXJjaC5qcz9mOWQwIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBQYXJhbXMgPSByZXF1aXJlKCcuL3BhcmFtcycpO1xudmFyIHR3b190cmFuc2xhdGVfem9vbSA9IHJlcXVpcmUoJy4vdHdvX3RyYW5zbGF0ZV96b29tJyk7XG4vKiBIYW5kbGVzIHNlYXJjaGluZyByb3dzIG9yIGNvbHVtbnMuXG4gISEgbmVlZCB0byBnZW5lcmFsaXplIHRvIGNvbHVtbiBhbmQgcm93XG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihub2RlcywgcHJvcCkge1xuICB2YXIgcGFyYW1zID0gUGFyYW1zLmdldCgpO1xuXG4gIC8qIENvbGxlY3QgZW50aXRpZXMgZnJvbSByb3cgb3IgY29sdW1ucy5cbiAgICovXG4gIHZhciBlbnRpdGllcyA9IFtdLFxuICAgIGk7XG5cbiAgZm9yIChpID0gMDsgaSA8IG5vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgZW50aXRpZXMucHVzaChub2Rlc1tpXVtwcm9wXSk7XG4gIH1cblxuICAvKiBGaW5kIGEgZ2VuZSAocm93KSBpbiB0aGUgY2x1c3RlcmdyYW0uXG4gICAqL1xuICBmdW5jdGlvbiBmaW5kX2VudGl0aWVzKHNlYXJjaF90ZXJtKSB7XG4gICAgaWYgKGVudGl0aWVzLmluZGV4T2Yoc2VhcmNoX3Rlcm0pICE9PSAtMSkge1xuICAgICAgdW5faGlnaGxpZ2h0X2VudGl0aWVzKCk7XG4gICAgICB6b29tX2FuZF9oaWdobGlnaHRfZm91bmRfZW50aXR5KHNlYXJjaF90ZXJtKTtcbiAgICAgIGhpZ2hsaWdodF9lbnRpdHkoc2VhcmNoX3Rlcm0pO1xuICAgIH1cbiAgfVxuXG4gIC8qIFpvb20gaW50byBhbmQgaGlnaGxpZ2h0IHRoZSBmb3VuZCB0aGUgZ2VuZVxuICAgKi9cbiAgZnVuY3Rpb24gem9vbV9hbmRfaGlnaGxpZ2h0X2ZvdW5kX2VudGl0eShzZWFyY2hfdGVybSkge1xuICAgIHZhciBpZHggPSBfLmluZGV4T2YoZW50aXRpZXMsIHNlYXJjaF90ZXJtKSxcbiAgICAgIGluc3RfeV9wb3MgPSBwYXJhbXMubWF0cml4Lnlfc2NhbGUoaWR4KSxcbiAgICAgIHBhbl9keSA9IHBhcmFtcy52aXouY2x1c3QuZGltLmhlaWdodCAvIDIgLSBpbnN0X3lfcG9zO1xuXG4gICAgdHdvX3RyYW5zbGF0ZV96b29tKHBhcmFtcywgMCwgcGFuX2R5LCBwYXJhbXMudml6Lnpvb21fc3dpdGNoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHVuX2hpZ2hsaWdodF9lbnRpdGllcygpIHtcbiAgICBkMy5zZWxlY3RBbGwoJy5yb3dfbGFiZWxfdGV4dCcpLnNlbGVjdCgncmVjdCcpLnN0eWxlKCdvcGFjaXR5JywgMCk7XG4gIH1cblxuICBmdW5jdGlvbiBoaWdobGlnaHRfZW50aXR5KHNlYXJjaF90ZXJtKSB7XG5cbiAgICBkMy5zZWxlY3RBbGwoJy5yb3dfbGFiZWxfdGV4dCcpXG4gICAgICAuZmlsdGVyKGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgcmV0dXJuIGRbcHJvcF0gPT09IHNlYXJjaF90ZXJtO1xuICAgICAgfSlcbiAgICAgIC5zZWxlY3QoJ3JlY3QnKVxuICAgICAgLnN0eWxlKCdvcGFjaXR5JywgMSk7XG4gIH1cblxuICAvKiBSZXR1cm5zIGFsbCB0aGUgZ2VuZXMgaW4gdGhlIGNsdXN0ZXJncmFtLlxuICAgKi9cbiAgZnVuY3Rpb24gZ2V0X2VudGl0aWVzKCkge1xuICAgIHJldHVybiBlbnRpdGllcztcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgZmluZF9lbnRpdGllczogZmluZF9lbnRpdGllcyxcbiAgICBnZXRfZW50aXRpZXM6IGdldF9lbnRpdGllc1xuICB9O1xufTtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIHNyYy9zZWFyY2guanNcbiAqKi8iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7Ozs7QUFJQTtBQUNBO0FBQ0E7OztBQUZBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUNBOzs7QUFUQTtBQWVBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFEQTtBQUNBOzs7QUFmQTtBQXlCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFDQTtBQU9BO0FBQ0E7QUFEQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFEQTtBQUhBO0FBQ0E7OztBQXJDQTtBQWlEQTtBQURBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFGQTtBQXBEQSIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ },
/* 36 */
/***/ function(module, exports, __webpack_require__) {

	eval("var Params = __webpack_require__(1);\nvar utils = __webpack_require__(5);\nvar constrain_font_size = __webpack_require__(12);\nvar viz = __webpack_require__(14);\n\nmodule.exports = function (pan_dx, pan_dy, fin_zoom) {\n  var params = Params.get();\n  // get parameters\n  if (!params.viz.run_trans) {\n\n    // define the commonly used variable half_height\n    var half_height = params.viz.clust.dim.height / 2;\n\n    // y pan room, the pan room has to be less than half_height since\n    // zooming in on a gene that is near the top of the clustergram also causes\n    // panning out of the visible region\n    var y_pan_room = half_height / params.viz.zoom_switch;\n\n    // prevent visualization from panning down too much\n    // when zooming into genes near the top of the clustergram\n    if (pan_dy >= half_height - y_pan_room) {\n\n      // explanation of panning rules\n      /////////////////////////////////\n      // prevent the clustergram from panning down too much\n      // if the amount of panning is equal to the half_height then it needs to be reduced\n      // effectively, the the visualization needs to be moved up (negative) by some factor\n      // of the half-width-of-the-visualization.\n      //\n      // If there was no zooming involved, then the\n      // visualization would be centered first, then panned to center the top term\n      // this would require a\n      // correction to re-center it. However, because of the zooming the offset is\n      // reduced by the zoom factor (this is because the panning is occurring on something\n      // that will be zoomed into - this is why the pan_dy value is not scaled in the two\n      // translate transformations, but it has to be scaled afterwards to set the translate\n      // vector)\n      // pan_dy = half_height - (half_height)/params.viz.zoom_switch\n\n      // if pan_dy is greater than the pan room, then panning has to be restricted\n      // start by shifting back up (negative) by half_height/params.viz.zoom_switch then shift back down\n      // by the difference between half_height and pan_dy (so that the top of the clustergram is\n      // visible)\n      var shift_top_viz = half_height - pan_dy;\n      var shift_up_viz = -half_height / params.viz.zoom_switch + shift_top_viz;\n\n      // reduce pan_dy so that the visualization does not get panned to far down\n      pan_dy = pan_dy + shift_up_viz;\n    }\n\n    // prevent visualization from panning up too much\n    // when zooming into genes at the bottom of the clustergram\n    if (pan_dy < -(half_height - y_pan_room)) {\n\n      shift_top_viz = half_height + pan_dy;\n\n      shift_up_viz = half_height / params.viz.zoom_switch - shift_top_viz; //- move_up_one_row;\n\n      // reduce pan_dy so that the visualization does not get panned to far down\n      pan_dy = pan_dy + shift_up_viz;\n    }\n\n    // will improve this !!\n    var zoom_y = fin_zoom;\n    var zoom_x;\n    if (fin_zoom <= params.viz.zoom_switch) {\n      var zoom_x = 1;\n    } else {\n      var zoom_x = fin_zoom / params.viz.zoom_switch;\n    }\n\n    // search duration - the duration of zooming and panning\n    var search_duration = 700;\n\n    // center_y\n    var center_y = -(zoom_y - 1) * half_height;\n\n    // transform clust group\n    ////////////////////////////\n    viz.get_clust_group().transition().duration(search_duration)\n    // first apply the margin transformation\n    // then zoom, then apply the final transformation\n    .attr('transform', 'translate(' + [0, 0 + center_y] + ')' + ' scale(' + zoom_x + ',' + zoom_y + ')' + 'translate(' + [pan_dx, pan_dy] + ')');\n\n    // transform row labels\n    d3.select(params.root + ' .row_label_zoom_container').transition().duration(search_duration).attr('transform', 'translate(' + [0, center_y] + ')' + ' scale(' + zoom_y + ',' + zoom_y + ')' + 'translate(' + [0, pan_dy] + ')');\n\n    // transform row_zoom_container\n    // use the offset saved in params, only zoom in the y direction\n    d3.select(params.root + ' .row_zoom_container').transition().duration(search_duration).attr('transform', 'translate(' + [0, center_y] + ')' + ' scale(' + 1 + ',' + zoom_y + ')' + 'translate(' + [0, pan_dy] + ')');\n\n    // transform col labels\n    d3.select(params.root + ' .col_zoom_container').transition().duration(search_duration).attr('transform', ' scale(' + zoom_x + ',' + zoom_x + ')' + 'translate(' + [pan_dx, 0] + ')');\n\n    // transform col_class\n    d3.select('.col_viz_zoom_container').transition().duration(search_duration).attr('transform', ' scale(' + zoom_x + ',' + 1 + ')' + 'translate(' + [pan_dx, 0] + ')');\n\n    // set y translate: center_y is positive, positive moves the visualization down\n    // the translate vector has the initial margin, the first y centering, and pan_dy\n    // times the scaling zoom_y\n    var net_y_offset = params.viz.clust.margin.top + center_y + pan_dy * zoom_y;\n\n    // reset the zoom translate and zoom\n    params.zoom_behavior.scale(zoom_y);\n\n    var trans = true;\n    constrain_font_size(params, trans);\n\n    // re-size of the highlighting rects\n    /////////////////////////////////////////\n    d3.select(params.root + ' .row_label_zoom_container').each(function () {\n      // get the bounding box of the row label text\n      var bbox = d3.select(this).select('text')[0][0].getBBox();\n\n      // use the bounding box to set the size of the rect\n      d3.select(this).select('rect').attr('x', bbox.x * 0.5).attr('y', 0).attr('width', bbox.width * 0.5).attr('height', params.matrix.y_scale.rangeBand()).style('fill', 'yellow');\n    });\n\n    // column value bars\n    ///////////////////////\n    // reduce the height of the column value bars based on the zoom applied\n    // recalculate the height and divide by the zooming scale\n    // col_label_obj.select('rect')\n    if (utils.has(params.network_data.col_nodes[0], 'value')) {\n\n      d3.selectAll('.col_bars')\n      // .transition()\n      // .duration(search_duration)\n      .attr('width', function (d) {\n        var inst_value = 0;\n        if (d.value > 0) {\n          inst_value = params.labels.bar_scale_col(d.value) / zoom_x;\n        }\n        return inst_value;\n      });\n    }\n\n    if (utils.has(params.network_data.row_nodes[0], 'value')) {\n\n      d3.selectAll('.row_bars').transition().duration(search_duration).attr('width', function (d) {\n        var inst_value = 0;\n        inst_value = params.labels.bar_scale_row(Math.abs(d.value)) / zoom_y;\n        return inst_value;\n      }).attr('x', function (d) {\n        var inst_value = 0;\n        inst_value = -params.labels.bar_scale_row(Math.abs(d.value)) / zoom_y;\n        return inst_value;\n      });\n    }\n  }\n};//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzYuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL3R3b190cmFuc2xhdGVfem9vbS5qcz9kZTA4Il0sInNvdXJjZXNDb250ZW50IjpbInZhciBQYXJhbXMgPSByZXF1aXJlKCcuL3BhcmFtcycpO1xudmFyIHV0aWxzID0gcmVxdWlyZSgnLi91dGlscycpO1xudmFyIGNvbnN0cmFpbl9mb250X3NpemUgPSByZXF1aXJlKCcuL2NvbnN0cmFpbl9mb250X3NpemUnKTtcbnZhciB2aXogPSByZXF1aXJlKCcuL3ZpeicpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHBhbl9keCwgcGFuX2R5LCBmaW5fem9vbSkge1xuICB2YXIgcGFyYW1zID0gUGFyYW1zLmdldCgpO1xuICAvLyBnZXQgcGFyYW1ldGVyc1xuICBpZiAoIXBhcmFtcy52aXoucnVuX3RyYW5zKSB7XG5cbiAgICAvLyBkZWZpbmUgdGhlIGNvbW1vbmx5IHVzZWQgdmFyaWFibGUgaGFsZl9oZWlnaHRcbiAgICB2YXIgaGFsZl9oZWlnaHQgPSBwYXJhbXMudml6LmNsdXN0LmRpbS5oZWlnaHQgLyAyO1xuXG4gICAgLy8geSBwYW4gcm9vbSwgdGhlIHBhbiByb29tIGhhcyB0byBiZSBsZXNzIHRoYW4gaGFsZl9oZWlnaHQgc2luY2VcbiAgICAvLyB6b29taW5nIGluIG9uIGEgZ2VuZSB0aGF0IGlzIG5lYXIgdGhlIHRvcCBvZiB0aGUgY2x1c3RlcmdyYW0gYWxzbyBjYXVzZXNcbiAgICAvLyBwYW5uaW5nIG91dCBvZiB0aGUgdmlzaWJsZSByZWdpb25cbiAgICB2YXIgeV9wYW5fcm9vbSA9IGhhbGZfaGVpZ2h0IC8gcGFyYW1zLnZpei56b29tX3N3aXRjaDtcblxuICAgIC8vIHByZXZlbnQgdmlzdWFsaXphdGlvbiBmcm9tIHBhbm5pbmcgZG93biB0b28gbXVjaFxuICAgIC8vIHdoZW4gem9vbWluZyBpbnRvIGdlbmVzIG5lYXIgdGhlIHRvcCBvZiB0aGUgY2x1c3RlcmdyYW1cbiAgICBpZiAocGFuX2R5ID49IGhhbGZfaGVpZ2h0IC0geV9wYW5fcm9vbSkge1xuXG4gICAgICAvLyBleHBsYW5hdGlvbiBvZiBwYW5uaW5nIHJ1bGVzXG4gICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAgIC8vIHByZXZlbnQgdGhlIGNsdXN0ZXJncmFtIGZyb20gcGFubmluZyBkb3duIHRvbyBtdWNoXG4gICAgICAvLyBpZiB0aGUgYW1vdW50IG9mIHBhbm5pbmcgaXMgZXF1YWwgdG8gdGhlIGhhbGZfaGVpZ2h0IHRoZW4gaXQgbmVlZHMgdG8gYmUgcmVkdWNlZFxuICAgICAgLy8gZWZmZWN0aXZlbHksIHRoZSB0aGUgdmlzdWFsaXphdGlvbiBuZWVkcyB0byBiZSBtb3ZlZCB1cCAobmVnYXRpdmUpIGJ5IHNvbWUgZmFjdG9yXG4gICAgICAvLyBvZiB0aGUgaGFsZi13aWR0aC1vZi10aGUtdmlzdWFsaXphdGlvbi5cbiAgICAgIC8vXG4gICAgICAvLyBJZiB0aGVyZSB3YXMgbm8gem9vbWluZyBpbnZvbHZlZCwgdGhlbiB0aGVcbiAgICAgIC8vIHZpc3VhbGl6YXRpb24gd291bGQgYmUgY2VudGVyZWQgZmlyc3QsIHRoZW4gcGFubmVkIHRvIGNlbnRlciB0aGUgdG9wIHRlcm1cbiAgICAgIC8vIHRoaXMgd291bGQgcmVxdWlyZSBhXG4gICAgICAvLyBjb3JyZWN0aW9uIHRvIHJlLWNlbnRlciBpdC4gSG93ZXZlciwgYmVjYXVzZSBvZiB0aGUgem9vbWluZyB0aGUgb2Zmc2V0IGlzXG4gICAgICAvLyByZWR1Y2VkIGJ5IHRoZSB6b29tIGZhY3RvciAodGhpcyBpcyBiZWNhdXNlIHRoZSBwYW5uaW5nIGlzIG9jY3VycmluZyBvbiBzb21ldGhpbmdcbiAgICAgIC8vIHRoYXQgd2lsbCBiZSB6b29tZWQgaW50byAtIHRoaXMgaXMgd2h5IHRoZSBwYW5fZHkgdmFsdWUgaXMgbm90IHNjYWxlZCBpbiB0aGUgdHdvXG4gICAgICAvLyB0cmFuc2xhdGUgdHJhbnNmb3JtYXRpb25zLCBidXQgaXQgaGFzIHRvIGJlIHNjYWxlZCBhZnRlcndhcmRzIHRvIHNldCB0aGUgdHJhbnNsYXRlXG4gICAgICAvLyB2ZWN0b3IpXG4gICAgICAvLyBwYW5fZHkgPSBoYWxmX2hlaWdodCAtIChoYWxmX2hlaWdodCkvcGFyYW1zLnZpei56b29tX3N3aXRjaFxuXG4gICAgICAvLyBpZiBwYW5fZHkgaXMgZ3JlYXRlciB0aGFuIHRoZSBwYW4gcm9vbSwgdGhlbiBwYW5uaW5nIGhhcyB0byBiZSByZXN0cmljdGVkXG4gICAgICAvLyBzdGFydCBieSBzaGlmdGluZyBiYWNrIHVwIChuZWdhdGl2ZSkgYnkgaGFsZl9oZWlnaHQvcGFyYW1zLnZpei56b29tX3N3aXRjaCB0aGVuIHNoaWZ0IGJhY2sgZG93blxuICAgICAgLy8gYnkgdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiBoYWxmX2hlaWdodCBhbmQgcGFuX2R5IChzbyB0aGF0IHRoZSB0b3Agb2YgdGhlIGNsdXN0ZXJncmFtIGlzXG4gICAgICAvLyB2aXNpYmxlKVxuICAgICAgdmFyIHNoaWZ0X3RvcF92aXogPSBoYWxmX2hlaWdodCAtIHBhbl9keTtcbiAgICAgIHZhciBzaGlmdF91cF92aXogPSAtaGFsZl9oZWlnaHQgLyBwYXJhbXMudml6Lnpvb21fc3dpdGNoICtcbiAgICAgICAgc2hpZnRfdG9wX3ZpejtcblxuICAgICAgLy8gcmVkdWNlIHBhbl9keSBzbyB0aGF0IHRoZSB2aXN1YWxpemF0aW9uIGRvZXMgbm90IGdldCBwYW5uZWQgdG8gZmFyIGRvd25cbiAgICAgIHBhbl9keSA9IHBhbl9keSArIHNoaWZ0X3VwX3ZpejtcbiAgICB9XG5cbiAgICAvLyBwcmV2ZW50IHZpc3VhbGl6YXRpb24gZnJvbSBwYW5uaW5nIHVwIHRvbyBtdWNoXG4gICAgLy8gd2hlbiB6b29taW5nIGludG8gZ2VuZXMgYXQgdGhlIGJvdHRvbSBvZiB0aGUgY2x1c3RlcmdyYW1cbiAgICBpZiAocGFuX2R5IDwgLShoYWxmX2hlaWdodCAtIHlfcGFuX3Jvb20pKSB7XG5cbiAgICAgIHNoaWZ0X3RvcF92aXogPSBoYWxmX2hlaWdodCArIHBhbl9keTtcblxuICAgICAgc2hpZnRfdXBfdml6ID0gaGFsZl9oZWlnaHQgLyBwYXJhbXMudml6Lnpvb21fc3dpdGNoIC0gc2hpZnRfdG9wX3ZpejsgLy8tIG1vdmVfdXBfb25lX3JvdztcblxuICAgICAgLy8gcmVkdWNlIHBhbl9keSBzbyB0aGF0IHRoZSB2aXN1YWxpemF0aW9uIGRvZXMgbm90IGdldCBwYW5uZWQgdG8gZmFyIGRvd25cbiAgICAgIHBhbl9keSA9IHBhbl9keSArIHNoaWZ0X3VwX3ZpejtcblxuICAgIH1cblxuICAgIC8vIHdpbGwgaW1wcm92ZSB0aGlzICEhXG4gICAgdmFyIHpvb21feSA9IGZpbl96b29tO1xuICAgIHZhciB6b29tX3g7XG4gICAgaWYgKGZpbl96b29tIDw9IHBhcmFtcy52aXouem9vbV9zd2l0Y2gpe1xuICAgICAgdmFyIHpvb21feCA9IDE7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciB6b29tX3ggPSBmaW5fem9vbS9wYXJhbXMudml6Lnpvb21fc3dpdGNoO1xuICAgIH1cblxuICAgIC8vIHNlYXJjaCBkdXJhdGlvbiAtIHRoZSBkdXJhdGlvbiBvZiB6b29taW5nIGFuZCBwYW5uaW5nXG4gICAgdmFyIHNlYXJjaF9kdXJhdGlvbiA9IDcwMDtcblxuICAgIC8vIGNlbnRlcl95XG4gICAgdmFyIGNlbnRlcl95ID0gLSh6b29tX3kgLSAxKSAqIGhhbGZfaGVpZ2h0O1xuXG4gICAgLy8gdHJhbnNmb3JtIGNsdXN0IGdyb3VwXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAgIHZpei5nZXRfY2x1c3RfZ3JvdXAoKVxuICAgICAgLnRyYW5zaXRpb24oKS5kdXJhdGlvbihzZWFyY2hfZHVyYXRpb24pXG4gICAgICAvLyBmaXJzdCBhcHBseSB0aGUgbWFyZ2luIHRyYW5zZm9ybWF0aW9uXG4gICAgICAvLyB0aGVuIHpvb20sIHRoZW4gYXBwbHkgdGhlIGZpbmFsIHRyYW5zZm9ybWF0aW9uXG4gICAgICAuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgnICsgWzAsIDAgKyBjZW50ZXJfeV0gKyAnKScgK1xuICAgICAgJyBzY2FsZSgnICsgem9vbV94ICsgJywnICsgem9vbV95ICsgJyknICsgJ3RyYW5zbGF0ZSgnICsgW3Bhbl9keCxcbiAgICAgICAgcGFuX2R5XG4gICAgICBdICsgJyknKTtcblxuICAgIC8vIHRyYW5zZm9ybSByb3cgbGFiZWxzXG4gICAgZDMuc2VsZWN0KHBhcmFtcy5yb290KycgLnJvd19sYWJlbF96b29tX2NvbnRhaW5lcicpXG4gICAgICAudHJhbnNpdGlvbigpXG4gICAgICAuZHVyYXRpb24oc2VhcmNoX2R1cmF0aW9uKVxuICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoJyArIFswLCBjZW50ZXJfeV0gKyAnKScgKyAnIHNjYWxlKCcgK1xuICAgICAgem9vbV95ICsgJywnICsgem9vbV95ICsgJyknICsgJ3RyYW5zbGF0ZSgnICsgWzAsIHBhbl9keV0gKyAnKScpO1xuXG4gICAgLy8gdHJhbnNmb3JtIHJvd196b29tX2NvbnRhaW5lclxuICAgIC8vIHVzZSB0aGUgb2Zmc2V0IHNhdmVkIGluIHBhcmFtcywgb25seSB6b29tIGluIHRoZSB5IGRpcmVjdGlvblxuICAgIGQzLnNlbGVjdChwYXJhbXMucm9vdCsnIC5yb3dfem9vbV9jb250YWluZXInKVxuICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgLmR1cmF0aW9uKHNlYXJjaF9kdXJhdGlvbilcbiAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKCcgKyBbMCwgY2VudGVyX3ldICsgJyknICsgJyBzY2FsZSgnICtcbiAgICAgIDEgKyAnLCcgKyB6b29tX3kgKyAnKScgKyAndHJhbnNsYXRlKCcgKyBbMCwgcGFuX2R5XSArICcpJyk7XG5cbiAgICAvLyB0cmFuc2Zvcm0gY29sIGxhYmVsc1xuICAgIGQzLnNlbGVjdChwYXJhbXMucm9vdCsnIC5jb2xfem9vbV9jb250YWluZXInKVxuICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgLmR1cmF0aW9uKHNlYXJjaF9kdXJhdGlvbilcbiAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAnIHNjYWxlKCcgKyB6b29tX3ggKyAnLCcgKyB6b29tX3ggKyAnKScgKyAndHJhbnNsYXRlKCcgKyBbXG4gICAgICAgIHBhbl9keCwgMFxuICAgICAgXSArICcpJyk7XG5cbiAgICAvLyB0cmFuc2Zvcm0gY29sX2NsYXNzXG4gICAgZDMuc2VsZWN0KCcuY29sX3Zpel96b29tX2NvbnRhaW5lcicpXG4gICAgICAudHJhbnNpdGlvbigpXG4gICAgICAuZHVyYXRpb24oc2VhcmNoX2R1cmF0aW9uKVxuICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsICcgc2NhbGUoJyArIHpvb21feCArICcsJyArIDEgKyAnKScgKyAndHJhbnNsYXRlKCcgKyBbXG4gICAgICAgIHBhbl9keCwgMFxuICAgICAgXSArICcpJyk7XG5cbiAgICAvLyBzZXQgeSB0cmFuc2xhdGU6IGNlbnRlcl95IGlzIHBvc2l0aXZlLCBwb3NpdGl2ZSBtb3ZlcyB0aGUgdmlzdWFsaXphdGlvbiBkb3duXG4gICAgLy8gdGhlIHRyYW5zbGF0ZSB2ZWN0b3IgaGFzIHRoZSBpbml0aWFsIG1hcmdpbiwgdGhlIGZpcnN0IHkgY2VudGVyaW5nLCBhbmQgcGFuX2R5XG4gICAgLy8gdGltZXMgdGhlIHNjYWxpbmcgem9vbV95XG4gICAgdmFyIG5ldF95X29mZnNldCA9IHBhcmFtcy52aXouY2x1c3QubWFyZ2luLnRvcCArIGNlbnRlcl95ICsgcGFuX2R5ICogem9vbV95O1xuXG4gICAgLy8gcmVzZXQgdGhlIHpvb20gdHJhbnNsYXRlIGFuZCB6b29tXG4gICAgcGFyYW1zLnpvb21fYmVoYXZpb3Iuc2NhbGUoem9vbV95KTtcblxuICAgIHZhciB0cmFucyA9IHRydWU7XG4gICAgY29uc3RyYWluX2ZvbnRfc2l6ZShwYXJhbXMsIHRyYW5zKTtcblxuICAgIC8vIHJlLXNpemUgb2YgdGhlIGhpZ2hsaWdodGluZyByZWN0c1xuICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgZDMuc2VsZWN0KHBhcmFtcy5yb290KycgLnJvd19sYWJlbF96b29tX2NvbnRhaW5lcicpXG4gICAgICAuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgLy8gZ2V0IHRoZSBib3VuZGluZyBib3ggb2YgdGhlIHJvdyBsYWJlbCB0ZXh0XG4gICAgICAgIHZhciBiYm94ID0gZDMuc2VsZWN0KHRoaXMpXG4gICAgICAgICAgLnNlbGVjdCgndGV4dCcpWzBdWzBdXG4gICAgICAgICAgLmdldEJCb3goKTtcblxuICAgICAgICAvLyB1c2UgdGhlIGJvdW5kaW5nIGJveCB0byBzZXQgdGhlIHNpemUgb2YgdGhlIHJlY3RcbiAgICAgICAgZDMuc2VsZWN0KHRoaXMpXG4gICAgICAgICAgLnNlbGVjdCgncmVjdCcpXG4gICAgICAgICAgLmF0dHIoJ3gnLCBiYm94LnggKiAwLjUpXG4gICAgICAgICAgLmF0dHIoJ3knLCAwKVxuICAgICAgICAgIC5hdHRyKCd3aWR0aCcsIGJib3gud2lkdGggKiAwLjUpXG4gICAgICAgICAgLmF0dHIoJ2hlaWdodCcsIHBhcmFtcy5tYXRyaXgueV9zY2FsZS5yYW5nZUJhbmQoKSlcbiAgICAgICAgICAuc3R5bGUoJ2ZpbGwnLCAneWVsbG93Jyk7XG4gICAgICB9KTtcblxuXG4gICAgLy8gY29sdW1uIHZhbHVlIGJhcnNcbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAgIC8vIHJlZHVjZSB0aGUgaGVpZ2h0IG9mIHRoZSBjb2x1bW4gdmFsdWUgYmFycyBiYXNlZCBvbiB0aGUgem9vbSBhcHBsaWVkXG4gICAgLy8gcmVjYWxjdWxhdGUgdGhlIGhlaWdodCBhbmQgZGl2aWRlIGJ5IHRoZSB6b29taW5nIHNjYWxlXG4gICAgLy8gY29sX2xhYmVsX29iai5zZWxlY3QoJ3JlY3QnKVxuICAgIGlmICh1dGlscy5oYXMocGFyYW1zLm5ldHdvcmtfZGF0YS5jb2xfbm9kZXNbMF0sICd2YWx1ZScpKSB7XG5cbiAgICAgIGQzLnNlbGVjdEFsbCgnLmNvbF9iYXJzJylcbiAgICAgICAgLy8gLnRyYW5zaXRpb24oKVxuICAgICAgICAvLyAuZHVyYXRpb24oc2VhcmNoX2R1cmF0aW9uKVxuICAgICAgICAuYXR0cignd2lkdGgnLCBmdW5jdGlvbihkKSB7XG4gICAgICAgIHZhciBpbnN0X3ZhbHVlID0gMDtcbiAgICAgICAgaWYgKGQudmFsdWUgPiAwKXtcbiAgICAgICAgICBpbnN0X3ZhbHVlID0gcGFyYW1zLmxhYmVscy5iYXJfc2NhbGVfY29sKGQudmFsdWUpL3pvb21feDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaW5zdF92YWx1ZTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmICh1dGlscy5oYXMocGFyYW1zLm5ldHdvcmtfZGF0YS5yb3dfbm9kZXNbMF0sICd2YWx1ZScpKSB7XG5cbiAgICAgIGQzLnNlbGVjdEFsbCgnLnJvd19iYXJzJylcbiAgICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgICAuZHVyYXRpb24oc2VhcmNoX2R1cmF0aW9uKVxuICAgICAgICAuYXR0cignd2lkdGgnLCBmdW5jdGlvbihkKSB7XG4gICAgICAgIHZhciBpbnN0X3ZhbHVlID0gMDtcbiAgICAgICAgaW5zdF92YWx1ZSA9IHBhcmFtcy5sYWJlbHMuYmFyX3NjYWxlX3JvdyhNYXRoLmFicyhkLnZhbHVlKSkvem9vbV95O1xuICAgICAgICByZXR1cm4gaW5zdF92YWx1ZTtcbiAgICAgIH0pXG4gICAgICAuYXR0cigneCcsIGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgdmFyIGluc3RfdmFsdWUgPSAwO1xuICAgICAgICBpbnN0X3ZhbHVlID0gLXBhcmFtcy5sYWJlbHMuYmFyX3NjYWxlX3JvdyhNYXRoLmFicyhkLnZhbHVlKSkvem9vbV95O1xuICAgICAgICByZXR1cm4gaW5zdF92YWx1ZTtcbiAgICAgIH0pO1xuXG4gICAgfVxuICB9XG59O1xuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogc3JjL3R3b190cmFuc2xhdGVfem9vbS5qc1xuICoqLyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBREE7QUFDQTs7QUFLQTtBQUNBOzs7O0FBSkE7QUFDQTs7O0FBREE7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQWtDQTtBQUNBO0FBQ0E7O0FBekJBO0FBQUE7QUFDQTs7O0FBYkE7QUFDQTtBQThDQTtBQUNBO0FBQ0E7QUFDQTs7QUFMQTtBQUFBO0FBQ0E7O0FBOUNBO0FBMERBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFIQTtBQUNBOztBQTVEQTtBQUNBOztBQURBO0FBQ0E7OztBQURBOzs7QUE2RUE7QUFDQTs7QUE5RUE7QUFDQTs7O0FBREE7QUFDQTs7QUFEQTtBQUNBOztBQURBO0FBQ0E7Ozs7QUFEQTtBQUNBOztBQURBO0FBQ0E7QUF3SEE7QUFDQTtBQUNBOzs7QUEzSEE7O0FBaUlBO0FBQ0E7O0FBSEE7QUFBQTtBQUNBOzs7Ozs7QUFoSUE7QUFDQTtBQXNKQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBTEE7QUFMQTtBQUNBO0FBYUE7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBSEE7QUFNQTtBQUNBO0FBQ0E7QUFIQTtBQVZBO0FBbktBO0FBSEEiLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 37 */
/***/ function(module, exports, __webpack_require__) {

	eval("var Params = __webpack_require__(1);\nvar parent_div_size = __webpack_require__(8);\nvar reset_visualization_size = __webpack_require__(38);\n\nmodule.exports = function () {\n  var params = Params.get();\n\n  d3.select(window).on('resize', null);\n\n  // resize window\n  if (params.viz.resize) {\n    d3.select(window).on('resize', function () {\n      d3.select(params.viz.viz_svg).style('opacity', 0.5);\n      var wait_time = 500;\n      if (params.viz.run_trans == true) {\n        wait_time = 2500;\n      }\n      setTimeout(reset_visualization_size, wait_time, params);\n    });\n  }\n\n  if (params.viz.expand_button) {\n\n    d3.select(params.root + ' .expand_button').on('click', null);\n    var expand_opacity = 0.4;\n\n    if (d3.select(params.root + ' .expand_button').empty()) {\n      var exp_button = d3.select(params.viz.viz_svg).append('text').attr('class', 'expand_button');\n    } else {\n      var exp_button = d3.select(params.root + ' .expand_button');\n    }\n\n    exp_button.attr('text-anchor', 'middle').attr('dominant-baseline', 'central').attr('font-family', 'FontAwesome').attr('font-size', '30px').text(function (d) {\n      if (params.viz.expand === false) {\n        // expand button\n        return '\\uf0b2';\n      } else {\n        // menu button\n        return '\\uf0c9';\n      }\n    }).attr('y', '25px').attr('x', '25px').style('cursor', 'pointer').style('opacity', expand_opacity).on('mouseover', function () {\n      d3.select(this).style('opacity', 0.75);\n    }).on('mouseout', function () {\n      d3.select(this).style('opacity', expand_opacity);\n    }).on('click', function () {\n\n      // expand view\n      if (params.viz.expand === false) {\n\n        d3.select(this).text(function (d) {\n          // menu button\n          return '\\uf0c9';\n        });\n        params.viz.expand = true;\n\n        d3.selectAll('.borders').style('fill', 'white');\n        d3.select('.footer_section').style('display', 'none');\n\n        // contract view\n      } else {\n\n          d3.select(this).text(function (d) {\n            // expand button\n            return '\\uf0b2';\n          });\n          params.viz.expand = false;\n\n          d3.selectAll('.borders').style('fill', '#eee');\n          d3.select('.footer_section').style('display', 'block');\n        }\n\n      // resize parent div\n      parent_div_size(params);\n\n      d3.select(params.viz.viz_svg).style('opacity', 0.5);\n      var wait_time = 500;\n      if (params.viz.run_trans == true) {\n        wait_time = 2500;\n      }\n      setTimeout(reset_visualization_size, wait_time);\n    });\n  }\n};//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzcuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL2luaXRpYWxpemVfcmVzaXppbmcuanM/MDM5NCJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgUGFyYW1zID0gcmVxdWlyZSgnLi9wYXJhbXMnKTtcbnZhciBwYXJlbnRfZGl2X3NpemUgPSByZXF1aXJlKCcuL3BhcmVudF9kaXZfc2l6ZScpO1xudmFyIHJlc2V0X3Zpc3VhbGl6YXRpb25fc2l6ZSA9IHJlcXVpcmUoJy4vcmVzZXRfc2l6ZS9yZXNldF92aXN1YWxpemF0aW9uX3NpemUnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHtcbiAgdmFyIHBhcmFtcyA9IFBhcmFtcy5nZXQoKTtcblxuICBkMy5zZWxlY3Qod2luZG93KS5vbigncmVzaXplJywgbnVsbCk7XG5cbiAgLy8gcmVzaXplIHdpbmRvd1xuICBpZiAocGFyYW1zLnZpei5yZXNpemUpIHtcbiAgICBkMy5zZWxlY3Qod2luZG93KS5vbigncmVzaXplJywgZnVuY3Rpb24gKCkge1xuICAgICAgZDMuc2VsZWN0KHBhcmFtcy52aXoudml6X3N2Zykuc3R5bGUoJ29wYWNpdHknLCAwLjUpO1xuICAgICAgdmFyIHdhaXRfdGltZSA9IDUwMDtcbiAgICAgIGlmIChwYXJhbXMudml6LnJ1bl90cmFucyA9PSB0cnVlKSB7XG4gICAgICAgIHdhaXRfdGltZSA9IDI1MDA7XG4gICAgICB9XG4gICAgICBzZXRUaW1lb3V0KHJlc2V0X3Zpc3VhbGl6YXRpb25fc2l6ZSwgd2FpdF90aW1lLCBwYXJhbXMpO1xuICAgIH0pO1xuICB9XG5cbiAgaWYgKHBhcmFtcy52aXouZXhwYW5kX2J1dHRvbikge1xuXG4gICAgZDMuc2VsZWN0KHBhcmFtcy5yb290ICsgJyAuZXhwYW5kX2J1dHRvbicpLm9uKCdjbGljaycsIG51bGwpO1xuICAgIHZhciBleHBhbmRfb3BhY2l0eSA9IDAuNDtcblxuICAgIGlmIChkMy5zZWxlY3QocGFyYW1zLnJvb3QgKyAnIC5leHBhbmRfYnV0dG9uJykuZW1wdHkoKSkge1xuICAgICAgdmFyIGV4cF9idXR0b24gPSBkMy5zZWxlY3QocGFyYW1zLnZpei52aXpfc3ZnKVxuICAgICAgICAuYXBwZW5kKCd0ZXh0JylcbiAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2V4cGFuZF9idXR0b24nKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGV4cF9idXR0b24gPSBkMy5zZWxlY3QocGFyYW1zLnJvb3QgKyAnIC5leHBhbmRfYnV0dG9uJyk7XG4gICAgfVxuXG4gICAgZXhwX2J1dHRvblxuICAgICAgLmF0dHIoJ3RleHQtYW5jaG9yJywgJ21pZGRsZScpXG4gICAgICAuYXR0cignZG9taW5hbnQtYmFzZWxpbmUnLCAnY2VudHJhbCcpXG4gICAgICAuYXR0cignZm9udC1mYW1pbHknLCAnRm9udEF3ZXNvbWUnKVxuICAgICAgLmF0dHIoJ2ZvbnQtc2l6ZScsICczMHB4JylcbiAgICAgIC50ZXh0KGZ1bmN0aW9uIChkKSB7XG4gICAgICAgIGlmIChwYXJhbXMudml6LmV4cGFuZCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAvLyBleHBhbmQgYnV0dG9uXG4gICAgICAgICAgcmV0dXJuICdcXHVmMGIyJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBtZW51IGJ1dHRvblxuICAgICAgICAgIHJldHVybiAnXFx1ZjBjOSc7XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICAuYXR0cigneScsICcyNXB4JylcbiAgICAgIC5hdHRyKCd4JywgJzI1cHgnKVxuICAgICAgLnN0eWxlKCdjdXJzb3InLCAncG9pbnRlcicpXG4gICAgICAuc3R5bGUoJ29wYWNpdHknLCBleHBhbmRfb3BhY2l0eSlcbiAgICAgIC5vbignbW91c2VvdmVyJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBkMy5zZWxlY3QodGhpcykuc3R5bGUoJ29wYWNpdHknLCAwLjc1KTtcbiAgICAgIH0pXG4gICAgICAub24oJ21vdXNlb3V0JywgZnVuY3Rpb24gKCkge1xuICAgICAgICBkMy5zZWxlY3QodGhpcykuc3R5bGUoJ29wYWNpdHknLCBleHBhbmRfb3BhY2l0eSk7XG4gICAgICB9KVxuICAgICAgLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAvLyBleHBhbmQgdmlld1xuICAgICAgICBpZiAocGFyYW1zLnZpei5leHBhbmQgPT09IGZhbHNlKSB7XG5cbiAgICAgICAgICBkMy5zZWxlY3QodGhpcylcbiAgICAgICAgICAgIC50ZXh0KGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgIC8vIG1lbnUgYnV0dG9uXG4gICAgICAgICAgICAgIHJldHVybiAnXFx1ZjBjOSc7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICBwYXJhbXMudml6LmV4cGFuZCA9IHRydWU7XG5cbiAgICAgICAgICBkMy5zZWxlY3RBbGwoJy5ib3JkZXJzJykuc3R5bGUoJ2ZpbGwnLCAnd2hpdGUnKTtcbiAgICAgICAgICBkMy5zZWxlY3QoJy5mb290ZXJfc2VjdGlvbicpLnN0eWxlKCdkaXNwbGF5JywgJ25vbmUnKTtcblxuICAgICAgICAgIC8vIGNvbnRyYWN0IHZpZXdcbiAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgIGQzLnNlbGVjdCh0aGlzKVxuICAgICAgICAgICAgLnRleHQoZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgLy8gZXhwYW5kIGJ1dHRvblxuICAgICAgICAgICAgICByZXR1cm4gJ1xcdWYwYjInO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgcGFyYW1zLnZpei5leHBhbmQgPSBmYWxzZTtcblxuICAgICAgICAgIGQzLnNlbGVjdEFsbCgnLmJvcmRlcnMnKS5zdHlsZSgnZmlsbCcsICcjZWVlJyk7XG4gICAgICAgICAgZDMuc2VsZWN0KCcuZm9vdGVyX3NlY3Rpb24nKS5zdHlsZSgnZGlzcGxheScsICdibG9jaycpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gcmVzaXplIHBhcmVudCBkaXZcbiAgICAgICAgcGFyZW50X2Rpdl9zaXplKHBhcmFtcyk7XG5cbiAgICAgICAgZDMuc2VsZWN0KHBhcmFtcy52aXoudml6X3N2Zykuc3R5bGUoJ29wYWNpdHknLCAwLjUpO1xuICAgICAgICB2YXIgd2FpdF90aW1lID0gNTAwO1xuICAgICAgICBpZiAocGFyYW1zLnZpei5ydW5fdHJhbnMgPT0gdHJ1ZSkge1xuICAgICAgICAgIHdhaXRfdGltZSA9IDI1MDA7XG4gICAgICAgIH1cbiAgICAgICAgc2V0VGltZW91dChyZXNldF92aXN1YWxpemF0aW9uX3NpemUsIHdhaXRfdGltZSk7XG4gICAgICB9KTtcbiAgfVxufTtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIHNyYy9pbml0aWFsaXplX3Jlc2l6aW5nLmpzXG4gKiovIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBSkE7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQU5BO0FBREE7QUFDQTtBQVVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFLQTtBQUxBO0FBQ0E7QUFPQTtBQU1BOztBQUVBO0FBRkE7O0FBS0E7QUFMQTtBQURBO0FBY0E7QUFEQTtBQUlBO0FBREE7QUFDQTs7QUFLQTtBQUNBO0FBQ0E7O0FBR0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBWEE7QUFDQTtBQWNBOztBQUdBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQXZCQTtBQUNBOztBQUpBO0FBQ0E7QUErQkE7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBckNBO0FBckNBO0FBakJBIiwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 38 */
/***/ function(module, exports, __webpack_require__) {

	eval("var Params = __webpack_require__(1);\nvar run_reset_visualization_size = __webpack_require__(39);\n\nmodule.exports = function () {\n  var params = Params.get();\n\n  // get outer_margins\n  var outer_margins = params.viz.expand ? params.viz.outer_margins_expand : params.viz.outer_margins;\n\n  // get the size of the window\n  var screen_width = window.innerWidth;\n  var screen_height = window.innerHeight;\n\n  // define width and height of clustergram container\n  var cont_dim = {};\n  cont_dim.width = screen_width - outer_margins.left - outer_margins.right;\n  cont_dim.height = screen_height - outer_margins.top - outer_margins.bottom;\n\n  run_reset_visualization_size(cont_dim.width, cont_dim.height, outer_margins.left, outer_margins.top, params);\n\n  // get dimensions of the viz_svg\n  var dim = {};\n  dim.viz_svg = {};\n  dim.viz_svg.w = d3.select(params.viz.viz_svg).style('width').replace('px', '');\n  dim.viz_svg.h = d3.select(params.viz.viz_svg).style('height').replace('px', '');\n\n  // reposition the play button\n  d3.select('.play_button').attr('transform', function () {\n    var pos_x = dim.viz_svg.w / 2;\n    var pos_y = dim.viz_svg.h / 2;\n    return 'translate(' + pos_x + ',' + pos_y + ')';\n  });\n};//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzguanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL3Jlc2V0X3NpemUvcmVzZXRfdmlzdWFsaXphdGlvbl9zaXplLmpzP2E1YTQiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIFBhcmFtcyA9IHJlcXVpcmUoJy4uL3BhcmFtcycpO1xudmFyIHJ1bl9yZXNldF92aXN1YWxpemF0aW9uX3NpemUgPSByZXF1aXJlKCcuL3J1bl9yZXNldF92aXN1YWxpemF0aW9uX3NpemUnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHtcbiAgdmFyIHBhcmFtcyA9IFBhcmFtcy5nZXQoKTtcblxuICAvLyBnZXQgb3V0ZXJfbWFyZ2luc1xuICB2YXIgb3V0ZXJfbWFyZ2lucyA9IHBhcmFtcy52aXouZXhwYW5kID8gcGFyYW1zLnZpei5vdXRlcl9tYXJnaW5zX2V4cGFuZCA6IHBhcmFtcy52aXoub3V0ZXJfbWFyZ2lucztcblxuICAvLyBnZXQgdGhlIHNpemUgb2YgdGhlIHdpbmRvd1xuICB2YXIgc2NyZWVuX3dpZHRoICA9IHdpbmRvdy5pbm5lcldpZHRoO1xuICB2YXIgc2NyZWVuX2hlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcblxuICAvLyBkZWZpbmUgd2lkdGggYW5kIGhlaWdodCBvZiBjbHVzdGVyZ3JhbSBjb250YWluZXJcbiAgdmFyIGNvbnRfZGltID0ge307XG4gIGNvbnRfZGltLndpZHRoICA9IHNjcmVlbl93aWR0aCAgLSBvdXRlcl9tYXJnaW5zLmxlZnQgLSBvdXRlcl9tYXJnaW5zLnJpZ2h0O1xuICBjb250X2RpbS5oZWlnaHQgPSBzY3JlZW5faGVpZ2h0IC0gb3V0ZXJfbWFyZ2lucy50b3AgLSBvdXRlcl9tYXJnaW5zLmJvdHRvbTtcblxuICBydW5fcmVzZXRfdmlzdWFsaXphdGlvbl9zaXplKGNvbnRfZGltLndpZHRoLCBjb250X2RpbS5oZWlnaHQsIG91dGVyX21hcmdpbnMubGVmdCwgb3V0ZXJfbWFyZ2lucy50b3AsIHBhcmFtcyk7XG5cbiAgLy8gZ2V0IGRpbWVuc2lvbnMgb2YgdGhlIHZpel9zdmdcbiAgdmFyIGRpbSA9IHt9O1xuICBkaW0udml6X3N2ZyA9IHt9O1xuICBkaW0udml6X3N2Zy53ID0gZDMuc2VsZWN0KHBhcmFtcy52aXoudml6X3N2Zykuc3R5bGUoJ3dpZHRoJykucmVwbGFjZSgncHgnLCcnKTtcbiAgZGltLnZpel9zdmcuaCA9IGQzLnNlbGVjdChwYXJhbXMudml6LnZpel9zdmcpLnN0eWxlKCdoZWlnaHQnKS5yZXBsYWNlKCdweCcsJycpO1xuXG4gIC8vIHJlcG9zaXRpb24gdGhlIHBsYXkgYnV0dG9uXG4gIGQzLnNlbGVjdCgnLnBsYXlfYnV0dG9uJylcbiAgICAuYXR0cigndHJhbnNmb3JtJywgZnVuY3Rpb24oKXtcbiAgICAgIHZhciBwb3NfeCA9IGRpbS52aXpfc3ZnLncvMjtcbiAgICAgIHZhciBwb3NfeSA9IGRpbS52aXpfc3ZnLmgvMjtcbiAgICAgIHJldHVybiAndHJhbnNsYXRlKCcrcG9zX3grJywnK3Bvc195KycpJztcbiAgICB9KTtcblxufTtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIHNyYy9yZXNldF9zaXplL3Jlc2V0X3Zpc3VhbGl6YXRpb25fc2l6ZS5qc1xuICoqLyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUZBO0FBQ0E7O0FBREE7QUFRQTtBQUNBOztBQVRBO0FBWUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFoQkE7QUFtQkE7QUFDQTtBQUNBO0FBQ0E7O0FBdEJBO0FBMEJBO0FBQ0E7QUFDQTtBQUhBO0FBekJBIiwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 39 */
/***/ function(module, exports, __webpack_require__) {

	eval("var Params = __webpack_require__(1);\nvar crossfilter = __webpack_require__(2);\nvar utils = __webpack_require__(5);\nvar zoomed = __webpack_require__(10);\nvar ini_doubleclick = __webpack_require__(40);\n\nmodule.exports = function (set_clust_width, set_clust_height, set_margin_left, set_margin_top, parameters) {\n\n  var params = parameters || Params.get();\n\n  var row_nodes = params.network_data.row_nodes;\n  var col_nodes = params.network_data.col_nodes;\n  var row_nodes_names = _.pluck(row_nodes, 'name');\n  var col_nodes_names = _.pluck(col_nodes, 'name');\n\n  // reset zoom\n  //////////////////////////////\n  var zoom_y = 1;\n  var zoom_x = 1;\n  var pan_dx = 0;\n  var pan_dy = 0;\n\n  var half_height = params.viz.clust.dim.height / 2;\n  var center_y = -(zoom_y - 1) * half_height;\n\n  this.viz.get_clust_group().attr('transform', 'translate(' + [0, 0 + center_y] + ')' + ' scale(' + 1 + ',' + zoom_y + ')' + 'translate(' + [pan_dx, pan_dy] + ')');\n\n  d3.select(params.root + ' .row_label_zoom_container').attr('transform', 'translate(' + [0, center_y] + ')' + ' scale(' + zoom_y + ',' + zoom_y + ')' + 'translate(' + [0, pan_dy] + ')');\n\n  d3.select(params.root + ' .row_zoom_container').attr('transform', 'translate(' + [0, center_y] + ')' + ' scale(' + 1 + ',' + zoom_y + ')' + 'translate(' + [0, pan_dy] + ')');\n\n  d3.select(params.root + ' .col_zoom_container').attr('transform', ' scale(' + 1 + ',' + 1 + ')' + 'translate(' + [pan_dx, 0] + ')');\n\n  d3.select('.col_viz_zoom_container').attr('transform', ' scale(' + 1 + ',' + 1 + ')' + 'translate(' + [pan_dx, 0] + ')');\n\n  // set y translate: center_y is positive, positive moves the visualization down\n  // the translate vector has the initial margin, the first y centering, and pan_dy\n  // times the scaling zoom_y\n  var net_y_offset = params.viz.clust.margin.top + center_y + pan_dy * zoom_y;\n\n  // size the svg container div - svg_div\n  d3.select(params.viz.viz_wrapper).style('float', 'right').style('margin-top', set_margin_top + 'px').style('width', set_clust_width + 'px').style('height', set_clust_height + 'px');\n\n  // Resetting some visualization parameters\n  ///////////////////////////////////////////////\n\n  // get height and width from parent div\n  params.viz.svg_dim = {};\n  params.viz.svg_dim.width = Number(d3.select(params.viz.viz_wrapper).style('width').replace('px', ''));\n  params.viz.svg_dim.height = Number(d3.select(params.viz.viz_wrapper).style('height').replace('px', ''));\n\n  // reduce width by row/col labels and by grey_border width (reduce width by less since this is less aparent with slanted col labels)\n  var ini_clust_width = params.viz.svg_dim.width - (params.labels.super_label_width + params.norm_label.width.row + params.class_room.row) - params.viz.grey_border_width - params.viz.spillover_x_offset;\n\n  // there is space between the clustergram and the border\n  var ini_clust_height = params.viz.svg_dim.height - (params.labels.super_label_width + params.norm_label.width.col + params.class_room.col) - 5 * params.viz.grey_border_width;\n\n  // reduce clustergram width if triangles are taller than the normal width\n  // of the columns\n  var tmp_x_scale = d3.scale.ordinal().rangeBands([0, ini_clust_width]);\n  tmp_x_scale.domain(params.matrix.orders.ini_row);\n  var triangle_height = tmp_x_scale.rangeBand() / 2;\n  if (triangle_height > params.norm_label.width.col) {\n    ini_clust_width = ini_clust_width * (params.norm_label.width.col / triangle_height);\n  }\n  params.viz.clust.dim.width = ini_clust_width;\n\n  // clustergram height\n  ////////////////////////\n  // ensure that rects are never taller than they are wide\n  // force square tiles\n  if (ini_clust_width / params.viz.num_col_nodes < ini_clust_height / params.viz.num_row_nodes) {\n\n    // scale the height\n    params.viz.clust.dim.height = ini_clust_width * (params.viz.num_row_nodes / params.viz.num_col_nodes);\n\n    // keep track of whether or not a force square has occurred\n    // so that I can adjust the font accordingly\n    params.viz.force_square = 1;\n\n    // make sure that force_square does not cause the entire visualization\n    // to be taller than the svg, if it does, then undo\n    if (params.viz.clust.dim.height > ini_clust_height) {\n      // make the height equal to the width\n      params.viz.clust.dim.height = ini_clust_height;\n      // keep track of whether or not a force square has occurred\n      params.viz.force_square = 0;\n    }\n  }\n  // do not force square tiles\n  else {\n      // the height will be calculated normally - leading to wide tiles\n      params.viz.clust.dim.height = ini_clust_height;\n      // keep track of whether or not a force square has occurred\n      params.viz.force_square = 0;\n    }\n\n  // zoom_switch from 1 to 2d zoom\n  params.viz.zoom_switch = params.viz.clust.dim.width / params.viz.num_col_nodes / (params.viz.clust.dim.height / params.viz.num_row_nodes);\n\n  // zoom_switch can not be less than 1\n  if (params.viz.zoom_switch < 1) {\n    params.viz.zoom_switch = 1;\n  }\n\n  // Begin resizing the visualization\n\n  // resize the svg\n  ///////////////////////\n  var svg_group = d3.select(params.viz.viz_svg).attr('width', params.viz.svg_dim.width).attr('height', params.viz.svg_dim.height);\n\n  // redefine x_scale and y_scale rangeBands\n  params.matrix.x_scale.rangeBands([0, params.viz.clust.dim.width]);\n  params.matrix.y_scale.rangeBands([0, params.viz.clust.dim.height]);\n\n  // redefine x and y positions\n  _.each(params.network_data.links, function (d) {\n    d.x = params.matrix.x_scale(d.target);\n    d.y = params.matrix.y_scale(d.source);\n  });\n\n  // precalc rect_width and height\n  // params.matrix.rect_width = params.matrix.x_scale.rangeBand() - params.viz.border_width;\n  // params.matrix.rect_height = params.matrix.y_scale.rangeBand() - params.viz.border_width/params.viz.zoom_switch;\n  params.matrix.rect_width = params.matrix.x_scale.rangeBand();\n  params.matrix.rect_height = params.matrix.y_scale.rangeBand();\n\n  // reset crossfilter\n  params.cf = {};\n  params.cf.links = crossfilter(params.network_data.links);\n  params.cf.dim_x = params.cf.links.dimension(function (d) {\n    return d.x;\n  });\n  params.cf.dim_y = params.cf.links.dimension(function (d) {\n    return d.y;\n  });\n\n  // reset all crossfilter filters\n  params.cf.dim_x.filterAll();\n  params.cf.dim_y.filterAll();\n\n  // redefine links - grab all links since filter is reset\n  var inst_links = params.cf.dim_x.top(Infinity);\n\n  // redefine zoom extent\n  params.viz.real_zoom = params.norm_label.width.col / (params.matrix.rect_width / 2);\n\n  // disable zoom while transitioning\n  svg_group.on('.zoom', null);\n\n  params.zoom_behavior.scaleExtent([1, params.viz.real_zoom * params.viz.zoom_switch]).on('zoom', function () {\n    zoomed(params);\n  });\n\n  // reenable zoom after transition\n  if (params.viz.do_zoom) {\n    svg_group.call(params.zoom_behavior);\n  }\n\n  // prevent normal double click zoom etc\n  ini_doubleclick(params);\n\n  // redefine border width\n  params.viz.border_width = params.matrix.rect_width / 55;\n\n  // the default font sizes are set here\n  params.labels.default_fs_row = params.matrix.rect_height * 1.07;\n  params.labels.default_fs_col = params.matrix.rect_width * 0.87;\n\n  svg_group.select('.super_background').style('width', params.viz.svg_dim.width).style('height', params.viz.svg_dim.height);\n\n  svg_group.select('.grey_background').attr('width', params.viz.clust.dim.width).attr('height', params.viz.clust.dim.height);\n\n  // resize rows and tiles within rows\n\n  svg_group.selectAll('.row').attr('transform', function (d) {\n    var tmp_index = _.indexOf(row_nodes_names, d.name);\n    return 'translate(0,' + params.matrix.y_scale(tmp_index) + ')';\n  });\n\n  // reset tiles\n  svg_group.selectAll('.row').selectAll('.tile').attr('transform', function (d) {\n    var x_pos = params.matrix.x_scale(d.pos_x) + 0.5 * params.viz.border_width;\n    var y_pos = 0.5 * params.viz.border_width / params.viz.zoom_switch;\n    return 'translate(' + x_pos + ',' + y_pos + ')';\n  }).attr('width', params.matrix.rect_width).attr('height', params.matrix.rect_height);\n\n  // reset tile_up\n  svg_group.selectAll('.row').selectAll('.tile_up').attr('d', function () {\n    // up triangle\n    var start_x = 0;\n    var final_x = params.matrix.x_scale.rangeBand();\n    var start_y = 0;\n    var final_y = params.matrix.y_scale.rangeBand() - params.matrix.y_scale.rangeBand() / 60;\n\n    var output_string = 'M' + start_x + ',' + start_y + ', L' + start_x + ', ' + final_y + ', L' + final_x + ',0 Z';\n\n    return output_string;\n  }).attr('transform', function (d) {\n    var x_pos = params.matrix.x_scale(d.pos_x) + 0.5 * params.viz.border_width;\n    var y_pos = 0.5 * params.viz.border_width / params.viz.zoom_switch;\n    return 'translate(' + x_pos + ',' + y_pos + ')';\n  });\n\n  svg_group.selectAll('.row').selectAll('.tile_dn').attr('d', function () {\n    // dn triangle\n    var start_x = 0;\n    var final_x = params.matrix.x_scale.rangeBand();\n    var start_y = params.matrix.y_scale.rangeBand() - params.matrix.y_scale.rangeBand() / 60;\n    var final_y = params.matrix.y_scale.rangeBand() - params.matrix.y_scale.rangeBand() / 60;\n\n    var output_string = 'M' + start_x + ', ' + start_y + ' ,   L' + final_x + ', ' + final_y + ',  L' + final_x + ',0 Z';\n\n    return output_string;\n  }).attr('transform', function (d) {\n    var x_pos = params.matrix.x_scale(d.pos_x) + 0.5 * params.viz.border_width;\n    var y_pos = 0.5 * params.viz.border_width / params.viz.zoom_switch;\n    return 'translate(' + x_pos + ',' + y_pos + ')';\n  });\n\n  svg_group.selectAll('.highlighting_rect').attr('width', params.matrix.x_scale.rangeBand() * 0.80).attr('height', params.matrix.y_scale.rangeBand() * 0.80);\n\n  svg_group.selectAll('.tile_split_up').attr('d', function () {\n    var start_x = 0;\n    var final_x = params.matrix.x_scale.rangeBand();\n    var start_y = 0;\n    var final_y = params.matrix.y_scale.rangeBand() - params.matrix.y_scale.rangeBand() / 60;\n    var output_string = 'M' + start_x + ',' + start_y + ', L' + start_x + ', ' + final_y + ', L' + final_x + ',0 Z';\n    return output_string;\n  });\n\n  svg_group.selectAll('.tile_split_dn').attr('d', function () {\n    var start_x = 0;\n    var final_x = params.matrix.x_scale.rangeBand();\n    var start_y = params.matrix.y_scale.rangeBand() - params.matrix.y_scale.rangeBand() / 60;\n    var final_y = params.matrix.y_scale.rangeBand() - params.matrix.y_scale.rangeBand() / 60;\n    var output_string = 'M' + start_x + ', ' + start_y + ' ,   L' + final_x + ', ' + final_y + ',  L' + final_x + ',0 Z';\n    return output_string;\n  });\n\n  // reposition tile highlight\n  ////////////////////////////////\n\n  var rel_width_hlight = 6;\n  var opacity_hlight = 0.85;\n  var hlight_width = rel_width_hlight * params.viz.border_width;\n  var hlight_height = rel_width_hlight * params.viz.border_width / params.viz.zoom_switch;\n\n  // top highlight\n  d3.select(params.root + ' .top_hlight').attr('width', params.matrix.rect_width).attr('height', hlight_height).attr('transform', function () {\n    return 'translate(' + params.matrix.x_scale(params.matrix.click_hlight_x) + ',0)';\n  });\n\n  // left highlight\n  d3.select(params.root + ' .left_hlight').attr('width', hlight_width).attr('height', params.matrix.rect_width - hlight_height * 0.99).attr('transform', function () {\n    return 'translate(' + params.matrix.x_scale(params.matrix.click_hlight_x) + ',' + hlight_height * 0.99 + ')';\n  });\n\n  // right highlight\n  d3.select(params.root + ' .right_hlight').attr('width', hlight_width).attr('height', params.matrix.rect_height - hlight_height * 0.99).attr('transform', function () {\n    var tmp_translate = params.matrix.x_scale(params.matrix.click_hlight_x) + params.matrix.rect_width - hlight_width;\n    return 'translate(' + tmp_translate + ',' + hlight_height * 0.99 + ')';\n  });\n\n  // bottom highlight\n  d3.select(params.root + ' .bottom_hlight').attr('width', function () {\n    return params.matrix.rect_width - 1.98 * hlight_width;\n  }).attr('height', hlight_height).attr('transform', function () {\n    var tmp_translate_x = params.matrix.x_scale(params.matrix.click_hlight_x) + hlight_width * 0.99;\n    var tmp_translate_y = params.matrix.rect_height - hlight_height;\n    return 'translate(' + tmp_translate_x + ',' + tmp_translate_y + ')';\n  });\n\n  // resize row highlight\n  /////////////////////////\n  d3.select(params.root + ' .row_top_hlight').attr('width', params.viz.svg_dim.width).attr('height', hlight_height);\n\n  d3.select(params.root + ' .row_bottom_hlight').attr('width', params.viz.svg_dim.width).attr('height', hlight_height).attr('transform', function () {\n    var tmp_translate_y = params.matrix.rect_height - hlight_height;\n    return 'translate(0,' + tmp_translate_y + ')';\n  });\n\n  // resize col highlight\n  /////////////////////////\n  d3.select(params.root + ' .col_top_hlight').attr('width', params.viz.clust.dim.height).attr('height', hlight_width).attr('transform', function () {\n    var tmp_translate_y = 0;\n    var tmp_translate_x = -(params.viz.clust.dim.height + params.class_room.col + params.viz.uni_margin);\n    return 'translate(' + tmp_translate_x + ',' + tmp_translate_y + ')';\n  });\n\n  d3.select(params.root + ' .col_bottom_hlight').attr('width', params.viz.clust.dim.height).attr('height', hlight_width).attr('transform', function () {\n    var tmp_translate_y = params.matrix.rect_width - hlight_width;\n    var tmp_translate_x = -(params.viz.clust.dim.height + params.class_room.col + params.viz.uni_margin);\n    return 'translate(' + tmp_translate_x + ',' + tmp_translate_y + ')';\n  });\n\n  // add text to row/col during resize\n  function normal_name(d) {\n    var inst_name = d.name.replace(/_/g, ' ').split('#')[0];\n    if (inst_name.length > params.labels.max_label_char) {\n      inst_name = inst_name.substring(0, params.labels.max_label_char) + '..';\n    }\n    return inst_name;\n  }\n\n  // resize row labels\n  ///////////////////////////\n\n  svg_group.select(params.root + ' row_container').attr('transform', 'translate(' + params.norm_label.margin.left + ',' + params.viz.clust.margin.top + ')');\n\n  svg_group.select(params.root + ' .row_container').select('.white_bars').attr('width', params.norm_label.background.row).attr('height', 30 * params.viz.clust.dim.height + 'px');\n\n  svg_group.select(params.root + ' .row_container').select('.row_label_container').attr('transform', 'translate(' + params.norm_label.width.row + ',0)');\n\n  svg_group.selectAll('.row_label_text').attr('transform', function (d) {\n    var inst_index = _.indexOf(row_nodes_names, d.name);\n    return 'translate(0,' + params.matrix.y_scale(inst_index) + ')';\n  });\n\n  svg_group.selectAll('.row_label_text').select('text').style('font-size', params.labels.default_fs_row + 'px').text(function (d) {\n    return normal_name(d);\n  });\n\n  // change the size of the highlighting rects\n  svg_group.selectAll('.row_label_text').each(function () {\n    var bbox = d3.select(this).select('text')[0][0].getBBox();\n    d3.select(this).select('rect').attr('x', bbox.x).attr('y', 0).attr('width', bbox.width).attr('height', params.matrix.rect_height).style('fill', 'yellow').style('opacity', function (d) {\n      var inst_opacity = 0;\n      // highlight target genes\n      if (d.target === 1) {\n        inst_opacity = 1;\n      }\n      return inst_opacity;\n    });\n  });\n\n  // label the widest row and col labels\n  params.bounding_width_max = {};\n  params.bounding_width_max.row = 0;\n  d3.selectAll('.row_label_text').each(function () {\n    var tmp_width = d3.select(this).select('text').node().getBBox().width;\n    if (tmp_width > params.bounding_width_max.row) {\n      params.bounding_width_max.row = tmp_width;\n    }\n  });\n\n  svg_group.select('.row_viz_container').attr('transform', 'translate(' + params.norm_label.width.row + ',0)');\n\n  svg_group.select('.row_viz_container').select('white_bars').attr('width', params.class_room.row + 'px').attr('height', function () {\n    var inst_height = params.viz.clust.dim.height;\n    return inst_height;\n  });\n\n  svg_group.selectAll('.row_viz_group').attr('transform', function (d) {\n    var inst_index = _.indexOf(row_nodes_names, d.name);\n    return 'translate(0, ' + params.matrix.y_scale(inst_index) + ')';\n  });\n\n  svg_group.selectAll('.row_viz_group').select('path').attr('d', function () {\n    var origin_x = params.class_room.symbol_width - 1;\n    var origin_y = 0;\n    var mid_x = 1;\n    var mid_y = params.matrix.rect_height / 2;\n    var final_x = params.class_room.symbol_width - 1;\n    var final_y = params.matrix.rect_height;\n    var output_string = 'M ' + origin_x + ',' + origin_y + ' L ' + mid_x + ',' + mid_y + ', L ' + final_x + ',' + final_y + ' Z';\n    return output_string;\n  });\n\n  if (utils.has(params.network_data.row_nodes[0], 'value')) {\n\n    // set bar scale\n    var enr_max = Math.abs(_.max(params.network_data.row_nodes, function (d) {\n      return Math.abs(d.value);\n    }).value);\n    params.labels.bar_scale_row = d3.scale.linear().domain([0, enr_max]).range([0, params.norm_label.width.row]);\n\n    svg_group.selectAll('.row_bars').attr('width', function (d) {\n      var inst_value = 0;\n      inst_value = params.labels.bar_scale_row(Math.abs(d.value));\n      return inst_value;\n    }).attr('x', function (d) {\n      var inst_value = 0;\n      inst_value = -params.labels.bar_scale_row(Math.abs(d.value));\n      return inst_value;\n    }).attr('height', params.matrix.rect_height);\n  }\n\n  // resize col labels\n  ///////////////////////\n  svg_group.select(params.root + ' .col_container').attr('transform', 'translate(' + params.viz.clust.margin.left + ',' + params.norm_label.margin.top + ')');\n\n  svg_group.select(params.root + ' .col_container').select('.white_bars').attr('width', 30 * params.viz.clust.dim.width + 'px').attr('height', params.norm_label.background.col);\n\n  svg_group.select(params.root + ' .col_container').select('.col_label_outer_container').attr('transform', 'translate(0,' + params.norm_label.width.col + ')');\n\n  // offset click group column label\n  var x_offset_click = params.matrix.rect_width / 2 + params.viz.border_width;\n  // reduce width of rotated rects\n  var reduce_rect_width = params.matrix.rect_width * 0.36;\n\n  svg_group.selectAll('.col_label_text').attr('transform', function (d) {\n    var inst_index = _.indexOf(col_nodes_names, d.name);\n    return 'translate(' + params.matrix.x_scale(inst_index) + ') rotate(-90)';\n  });\n\n  svg_group.selectAll('.col_label_click').attr('transform', 'translate(' + params.matrix.rect_width / 2 + ',' + x_offset_click + ') rotate(45)');\n\n  svg_group.selectAll('.col_label_click').select('text').attr('y', params.matrix.rect_width * 0.60).attr('dx', 2 * params.viz.border_width).style('font-size', params.labels.default_fs_col + 'px').text(function (d) {\n    return normal_name(d);\n  });\n\n  params.bounding_width_max.col = 0;\n  svg_group.selectAll('.col_label_click').each(function () {\n    var tmp_width = d3.select(this).select('text').node().getBBox().width;\n    if (tmp_width > params.bounding_width_max.col) {\n      params.bounding_width_max.col = tmp_width * 1.2;\n    }\n  });\n\n  // check if widest row or col are wider than the allowed label width\n  ////////////////////////////////////////////////////////////////////////\n  params.ini_scale_font = {};\n  params.ini_scale_font.row = 1;\n  params.ini_scale_font.col = 1;\n\n  if (params.bounding_width_max.row > params.norm_label.width.row) {\n\n    // calc reduction in font size\n    params.ini_scale_font.row = params.norm_label.width.row / params.bounding_width_max.row;\n    // redefine bounding_width_max.row\n    params.bounding_width_max.row = params.ini_scale_font.row * params.bounding_width_max.row;\n\n    // redefine default fs\n    params.labels.default_fs_row = params.labels.default_fs_row * params.ini_scale_font.row;\n    // reduce font size\n    d3.selectAll('.row_label_text').each(function () {\n      d3.select(this).select('text').style('font-size', params.labels.default_fs_row + 'px');\n    });\n  }\n\n  if (params.bounding_width_max.col > params.norm_label.width.col) {\n\n    // calc reduction in font size\n    params.ini_scale_font.col = params.norm_label.width.col / params.bounding_width_max.col;\n    // redefine bounding_width_max.col\n    params.bounding_width_max.col = params.ini_scale_font.col * params.bounding_width_max.col;\n    // redefine default fs\n    params.labels.default_fs_col = params.labels.default_fs_col * params.ini_scale_font.col;\n    // reduce font size\n    d3.selectAll('.col_label_click').each(function () {\n      d3.select(this).select('text').style('font-size', params.labels.default_fs_col + 'px');\n    });\n  }\n\n  svg_group.selectAll('.row_label_text').select('text').attr('y', params.matrix.rect_height * 0.5 + params.labels.default_fs_row * 0.35);\n\n  svg_group.selectAll('.col_label_click').each(function () {\n    d3.select(this).select('text')[0][0].getBBox();\n\n    // d3.select(this)\n    //   .select('rect')\n    //   .attr('x', bbox.x * 1.25)\n    //   .attr('y', 0)\n    //   .attr('width', bbox.width * 1.25)\n    //   .attr('height', params.matrix.rect_width * 0.6)\n    //   .style('fill', 'yellow')\n    //   .style('opacity', 0);\n  });\n\n  // resize column triangle\n  svg_group.selectAll('.col_label_click').select('path').attr('d', function () {\n    // x and y are flipped since its rotated\n    var origin_y = -params.viz.border_width;\n    var start_x = 0;\n    var final_x = params.matrix.rect_width - reduce_rect_width;\n    var start_y = -(params.matrix.rect_width - reduce_rect_width + params.viz.border_width);\n    var final_y = -params.viz.border_width;\n    var output_string = 'M ' + origin_y + ',0 L ' + start_y + ',' + start_x + ', L ' + final_y + ',' + final_x + ' Z';\n    return output_string;\n  }).attr('fill', function (d) {\n    var inst_color = '#eee';\n    if (params.labels.show_categories) {\n      inst_color = params.labels.class_colors.col[d.cl];\n    }\n    return inst_color;\n  });\n\n  // // append column value bars\n  // if (utils.has( params.network_data.col_nodes[0], 'value')) {\n\n  svg_group.selectAll('.col_bars').attr('width', function (d) {\n    var inst_value = 0;\n    if (d.value > 0) {\n      inst_value = params.labels.bar_scale_col(d.value);\n    }\n    return inst_value;\n  })\n  // rotate labels - reduce width if rotating\n  .attr('height', params.matrix.rect_width * 0.66);\n  // }\n\n  if (params.labels.show_categories) {\n    // change the size of the highlighting rects\n    d3.selectAll('.col_label_click').each(function () {\n      var bbox = d3.select(this).select('text')[0][0].getBBox();\n\n      d3.select(this).select('rect').attr('width', bbox.width * 1.1).attr('height', 0.67 * params.matrix.rect_width).style('fill', function (d) {\n        var inst_color = 'white';\n        if (params.labels.show_categories) {\n          inst_color = params.labels.class_colors.col[d.cl];\n        }\n        return inst_color;\n      }).style('opacity', 0.30);\n    });\n  }\n\n  // resize dendrogram\n  ///////////////////\n  svg_group.selectAll('.row_class_rect').attr('width', function () {\n    var inst_width = params.class_room.symbol_width - 1;\n    return inst_width + 'px';\n  }).attr('height', params.matrix.y_scale.rangeBand()).attr('x', function () {\n    var inst_offset = params.class_room.symbol_width + 1;\n    return inst_offset + 'px';\n  });\n\n  svg_group.selectAll('.col_class_rect').attr('width', params.matrix.x_scale.rangeBand()).attr('height', function () {\n    var inst_height = params.class_room.col - 1;\n    return inst_height;\n  });\n\n  svg_group.selectAll('.col_viz_group').attr('transform', function (d) {\n    var inst_index = _.indexOf(col_nodes_names, d.name);\n    return 'translate(' + params.matrix.x_scale(inst_index) + ',0)';\n  });\n\n  // reposition grid lines\n  ////////////////////////////\n  svg_group.selectAll('.horz_lines').attr('transform', function (d) {\n    var inst_index = _.indexOf(row_nodes_names, d.name);\n    return 'translate(0,' + params.matrix.y_scale(inst_index) + ') rotate(0)';\n  });\n\n  svg_group.selectAll('.horz_lines').select('line').attr('x2', params.viz.clust.dim.width).style('stroke-width', params.viz.border_width / params.viz.zoom_switch + 'px');\n\n  svg_group.selectAll('.vert_lines').attr('transform', function (d) {\n    var inst_index = _.indexOf(col_nodes_names, d.name);\n    return 'translate(' + params.matrix.x_scale(inst_index) + ') rotate(-90)';\n  });\n\n  svg_group.selectAll('.vert_lines').select('line').attr('x2', -params.viz.clust.dim.height).style('stroke-width', params.viz.border_width + 'px');\n\n  // var row_nodes = params.network_data.row_nodes;\n  // var col_nodes = params.network_data.col_nodes;\n\n  // draw_grid_lines(row_nodes, col_nodes);\n\n  // resize superlabels\n  /////////////////////////////////////\n  svg_group.select('.super_col_bkg').attr('height', params.labels.super_label_width + 'px').attr('transform', 'translate(0,' + params.viz.grey_border_width + ')');\n\n  // super col title\n  svg_group.select('.super_col').attr('transform', function () {\n    var inst_x = params.viz.clust.dim.width / 2 + params.norm_label.width.row;\n    var inst_y = params.labels.super_label_width - params.viz.uni_margin;\n    return 'translate(' + inst_x + ',' + inst_y + ')';\n  });\n\n  // super row title\n  svg_group.select('.super_row_bkg').attr('width', params.labels.super_label_width + 'px').attr('transform', 'translate(' + params.viz.grey_border_width + ',0)');\n\n  // append super title row group\n  svg_group.select('.super_row').attr('transform', function () {\n    var inst_x = params.labels.super_label_width - params.viz.uni_margin;\n    var inst_y = params.viz.clust.dim.height / 2 + params.norm_label.width.col;\n    return 'translate(' + inst_x + ',' + inst_y + ')';\n  });\n\n  // resize spillover\n  //////////////////////////\n  // hide spillover from slanted column labels on right side\n  svg_group.select('.right_slant_triangle').attr('transform', 'translate(' + params.viz.clust.dim.width + ',' + params.norm_label.width.col + ')');\n\n  svg_group.select('.left_slant_triangle').attr('transform', 'translate(-1,' + params.norm_label.width.col + ')');\n\n  svg_group.select('.top_left_white').attr('width', params.viz.clust.margin.left).attr('height', params.viz.clust.margin.top);\n\n  svg_group.select('.right_spillover').attr('transform', function () {\n    var tmp_left = params.viz.clust.margin.left + params.viz.clust.dim.width;\n    var tmp_top = params.norm_label.margin.top + params.norm_label.width.col;\n    return 'translate(' + tmp_left + ',' + tmp_top + ')';\n  });\n\n  // white border bottom - prevent clustergram from hitting border\n  svg_group.select('.bottom_spillover').attr('width', params.viz.svg_dim.width).attr('height', 2 * params.viz.grey_border_width).attr('transform', function () {\n    // shift up enough to show the entire border width\n    var inst_offset = params.viz.svg_dim.height - 3 * params.viz.grey_border_width;\n    return 'translate(0,' + inst_offset + ')';\n  });\n\n  // add border to svg in four separate lines - to not interfere with clicking anything\n  ///////////////////////////////////////////////////////////////////////////////////////\n  // left border\n  svg_group.select('.left_border').attr('width', params.viz.grey_border_width).attr('height', params.viz.svg_dim.height).attr('transform', 'translate(0,0)');\n\n  // right border\n  svg_group.select('.right_border').attr('width', params.viz.grey_border_width).attr('height', params.viz.svg_dim.height).attr('transform', function () {\n    var inst_offset = params.viz.svg_dim.width - params.viz.grey_border_width;\n    return 'translate(' + inst_offset + ',0)';\n  });\n\n  // top border\n  svg_group.select('.top_border').attr('width', params.viz.svg_dim.width).attr('height', params.viz.grey_border_width).attr('transform', function () {\n    var inst_offset = 0;\n    return 'translate(' + inst_offset + ',0)';\n  });\n\n  // bottom border\n  svg_group.select('.bottom_border').attr('width', params.viz.svg_dim.width).attr('height', params.viz.grey_border_width).attr('transform', function () {\n    var inst_offset = params.viz.svg_dim.height - params.viz.grey_border_width;\n    return 'translate(0,' + inst_offset + ')';\n  });\n\n  // reset zoom and translate\n  //////////////////////////////\n  params.zoom_behavior.scale(1).translate([params.viz.clust.margin.left, params.viz.clust.margin.top]);\n\n  d3.select(params.viz.viz_svg).style('opacity', 1);\n};//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzkuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL3Jlc2V0X3NpemUvcnVuX3Jlc2V0X3Zpc3VhbGl6YXRpb25fc2l6ZS5qcz8zNDMwIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBQYXJhbXMgPSByZXF1aXJlKCcuLi9wYXJhbXMnKTtcbnZhciBjcm9zc2ZpbHRlciA9IHJlcXVpcmUoJ2Nyb3NzZmlsdGVyJyk7XG52YXIgdXRpbHMgPSByZXF1aXJlKCcuLi91dGlscycpO1xudmFyIHpvb21lZCA9IHJlcXVpcmUoJy4uL3pvb21lZCcpO1xudmFyIGluaV9kb3VibGVjbGljayA9IHJlcXVpcmUoJy4uL2luaV9kb3VibGVjbGljaycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHNldF9jbHVzdF93aWR0aCwgc2V0X2NsdXN0X2hlaWdodCwgc2V0X21hcmdpbl9sZWZ0LCBzZXRfbWFyZ2luX3RvcCwgcGFyYW1ldGVycykge1xuXG4gIHZhciBwYXJhbXMgPSBwYXJhbWV0ZXJzIHx8IFBhcmFtcy5nZXQoKTtcblxuICB2YXIgcm93X25vZGVzID0gcGFyYW1zLm5ldHdvcmtfZGF0YS5yb3dfbm9kZXM7XG4gIHZhciBjb2xfbm9kZXMgPSBwYXJhbXMubmV0d29ya19kYXRhLmNvbF9ub2RlcztcbiAgdmFyIHJvd19ub2Rlc19uYW1lcyA9IF8ucGx1Y2socm93X25vZGVzLCAnbmFtZScpO1xuICB2YXIgY29sX25vZGVzX25hbWVzID0gXy5wbHVjayhjb2xfbm9kZXMsICduYW1lJyk7XG5cbiAgLy8gcmVzZXQgem9vbVxuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgdmFyIHpvb21feSA9IDE7XG4gIHZhciB6b29tX3ggPSAxO1xuICB2YXIgcGFuX2R4ID0gMDtcbiAgdmFyIHBhbl9keSA9IDA7XG5cbiAgdmFyIGhhbGZfaGVpZ2h0ID0gcGFyYW1zLnZpei5jbHVzdC5kaW0uaGVpZ2h0IC8gMjtcbiAgdmFyIGNlbnRlcl95ID0gLSh6b29tX3kgLSAxKSAqIGhhbGZfaGVpZ2h0O1xuXG4gIHRoaXMudml6LmdldF9jbHVzdF9ncm91cCgpXG4gICAgLmF0dHIoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoJyArIFswLCAwICsgY2VudGVyX3ldICsgJyknICtcbiAgICAnIHNjYWxlKCcgKyAxICsgJywnICsgem9vbV95ICsgJyknICsgJ3RyYW5zbGF0ZSgnICsgW3Bhbl9keCxwYW5fZHldICsgJyknKTtcblxuICBkMy5zZWxlY3QocGFyYW1zLnJvb3QrJyAucm93X2xhYmVsX3pvb21fY29udGFpbmVyJylcbiAgICAuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgnICsgWzAsIGNlbnRlcl95XSArICcpJyArICcgc2NhbGUoJyArXG4gICAgem9vbV95ICsgJywnICsgem9vbV95ICsgJyknICsgJ3RyYW5zbGF0ZSgnICsgWzAsIHBhbl9keV0gKyAnKScpO1xuXG4gIGQzLnNlbGVjdChwYXJhbXMucm9vdCsnIC5yb3dfem9vbV9jb250YWluZXInKVxuICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKCcgKyBbMCwgY2VudGVyX3ldICsgJyknICsgJyBzY2FsZSgnICtcbiAgICAxICsgJywnICsgem9vbV95ICsgJyknICsgJ3RyYW5zbGF0ZSgnICsgWzAsIHBhbl9keV0gKyAnKScpO1xuXG4gIGQzLnNlbGVjdChwYXJhbXMucm9vdCsnIC5jb2xfem9vbV9jb250YWluZXInKVxuICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAnIHNjYWxlKCcgKyAxICsgJywnICsgMSArICcpJyArICd0cmFuc2xhdGUoJyArIFtwYW5fZHgsIDBdICsgJyknKTtcblxuICBkMy5zZWxlY3QoJy5jb2xfdml6X3pvb21fY29udGFpbmVyJylcbiAgICAuYXR0cigndHJhbnNmb3JtJywgJyBzY2FsZSgnICsgMSArICcsJyArIDEgKyAnKScgKyAndHJhbnNsYXRlKCcgKyBbcGFuX2R4LCAwXSArICcpJyk7XG5cbiAgLy8gc2V0IHkgdHJhbnNsYXRlOiBjZW50ZXJfeSBpcyBwb3NpdGl2ZSwgcG9zaXRpdmUgbW92ZXMgdGhlIHZpc3VhbGl6YXRpb24gZG93blxuICAvLyB0aGUgdHJhbnNsYXRlIHZlY3RvciBoYXMgdGhlIGluaXRpYWwgbWFyZ2luLCB0aGUgZmlyc3QgeSBjZW50ZXJpbmcsIGFuZCBwYW5fZHlcbiAgLy8gdGltZXMgdGhlIHNjYWxpbmcgem9vbV95XG4gIHZhciBuZXRfeV9vZmZzZXQgPSBwYXJhbXMudml6LmNsdXN0Lm1hcmdpbi50b3AgKyBjZW50ZXJfeSArIHBhbl9keSAqIHpvb21feTtcblxuICAvLyBzaXplIHRoZSBzdmcgY29udGFpbmVyIGRpdiAtIHN2Z19kaXZcbiAgZDMuc2VsZWN0KHBhcmFtcy52aXoudml6X3dyYXBwZXIpXG4gICAgICAuc3R5bGUoJ2Zsb2F0JywgJ3JpZ2h0JylcbiAgICAgIC5zdHlsZSgnbWFyZ2luLXRvcCcsICBzZXRfbWFyZ2luX3RvcCAgKyAncHgnKVxuICAgICAgLnN0eWxlKCd3aWR0aCcsICBzZXRfY2x1c3Rfd2lkdGggICsgJ3B4JylcbiAgICAgIC5zdHlsZSgnaGVpZ2h0Jywgc2V0X2NsdXN0X2hlaWdodCArICdweCcpO1xuXG5cbiAgLy8gUmVzZXR0aW5nIHNvbWUgdmlzdWFsaXphdGlvbiBwYXJhbWV0ZXJzXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgLy8gZ2V0IGhlaWdodCBhbmQgd2lkdGggZnJvbSBwYXJlbnQgZGl2XG4gIHBhcmFtcy52aXouc3ZnX2RpbSA9IHt9O1xuICBwYXJhbXMudml6LnN2Z19kaW0ud2lkdGggID0gTnVtYmVyKGQzLnNlbGVjdChwYXJhbXMudml6LnZpel93cmFwcGVyKS5zdHlsZSgnd2lkdGgnKS5yZXBsYWNlKCdweCcsICcnKSk7XG4gIHBhcmFtcy52aXouc3ZnX2RpbS5oZWlnaHQgPSBOdW1iZXIoZDMuc2VsZWN0KHBhcmFtcy52aXoudml6X3dyYXBwZXIpLnN0eWxlKCdoZWlnaHQnKS5yZXBsYWNlKCdweCcsICcnKSk7XG5cbiAgLy8gcmVkdWNlIHdpZHRoIGJ5IHJvdy9jb2wgbGFiZWxzIGFuZCBieSBncmV5X2JvcmRlciB3aWR0aCAocmVkdWNlIHdpZHRoIGJ5IGxlc3Mgc2luY2UgdGhpcyBpcyBsZXNzIGFwYXJlbnQgd2l0aCBzbGFudGVkIGNvbCBsYWJlbHMpXG4gIHZhciBpbmlfY2x1c3Rfd2lkdGggPSBwYXJhbXMudml6LnN2Z19kaW0ud2lkdGggLSAocGFyYW1zLmxhYmVscy5zdXBlcl9sYWJlbF93aWR0aCArXG4gICAgcGFyYW1zLm5vcm1fbGFiZWwud2lkdGgucm93ICsgcGFyYW1zLmNsYXNzX3Jvb20ucm93KSAtIHBhcmFtcy52aXouZ3JleV9ib3JkZXJfd2lkdGggLSBwYXJhbXMudml6LnNwaWxsb3Zlcl94X29mZnNldDtcblxuICAvLyB0aGVyZSBpcyBzcGFjZSBiZXR3ZWVuIHRoZSBjbHVzdGVyZ3JhbSBhbmQgdGhlIGJvcmRlclxuICB2YXIgaW5pX2NsdXN0X2hlaWdodCA9IHBhcmFtcy52aXouc3ZnX2RpbS5oZWlnaHQgLSAocGFyYW1zLmxhYmVscy5zdXBlcl9sYWJlbF93aWR0aCArXG4gICAgcGFyYW1zLm5vcm1fbGFiZWwud2lkdGguY29sICsgcGFyYW1zLmNsYXNzX3Jvb20uY29sKSAtIDUgKiBwYXJhbXMudml6LmdyZXlfYm9yZGVyX3dpZHRoO1xuXG4gIC8vIHJlZHVjZSBjbHVzdGVyZ3JhbSB3aWR0aCBpZiB0cmlhbmdsZXMgYXJlIHRhbGxlciB0aGFuIHRoZSBub3JtYWwgd2lkdGhcbiAgLy8gb2YgdGhlIGNvbHVtbnNcbiAgdmFyIHRtcF94X3NjYWxlID0gZDMuc2NhbGUub3JkaW5hbCgpLnJhbmdlQmFuZHMoWzAsIGluaV9jbHVzdF93aWR0aF0pO1xuICB0bXBfeF9zY2FsZS5kb21haW4ocGFyYW1zLm1hdHJpeC5vcmRlcnMuaW5pX3Jvdyk7XG4gIHZhciB0cmlhbmdsZV9oZWlnaHQgPSB0bXBfeF9zY2FsZS5yYW5nZUJhbmQoKS8yIDtcbiAgaWYgKHRyaWFuZ2xlX2hlaWdodCA+IHBhcmFtcy5ub3JtX2xhYmVsLndpZHRoLmNvbCl7XG4gICAgaW5pX2NsdXN0X3dpZHRoID0gaW5pX2NsdXN0X3dpZHRoICogKCBwYXJhbXMubm9ybV9sYWJlbC53aWR0aC5jb2wvdHJpYW5nbGVfaGVpZ2h0ICk7XG4gIH1cbiAgcGFyYW1zLnZpei5jbHVzdC5kaW0ud2lkdGggPSBpbmlfY2x1c3Rfd2lkdGggO1xuXG4gIC8vIGNsdXN0ZXJncmFtIGhlaWdodFxuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgLy8gZW5zdXJlIHRoYXQgcmVjdHMgYXJlIG5ldmVyIHRhbGxlciB0aGFuIHRoZXkgYXJlIHdpZGVcbiAgLy8gZm9yY2Ugc3F1YXJlIHRpbGVzXG4gIGlmIChpbmlfY2x1c3Rfd2lkdGggLyBwYXJhbXMudml6Lm51bV9jb2xfbm9kZXMgPCBpbmlfY2x1c3RfaGVpZ2h0IC8gcGFyYW1zLnZpei5udW1fcm93X25vZGVzKSB7XG5cbiAgICAvLyBzY2FsZSB0aGUgaGVpZ2h0XG4gICAgcGFyYW1zLnZpei5jbHVzdC5kaW0uaGVpZ2h0ID0gaW5pX2NsdXN0X3dpZHRoICogKHBhcmFtcy52aXoubnVtX3Jvd19ub2RlcyAvIHBhcmFtcy52aXoubnVtX2NvbF9ub2Rlcyk7XG5cbiAgICAvLyBrZWVwIHRyYWNrIG9mIHdoZXRoZXIgb3Igbm90IGEgZm9yY2Ugc3F1YXJlIGhhcyBvY2N1cnJlZFxuICAgIC8vIHNvIHRoYXQgSSBjYW4gYWRqdXN0IHRoZSBmb250IGFjY29yZGluZ2x5XG4gICAgcGFyYW1zLnZpei5mb3JjZV9zcXVhcmUgPSAxO1xuXG4gICAgLy8gbWFrZSBzdXJlIHRoYXQgZm9yY2Vfc3F1YXJlIGRvZXMgbm90IGNhdXNlIHRoZSBlbnRpcmUgdmlzdWFsaXphdGlvblxuICAgIC8vIHRvIGJlIHRhbGxlciB0aGFuIHRoZSBzdmcsIGlmIGl0IGRvZXMsIHRoZW4gdW5kb1xuICAgIGlmIChwYXJhbXMudml6LmNsdXN0LmRpbS5oZWlnaHQgPiBpbmlfY2x1c3RfaGVpZ2h0KSB7XG4gICAgLy8gbWFrZSB0aGUgaGVpZ2h0IGVxdWFsIHRvIHRoZSB3aWR0aFxuICAgIHBhcmFtcy52aXouY2x1c3QuZGltLmhlaWdodCA9IGluaV9jbHVzdF9oZWlnaHQ7XG4gICAgLy8ga2VlcCB0cmFjayBvZiB3aGV0aGVyIG9yIG5vdCBhIGZvcmNlIHNxdWFyZSBoYXMgb2NjdXJyZWRcbiAgICBwYXJhbXMudml6LmZvcmNlX3NxdWFyZSA9IDA7XG4gICAgfVxuICB9XG4gIC8vIGRvIG5vdCBmb3JjZSBzcXVhcmUgdGlsZXNcbiAgZWxzZSB7XG4gICAgLy8gdGhlIGhlaWdodCB3aWxsIGJlIGNhbGN1bGF0ZWQgbm9ybWFsbHkgLSBsZWFkaW5nIHRvIHdpZGUgdGlsZXNcbiAgICBwYXJhbXMudml6LmNsdXN0LmRpbS5oZWlnaHQgPSBpbmlfY2x1c3RfaGVpZ2h0O1xuICAgIC8vIGtlZXAgdHJhY2sgb2Ygd2hldGhlciBvciBub3QgYSBmb3JjZSBzcXVhcmUgaGFzIG9jY3VycmVkXG4gICAgcGFyYW1zLnZpei5mb3JjZV9zcXVhcmUgPSAwO1xuICB9XG5cbiAgLy8gem9vbV9zd2l0Y2ggZnJvbSAxIHRvIDJkIHpvb21cbiAgcGFyYW1zLnZpei56b29tX3N3aXRjaCA9IChwYXJhbXMudml6LmNsdXN0LmRpbS53aWR0aCAvIHBhcmFtcy52aXoubnVtX2NvbF9ub2RlcykgLyAocGFyYW1zLnZpei5jbHVzdC5kaW0uaGVpZ2h0IC8gcGFyYW1zLnZpei5udW1fcm93X25vZGVzKTtcblxuICAvLyB6b29tX3N3aXRjaCBjYW4gbm90IGJlIGxlc3MgdGhhbiAxXG4gIGlmIChwYXJhbXMudml6Lnpvb21fc3dpdGNoIDwgMSkge1xuICAgIHBhcmFtcy52aXouem9vbV9zd2l0Y2ggPSAxO1xuICB9XG5cblxuXG5cbiAgLy8gQmVnaW4gcmVzaXppbmcgdGhlIHZpc3VhbGl6YXRpb25cblxuXG4gIC8vIHJlc2l6ZSB0aGUgc3ZnXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gIHZhciBzdmdfZ3JvdXAgPSBkMy5zZWxlY3QocGFyYW1zLnZpei52aXpfc3ZnKVxuICAgIC5hdHRyKCd3aWR0aCcsIHBhcmFtcy52aXouc3ZnX2RpbS53aWR0aClcbiAgICAuYXR0cignaGVpZ2h0JywgcGFyYW1zLnZpei5zdmdfZGltLmhlaWdodCk7XG5cbiAgLy8gcmVkZWZpbmUgeF9zY2FsZSBhbmQgeV9zY2FsZSByYW5nZUJhbmRzXG4gIHBhcmFtcy5tYXRyaXgueF9zY2FsZS5yYW5nZUJhbmRzKFswLCBwYXJhbXMudml6LmNsdXN0LmRpbS53aWR0aF0pO1xuICBwYXJhbXMubWF0cml4Lnlfc2NhbGUucmFuZ2VCYW5kcyhbMCwgcGFyYW1zLnZpei5jbHVzdC5kaW0uaGVpZ2h0XSk7XG5cbiAgLy8gcmVkZWZpbmUgeCBhbmQgeSBwb3NpdGlvbnNcbiAgXy5lYWNoKHBhcmFtcy5uZXR3b3JrX2RhdGEubGlua3MsIGZ1bmN0aW9uKGQpe1xuICAgIGQueCA9IHBhcmFtcy5tYXRyaXgueF9zY2FsZShkLnRhcmdldCk7XG4gICAgZC55ID0gcGFyYW1zLm1hdHJpeC55X3NjYWxlKGQuc291cmNlKTtcbiAgfSk7XG5cbiAgLy8gcHJlY2FsYyByZWN0X3dpZHRoIGFuZCBoZWlnaHRcbiAgLy8gcGFyYW1zLm1hdHJpeC5yZWN0X3dpZHRoID0gcGFyYW1zLm1hdHJpeC54X3NjYWxlLnJhbmdlQmFuZCgpIC0gcGFyYW1zLnZpei5ib3JkZXJfd2lkdGg7XG4gIC8vIHBhcmFtcy5tYXRyaXgucmVjdF9oZWlnaHQgPSBwYXJhbXMubWF0cml4Lnlfc2NhbGUucmFuZ2VCYW5kKCkgLSBwYXJhbXMudml6LmJvcmRlcl93aWR0aC9wYXJhbXMudml6Lnpvb21fc3dpdGNoO1xuICBwYXJhbXMubWF0cml4LnJlY3Rfd2lkdGggPSBwYXJhbXMubWF0cml4Lnhfc2NhbGUucmFuZ2VCYW5kKCk7XG4gIHBhcmFtcy5tYXRyaXgucmVjdF9oZWlnaHQgPSBwYXJhbXMubWF0cml4Lnlfc2NhbGUucmFuZ2VCYW5kKCk7XG5cbiAgLy8gcmVzZXQgY3Jvc3NmaWx0ZXJcbiAgcGFyYW1zLmNmID0ge307XG4gIHBhcmFtcy5jZi5saW5rcyA9IGNyb3NzZmlsdGVyKHBhcmFtcy5uZXR3b3JrX2RhdGEubGlua3MpO1xuICBwYXJhbXMuY2YuZGltX3ggPSBwYXJhbXMuY2YubGlua3MuZGltZW5zaW9uKGZ1bmN0aW9uKGQpe3JldHVybiBkLng7fSk7XG4gIHBhcmFtcy5jZi5kaW1feSA9IHBhcmFtcy5jZi5saW5rcy5kaW1lbnNpb24oZnVuY3Rpb24oZCl7cmV0dXJuIGQueTt9KTtcblxuICAvLyByZXNldCBhbGwgY3Jvc3NmaWx0ZXIgZmlsdGVyc1xuICBwYXJhbXMuY2YuZGltX3guZmlsdGVyQWxsKCk7XG4gIHBhcmFtcy5jZi5kaW1feS5maWx0ZXJBbGwoKTtcblxuICAvLyByZWRlZmluZSBsaW5rcyAtIGdyYWIgYWxsIGxpbmtzIHNpbmNlIGZpbHRlciBpcyByZXNldFxuICB2YXIgaW5zdF9saW5rcyA9IHBhcmFtcy5jZi5kaW1feC50b3AoSW5maW5pdHkpO1xuXG4gIC8vIHJlZGVmaW5lIHpvb20gZXh0ZW50XG4gIHBhcmFtcy52aXoucmVhbF96b29tID0gcGFyYW1zLm5vcm1fbGFiZWwud2lkdGguY29sIC8gKHBhcmFtcy5tYXRyaXgucmVjdF93aWR0aC8yKTtcblxuICAvLyBkaXNhYmxlIHpvb20gd2hpbGUgdHJhbnNpdGlvbmluZ1xuICBzdmdfZ3JvdXAub24oJy56b29tJywgbnVsbCk7XG5cbiAgcGFyYW1zLnpvb21fYmVoYXZpb3JcbiAgICAuc2NhbGVFeHRlbnQoWzEsIHBhcmFtcy52aXoucmVhbF96b29tICogcGFyYW1zLnZpei56b29tX3N3aXRjaF0pXG4gICAgLm9uKCd6b29tJywgZnVuY3Rpb24oKXtcbiAgICAgIHpvb21lZChwYXJhbXMpO1xuICAgIH0pO1xuXG5cbiAgLy8gcmVlbmFibGUgem9vbSBhZnRlciB0cmFuc2l0aW9uXG4gIGlmIChwYXJhbXMudml6LmRvX3pvb20pIHtcbiAgICBzdmdfZ3JvdXAuY2FsbChwYXJhbXMuem9vbV9iZWhhdmlvcik7XG4gIH1cblxuICAvLyBwcmV2ZW50IG5vcm1hbCBkb3VibGUgY2xpY2sgem9vbSBldGNcbiAgaW5pX2RvdWJsZWNsaWNrKHBhcmFtcyk7XG5cbiAgLy8gcmVkZWZpbmUgYm9yZGVyIHdpZHRoXG4gIHBhcmFtcy52aXouYm9yZGVyX3dpZHRoID0gcGFyYW1zLm1hdHJpeC5yZWN0X3dpZHRoIC8gNTU7XG5cbiAgLy8gdGhlIGRlZmF1bHQgZm9udCBzaXplcyBhcmUgc2V0IGhlcmVcbiAgcGFyYW1zLmxhYmVscy5kZWZhdWx0X2ZzX3JvdyA9IHBhcmFtcy5tYXRyaXgucmVjdF9oZWlnaHQgKiAxLjA3O1xuICBwYXJhbXMubGFiZWxzLmRlZmF1bHRfZnNfY29sID0gcGFyYW1zLm1hdHJpeC5yZWN0X3dpZHRoICogMC44NyAgO1xuXG4gIHN2Z19ncm91cC5zZWxlY3QoJy5zdXBlcl9iYWNrZ3JvdW5kJylcbiAgICAuc3R5bGUoJ3dpZHRoJywgcGFyYW1zLnZpei5zdmdfZGltLndpZHRoKVxuICAgIC5zdHlsZSgnaGVpZ2h0JywgcGFyYW1zLnZpei5zdmdfZGltLmhlaWdodCk7XG5cbiAgc3ZnX2dyb3VwLnNlbGVjdCgnLmdyZXlfYmFja2dyb3VuZCcpXG4gICAgLmF0dHIoJ3dpZHRoJywgcGFyYW1zLnZpei5jbHVzdC5kaW0ud2lkdGgpXG4gICAgLmF0dHIoJ2hlaWdodCcsIHBhcmFtcy52aXouY2x1c3QuZGltLmhlaWdodCk7XG5cbiAgLy8gcmVzaXplIHJvd3MgYW5kIHRpbGVzIHdpdGhpbiByb3dzXG5cbiAgc3ZnX2dyb3VwLnNlbGVjdEFsbCgnLnJvdycpXG4gICAgLmF0dHIoJ3RyYW5zZm9ybScsIGZ1bmN0aW9uKGQpe1xuICAgICAgdmFyIHRtcF9pbmRleCA9IF8uaW5kZXhPZihyb3dfbm9kZXNfbmFtZXMsIGQubmFtZSk7XG4gICAgICByZXR1cm4gJ3RyYW5zbGF0ZSgwLCcrcGFyYW1zLm1hdHJpeC55X3NjYWxlKHRtcF9pbmRleCkrJyknO1xuICAgIH0pO1xuXG4gIC8vIHJlc2V0IHRpbGVzXG4gIHN2Z19ncm91cC5zZWxlY3RBbGwoJy5yb3cnKVxuICAgIC5zZWxlY3RBbGwoJy50aWxlJylcbiAgICAuYXR0cigndHJhbnNmb3JtJywgZnVuY3Rpb24oZCl7XG4gICAgICB2YXIgeF9wb3MgPSBwYXJhbXMubWF0cml4Lnhfc2NhbGUoZC5wb3NfeCkgKyAwLjUqcGFyYW1zLnZpei5ib3JkZXJfd2lkdGg7XG4gICAgICB2YXIgeV9wb3MgPSAwLjUqcGFyYW1zLnZpei5ib3JkZXJfd2lkdGgvcGFyYW1zLnZpei56b29tX3N3aXRjaDtcbiAgICAgIHJldHVybiAndHJhbnNsYXRlKCcreF9wb3MrJywnK3lfcG9zKycpJztcbiAgICB9KVxuICAgIC5hdHRyKCd3aWR0aCcsIHBhcmFtcy5tYXRyaXgucmVjdF93aWR0aClcbiAgICAuYXR0cignaGVpZ2h0JywgcGFyYW1zLm1hdHJpeC5yZWN0X2hlaWdodCk7XG5cbiAgLy8gcmVzZXQgdGlsZV91cFxuICBzdmdfZ3JvdXAuc2VsZWN0QWxsKCcucm93JylcbiAgICAuc2VsZWN0QWxsKCcudGlsZV91cCcpXG4gICAgLmF0dHIoJ2QnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgLy8gdXAgdHJpYW5nbGVcbiAgICAgICAgdmFyIHN0YXJ0X3ggPSAwO1xuICAgICAgICB2YXIgZmluYWxfeCA9IHBhcmFtcy5tYXRyaXgueF9zY2FsZS5yYW5nZUJhbmQoKTtcbiAgICAgICAgdmFyIHN0YXJ0X3kgPSAwO1xuICAgICAgICB2YXIgZmluYWxfeSA9IHBhcmFtcy5tYXRyaXgueV9zY2FsZS5yYW5nZUJhbmQoKSAtIHBhcmFtcy5tYXRyaXgueV9zY2FsZS5yYW5nZUJhbmQoKSAvNjA7XG5cbiAgICAgICAgdmFyIG91dHB1dF9zdHJpbmcgPSAnTScgKyBzdGFydF94ICsgJywnICsgc3RhcnRfeSArICcsIEwnICtcbiAgICAgICAgc3RhcnRfeCArICcsICcgKyBmaW5hbF95ICsgJywgTCcgKyBmaW5hbF94ICsgJywwIFonO1xuXG4gICAgICAgIHJldHVybiBvdXRwdXRfc3RyaW5nO1xuICAgICAgfSlcbiAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCBmdW5jdGlvbihkKSB7XG4gICAgICAgIHZhciB4X3BvcyA9IHBhcmFtcy5tYXRyaXgueF9zY2FsZShkLnBvc194KSArIDAuNSpwYXJhbXMudml6LmJvcmRlcl93aWR0aDtcbiAgICAgICAgdmFyIHlfcG9zID0gMC41KnBhcmFtcy52aXouYm9yZGVyX3dpZHRoL3BhcmFtcy52aXouem9vbV9zd2l0Y2g7XG4gICAgICAgIHJldHVybiAndHJhbnNsYXRlKCcgKyB4X3BvcyArICcsJyt5X3BvcysnKSc7XG4gICAgICB9KTtcblxuICBzdmdfZ3JvdXAuc2VsZWN0QWxsKCcucm93JylcbiAgICAuc2VsZWN0QWxsKCcudGlsZV9kbicpXG4gICAgLmF0dHIoJ2QnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgLy8gZG4gdHJpYW5nbGVcbiAgICAgICAgdmFyIHN0YXJ0X3ggPSAwO1xuICAgICAgICB2YXIgZmluYWxfeCA9IHBhcmFtcy5tYXRyaXgueF9zY2FsZS5yYW5nZUJhbmQoKTtcbiAgICAgICAgdmFyIHN0YXJ0X3kgPSBwYXJhbXMubWF0cml4Lnlfc2NhbGUucmFuZ2VCYW5kKCkgLSBwYXJhbXMubWF0cml4Lnlfc2NhbGUucmFuZ2VCYW5kKCkgLzYwO1xuICAgICAgICB2YXIgZmluYWxfeSA9IHBhcmFtcy5tYXRyaXgueV9zY2FsZS5yYW5nZUJhbmQoKSAtIHBhcmFtcy5tYXRyaXgueV9zY2FsZS5yYW5nZUJhbmQoKSAvNjA7XG5cbiAgICAgICAgdmFyIG91dHB1dF9zdHJpbmcgPSAnTScgKyBzdGFydF94ICsgJywgJyArIHN0YXJ0X3kgKyAnICwgICBMJyArXG4gICAgICAgIGZpbmFsX3ggKyAnLCAnICsgZmluYWxfeSArICcsICBMJyArIGZpbmFsX3ggKyAnLDAgWic7XG5cbiAgICAgICAgcmV0dXJuIG91dHB1dF9zdHJpbmc7XG4gICAgICB9KVxuICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsIGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgdmFyIHhfcG9zID0gcGFyYW1zLm1hdHJpeC54X3NjYWxlKGQucG9zX3gpICsgMC41KnBhcmFtcy52aXouYm9yZGVyX3dpZHRoO1xuICAgICAgICB2YXIgeV9wb3MgPSAwLjUqcGFyYW1zLnZpei5ib3JkZXJfd2lkdGgvcGFyYW1zLnZpei56b29tX3N3aXRjaDtcbiAgICAgICAgcmV0dXJuICd0cmFuc2xhdGUoJyArIHhfcG9zICsgJywnK3lfcG9zKycpJztcbiAgICAgIH0pO1xuXG4gIHN2Z19ncm91cC5zZWxlY3RBbGwoJy5oaWdobGlnaHRpbmdfcmVjdCcpXG4gICAgLmF0dHIoJ3dpZHRoJywgcGFyYW1zLm1hdHJpeC54X3NjYWxlLnJhbmdlQmFuZCgpICogMC44MClcbiAgICAuYXR0cignaGVpZ2h0JywgcGFyYW1zLm1hdHJpeC55X3NjYWxlLnJhbmdlQmFuZCgpICogMC44MCk7XG5cbiAgc3ZnX2dyb3VwLnNlbGVjdEFsbCgnLnRpbGVfc3BsaXRfdXAnKVxuICAgIC5hdHRyKCdkJywgZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc3RhcnRfeCA9IDA7XG4gICAgICB2YXIgZmluYWxfeCA9IHBhcmFtcy5tYXRyaXgueF9zY2FsZS5yYW5nZUJhbmQoKTtcbiAgICAgIHZhciBzdGFydF95ID0gMDtcbiAgICAgIHZhciBmaW5hbF95ID0gcGFyYW1zLm1hdHJpeC55X3NjYWxlLnJhbmdlQmFuZCgpIC0gcGFyYW1zLm1hdHJpeC55X3NjYWxlLnJhbmdlQmFuZCgpLzYwO1xuICAgICAgdmFyIG91dHB1dF9zdHJpbmcgPSAnTScgKyBzdGFydF94ICsgJywnICsgc3RhcnRfeSArICcsIEwnICtcbiAgICAgICAgc3RhcnRfeCArICcsICcgKyBmaW5hbF95ICsgJywgTCcgKyBmaW5hbF94ICsgJywwIFonO1xuICAgICAgcmV0dXJuIG91dHB1dF9zdHJpbmc7XG4gICAgfSk7XG5cbiAgc3ZnX2dyb3VwLnNlbGVjdEFsbCgnLnRpbGVfc3BsaXRfZG4nKVxuICAgIC5hdHRyKCdkJywgZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc3RhcnRfeCA9IDA7XG4gICAgICB2YXIgZmluYWxfeCA9IHBhcmFtcy5tYXRyaXgueF9zY2FsZS5yYW5nZUJhbmQoKTtcbiAgICAgIHZhciBzdGFydF95ID0gcGFyYW1zLm1hdHJpeC55X3NjYWxlLnJhbmdlQmFuZCgpIC0gcGFyYW1zLm1hdHJpeC55X3NjYWxlLnJhbmdlQmFuZCgpLzYwO1xuICAgICAgdmFyIGZpbmFsX3kgPSBwYXJhbXMubWF0cml4Lnlfc2NhbGUucmFuZ2VCYW5kKCkgLSBwYXJhbXMubWF0cml4Lnlfc2NhbGUucmFuZ2VCYW5kKCkvNjA7XG4gICAgICB2YXIgb3V0cHV0X3N0cmluZyA9ICdNJyArIHN0YXJ0X3ggKyAnLCAnICsgc3RhcnRfeSArICcgLCAgIEwnICtcbiAgICAgICAgZmluYWxfeCArICcsICcgKyBmaW5hbF95ICsgJywgIEwnICsgZmluYWxfeCArICcsMCBaJztcbiAgICAgIHJldHVybiBvdXRwdXRfc3RyaW5nO1xuICAgIH0pO1xuXG4gIC8vIHJlcG9zaXRpb24gdGlsZSBoaWdobGlnaHRcbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICB2YXIgcmVsX3dpZHRoX2hsaWdodCA9IDY7XG4gIHZhciBvcGFjaXR5X2hsaWdodCA9IDAuODU7XG4gIHZhciBobGlnaHRfd2lkdGggPSByZWxfd2lkdGhfaGxpZ2h0KnBhcmFtcy52aXouYm9yZGVyX3dpZHRoO1xuICB2YXIgaGxpZ2h0X2hlaWdodCA9IHJlbF93aWR0aF9obGlnaHQqcGFyYW1zLnZpei5ib3JkZXJfd2lkdGgvcGFyYW1zLnZpei56b29tX3N3aXRjaDtcblxuICAvLyB0b3AgaGlnaGxpZ2h0XG4gIGQzLnNlbGVjdChwYXJhbXMucm9vdCsnIC50b3BfaGxpZ2h0JylcbiAgICAuYXR0cignd2lkdGgnLCBwYXJhbXMubWF0cml4LnJlY3Rfd2lkdGgpXG4gICAgLmF0dHIoJ2hlaWdodCcsIGhsaWdodF9oZWlnaHQpXG4gICAgLmF0dHIoJ3RyYW5zZm9ybScsIGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuICd0cmFuc2xhdGUoJyArIHBhcmFtcy5tYXRyaXgueF9zY2FsZShwYXJhbXMubWF0cml4LmNsaWNrX2hsaWdodF94KSArICcsMCknO1xuICAgIH0pO1xuXG4gIC8vIGxlZnQgaGlnaGxpZ2h0XG4gIGQzLnNlbGVjdChwYXJhbXMucm9vdCsnIC5sZWZ0X2hsaWdodCcpXG4gICAgLmF0dHIoJ3dpZHRoJywgaGxpZ2h0X3dpZHRoKVxuICAgIC5hdHRyKCdoZWlnaHQnLCBwYXJhbXMubWF0cml4LnJlY3Rfd2lkdGggLSBobGlnaHRfaGVpZ2h0KjAuOTkgKVxuICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiAndHJhbnNsYXRlKCcgKyBwYXJhbXMubWF0cml4Lnhfc2NhbGUocGFyYW1zLm1hdHJpeC5jbGlja19obGlnaHRfeCkgKyAnLCcrXG4gICAgICAgIGhsaWdodF9oZWlnaHQqMC45OSsnKSc7XG4gICAgfSk7XG5cbiAgLy8gcmlnaHQgaGlnaGxpZ2h0XG4gIGQzLnNlbGVjdChwYXJhbXMucm9vdCsnIC5yaWdodF9obGlnaHQnKVxuICAgIC5hdHRyKCd3aWR0aCcsIGhsaWdodF93aWR0aClcbiAgICAuYXR0cignaGVpZ2h0JywgcGFyYW1zLm1hdHJpeC5yZWN0X2hlaWdodCAtIGhsaWdodF9oZWlnaHQqMC45OSApXG4gICAgLmF0dHIoJ3RyYW5zZm9ybScsIGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHRtcF90cmFuc2xhdGUgPSBwYXJhbXMubWF0cml4Lnhfc2NhbGUocGFyYW1zLm1hdHJpeC5jbGlja19obGlnaHRfeCkgKyBwYXJhbXMubWF0cml4LnJlY3Rfd2lkdGggLSBobGlnaHRfd2lkdGg7XG4gICAgICByZXR1cm4gJ3RyYW5zbGF0ZSgnICsgdG1wX3RyYW5zbGF0ZSArICcsJytcbiAgICAgICAgaGxpZ2h0X2hlaWdodCowLjk5KycpJztcbiAgICB9KTtcblxuICAvLyBib3R0b20gaGlnaGxpZ2h0XG4gIGQzLnNlbGVjdChwYXJhbXMucm9vdCsnIC5ib3R0b21faGxpZ2h0JylcbiAgICAuYXR0cignd2lkdGgnLCBmdW5jdGlvbigpe1xuICAgICAgcmV0dXJuIHBhcmFtcy5tYXRyaXgucmVjdF93aWR0aCAtIDEuOTgqaGxpZ2h0X3dpZHRoO30pXG4gICAgLmF0dHIoJ2hlaWdodCcsIGhsaWdodF9oZWlnaHQpXG4gICAgLmF0dHIoJ3RyYW5zZm9ybScsIGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHRtcF90cmFuc2xhdGVfeCA9IHBhcmFtcy5tYXRyaXgueF9zY2FsZShwYXJhbXMubWF0cml4LmNsaWNrX2hsaWdodF94KSArIGhsaWdodF93aWR0aCowLjk5O1xuICAgICAgdmFyIHRtcF90cmFuc2xhdGVfeSA9IHBhcmFtcy5tYXRyaXgucmVjdF9oZWlnaHQgLSBobGlnaHRfaGVpZ2h0O1xuICAgICAgcmV0dXJuICd0cmFuc2xhdGUoJyArIHRtcF90cmFuc2xhdGVfeCArICcsJytcbiAgICAgICAgdG1wX3RyYW5zbGF0ZV95KycpJztcbiAgICB9KTtcblxuICAvLyByZXNpemUgcm93IGhpZ2hsaWdodFxuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gIGQzLnNlbGVjdChwYXJhbXMucm9vdCsnIC5yb3dfdG9wX2hsaWdodCcpXG4gICAgLmF0dHIoJ3dpZHRoJyxwYXJhbXMudml6LnN2Z19kaW0ud2lkdGgpXG4gICAgLmF0dHIoJ2hlaWdodCcsaGxpZ2h0X2hlaWdodCk7XG5cbiAgZDMuc2VsZWN0KHBhcmFtcy5yb290KycgLnJvd19ib3R0b21faGxpZ2h0JylcbiAgICAuYXR0cignd2lkdGgnLHBhcmFtcy52aXouc3ZnX2RpbS53aWR0aClcbiAgICAuYXR0cignaGVpZ2h0JyxobGlnaHRfaGVpZ2h0KVxuICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCBmdW5jdGlvbigpe1xuICAgICAgdmFyIHRtcF90cmFuc2xhdGVfeSA9IHBhcmFtcy5tYXRyaXgucmVjdF9oZWlnaHQgLSBobGlnaHRfaGVpZ2h0O1xuICAgICAgcmV0dXJuICd0cmFuc2xhdGUoMCwnK3RtcF90cmFuc2xhdGVfeSsnKSc7XG4gICAgfSk7XG5cbiAgLy8gcmVzaXplIGNvbCBoaWdobGlnaHRcbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICBkMy5zZWxlY3QocGFyYW1zLnJvb3QrJyAuY29sX3RvcF9obGlnaHQnKVxuICAgIC5hdHRyKCd3aWR0aCcscGFyYW1zLnZpei5jbHVzdC5kaW0uaGVpZ2h0KVxuICAgIC5hdHRyKCdoZWlnaHQnLGhsaWdodF93aWR0aClcbiAgICAuYXR0cigndHJhbnNmb3JtJyxmdW5jdGlvbigpe1xuICAgICAgICAgIHZhciB0bXBfdHJhbnNsYXRlX3kgPSAwO1xuICAgICAgICAgIHZhciB0bXBfdHJhbnNsYXRlX3ggPSAtKHBhcmFtcy52aXouY2x1c3QuZGltLmhlaWdodCtcbiAgICAgICAgICAgIHBhcmFtcy5jbGFzc19yb29tLmNvbCtwYXJhbXMudml6LnVuaV9tYXJnaW4pO1xuICAgICAgICAgIHJldHVybiAndHJhbnNsYXRlKCcrdG1wX3RyYW5zbGF0ZV94KycsJyt0bXBfdHJhbnNsYXRlX3krJyknO1xuICAgICAgICB9KTtcblxuICBkMy5zZWxlY3QocGFyYW1zLnJvb3QrJyAuY29sX2JvdHRvbV9obGlnaHQnKVxuICAgIC5hdHRyKCd3aWR0aCcscGFyYW1zLnZpei5jbHVzdC5kaW0uaGVpZ2h0KVxuICAgIC5hdHRyKCdoZWlnaHQnLGhsaWdodF93aWR0aClcbiAgICAuYXR0cigndHJhbnNmb3JtJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICB2YXIgdG1wX3RyYW5zbGF0ZV95ID0gcGFyYW1zLm1hdHJpeC5yZWN0X3dpZHRoIC0gaGxpZ2h0X3dpZHRoO1xuICAgICAgICAgIHZhciB0bXBfdHJhbnNsYXRlX3ggPSAtKHBhcmFtcy52aXouY2x1c3QuZGltLmhlaWdodCArXG4gICAgICAgICAgICBwYXJhbXMuY2xhc3Nfcm9vbS5jb2wrcGFyYW1zLnZpei51bmlfbWFyZ2luKTtcbiAgICAgICAgICByZXR1cm4gJ3RyYW5zbGF0ZSgnK3RtcF90cmFuc2xhdGVfeCsnLCcrdG1wX3RyYW5zbGF0ZV95KycpJztcbiAgICAgICAgfSk7XG5cbiAgLy8gYWRkIHRleHQgdG8gcm93L2NvbCBkdXJpbmcgcmVzaXplXG4gIGZ1bmN0aW9uIG5vcm1hbF9uYW1lKGQpe1xuICAgIHZhciBpbnN0X25hbWUgPSBkLm5hbWUucmVwbGFjZSgvXy9nLCAnICcpLnNwbGl0KCcjJylbMF07XG4gICAgaWYgKGluc3RfbmFtZS5sZW5ndGggPiBwYXJhbXMubGFiZWxzLm1heF9sYWJlbF9jaGFyKXtcbiAgICAgIGluc3RfbmFtZSA9IGluc3RfbmFtZS5zdWJzdHJpbmcoMCxwYXJhbXMubGFiZWxzLm1heF9sYWJlbF9jaGFyKSsnLi4nO1xuICAgIH1cbiAgICByZXR1cm4gaW5zdF9uYW1lO1xuICB9XG5cbiAgLy8gcmVzaXplIHJvdyBsYWJlbHNcbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgc3ZnX2dyb3VwLnNlbGVjdChwYXJhbXMucm9vdCsnIHJvd19jb250YWluZXInKVxuICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKCcgKyBwYXJhbXMubm9ybV9sYWJlbC5tYXJnaW4ubGVmdCArICcsJyArXG4gICAgcGFyYW1zLnZpei5jbHVzdC5tYXJnaW4udG9wICsgJyknKTtcblxuICBzdmdfZ3JvdXAuc2VsZWN0KHBhcmFtcy5yb290KycgLnJvd19jb250YWluZXInKVxuICAgIC5zZWxlY3QoJy53aGl0ZV9iYXJzJylcbiAgICAuYXR0cignd2lkdGgnLCBwYXJhbXMubm9ybV9sYWJlbC5iYWNrZ3JvdW5kLnJvdylcbiAgICAuYXR0cignaGVpZ2h0JywgMzAqcGFyYW1zLnZpei5jbHVzdC5kaW0uaGVpZ2h0ICsgJ3B4Jyk7XG5cbiAgc3ZnX2dyb3VwLnNlbGVjdChwYXJhbXMucm9vdCsnIC5yb3dfY29udGFpbmVyJylcbiAgICAuc2VsZWN0KCcucm93X2xhYmVsX2NvbnRhaW5lcicpXG4gICAgLmF0dHIoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoJyArIHBhcmFtcy5ub3JtX2xhYmVsLndpZHRoLnJvdyArICcsMCknKTtcblxuICBzdmdfZ3JvdXAuc2VsZWN0QWxsKCcucm93X2xhYmVsX3RleHQnKVxuICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCBmdW5jdGlvbihkKSB7XG4gICAgICB2YXIgaW5zdF9pbmRleCA9IF8uaW5kZXhPZihyb3dfbm9kZXNfbmFtZXMsIGQubmFtZSk7XG4gICAgICByZXR1cm4gJ3RyYW5zbGF0ZSgwLCcgKyBwYXJhbXMubWF0cml4Lnlfc2NhbGUoaW5zdF9pbmRleCkgKyAnKSc7XG4gICAgfSk7XG5cblxuICBzdmdfZ3JvdXAuc2VsZWN0QWxsKCcucm93X2xhYmVsX3RleHQnKVxuICAgIC5zZWxlY3QoJ3RleHQnKVxuICAgIC5zdHlsZSgnZm9udC1zaXplJywgcGFyYW1zLmxhYmVscy5kZWZhdWx0X2ZzX3JvdyArICdweCcpXG4gICAgLnRleHQoZnVuY3Rpb24oZCl7IHJldHVybiBub3JtYWxfbmFtZShkKTt9KTtcblxuICAvLyBjaGFuZ2UgdGhlIHNpemUgb2YgdGhlIGhpZ2hsaWdodGluZyByZWN0c1xuICBzdmdfZ3JvdXAuc2VsZWN0QWxsKCcucm93X2xhYmVsX3RleHQnKVxuICAgIC5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGJib3ggPSBkMy5zZWxlY3QodGhpcykuc2VsZWN0KCd0ZXh0JylbMF1bMF0uZ2V0QkJveCgpO1xuICAgICAgZDMuc2VsZWN0KHRoaXMpXG4gICAgICAgIC5zZWxlY3QoJ3JlY3QnKVxuICAgICAgICAuYXR0cigneCcsIGJib3gueCApXG4gICAgICAgIC5hdHRyKCd5JywgMClcbiAgICAgICAgLmF0dHIoJ3dpZHRoJywgYmJveC53aWR0aCApXG4gICAgICAgIC5hdHRyKCdoZWlnaHQnLCBwYXJhbXMubWF0cml4LnJlY3RfaGVpZ2h0KVxuICAgICAgICAuc3R5bGUoJ2ZpbGwnLCAneWVsbG93JylcbiAgICAgICAgLnN0eWxlKCdvcGFjaXR5JywgZnVuY3Rpb24oZCkge1xuICAgICAgICAgIHZhciBpbnN0X29wYWNpdHkgPSAwO1xuICAgICAgICAgIC8vIGhpZ2hsaWdodCB0YXJnZXQgZ2VuZXNcbiAgICAgICAgICBpZiAoZC50YXJnZXQgPT09IDEpIHtcbiAgICAgICAgICAgIGluc3Rfb3BhY2l0eSA9IDE7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBpbnN0X29wYWNpdHk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gIC8vIGxhYmVsIHRoZSB3aWRlc3Qgcm93IGFuZCBjb2wgbGFiZWxzXG4gIHBhcmFtcy5ib3VuZGluZ193aWR0aF9tYXggPSB7fTtcbiAgcGFyYW1zLmJvdW5kaW5nX3dpZHRoX21heC5yb3cgPSAwO1xuICBkMy5zZWxlY3RBbGwoJy5yb3dfbGFiZWxfdGV4dCcpLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgdmFyIHRtcF93aWR0aCA9IGQzLnNlbGVjdCh0aGlzKS5zZWxlY3QoJ3RleHQnKS5ub2RlKCkuZ2V0QkJveCgpLndpZHRoO1xuICAgIGlmICh0bXBfd2lkdGggPiBwYXJhbXMuYm91bmRpbmdfd2lkdGhfbWF4LnJvdykge1xuICAgICAgcGFyYW1zLmJvdW5kaW5nX3dpZHRoX21heC5yb3cgPSB0bXBfd2lkdGg7XG4gICAgfVxuICB9KTtcblxuICBzdmdfZ3JvdXAuc2VsZWN0KCcucm93X3Zpel9jb250YWluZXInKVxuICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKCcgKyBwYXJhbXMubm9ybV9sYWJlbC53aWR0aC5yb3cgKyAnLDApJyk7XG5cbiAgc3ZnX2dyb3VwLnNlbGVjdCgnLnJvd192aXpfY29udGFpbmVyJylcbiAgICAuc2VsZWN0KCd3aGl0ZV9iYXJzJylcbiAgICAuYXR0cignd2lkdGgnLCBwYXJhbXMuY2xhc3Nfcm9vbS5yb3cgKyAncHgnKVxuICAgIC5hdHRyKCdoZWlnaHQnLCBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBpbnN0X2hlaWdodCA9IHBhcmFtcy52aXouY2x1c3QuZGltLmhlaWdodDtcbiAgICAgIHJldHVybiBpbnN0X2hlaWdodDtcbiAgICB9KTtcblxuICBzdmdfZ3JvdXAuc2VsZWN0QWxsKCcucm93X3Zpel9ncm91cCcpXG4gICAgLmF0dHIoJ3RyYW5zZm9ybScsIGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgdmFyIGluc3RfaW5kZXggPSBfLmluZGV4T2Yocm93X25vZGVzX25hbWVzLCBkLm5hbWUpO1xuICAgICAgICByZXR1cm4gJ3RyYW5zbGF0ZSgwLCAnICsgcGFyYW1zLm1hdHJpeC55X3NjYWxlKGluc3RfaW5kZXgpICsgJyknO1xuICAgICAgfSk7XG5cbiAgc3ZnX2dyb3VwLnNlbGVjdEFsbCgnLnJvd192aXpfZ3JvdXAnKVxuICAgIC5zZWxlY3QoJ3BhdGgnKVxuICAgIC5hdHRyKCdkJywgZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgb3JpZ2luX3ggPSBwYXJhbXMuY2xhc3Nfcm9vbS5zeW1ib2xfd2lkdGggLSAxO1xuICAgICAgdmFyIG9yaWdpbl95ID0gMDtcbiAgICAgIHZhciBtaWRfeCA9IDE7XG4gICAgICB2YXIgbWlkX3kgPSBwYXJhbXMubWF0cml4LnJlY3RfaGVpZ2h0IC8gMjtcbiAgICAgIHZhciBmaW5hbF94ID0gcGFyYW1zLmNsYXNzX3Jvb20uc3ltYm9sX3dpZHRoIC0gMTtcbiAgICAgIHZhciBmaW5hbF95ID0gcGFyYW1zLm1hdHJpeC5yZWN0X2hlaWdodDtcbiAgICAgIHZhciBvdXRwdXRfc3RyaW5nID0gJ00gJyArIG9yaWdpbl94ICsgJywnICsgb3JpZ2luX3kgKyAnIEwgJyArXG4gICAgICAgIG1pZF94ICsgJywnICsgbWlkX3kgKyAnLCBMICcgKyBmaW5hbF94ICsgJywnICsgZmluYWxfeSArICcgWic7XG4gICAgICByZXR1cm4gb3V0cHV0X3N0cmluZztcbiAgICB9KTtcblxuXG4gICAgaWYgKHV0aWxzLmhhcyggcGFyYW1zLm5ldHdvcmtfZGF0YS5yb3dfbm9kZXNbMF0sICd2YWx1ZScpKSB7XG5cbiAgICAgIC8vIHNldCBiYXIgc2NhbGVcbiAgICAgIHZhciBlbnJfbWF4ID0gTWF0aC5hYnMoXy5tYXgoIHBhcmFtcy5uZXR3b3JrX2RhdGEucm93X25vZGVzLCBmdW5jdGlvbihkKSB7IHJldHVybiBNYXRoLmFicyhkLnZhbHVlKTsgfSApLnZhbHVlKSA7XG4gICAgICBwYXJhbXMubGFiZWxzLmJhcl9zY2FsZV9yb3cgPSBkMy5zY2FsZVxuICAgICAgICAubGluZWFyKClcbiAgICAgICAgLmRvbWFpbihbMCwgZW5yX21heF0pXG4gICAgICAgIC5yYW5nZShbMCwgcGFyYW1zLm5vcm1fbGFiZWwud2lkdGgucm93IF0pO1xuXG4gICAgICBzdmdfZ3JvdXAuc2VsZWN0QWxsKCcucm93X2JhcnMnKVxuICAgICAgICAuYXR0cignd2lkdGgnLCBmdW5jdGlvbihkKSB7XG4gICAgICAgICAgdmFyIGluc3RfdmFsdWUgPSAwO1xuICAgICAgICAgIGluc3RfdmFsdWUgPSBwYXJhbXMubGFiZWxzLmJhcl9zY2FsZV9yb3coIE1hdGguYWJzKGQudmFsdWUpICk7XG4gICAgICAgICAgcmV0dXJuIGluc3RfdmFsdWU7XG4gICAgICAgIH0pXG4gICAgICAgIC5hdHRyKCd4JywgZnVuY3Rpb24oZCkge1xuICAgICAgICAgIHZhciBpbnN0X3ZhbHVlID0gMDtcbiAgICAgICAgICBpbnN0X3ZhbHVlID0gLXBhcmFtcy5sYWJlbHMuYmFyX3NjYWxlX3JvdyggTWF0aC5hYnMoZC52YWx1ZSkgKTtcbiAgICAgICAgICByZXR1cm4gaW5zdF92YWx1ZTtcbiAgICAgICAgfSlcbiAgICAgICAgLmF0dHIoJ2hlaWdodCcsIHBhcmFtcy5tYXRyaXgucmVjdF9oZWlnaHQgKTtcblxuICAgIH1cblxuICAgIC8vIHJlc2l6ZSBjb2wgbGFiZWxzXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICBzdmdfZ3JvdXAuc2VsZWN0KHBhcmFtcy5yb290KycgLmNvbF9jb250YWluZXInKVxuICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoJyArIHBhcmFtcy52aXouY2x1c3QubWFyZ2luLmxlZnQgKyAnLCcgK1xuICAgICAgcGFyYW1zLm5vcm1fbGFiZWwubWFyZ2luLnRvcCArICcpJyk7XG5cbiAgICBzdmdfZ3JvdXAuc2VsZWN0KHBhcmFtcy5yb290KycgLmNvbF9jb250YWluZXInKVxuICAgICAgLnNlbGVjdCgnLndoaXRlX2JhcnMnKVxuICAgICAgLmF0dHIoJ3dpZHRoJywgMzAgKiBwYXJhbXMudml6LmNsdXN0LmRpbS53aWR0aCArICdweCcpXG4gICAgICAuYXR0cignaGVpZ2h0JywgcGFyYW1zLm5vcm1fbGFiZWwuYmFja2dyb3VuZC5jb2wpO1xuXG4gICAgc3ZnX2dyb3VwLnNlbGVjdChwYXJhbXMucm9vdCsnIC5jb2xfY29udGFpbmVyJylcbiAgICAgIC5zZWxlY3QoJy5jb2xfbGFiZWxfb3V0ZXJfY29udGFpbmVyJylcbiAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKDAsJyArIHBhcmFtcy5ub3JtX2xhYmVsLndpZHRoLmNvbCArICcpJyk7XG5cbiAgICAvLyBvZmZzZXQgY2xpY2sgZ3JvdXAgY29sdW1uIGxhYmVsXG4gICAgdmFyIHhfb2Zmc2V0X2NsaWNrID0gcGFyYW1zLm1hdHJpeC5yZWN0X3dpZHRoIC8gMiArIHBhcmFtcy52aXouYm9yZGVyX3dpZHRoO1xuICAgIC8vIHJlZHVjZSB3aWR0aCBvZiByb3RhdGVkIHJlY3RzXG4gICAgdmFyIHJlZHVjZV9yZWN0X3dpZHRoID0gcGFyYW1zLm1hdHJpeC5yZWN0X3dpZHRoICogMC4zNjtcblxuICAgIHN2Z19ncm91cC5zZWxlY3RBbGwoJy5jb2xfbGFiZWxfdGV4dCcpXG4gICAgICAuYXR0cigndHJhbnNmb3JtJywgZnVuY3Rpb24oZCkge1xuICAgICAgICB2YXIgaW5zdF9pbmRleCA9IF8uaW5kZXhPZihjb2xfbm9kZXNfbmFtZXMsIGQubmFtZSk7XG4gICAgICAgIHJldHVybiAndHJhbnNsYXRlKCcgKyBwYXJhbXMubWF0cml4Lnhfc2NhbGUoaW5zdF9pbmRleCkgKyAnKSByb3RhdGUoLTkwKSc7XG4gICAgICB9KTtcblxuICAgIHN2Z19ncm91cC5zZWxlY3RBbGwoJy5jb2xfbGFiZWxfY2xpY2snKVxuICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoJyArIHBhcmFtcy5tYXRyaXgucmVjdF93aWR0aCAvIDIgKyAnLCcgKyB4X29mZnNldF9jbGljayArICcpIHJvdGF0ZSg0NSknKTtcblxuICAgIHN2Z19ncm91cC5zZWxlY3RBbGwoJy5jb2xfbGFiZWxfY2xpY2snKVxuICAgICAgLnNlbGVjdCgndGV4dCcpXG4gICAgICAuYXR0cigneScsIHBhcmFtcy5tYXRyaXgucmVjdF93aWR0aCAqIDAuNjApXG4gICAgICAuYXR0cignZHgnLCAyICogcGFyYW1zLnZpei5ib3JkZXJfd2lkdGgpXG4gICAgICAuc3R5bGUoJ2ZvbnQtc2l6ZScsIHBhcmFtcy5sYWJlbHMuZGVmYXVsdF9mc19jb2wgKyAncHgnKVxuICAgICAgLnRleHQoZnVuY3Rpb24oZCl7IHJldHVybiBub3JtYWxfbmFtZShkKTt9KTtcblxuICAgIHBhcmFtcy5ib3VuZGluZ193aWR0aF9tYXguY29sID0gMDtcbiAgICBzdmdfZ3JvdXAuc2VsZWN0QWxsKCcuY29sX2xhYmVsX2NsaWNrJykuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgIHZhciB0bXBfd2lkdGggPSBkMy5zZWxlY3QodGhpcykuc2VsZWN0KCd0ZXh0Jykubm9kZSgpLmdldEJCb3goKS53aWR0aDtcbiAgICAgIGlmICh0bXBfd2lkdGggPiBwYXJhbXMuYm91bmRpbmdfd2lkdGhfbWF4LmNvbCkge1xuICAgICAgcGFyYW1zLmJvdW5kaW5nX3dpZHRoX21heC5jb2wgPSB0bXBfd2lkdGggKiAxLjI7XG4gICAgICB9XG4gICAgfSk7XG5cblxuICAgIC8vIGNoZWNrIGlmIHdpZGVzdCByb3cgb3IgY29sIGFyZSB3aWRlciB0aGFuIHRoZSBhbGxvd2VkIGxhYmVsIHdpZHRoXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgcGFyYW1zLmluaV9zY2FsZV9mb250ID0ge307XG4gICAgcGFyYW1zLmluaV9zY2FsZV9mb250LnJvdyA9IDE7XG4gICAgcGFyYW1zLmluaV9zY2FsZV9mb250LmNvbCA9IDE7XG5cbiAgICBpZiAocGFyYW1zLmJvdW5kaW5nX3dpZHRoX21heC5yb3cgPiBwYXJhbXMubm9ybV9sYWJlbC53aWR0aC5yb3cpIHtcblxuICAgICAgLy8gY2FsYyByZWR1Y3Rpb24gaW4gZm9udCBzaXplXG4gICAgICBwYXJhbXMuaW5pX3NjYWxlX2ZvbnQucm93ID0gcGFyYW1zLm5vcm1fbGFiZWwud2lkdGgucm93IC8gcGFyYW1zLmJvdW5kaW5nX3dpZHRoX21heC5yb3c7XG4gICAgICAvLyByZWRlZmluZSBib3VuZGluZ193aWR0aF9tYXgucm93XG4gICAgICBwYXJhbXMuYm91bmRpbmdfd2lkdGhfbWF4LnJvdyA9IHBhcmFtcy5pbmlfc2NhbGVfZm9udC5yb3cgKiBwYXJhbXMuYm91bmRpbmdfd2lkdGhfbWF4LnJvdztcblxuICAgICAgLy8gcmVkZWZpbmUgZGVmYXVsdCBmc1xuICAgICAgcGFyYW1zLmxhYmVscy5kZWZhdWx0X2ZzX3JvdyA9IHBhcmFtcy5sYWJlbHMuZGVmYXVsdF9mc19yb3cgKiBwYXJhbXMuaW5pX3NjYWxlX2ZvbnQucm93O1xuICAgICAgLy8gcmVkdWNlIGZvbnQgc2l6ZVxuICAgICAgZDMuc2VsZWN0QWxsKCcucm93X2xhYmVsX3RleHQnKS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgZDMuc2VsZWN0KHRoaXMpLnNlbGVjdCgndGV4dCcpXG4gICAgICAgIC5zdHlsZSgnZm9udC1zaXplJywgcGFyYW1zLmxhYmVscy5kZWZhdWx0X2ZzX3JvdyArICdweCcpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKHBhcmFtcy5ib3VuZGluZ193aWR0aF9tYXguY29sID4gcGFyYW1zLm5vcm1fbGFiZWwud2lkdGguY29sKSB7XG5cbiAgICAgIC8vIGNhbGMgcmVkdWN0aW9uIGluIGZvbnQgc2l6ZVxuICAgICAgcGFyYW1zLmluaV9zY2FsZV9mb250LmNvbCA9IHBhcmFtcy5ub3JtX2xhYmVsLndpZHRoLmNvbCAvIHBhcmFtcy5ib3VuZGluZ193aWR0aF9tYXguY29sO1xuICAgICAgLy8gcmVkZWZpbmUgYm91bmRpbmdfd2lkdGhfbWF4LmNvbFxuICAgICAgcGFyYW1zLmJvdW5kaW5nX3dpZHRoX21heC5jb2wgPSBwYXJhbXMuaW5pX3NjYWxlX2ZvbnQuY29sICogcGFyYW1zLmJvdW5kaW5nX3dpZHRoX21heC5jb2w7XG4gICAgICAvLyByZWRlZmluZSBkZWZhdWx0IGZzXG4gICAgICBwYXJhbXMubGFiZWxzLmRlZmF1bHRfZnNfY29sID0gcGFyYW1zLmxhYmVscy5kZWZhdWx0X2ZzX2NvbCAqIHBhcmFtcy5pbmlfc2NhbGVfZm9udC5jb2w7XG4gICAgICAvLyByZWR1Y2UgZm9udCBzaXplXG4gICAgICBkMy5zZWxlY3RBbGwoJy5jb2xfbGFiZWxfY2xpY2snKS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgZDMuc2VsZWN0KHRoaXMpLnNlbGVjdCgndGV4dCcpXG4gICAgICAgIC5zdHlsZSgnZm9udC1zaXplJywgcGFyYW1zLmxhYmVscy5kZWZhdWx0X2ZzX2NvbCArICdweCcpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gIHN2Z19ncm91cC5zZWxlY3RBbGwoJy5yb3dfbGFiZWxfdGV4dCcpXG4gICAgLnNlbGVjdCgndGV4dCcpXG4gICAgLmF0dHIoJ3knLCBwYXJhbXMubWF0cml4LnJlY3RfaGVpZ2h0ICogMC41ICsgcGFyYW1zLmxhYmVscy5kZWZhdWx0X2ZzX3JvdyowLjM1ICk7XG5cbiAgICBzdmdfZ3JvdXAuc2VsZWN0QWxsKCcuY29sX2xhYmVsX2NsaWNrJylcbiAgICAgIC5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICBkMy5zZWxlY3QodGhpcylcbiAgICAgICAgICAuc2VsZWN0KCd0ZXh0JylbMF1bMF1cbiAgICAgICAgICAuZ2V0QkJveCgpO1xuXG4gICAgICAgIC8vIGQzLnNlbGVjdCh0aGlzKVxuICAgICAgICAvLyAgIC5zZWxlY3QoJ3JlY3QnKVxuICAgICAgICAvLyAgIC5hdHRyKCd4JywgYmJveC54ICogMS4yNSlcbiAgICAgICAgLy8gICAuYXR0cigneScsIDApXG4gICAgICAgIC8vICAgLmF0dHIoJ3dpZHRoJywgYmJveC53aWR0aCAqIDEuMjUpXG4gICAgICAgIC8vICAgLmF0dHIoJ2hlaWdodCcsIHBhcmFtcy5tYXRyaXgucmVjdF93aWR0aCAqIDAuNilcbiAgICAgICAgLy8gICAuc3R5bGUoJ2ZpbGwnLCAneWVsbG93JylcbiAgICAgICAgLy8gICAuc3R5bGUoJ29wYWNpdHknLCAwKTtcbiAgICAgIH0pO1xuXG4gICAgLy8gcmVzaXplIGNvbHVtbiB0cmlhbmdsZVxuICAgIHN2Z19ncm91cC5zZWxlY3RBbGwoJy5jb2xfbGFiZWxfY2xpY2snKVxuICAgICAgLnNlbGVjdCgncGF0aCcpXG4gICAgICAuYXR0cignZCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyB4IGFuZCB5IGFyZSBmbGlwcGVkIHNpbmNlIGl0cyByb3RhdGVkXG4gICAgICAgIHZhciBvcmlnaW5feSA9IC1wYXJhbXMudml6LmJvcmRlcl93aWR0aDtcbiAgICAgICAgdmFyIHN0YXJ0X3ggPSAwO1xuICAgICAgICB2YXIgZmluYWxfeCA9IHBhcmFtcy5tYXRyaXgucmVjdF93aWR0aCAtIHJlZHVjZV9yZWN0X3dpZHRoO1xuICAgICAgICB2YXIgc3RhcnRfeSA9IC0ocGFyYW1zLm1hdHJpeC5yZWN0X3dpZHRoIC0gcmVkdWNlX3JlY3Rfd2lkdGggK1xuICAgICAgICBwYXJhbXMudml6LmJvcmRlcl93aWR0aCk7XG4gICAgICAgIHZhciBmaW5hbF95ID0gLXBhcmFtcy52aXouYm9yZGVyX3dpZHRoO1xuICAgICAgICB2YXIgb3V0cHV0X3N0cmluZyA9ICdNICcgKyBvcmlnaW5feSArICcsMCBMICcgKyBzdGFydF95ICsgJywnICtcbiAgICAgICAgICBzdGFydF94ICsgJywgTCAnICsgZmluYWxfeSArICcsJyArIGZpbmFsX3ggKyAnIFonO1xuICAgICAgICByZXR1cm4gb3V0cHV0X3N0cmluZztcbiAgICAgIH0pXG4gICAgICAuYXR0cignZmlsbCcsIGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgdmFyIGluc3RfY29sb3IgPSAnI2VlZSc7XG4gICAgICAgIGlmIChwYXJhbXMubGFiZWxzLnNob3dfY2F0ZWdvcmllcykge1xuICAgICAgICAgIGluc3RfY29sb3IgPSBwYXJhbXMubGFiZWxzLmNsYXNzX2NvbG9ycy5jb2xbZC5jbF07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGluc3RfY29sb3I7XG4gICAgICB9KTtcblxuICAgIC8vIC8vIGFwcGVuZCBjb2x1bW4gdmFsdWUgYmFyc1xuICAgIC8vIGlmICh1dGlscy5oYXMoIHBhcmFtcy5uZXR3b3JrX2RhdGEuY29sX25vZGVzWzBdLCAndmFsdWUnKSkge1xuXG4gICAgICBzdmdfZ3JvdXAuc2VsZWN0QWxsKCcuY29sX2JhcnMnKVxuICAgICAgICAuYXR0cignd2lkdGgnLCBmdW5jdGlvbihkKSB7XG4gICAgICAgICAgdmFyIGluc3RfdmFsdWUgPSAwO1xuICAgICAgICAgIGlmIChkLnZhbHVlID4gMCl7XG4gICAgICAgICAgICBpbnN0X3ZhbHVlID0gcGFyYW1zLmxhYmVscy5iYXJfc2NhbGVfY29sKGQudmFsdWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gaW5zdF92YWx1ZTtcbiAgICAgICAgfSlcbiAgICAgICAgLy8gcm90YXRlIGxhYmVscyAtIHJlZHVjZSB3aWR0aCBpZiByb3RhdGluZ1xuICAgICAgICAuYXR0cignaGVpZ2h0JywgcGFyYW1zLm1hdHJpeC5yZWN0X3dpZHRoICogMC42Nik7XG4gICAgLy8gfVxuXG4gICAgaWYgKHBhcmFtcy5sYWJlbHMuc2hvd19jYXRlZ29yaWVzKXtcbiAgICAgIC8vIGNoYW5nZSB0aGUgc2l6ZSBvZiB0aGUgaGlnaGxpZ2h0aW5nIHJlY3RzXG4gICAgICBkMy5zZWxlY3RBbGwoJy5jb2xfbGFiZWxfY2xpY2snKVxuICAgICAgICAuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICB2YXIgYmJveCA9IGQzLnNlbGVjdCh0aGlzKVxuICAgICAgICAgICAgLnNlbGVjdCgndGV4dCcpWzBdWzBdXG4gICAgICAgICAgICAuZ2V0QkJveCgpO1xuXG4gICAgICAgICAgZDMuc2VsZWN0KHRoaXMpXG4gICAgICAgICAgICAuc2VsZWN0KCdyZWN0JylcbiAgICAgICAgICAgIC5hdHRyKCd3aWR0aCcsIGJib3gud2lkdGggKiAxLjEpXG4gICAgICAgICAgICAuYXR0cignaGVpZ2h0JywgMC42NypwYXJhbXMubWF0cml4LnJlY3Rfd2lkdGgpXG4gICAgICAgICAgICAuc3R5bGUoJ2ZpbGwnLCBmdW5jdGlvbihkKXtcbiAgICAgICAgICAgICAgdmFyIGluc3RfY29sb3IgPSAnd2hpdGUnO1xuICAgICAgICAgICAgICBpZiAocGFyYW1zLmxhYmVscy5zaG93X2NhdGVnb3JpZXMpe1xuICAgICAgICAgICAgICAgIGluc3RfY29sb3IgPSBwYXJhbXMubGFiZWxzLmNsYXNzX2NvbG9ycy5jb2xbZC5jbF07XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgcmV0dXJuIGluc3RfY29sb3I7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnN0eWxlKCdvcGFjaXR5JywgMC4zMCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIHJlc2l6ZSBkZW5kcm9ncmFtXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAgIHN2Z19ncm91cC5zZWxlY3RBbGwoJy5yb3dfY2xhc3NfcmVjdCcpXG4gICAgICAuYXR0cignd2lkdGgnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGluc3Rfd2lkdGggPSBwYXJhbXMuY2xhc3Nfcm9vbS5zeW1ib2xfd2lkdGggLSAxO1xuICAgICAgICByZXR1cm4gaW5zdF93aWR0aCArICdweCc7XG4gICAgICB9KVxuICAgICAgLmF0dHIoJ2hlaWdodCcsIHBhcmFtcy5tYXRyaXgueV9zY2FsZS5yYW5nZUJhbmQoKSlcbiAgICAgIC5hdHRyKCd4JywgZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBpbnN0X29mZnNldCA9IHBhcmFtcy5jbGFzc19yb29tLnN5bWJvbF93aWR0aCArIDE7XG4gICAgICAgIHJldHVybiBpbnN0X29mZnNldCArICdweCc7XG4gICAgICB9KTtcblxuICAgIHN2Z19ncm91cC5zZWxlY3RBbGwoJy5jb2xfY2xhc3NfcmVjdCcpXG4gICAgICAuYXR0cignd2lkdGgnLCBwYXJhbXMubWF0cml4Lnhfc2NhbGUucmFuZ2VCYW5kKCkpXG4gICAgICAuYXR0cignaGVpZ2h0JywgZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBpbnN0X2hlaWdodCA9IHBhcmFtcy5jbGFzc19yb29tLmNvbCAtIDE7XG4gICAgICAgIHJldHVybiBpbnN0X2hlaWdodDtcbiAgICAgIH0pO1xuXG4gICAgc3ZnX2dyb3VwLnNlbGVjdEFsbCgnLmNvbF92aXpfZ3JvdXAnKVxuICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsIGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgdmFyIGluc3RfaW5kZXggPSBfLmluZGV4T2YoY29sX25vZGVzX25hbWVzLCBkLm5hbWUpO1xuICAgICAgICByZXR1cm4gJ3RyYW5zbGF0ZSgnICsgcGFyYW1zLm1hdHJpeC54X3NjYWxlKGluc3RfaW5kZXgpICsgJywwKSc7XG4gICAgICB9KTtcblxuICAgIC8vIHJlcG9zaXRpb24gZ3JpZCBsaW5lc1xuICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICBzdmdfZ3JvdXAuc2VsZWN0QWxsKCcuaG9yel9saW5lcycpXG4gICAgICAuYXR0cigndHJhbnNmb3JtJywgZnVuY3Rpb24oZCkge1xuICAgICAgICB2YXIgaW5zdF9pbmRleCA9IF8uaW5kZXhPZihyb3dfbm9kZXNfbmFtZXMsIGQubmFtZSk7XG4gICAgICAgIHJldHVybiAndHJhbnNsYXRlKDAsJyArIHBhcmFtcy5tYXRyaXgueV9zY2FsZShpbnN0X2luZGV4KSArICcpIHJvdGF0ZSgwKSc7XG4gICAgICB9KTtcblxuICAgIHN2Z19ncm91cC5zZWxlY3RBbGwoJy5ob3J6X2xpbmVzJylcbiAgICAgIC5zZWxlY3QoJ2xpbmUnKVxuICAgICAgLmF0dHIoJ3gyJyxwYXJhbXMudml6LmNsdXN0LmRpbS53aWR0aClcbiAgICAgIC5zdHlsZSgnc3Ryb2tlLXdpZHRoJywgcGFyYW1zLnZpei5ib3JkZXJfd2lkdGgvcGFyYW1zLnZpei56b29tX3N3aXRjaCsncHgnKTtcblxuICAgIHN2Z19ncm91cC5zZWxlY3RBbGwoJy52ZXJ0X2xpbmVzJylcbiAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCBmdW5jdGlvbihkKSB7XG4gICAgICAgIHZhciBpbnN0X2luZGV4ID0gXy5pbmRleE9mKGNvbF9ub2Rlc19uYW1lcywgZC5uYW1lKTtcbiAgICAgICAgcmV0dXJuICd0cmFuc2xhdGUoJyArIHBhcmFtcy5tYXRyaXgueF9zY2FsZShpbnN0X2luZGV4KSArICcpIHJvdGF0ZSgtOTApJztcbiAgICAgIH0pO1xuXG4gICAgc3ZnX2dyb3VwLnNlbGVjdEFsbCgnLnZlcnRfbGluZXMnKVxuICAgICAgLnNlbGVjdCgnbGluZScpXG4gICAgICAuYXR0cigneDInLCAtcGFyYW1zLnZpei5jbHVzdC5kaW0uaGVpZ2h0KVxuICAgICAgLnN0eWxlKCdzdHJva2Utd2lkdGgnLCBwYXJhbXMudml6LmJvcmRlcl93aWR0aCArICdweCcpO1xuXG4gICAgLy8gdmFyIHJvd19ub2RlcyA9IHBhcmFtcy5uZXR3b3JrX2RhdGEucm93X25vZGVzO1xuICAgIC8vIHZhciBjb2xfbm9kZXMgPSBwYXJhbXMubmV0d29ya19kYXRhLmNvbF9ub2RlcztcblxuICAgIC8vIGRyYXdfZ3JpZF9saW5lcyhyb3dfbm9kZXMsIGNvbF9ub2Rlcyk7XG5cbiAgLy8gcmVzaXplIHN1cGVybGFiZWxzXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgc3ZnX2dyb3VwLnNlbGVjdCgnLnN1cGVyX2NvbF9ia2cnKVxuICAgIC5hdHRyKCdoZWlnaHQnLCBwYXJhbXMubGFiZWxzLnN1cGVyX2xhYmVsX3dpZHRoICsgJ3B4JylcbiAgICAuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgwLCcgKyBwYXJhbXMudml6LmdyZXlfYm9yZGVyX3dpZHRoICsgJyknKTtcblxuICAvLyBzdXBlciBjb2wgdGl0bGVcbiAgc3ZnX2dyb3VwLnNlbGVjdCgnLnN1cGVyX2NvbCcpXG4gICAgLmF0dHIoJ3RyYW5zZm9ybScsIGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGluc3RfeCA9IHBhcmFtcy52aXouY2x1c3QuZGltLndpZHRoIC8gMiArIHBhcmFtcy5ub3JtX2xhYmVsLndpZHRoXG4gICAgICAgIC5yb3c7XG4gICAgICB2YXIgaW5zdF95ID0gcGFyYW1zLmxhYmVscy5zdXBlcl9sYWJlbF93aWR0aCAtIHBhcmFtcy52aXoudW5pX21hcmdpbjtcbiAgICAgIHJldHVybiAndHJhbnNsYXRlKCcgKyBpbnN0X3ggKyAnLCcgKyBpbnN0X3kgKyAnKSc7XG4gICAgfSk7XG5cbiAgLy8gc3VwZXIgcm93IHRpdGxlXG4gIHN2Z19ncm91cC5zZWxlY3QoJy5zdXBlcl9yb3dfYmtnJylcbiAgICAuYXR0cignd2lkdGgnLCBwYXJhbXMubGFiZWxzLnN1cGVyX2xhYmVsX3dpZHRoICsgJ3B4JylcbiAgICAuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgnICsgcGFyYW1zLnZpei5ncmV5X2JvcmRlcl93aWR0aCArICcsMCknKTtcblxuICAvLyBhcHBlbmQgc3VwZXIgdGl0bGUgcm93IGdyb3VwXG4gIHN2Z19ncm91cC5zZWxlY3QoJy5zdXBlcl9yb3cnKVxuICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBpbnN0X3ggPSBwYXJhbXMubGFiZWxzLnN1cGVyX2xhYmVsX3dpZHRoIC0gcGFyYW1zLnZpei51bmlfbWFyZ2luO1xuICAgICAgdmFyIGluc3RfeSA9IHBhcmFtcy52aXouY2x1c3QuZGltLmhlaWdodCAvIDIgKyBwYXJhbXMubm9ybV9sYWJlbC53aWR0aFxuICAgICAgICAuY29sO1xuICAgICAgcmV0dXJuICd0cmFuc2xhdGUoJyArIGluc3RfeCArICcsJyArIGluc3RfeSArICcpJztcbiAgICB9KTtcblxuICAvLyByZXNpemUgc3BpbGxvdmVyXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gIC8vIGhpZGUgc3BpbGxvdmVyIGZyb20gc2xhbnRlZCBjb2x1bW4gbGFiZWxzIG9uIHJpZ2h0IHNpZGVcbiAgc3ZnX2dyb3VwLnNlbGVjdCgnLnJpZ2h0X3NsYW50X3RyaWFuZ2xlJylcbiAgICAuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgnICsgcGFyYW1zLnZpei5jbHVzdC5kaW0ud2lkdGggKyAnLCcgK1xuICAgIHBhcmFtcy5ub3JtX2xhYmVsLndpZHRoLmNvbCArICcpJyk7XG5cbiAgc3ZnX2dyb3VwLnNlbGVjdCgnLmxlZnRfc2xhbnRfdHJpYW5nbGUnKVxuICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKC0xLCcgKyBwYXJhbXMubm9ybV9sYWJlbC53aWR0aC5jb2wgKycpJyk7XG5cbiAgc3ZnX2dyb3VwLnNlbGVjdCgnLnRvcF9sZWZ0X3doaXRlJylcbiAgICAuYXR0cignd2lkdGgnLCBwYXJhbXMudml6LmNsdXN0Lm1hcmdpbi5sZWZ0KVxuICAgIC5hdHRyKCdoZWlnaHQnLCBwYXJhbXMudml6LmNsdXN0Lm1hcmdpbi50b3ApO1xuXG4gIHN2Z19ncm91cC5zZWxlY3QoJy5yaWdodF9zcGlsbG92ZXInKVxuICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCBmdW5jdGlvbigpIHtcbiAgICAgIHZhciB0bXBfbGVmdCA9IHBhcmFtcy52aXouY2x1c3QubWFyZ2luLmxlZnQgKyBwYXJhbXMudml6LmNsdXN0LmRpbS53aWR0aDtcbiAgICAgIHZhciB0bXBfdG9wID0gcGFyYW1zLm5vcm1fbGFiZWwubWFyZ2luLnRvcCArIHBhcmFtcy5ub3JtX2xhYmVsLndpZHRoXG4gICAgICAgIC5jb2w7XG4gICAgICByZXR1cm4gJ3RyYW5zbGF0ZSgnICsgdG1wX2xlZnQgKyAnLCcgKyB0bXBfdG9wICsgJyknO1xuICAgIH0pO1xuXG4gIC8vIHdoaXRlIGJvcmRlciBib3R0b20gLSBwcmV2ZW50IGNsdXN0ZXJncmFtIGZyb20gaGl0dGluZyBib3JkZXJcbiAgc3ZnX2dyb3VwLnNlbGVjdCgnLmJvdHRvbV9zcGlsbG92ZXInKVxuICAgIC5hdHRyKCd3aWR0aCcsIHBhcmFtcy52aXouc3ZnX2RpbS53aWR0aClcbiAgICAuYXR0cignaGVpZ2h0JywgMiAqIHBhcmFtcy52aXouZ3JleV9ib3JkZXJfd2lkdGgpXG4gICAgLmF0dHIoJ3RyYW5zZm9ybScsIGZ1bmN0aW9uKCkge1xuICAgICAgLy8gc2hpZnQgdXAgZW5vdWdoIHRvIHNob3cgdGhlIGVudGlyZSBib3JkZXIgd2lkdGhcbiAgICAgIHZhciBpbnN0X29mZnNldCA9IHBhcmFtcy52aXouc3ZnX2RpbS5oZWlnaHQgLSAzICogcGFyYW1zLnZpei5ncmV5X2JvcmRlcl93aWR0aDtcbiAgICAgIHJldHVybiAndHJhbnNsYXRlKDAsJyArIGluc3Rfb2Zmc2V0ICsgJyknO1xuICAgIH0pO1xuXG5cbiAgLy8gYWRkIGJvcmRlciB0byBzdmcgaW4gZm91ciBzZXBhcmF0ZSBsaW5lcyAtIHRvIG5vdCBpbnRlcmZlcmUgd2l0aCBjbGlja2luZyBhbnl0aGluZ1xuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgLy8gbGVmdCBib3JkZXJcbiAgc3ZnX2dyb3VwLnNlbGVjdCgnLmxlZnRfYm9yZGVyJylcbiAgICAuYXR0cignd2lkdGgnLCBwYXJhbXMudml6LmdyZXlfYm9yZGVyX3dpZHRoKVxuICAgIC5hdHRyKCdoZWlnaHQnLCBwYXJhbXMudml6LnN2Z19kaW0uaGVpZ2h0KVxuICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKDAsMCknKTtcblxuICAvLyByaWdodCBib3JkZXJcbiAgc3ZnX2dyb3VwLnNlbGVjdCgnLnJpZ2h0X2JvcmRlcicpXG4gICAgLmF0dHIoJ3dpZHRoJywgcGFyYW1zLnZpei5ncmV5X2JvcmRlcl93aWR0aClcbiAgICAuYXR0cignaGVpZ2h0JywgcGFyYW1zLnZpei5zdmdfZGltLmhlaWdodClcbiAgICAuYXR0cigndHJhbnNmb3JtJywgZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgaW5zdF9vZmZzZXQgPSBwYXJhbXMudml6LnN2Z19kaW0ud2lkdGggLSBwYXJhbXMudml6LmdyZXlfYm9yZGVyX3dpZHRoO1xuICAgICAgcmV0dXJuICd0cmFuc2xhdGUoJyArIGluc3Rfb2Zmc2V0ICsgJywwKSc7XG4gICAgfSk7XG5cbiAgLy8gdG9wIGJvcmRlclxuICBzdmdfZ3JvdXAuc2VsZWN0KCcudG9wX2JvcmRlcicpXG4gICAgLmF0dHIoJ3dpZHRoJywgcGFyYW1zLnZpei5zdmdfZGltLndpZHRoKVxuICAgIC5hdHRyKCdoZWlnaHQnLCBwYXJhbXMudml6LmdyZXlfYm9yZGVyX3dpZHRoKVxuICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBpbnN0X29mZnNldCA9IDA7XG4gICAgICByZXR1cm4gJ3RyYW5zbGF0ZSgnICsgaW5zdF9vZmZzZXQgKyAnLDApJztcbiAgICB9KTtcblxuICAvLyBib3R0b20gYm9yZGVyXG4gIHN2Z19ncm91cC5zZWxlY3QoJy5ib3R0b21fYm9yZGVyJylcbiAgICAuYXR0cignd2lkdGgnLCBwYXJhbXMudml6LnN2Z19kaW0ud2lkdGgpXG4gICAgLmF0dHIoJ2hlaWdodCcsIHBhcmFtcy52aXouZ3JleV9ib3JkZXJfd2lkdGgpXG4gICAgLmF0dHIoJ3RyYW5zZm9ybScsIGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGluc3Rfb2Zmc2V0ID0gcGFyYW1zLnZpei5zdmdfZGltLmhlaWdodCAtIHBhcmFtcy52aXouZ3JleV9ib3JkZXJfd2lkdGg7XG4gICAgICByZXR1cm4gJ3RyYW5zbGF0ZSgwLCcgKyBpbnN0X29mZnNldCArICcpJztcbiAgICB9KTtcblxuICAvLyByZXNldCB6b29tIGFuZCB0cmFuc2xhdGVcbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gIHBhcmFtcy56b29tX2JlaGF2aW9yLnNjYWxlKDEpLnRyYW5zbGF0ZShcbiAgICAgIFsgcGFyYW1zLnZpei5jbHVzdC5tYXJnaW4ubGVmdCwgcGFyYW1zLnZpei5jbHVzdC5tYXJnaW4udG9wXVxuICApO1xuXG4gIGQzLnNlbGVjdChwYXJhbXMudml6LnZpel9zdmcpLnN0eWxlKCdvcGFjaXR5JywxKTtcbn07XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiBzcmMvcmVzZXRfc2l6ZS9ydW5fcmVzZXRfdmlzdWFsaXphdGlvbl9zaXplLmpzXG4gKiovIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQVJBO0FBWUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUdBO0FBQ0E7QUFHQTtBQUNBO0FBRUE7QUFDQTs7OztBQW5DQTtBQUNBOztBQURBO0FBQ0E7Ozs7O0FBREE7QUF1REE7QUFDQTtBQUNBOztBQXpEQTtBQUNBOztBQURBO0FBQ0E7OztBQURBO0FBcUVBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBOzs7OztBQTNFQTtBQUNBOztBQWtGQTtBQUNBOzs7QUFKQTtBQUNBOzs7QUFEQTs7QUFhQTs7QUFGQTtBQUFBOzs7QUFYQTs7QUFxQkE7O0FBRkE7QUFuQkE7QUFDQTs7QUFqRkE7QUFDQTs7QUFEQTtBQStHQTtBQURBO0FBQ0E7Ozs7O0FBL0dBO0FBQ0E7O0FBREE7QUFnSUE7QUFDQTs7QUFqSUE7QUFvSUE7QUFDQTtBQUZBO0FBQ0E7Ozs7QUFwSUE7QUE0SUE7QUFDQTs7QUE3SUE7QUFnSkE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTs7QUFuSkE7QUFzSkE7QUFDQTs7QUF2SkE7QUFDQTs7QUFEQTtBQUNBOztBQURBO0FBQ0E7QUFnS0E7QUFHQTtBQURBO0FBQ0E7O0FBcEtBO0FBMEtBO0FBREE7QUFDQTs7QUExS0E7QUFDQTs7QUFEQTtBQUNBOztBQURBO0FBcUxBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTs7O0FBNUxBO0FBbU1BO0FBQ0E7QUFGQTtBQUNBOztBQW5NQTtBQTJNQTtBQUNBO0FBQ0E7QUFIQTtBQUNBOztBQTNNQTs7QUF1TkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQVZBO0FBYUE7QUFDQTtBQUNBO0FBSEE7QUFDQTtBQUtBOztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFWQTtBQWFBO0FBQ0E7QUFDQTtBQUhBO0FBQ0E7QUFLQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFQQTtBQUNBO0FBU0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFQQTtBQUNBOzs7O0FBNVFBO0FBeVJBO0FBQ0E7QUFDQTtBQUNBOztBQTVSQTtBQWtTQTtBQURBO0FBQ0E7O0FBbFNBO0FBMFNBO0FBREE7QUFDQTs7QUExU0E7QUFtVEE7QUFDQTtBQUZBO0FBQ0E7O0FBblRBO0FBMlRBO0FBREE7QUFJQTtBQUNBO0FBQ0E7QUFIQTtBQUNBOzs7QUE5VEE7QUFDQTtBQXlVQTtBQUlBO0FBQ0E7QUFGQTtBQUNBOzs7QUE5VUE7QUF3VkE7QUFDQTtBQUVBO0FBSkE7QUFDQTtBQU1BO0FBSUE7QUFDQTtBQUVBO0FBSkE7QUFDQTs7QUFsV0E7QUEwV0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUxBO0FBQ0E7Ozs7QUExV0E7QUFDQTtBQXVYQTtBQUNBO0FBSUE7QUFDQTtBQUdBO0FBRUE7QUFDQTtBQUZBO0FBQ0E7QUFLQTtBQUdBO0FBQUE7QUFDQTs7QUE1WUE7QUFnWkE7QUFDQTtBQVFBOztBQURBO0FBSUE7QUFEQTtBQUdBO0FBTkE7QUFUQTtBQUNBOztBQWhaQTtBQW9hQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFGQTtBQUNBO0FBTUE7QUFDQTtBQUVBO0FBSUE7QUFDQTtBQUZBO0FBQ0E7QUFJQTtBQUVBO0FBQ0E7QUFGQTtBQUNBO0FBSUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBVEE7QUFDQTtBQVlBO0FBQ0E7O0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUlBO0FBRUE7QUFDQTtBQUNBO0FBSEE7QUFNQTtBQUNBO0FBQ0E7QUFIQTtBQWZBO0FBQ0E7OztBQTdjQTtBQUNBO0FBeWVBO0FBQ0E7QUFJQTtBQUNBOztBQWhmQTs7QUFBQTtBQUNBO0FBdWZBO0FBRUE7QUFDQTtBQUZBO0FBQ0E7QUFJQTtBQUNBO0FBRUE7QUFLQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFGQTtBQUNBOzs7QUExZ0JBO0FBb2hCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUhBO0FBQ0E7O0FBREE7O0FBQUE7QUFXQTtBQURBO0FBVkE7QUFDQTtBQWVBO0FBQ0E7O0FBRUE7O0FBSEE7O0FBQUE7O0FBQUE7QUFVQTtBQURBO0FBVEE7QUFDQTtBQWNBO0FBQ0E7QUFHQTtBQUVBO0FBQ0E7Ozs7Ozs7OztBQUZBO0FBQ0E7O0FBNWpCQTs7QUEra0JBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBVkE7QUFhQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBTEE7QUFDQTs7OztBQTFsQkE7QUFzbUJBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFMQTs7QUFEQTs7O0FBcG1CQTs7QUFrbkJBO0FBRUE7QUFDQTtBQUdBO0FBS0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUxBO0FBVEE7QUFIQTtBQUNBOzs7QUFqbkJBO0FBMm9CQTtBQUNBO0FBRkE7QUFNQTtBQUNBO0FBRkE7QUFDQTtBQUlBO0FBR0E7QUFDQTtBQUZBO0FBQ0E7QUFJQTtBQUVBO0FBQ0E7QUFGQTtBQUNBOzs7QUE3cEJBO0FBcXFCQTtBQUNBO0FBRkE7QUFDQTtBQUlBO0FBQ0E7QUFJQTtBQUVBO0FBQ0E7QUFGQTtBQUNBO0FBSUE7QUFDQTs7Ozs7Ozs7QUFyckJBO0FBQ0E7O0FBREE7QUF1c0JBO0FBRUE7QUFDQTtBQUpBO0FBQ0E7O0FBdnNCQTtBQUNBOztBQURBO0FBcXRCQTtBQUNBO0FBRUE7QUFKQTtBQUNBOzs7O0FBcnRCQTtBQUNBO0FBaXVCQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBRUE7QUFDQTtBQUVBO0FBSkE7QUFDQTs7QUEzdUJBOztBQXV2QkE7QUFDQTtBQUhBO0FBQ0E7Ozs7QUF0dkJBO0FBQ0E7O0FBREE7QUF5d0JBO0FBQ0E7QUFGQTtBQUNBOztBQXp3QkE7QUFreEJBO0FBQ0E7QUFGQTtBQUNBOztBQWx4QkE7QUEyeEJBO0FBQ0E7QUFGQTtBQUNBOzs7QUEzeEJBO0FBQ0E7QUFveUJBO0FBcnlCQSIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ },
/* 40 */
/***/ function(module, exports, __webpack_require__) {

	eval("var Params = __webpack_require__(1);\nvar two_translate_zoom = __webpack_require__(36);\n\nmodule.exports = function () {\n  var params = Params.get();\n  // disable double-click zoom\n  d3.selectAll(params.viz.viz_svg).on('dblclick.zoom', null);\n\n  d3.select(params.viz.viz_svg).on('dblclick', function () {\n    two_translate_zoom(params, 0, 0, 1);\n  });\n};//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL2luaV9kb3VibGVjbGljay5qcz9iOTAwIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBQYXJhbXMgPSByZXF1aXJlKCcuL3BhcmFtcycpO1xudmFyIHR3b190cmFuc2xhdGVfem9vbSA9IHJlcXVpcmUoJy4vdHdvX3RyYW5zbGF0ZV96b29tJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XG4gIHZhciBwYXJhbXMgPSBQYXJhbXMuZ2V0KCk7XG4gIC8vIGRpc2FibGUgZG91YmxlLWNsaWNrIHpvb21cbiAgZDMuc2VsZWN0QWxsKHBhcmFtcy52aXoudml6X3N2Zykub24oJ2RibGNsaWNrLnpvb20nLCBudWxsKTtcblxuICBkMy5zZWxlY3QocGFyYW1zLnZpei52aXpfc3ZnKVxuICAgIC5vbignZGJsY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICAgIHR3b190cmFuc2xhdGVfem9vbShwYXJhbXMsIDAsIDAsIDEpO1xuICAgIH0pO1xufTtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIHNyYy9pbmlfZG91YmxlY2xpY2suanNcbiAqKi8iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBREE7QUFDQTtBQUlBO0FBRUE7QUFEQTtBQU5BIiwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 41 */
/***/ function(module, exports, __webpack_require__) {

	eval("var Params = __webpack_require__(1);\nvar crossfilter = __webpack_require__(2);\nvar end_reorder = __webpack_require__(28);\n\nmodule.exports = function (inst_order, row_col) {\n  var params = Params.get();\n\n  params.viz.run_trans = true;\n\n  // save order state\n  if (row_col === 'row') {\n    params.viz.inst_order.row = inst_order;\n  } else if (row_col === 'col') {\n    params.viz.inst_order.col = inst_order;\n  }\n\n  var row_nodes_obj = params.network_data.row_nodes;\n  var row_nodes_names = _.pluck(row_nodes_obj, 'name');\n\n  var col_nodes_obj = params.network_data.col_nodes;\n  var col_nodes_names = _.pluck(col_nodes_obj, 'name');\n\n  if (row_col === 'row') {\n    // load orders\n    if (inst_order === 'ini') {\n      params.matrix.x_scale.domain(params.matrix.orders.ini_row);\n    } else if (inst_order === 'clust') {\n      params.matrix.x_scale.domain(params.matrix.orders.clust_row);\n    } else if (inst_order === 'rank') {\n      params.matrix.x_scale.domain(params.matrix.orders.rank_row);\n    } else if (inst_order === 'class') {\n      params.matrix.x_scale.domain(params.matrix.orders.class_row);\n    }\n  } else if (row_col == 'col') {\n    // load orders\n    if (inst_order === 'ini') {\n      params.matrix.y_scale.domain(params.matrix.orders.ini_col);\n    } else if (inst_order === 'clust') {\n      params.matrix.y_scale.domain(params.matrix.orders.clust_col);\n    } else if (inst_order === 'rank') {\n      params.matrix.y_scale.domain(params.matrix.orders.rank_col);\n    } else if (inst_order === 'class') {\n      // params.matrix.x_scale.domain(params.matrix.orders.class_row);\n      params.matrix.y_scale.domain(params.matrix.orders.class_col);\n    }\n  }\n\n  // only animate transition if there are a small number of tiles\n  if (d3.selectAll('.tile')[0].length < params.matrix.def_large_matrix) {\n\n    // define the t variable as the transition function\n    var t = this.viz.get_clust_group().transition().duration(2500);\n\n    t.selectAll('.row').attr('transform', function (d) {\n      var tmp_index = _.indexOf(row_nodes_names, d.name);\n      return 'translate(0,' + params.matrix.y_scale(tmp_index) + ')';\n    }).selectAll('.tile').attr('transform', function (d) {\n      return 'translate(' + params.matrix.x_scale(d.pos_x) + ' , 0)';\n    });\n\n    t.selectAll('.tile_up').attr('transform', function (d) {\n      return 'translate(' + params.matrix.x_scale(d.pos_x) + ' , 0)';\n    });\n\n    t.selectAll('.tile_dn').attr('transform', function (d) {\n      return 'translate(' + params.matrix.x_scale(d.pos_x) + ' , 0)';\n    });\n\n    // Move Row Labels\n    d3.select(params.root + ' .row_label_zoom_container').selectAll('.row_label_text').transition().duration(2500).attr('transform', function (d) {\n      var inst_index = _.indexOf(row_nodes_names, d.name);\n      return 'translate(0,' + params.matrix.y_scale(inst_index) + ')';\n    });\n\n    // t.selectAll('.column')\n    d3.select(params.root + ' .col_zoom_container').selectAll('.col_label_text').transition().duration(2500).attr('transform', function (d) {\n      var inst_index = _.indexOf(col_nodes_names, d.name);\n      return 'translate(' + params.matrix.x_scale(inst_index) + ') rotate(-90)';\n    });\n\n    // reorder row_label_triangle groups\n    d3.selectAll('.row_viz_group').transition().duration(2500).attr('transform', function (d) {\n      var inst_index = _.indexOf(row_nodes_names, d.name);\n      return 'translate(0,' + params.matrix.y_scale(inst_index) + ')';\n    });\n\n    // reorder col_class groups\n    d3.selectAll('.col_viz_group').transition().duration(2500).attr('transform', function (d) {\n      var inst_index = _.indexOf(col_nodes_names, d.name);\n      return 'translate(' + params.matrix.x_scale(inst_index) + ',0)';\n    });\n  } else {\n\n    // define the t variable as the transition function\n    var t = this.viz.get_clust_group();\n\n    // reorder matrix\n    t.selectAll('.row').attr('transform', function (d) {\n      var tmp_index = _.indexOf(row_nodes_names, d.name);\n      return 'translate(0,' + params.matrix.y_scale(tmp_index) + ')';\n    }).selectAll('.tile').attr('transform', function (d) {\n      return 'translate(' + params.matrix.x_scale(d.pos_x) + ' , 0)';\n    });\n\n    t.selectAll('.tile_up').attr('transform', function (d) {\n      return 'translate(' + params.matrix.x_scale(d.pos_x) + ' , 0)';\n    });\n\n    t.selectAll('.tile_dn').attr('transform', function (d) {\n      return 'translate(' + params.matrix.x_scale(d.pos_x) + ' , 0)';\n    });\n\n    // Move Row Labels\n    d3.select(params.root + ' .row_label_zoom_container').selectAll('.row_label_text').attr('transform', function (d) {\n      var inst_index = _.indexOf(row_nodes_names, d.name);\n      return 'translate(0,' + params.matrix.y_scale(inst_index) + ')';\n    });\n\n    // t.selectAll('.column')\n    d3.select(params.root + ' .col_zoom_container').selectAll('.col_label_text').attr('transform', function (d) {\n      var inst_index = _.indexOf(col_nodes_names, d.name);\n      return 'translate(' + params.matrix.x_scale(inst_index) + ') rotate(-90)';\n    });\n\n    // reorder row_label_triangle groups\n    d3.selectAll('.row_viz_group').attr('transform', function (d) {\n      var inst_index = _.indexOf(row_nodes_names, d.name);\n      return 'translate(0,' + params.matrix.y_scale(inst_index) + ')';\n    });\n\n    // reorder col_class groups\n    d3.selectAll('.col_viz_group').attr('transform', function (d) {\n      var inst_index = _.indexOf(col_nodes_names, d.name);\n      return 'translate(' + params.matrix.x_scale(inst_index) + ',0)';\n    });\n  }\n\n  // redefine x and y positions\n  _.each(params.network_data.links, function (d) {\n    d.x = params.matrix.x_scale(d.target);\n    d.y = params.matrix.y_scale(d.source);\n  });\n\n  // rename crossfilter\n  params.cf = {};\n  params.cf.links = crossfilter(params.network_data.links);\n  params.cf.dim_x = params.cf.links.dimension(function (d) {\n    return d.x;\n  });\n  params.cf.dim_y = params.cf.links.dimension(function (d) {\n    return d.y;\n  });\n\n  // backup allow programmatic zoom\n  setTimeout(end_reorder, 2500);\n};//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDEuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL3Jlb3JkZXIvYWxsX3Jlb3JkZXIuanM/ZWIzOSJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgUGFyYW1zID0gcmVxdWlyZSgnLi4vcGFyYW1zJyk7XG52YXIgY3Jvc3NmaWx0ZXIgPSByZXF1aXJlKCdjcm9zc2ZpbHRlcicpO1xudmFyIGVuZF9yZW9yZGVyID0gcmVxdWlyZSgnLi9lbmRfcmVvcmRlcicpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGluc3Rfb3JkZXIsIHJvd19jb2wpIHtcbiAgdmFyIHBhcmFtcyA9IFBhcmFtcy5nZXQoKTtcblxuICBwYXJhbXMudml6LnJ1bl90cmFucyA9IHRydWU7XG5cbiAgLy8gc2F2ZSBvcmRlciBzdGF0ZVxuICBpZiAocm93X2NvbCA9PT0gJ3Jvdycpe1xuICAgIHBhcmFtcy52aXouaW5zdF9vcmRlci5yb3cgPSBpbnN0X29yZGVyO1xuICB9IGVsc2UgaWYgKHJvd19jb2wgPT09ICdjb2wnKXtcbiAgICBwYXJhbXMudml6Lmluc3Rfb3JkZXIuY29sID0gaW5zdF9vcmRlcjtcbiAgfVxuXG4gIHZhciByb3dfbm9kZXNfb2JqID0gcGFyYW1zLm5ldHdvcmtfZGF0YS5yb3dfbm9kZXM7XG4gIHZhciByb3dfbm9kZXNfbmFtZXMgPSBfLnBsdWNrKHJvd19ub2Rlc19vYmosICduYW1lJyk7XG5cbiAgdmFyIGNvbF9ub2Rlc19vYmogPSBwYXJhbXMubmV0d29ya19kYXRhLmNvbF9ub2RlcztcbiAgdmFyIGNvbF9ub2Rlc19uYW1lcyA9IF8ucGx1Y2soY29sX25vZGVzX29iaiwgJ25hbWUnKTtcblxuICBpZiAocm93X2NvbCA9PT0gJ3Jvdycpe1xuICAgIC8vIGxvYWQgb3JkZXJzXG4gICAgaWYgKGluc3Rfb3JkZXIgPT09ICdpbmknKSB7XG4gICAgICBwYXJhbXMubWF0cml4Lnhfc2NhbGUuZG9tYWluKHBhcmFtcy5tYXRyaXgub3JkZXJzLmluaV9yb3cpO1xuICAgIH0gZWxzZSBpZiAoaW5zdF9vcmRlciA9PT0gJ2NsdXN0Jykge1xuICAgICAgcGFyYW1zLm1hdHJpeC54X3NjYWxlLmRvbWFpbihwYXJhbXMubWF0cml4Lm9yZGVycy5jbHVzdF9yb3cpO1xuICAgIH0gZWxzZSBpZiAoaW5zdF9vcmRlciA9PT0gJ3JhbmsnKSB7XG4gICAgICBwYXJhbXMubWF0cml4Lnhfc2NhbGUuZG9tYWluKHBhcmFtcy5tYXRyaXgub3JkZXJzLnJhbmtfcm93KTtcbiAgICB9IGVsc2UgaWYgKGluc3Rfb3JkZXIgPT09ICdjbGFzcycpIHtcbiAgICAgIHBhcmFtcy5tYXRyaXgueF9zY2FsZS5kb21haW4ocGFyYW1zLm1hdHJpeC5vcmRlcnMuY2xhc3Nfcm93KTtcbiAgICB9XG5cbiAgfSBlbHNlIGlmIChyb3dfY29sID09ICdjb2wnKSB7XG4gICAgLy8gbG9hZCBvcmRlcnNcbiAgICBpZiAoaW5zdF9vcmRlciA9PT0gJ2luaScpIHtcbiAgICAgIHBhcmFtcy5tYXRyaXgueV9zY2FsZS5kb21haW4ocGFyYW1zLm1hdHJpeC5vcmRlcnMuaW5pX2NvbCk7XG4gICAgfSBlbHNlIGlmIChpbnN0X29yZGVyID09PSAnY2x1c3QnKSB7XG4gICAgICBwYXJhbXMubWF0cml4Lnlfc2NhbGUuZG9tYWluKHBhcmFtcy5tYXRyaXgub3JkZXJzLmNsdXN0X2NvbCk7XG4gICAgfSBlbHNlIGlmIChpbnN0X29yZGVyID09PSAncmFuaycpIHtcbiAgICAgIHBhcmFtcy5tYXRyaXgueV9zY2FsZS5kb21haW4ocGFyYW1zLm1hdHJpeC5vcmRlcnMucmFua19jb2wpO1xuICAgIH0gZWxzZSBpZiAoaW5zdF9vcmRlciA9PT0gJ2NsYXNzJykge1xuICAgICAgLy8gcGFyYW1zLm1hdHJpeC54X3NjYWxlLmRvbWFpbihwYXJhbXMubWF0cml4Lm9yZGVycy5jbGFzc19yb3cpO1xuICAgICAgcGFyYW1zLm1hdHJpeC55X3NjYWxlLmRvbWFpbihwYXJhbXMubWF0cml4Lm9yZGVycy5jbGFzc19jb2wpO1xuICAgIH1cbiAgfVxuXG4gIC8vIG9ubHkgYW5pbWF0ZSB0cmFuc2l0aW9uIGlmIHRoZXJlIGFyZSBhIHNtYWxsIG51bWJlciBvZiB0aWxlc1xuICBpZiAoZDMuc2VsZWN0QWxsKCcudGlsZScpWzBdLmxlbmd0aCA8IHBhcmFtcy5tYXRyaXguZGVmX2xhcmdlX21hdHJpeCl7XG5cbiAgICAvLyBkZWZpbmUgdGhlIHQgdmFyaWFibGUgYXMgdGhlIHRyYW5zaXRpb24gZnVuY3Rpb25cbiAgICB2YXIgdCA9IHRoaXMudml6LmdldF9jbHVzdF9ncm91cCgpXG4gICAgICAudHJhbnNpdGlvbigpLmR1cmF0aW9uKDI1MDApO1xuXG4gICAgdC5zZWxlY3RBbGwoJy5yb3cnKVxuICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsIGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgdmFyIHRtcF9pbmRleCA9IF8uaW5kZXhPZihyb3dfbm9kZXNfbmFtZXMsIGQubmFtZSk7XG4gICAgICAgIHJldHVybiAndHJhbnNsYXRlKDAsJyArIHBhcmFtcy5tYXRyaXgueV9zY2FsZSh0bXBfaW5kZXgpICsgJyknO1xuICAgICAgICB9KVxuICAgICAgLnNlbGVjdEFsbCgnLnRpbGUnKVxuICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsIGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgcmV0dXJuICd0cmFuc2xhdGUoJyArIHBhcmFtcy5tYXRyaXgueF9zY2FsZShkLnBvc194KSArICcgLCAwKSc7XG4gICAgICB9KTtcblxuICAgIHQuc2VsZWN0QWxsKCcudGlsZV91cCcpXG4gICAgICAuYXR0cigndHJhbnNmb3JtJywgZnVuY3Rpb24oZCkge1xuICAgICAgICByZXR1cm4gJ3RyYW5zbGF0ZSgnICsgcGFyYW1zLm1hdHJpeC54X3NjYWxlKGQucG9zX3gpICsgJyAsIDApJztcbiAgICAgIH0pO1xuXG4gICAgdC5zZWxlY3RBbGwoJy50aWxlX2RuJylcbiAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCBmdW5jdGlvbihkKSB7XG4gICAgICAgIHJldHVybiAndHJhbnNsYXRlKCcgKyBwYXJhbXMubWF0cml4Lnhfc2NhbGUoZC5wb3NfeCkgKyAnICwgMCknO1xuICAgICAgfSk7XG5cbiAgICAvLyBNb3ZlIFJvdyBMYWJlbHNcbiAgICBkMy5zZWxlY3QocGFyYW1zLnJvb3QrJyAucm93X2xhYmVsX3pvb21fY29udGFpbmVyJylcbiAgICAgIC5zZWxlY3RBbGwoJy5yb3dfbGFiZWxfdGV4dCcpXG4gICAgICAudHJhbnNpdGlvbigpLmR1cmF0aW9uKDI1MDApXG4gICAgICAuYXR0cigndHJhbnNmb3JtJywgZnVuY3Rpb24oZCkge1xuICAgICAgICB2YXIgaW5zdF9pbmRleCA9IF8uaW5kZXhPZihyb3dfbm9kZXNfbmFtZXMsIGQubmFtZSk7XG4gICAgICAgIHJldHVybiAndHJhbnNsYXRlKDAsJyArIHBhcmFtcy5tYXRyaXgueV9zY2FsZShpbnN0X2luZGV4KSArICcpJztcbiAgICAgIH0pO1xuXG4gICAgLy8gdC5zZWxlY3RBbGwoJy5jb2x1bW4nKVxuICAgIGQzLnNlbGVjdChwYXJhbXMucm9vdCsnIC5jb2xfem9vbV9jb250YWluZXInKVxuICAgICAgLnNlbGVjdEFsbCgnLmNvbF9sYWJlbF90ZXh0JylcbiAgICAgIC50cmFuc2l0aW9uKCkuZHVyYXRpb24oMjUwMClcbiAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCBmdW5jdGlvbihkKSB7XG4gICAgICAgIHZhciBpbnN0X2luZGV4ID0gXy5pbmRleE9mKGNvbF9ub2Rlc19uYW1lcywgZC5uYW1lKTtcbiAgICAgICAgcmV0dXJuICd0cmFuc2xhdGUoJyArIHBhcmFtcy5tYXRyaXgueF9zY2FsZShpbnN0X2luZGV4KSArICcpIHJvdGF0ZSgtOTApJztcbiAgICAgIH0pO1xuXG4gICAgLy8gcmVvcmRlciByb3dfbGFiZWxfdHJpYW5nbGUgZ3JvdXBzXG4gICAgZDMuc2VsZWN0QWxsKCcucm93X3Zpel9ncm91cCcpXG4gICAgICAudHJhbnNpdGlvbigpLmR1cmF0aW9uKDI1MDApXG4gICAgICAuYXR0cigndHJhbnNmb3JtJywgZnVuY3Rpb24oZCkge1xuICAgICAgICB2YXIgaW5zdF9pbmRleCA9IF8uaW5kZXhPZihyb3dfbm9kZXNfbmFtZXMsIGQubmFtZSk7XG4gICAgICAgIHJldHVybiAndHJhbnNsYXRlKDAsJyArIHBhcmFtcy5tYXRyaXgueV9zY2FsZShpbnN0X2luZGV4KSArICcpJztcbiAgICAgIH0pO1xuXG4gICAgLy8gcmVvcmRlciBjb2xfY2xhc3MgZ3JvdXBzXG4gICAgZDMuc2VsZWN0QWxsKCcuY29sX3Zpel9ncm91cCcpXG4gICAgICAudHJhbnNpdGlvbigpLmR1cmF0aW9uKDI1MDApXG4gICAgICAuYXR0cigndHJhbnNmb3JtJywgZnVuY3Rpb24oZCkge1xuICAgICAgICB2YXIgaW5zdF9pbmRleCA9IF8uaW5kZXhPZihjb2xfbm9kZXNfbmFtZXMsIGQubmFtZSk7XG4gICAgICAgIHJldHVybiAndHJhbnNsYXRlKCcgKyBwYXJhbXMubWF0cml4Lnhfc2NhbGUoaW5zdF9pbmRleCkgKyAnLDApJztcbiAgICAgIH0pO1xuXG4gIH0gZWxzZSB7XG5cbiAgICAvLyBkZWZpbmUgdGhlIHQgdmFyaWFibGUgYXMgdGhlIHRyYW5zaXRpb24gZnVuY3Rpb25cbiAgICB2YXIgdCA9IHRoaXMudml6LmdldF9jbHVzdF9ncm91cCgpO1xuXG4gICAgLy8gcmVvcmRlciBtYXRyaXhcbiAgICB0LnNlbGVjdEFsbCgnLnJvdycpXG4gICAgICAuYXR0cigndHJhbnNmb3JtJywgZnVuY3Rpb24oZCkge1xuICAgICAgICB2YXIgdG1wX2luZGV4ID0gXy5pbmRleE9mKHJvd19ub2Rlc19uYW1lcywgZC5uYW1lKTtcbiAgICAgICAgcmV0dXJuICd0cmFuc2xhdGUoMCwnICsgcGFyYW1zLm1hdHJpeC55X3NjYWxlKHRtcF9pbmRleCkgKyAnKSc7XG4gICAgICB9KVxuICAgICAgLnNlbGVjdEFsbCgnLnRpbGUnKVxuICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsIGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgcmV0dXJuICd0cmFuc2xhdGUoJyArIHBhcmFtcy5tYXRyaXgueF9zY2FsZShkLnBvc194KSArICcgLCAwKSc7XG4gICAgICB9KTtcblxuICAgIHQuc2VsZWN0QWxsKCcudGlsZV91cCcpXG4gICAgICAuYXR0cigndHJhbnNmb3JtJywgZnVuY3Rpb24oZCkge1xuICAgICAgICByZXR1cm4gJ3RyYW5zbGF0ZSgnICsgcGFyYW1zLm1hdHJpeC54X3NjYWxlKGQucG9zX3gpICsgJyAsIDApJztcbiAgICAgIH0pO1xuXG4gICAgdC5zZWxlY3RBbGwoJy50aWxlX2RuJylcbiAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCBmdW5jdGlvbihkKSB7XG4gICAgICAgIHJldHVybiAndHJhbnNsYXRlKCcgKyBwYXJhbXMubWF0cml4Lnhfc2NhbGUoZC5wb3NfeCkgKyAnICwgMCknO1xuICAgICAgfSk7XG5cbiAgICAvLyBNb3ZlIFJvdyBMYWJlbHNcbiAgICBkMy5zZWxlY3QocGFyYW1zLnJvb3QrJyAucm93X2xhYmVsX3pvb21fY29udGFpbmVyJylcbiAgICAgIC5zZWxlY3RBbGwoJy5yb3dfbGFiZWxfdGV4dCcpXG4gICAgICAuYXR0cigndHJhbnNmb3JtJywgZnVuY3Rpb24oZCkge1xuICAgICAgICB2YXIgaW5zdF9pbmRleCA9IF8uaW5kZXhPZihyb3dfbm9kZXNfbmFtZXMsIGQubmFtZSk7XG4gICAgICAgIHJldHVybiAndHJhbnNsYXRlKDAsJyArIHBhcmFtcy5tYXRyaXgueV9zY2FsZShpbnN0X2luZGV4KSArICcpJztcbiAgICAgIH0pO1xuXG4gICAgLy8gdC5zZWxlY3RBbGwoJy5jb2x1bW4nKVxuICAgIGQzLnNlbGVjdChwYXJhbXMucm9vdCsnIC5jb2xfem9vbV9jb250YWluZXInKVxuICAgICAgLnNlbGVjdEFsbCgnLmNvbF9sYWJlbF90ZXh0JylcbiAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCBmdW5jdGlvbihkKSB7XG4gICAgICAgIHZhciBpbnN0X2luZGV4ID0gXy5pbmRleE9mKGNvbF9ub2Rlc19uYW1lcyxkLm5hbWUpO1xuICAgICAgICByZXR1cm4gJ3RyYW5zbGF0ZSgnICsgcGFyYW1zLm1hdHJpeC54X3NjYWxlKGluc3RfaW5kZXgpICsgJykgcm90YXRlKC05MCknO1xuICAgICAgfSk7XG5cbiAgICAvLyByZW9yZGVyIHJvd19sYWJlbF90cmlhbmdsZSBncm91cHNcbiAgICBkMy5zZWxlY3RBbGwoJy5yb3dfdml6X2dyb3VwJylcbiAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCBmdW5jdGlvbihkKSB7XG4gICAgICAgIHZhciBpbnN0X2luZGV4ID0gXy5pbmRleE9mKHJvd19ub2Rlc19uYW1lcyxkLm5hbWUpO1xuICAgICAgICByZXR1cm4gJ3RyYW5zbGF0ZSgwLCcgKyBwYXJhbXMubWF0cml4Lnlfc2NhbGUoaW5zdF9pbmRleCkgKyAnKSc7XG4gICAgICB9KTtcblxuICAgIC8vIHJlb3JkZXIgY29sX2NsYXNzIGdyb3Vwc1xuICAgIGQzLnNlbGVjdEFsbCgnLmNvbF92aXpfZ3JvdXAnKVxuICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsIGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgdmFyIGluc3RfaW5kZXggPSBfLmluZGV4T2YoY29sX25vZGVzX25hbWVzLGQubmFtZSk7XG4gICAgICAgIHJldHVybiAndHJhbnNsYXRlKCcgKyBwYXJhbXMubWF0cml4Lnhfc2NhbGUoaW5zdF9pbmRleCkgKyAnLDApJztcbiAgICAgIH0pO1xuXG4gIH1cblxuICAvLyByZWRlZmluZSB4IGFuZCB5IHBvc2l0aW9uc1xuICBfLmVhY2gocGFyYW1zLm5ldHdvcmtfZGF0YS5saW5rcywgZnVuY3Rpb24oZCl7XG4gICAgZC54ID0gcGFyYW1zLm1hdHJpeC54X3NjYWxlKGQudGFyZ2V0KTtcbiAgICBkLnkgPSBwYXJhbXMubWF0cml4Lnlfc2NhbGUoZC5zb3VyY2UpO1xuICB9KTtcblxuICAvLyByZW5hbWUgY3Jvc3NmaWx0ZXJcbiAgcGFyYW1zLmNmID0ge307XG4gIHBhcmFtcy5jZi5saW5rcyA9IGNyb3NzZmlsdGVyKHBhcmFtcy5uZXR3b3JrX2RhdGEubGlua3MpO1xuICBwYXJhbXMuY2YuZGltX3ggPSBwYXJhbXMuY2YubGlua3MuZGltZW5zaW9uKGZ1bmN0aW9uKGQpe3JldHVybiBkLng7fSk7XG4gIHBhcmFtcy5jZi5kaW1feSA9IHBhcmFtcy5jZi5saW5rcy5kaW1lbnNpb24oZnVuY3Rpb24oZCl7cmV0dXJuIGQueTt9KTtcblxuICAvLyBiYWNrdXAgYWxsb3cgcHJvZ3JhbW1hdGljIHpvb21cbiAgc2V0VGltZW91dChlbmRfcmVvcmRlciwgMjUwMCk7XG5cbn07XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiBzcmMvcmVvcmRlci9hbGxfcmVvcmRlci5qc1xuICoqLyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUpBO0FBT0E7QUFEQTtBQUdBO0FBREE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFEQTtBQUdBO0FBREE7QUFHQTtBQURBO0FBR0E7QUFEQTtBQVJBOztBQWNBO0FBQ0E7QUFEQTtBQUdBO0FBREE7QUFHQTtBQURBOztBQUlBO0FBRkE7QUFSQTtBQUNBOztBQS9CQTtBQUNBOztBQStDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBRkE7QUFNQTtBQURBO0FBQ0E7QUFHQTtBQUVBO0FBREE7QUFDQTtBQUdBO0FBRUE7QUFEQTtBQUNBOztBQXZCQTtBQStCQTtBQUNBO0FBRkE7QUFDQTs7QUEvQkE7QUF3Q0E7QUFDQTtBQUZBO0FBQ0E7O0FBeENBO0FBZ0RBO0FBQ0E7QUFGQTtBQUNBOztBQWhEQTtBQXdEQTtBQUNBO0FBRkE7QUF2REE7QUFDQTs7QUE4REE7QUFDQTs7QUFKQTtBQVFBO0FBQ0E7QUFGQTtBQU1BO0FBREE7QUFDQTtBQUdBO0FBRUE7QUFEQTtBQUNBO0FBR0E7QUFFQTtBQURBO0FBQ0E7O0FBdkJBO0FBOEJBO0FBQ0E7QUFGQTtBQUNBOztBQTlCQTtBQXNDQTtBQUNBO0FBRkE7QUFDQTs7QUF0Q0E7QUE2Q0E7QUFDQTtBQUZBO0FBQ0E7O0FBN0NBO0FBb0RBO0FBQ0E7QUFGQTtBQS9HQTtBQUNBOztBQTlDQTtBQXFLQTtBQUNBO0FBRkE7QUFDQTs7QUFyS0E7QUEyS0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTs7QUE5S0E7QUFBQSIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ },
/* 42 */
/***/ function(module, exports, __webpack_require__) {

	eval("var Params = __webpack_require__(1);\nvar Config = __webpack_require__(43);\nvar change_network_view = __webpack_require__(6);\nvar generate_dendrogram = __webpack_require__(19);\nvar initialize_resizing = __webpack_require__(37);\nvar ini_doubleclick = __webpack_require__(40);\nvar enter_exit_update = __webpack_require__(45);\nvar define_enter_exit_delays = __webpack_require__(48);\nvar search = __webpack_require__(35);\nvar all_reorder = __webpack_require__(41);\n\nmodule.exports = function (change_view) {\n\n  var old_params = Params.get();\n  var config = Config.get();\n\n  // make new_network_data by filtering the original network data\n  var config_copy = jQuery.extend(true, {}, config);\n  var new_network_data = change_network_view(old_params, config_copy.network_data, change_view);\n\n  // make Deep copy of this.config object\n  var new_config = jQuery.extend(true, {}, config);\n\n  new_config.network_data = new_network_data;\n  new_config.inst_order = old_params.viz.inst_order;\n  // never switch to expand when updating the matrix\n  new_config.ini_expand = false;\n  new_config.ini_view = null;\n  new_config.current_col_cat = old_params.current_col_cat;\n\n  var params = Params.make_params(new_config);\n  var delays = define_enter_exit_delays(old_params, params);\n\n  // ordering - necessary for reordering the function called on button click\n  this.reorder = all_reorder;\n\n  enter_exit_update(params, new_network_data, delays);\n\n  // update network data in params\n  this.params = params;\n\n  // search functions\n  var gene_search = search(params, params.network_data.row_nodes, 'name');\n  this.get_genes = gene_search.get_entities;\n  this.find_gene = gene_search.find_entities;\n\n  // redefine change_group function\n  if (params.viz.show_dendrogram) {\n    var row_dendrogram = generate_dendrogram('row', params);\n    var col_dendrogram = generate_dendrogram('col', params);\n  }\n\n  function new_change_groups(inst_rc, inst_index) {\n    if (inst_rc === 'row') {\n      row_dendrogram.change_groups(inst_rc, inst_index);\n    } else {\n      col_dendrogram.change_groups(inst_rc, inst_index);\n    }\n  }\n\n  this.change_groups = new_change_groups;\n\n  // initialize screen resizing - necessary for resizing with new params\n  initialize_resizing(params);\n\n  // necessary to have zoom behavior updated on updating clustergram\n  d3.select(params.viz.viz_svg).call(params.zoom_behavior);\n\n  // re-initialize the double click behavior\n  ini_doubleclick(params);\n};//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDIuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL25ldHdvcmsvdXBkYXRlX25ldHdvcmsuanM/YmVmNSJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgUGFyYW1zID0gcmVxdWlyZSgnLi4vcGFyYW1zJyk7XG52YXIgQ29uZmlnID0gcmVxdWlyZSgnLi4vY29uZmlnJyk7XG52YXIgY2hhbmdlX25ldHdvcmtfdmlldyA9IHJlcXVpcmUoJy4vY2hhbmdlX25ldHdvcmtfdmlldycpO1xudmFyIGdlbmVyYXRlX2RlbmRyb2dyYW0gPSByZXF1aXJlKCcuLi9kZW5kcm9ncmFtJyk7XG52YXIgaW5pdGlhbGl6ZV9yZXNpemluZyA9IHJlcXVpcmUoJy4uL2luaXRpYWxpemVfcmVzaXppbmcnKTtcbnZhciBpbmlfZG91YmxlY2xpY2sgPSByZXF1aXJlKCcuLi9pbmlfZG91YmxlY2xpY2snKTtcbnZhciBlbnRlcl9leGl0X3VwZGF0ZSA9IHJlcXVpcmUoJy4vZW50ZXJfZXhpdF91cGRhdGUnKTtcbnZhciBkZWZpbmVfZW50ZXJfZXhpdF9kZWxheXMgPSByZXF1aXJlKCcuL2RlZmluZV9lbnRlcl9leGl0X2RlbGF5cycpO1xudmFyIHNlYXJjaCA9IHJlcXVpcmUoJy4uL3NlYXJjaCcpO1xudmFyIGFsbF9yZW9yZGVyID0gcmVxdWlyZSgnLi4vcmVvcmRlci9hbGxfcmVvcmRlcicpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGNoYW5nZV92aWV3KSB7XG5cbiAgdmFyIG9sZF9wYXJhbXMgPSBQYXJhbXMuZ2V0KCk7XG4gIHZhciBjb25maWcgPSBDb25maWcuZ2V0KCk7XG5cbiAgLy8gbWFrZSBuZXdfbmV0d29ya19kYXRhIGJ5IGZpbHRlcmluZyB0aGUgb3JpZ2luYWwgbmV0d29yayBkYXRhXG4gIHZhciBjb25maWdfY29weSA9IGpRdWVyeS5leHRlbmQodHJ1ZSwge30sIGNvbmZpZyk7XG4gIHZhciBuZXdfbmV0d29ya19kYXRhID0gY2hhbmdlX25ldHdvcmtfdmlldyhvbGRfcGFyYW1zLCBjb25maWdfY29weS5uZXR3b3JrX2RhdGEsIGNoYW5nZV92aWV3KTtcblxuICAvLyBtYWtlIERlZXAgY29weSBvZiB0aGlzLmNvbmZpZyBvYmplY3RcbiAgdmFyIG5ld19jb25maWcgPSBqUXVlcnkuZXh0ZW5kKHRydWUsIHt9LCBjb25maWcpO1xuXG4gIG5ld19jb25maWcubmV0d29ya19kYXRhID0gbmV3X25ldHdvcmtfZGF0YTtcbiAgbmV3X2NvbmZpZy5pbnN0X29yZGVyID0gb2xkX3BhcmFtcy52aXouaW5zdF9vcmRlcjtcbiAgLy8gbmV2ZXIgc3dpdGNoIHRvIGV4cGFuZCB3aGVuIHVwZGF0aW5nIHRoZSBtYXRyaXhcbiAgbmV3X2NvbmZpZy5pbmlfZXhwYW5kID0gZmFsc2U7XG4gIG5ld19jb25maWcuaW5pX3ZpZXcgPSBudWxsO1xuICBuZXdfY29uZmlnLmN1cnJlbnRfY29sX2NhdCA9IG9sZF9wYXJhbXMuY3VycmVudF9jb2xfY2F0O1xuXG4gIHZhciBwYXJhbXMgPSBQYXJhbXMubWFrZV9wYXJhbXMobmV3X2NvbmZpZyk7XG4gIHZhciBkZWxheXMgPSBkZWZpbmVfZW50ZXJfZXhpdF9kZWxheXMob2xkX3BhcmFtcywgcGFyYW1zKTtcblxuICAvLyBvcmRlcmluZyAtIG5lY2Vzc2FyeSBmb3IgcmVvcmRlcmluZyB0aGUgZnVuY3Rpb24gY2FsbGVkIG9uIGJ1dHRvbiBjbGlja1xuICB0aGlzLnJlb3JkZXIgPSBhbGxfcmVvcmRlcjtcblxuICBlbnRlcl9leGl0X3VwZGF0ZShwYXJhbXMsIG5ld19uZXR3b3JrX2RhdGEsIGRlbGF5cyk7XG5cbiAgLy8gdXBkYXRlIG5ldHdvcmsgZGF0YSBpbiBwYXJhbXNcbiAgdGhpcy5wYXJhbXMgPSBwYXJhbXM7XG5cbiAgLy8gc2VhcmNoIGZ1bmN0aW9uc1xuICB2YXIgZ2VuZV9zZWFyY2ggPSBzZWFyY2gocGFyYW1zLCBwYXJhbXMubmV0d29ya19kYXRhLnJvd19ub2RlcywgJ25hbWUnKTtcbiAgdGhpcy5nZXRfZ2VuZXMgPSBnZW5lX3NlYXJjaC5nZXRfZW50aXRpZXM7XG4gIHRoaXMuZmluZF9nZW5lID0gZ2VuZV9zZWFyY2guZmluZF9lbnRpdGllcztcblxuICAvLyByZWRlZmluZSBjaGFuZ2VfZ3JvdXAgZnVuY3Rpb25cbiAgaWYgKHBhcmFtcy52aXouc2hvd19kZW5kcm9ncmFtKXtcbiAgICB2YXIgcm93X2RlbmRyb2dyYW0gPSBnZW5lcmF0ZV9kZW5kcm9ncmFtKCdyb3cnLCBwYXJhbXMpO1xuICAgIHZhciBjb2xfZGVuZHJvZ3JhbSA9IGdlbmVyYXRlX2RlbmRyb2dyYW0oJ2NvbCcsIHBhcmFtcyk7XG4gIH1cblxuICBmdW5jdGlvbiBuZXdfY2hhbmdlX2dyb3VwcyhpbnN0X3JjLCBpbnN0X2luZGV4KSB7XG4gICAgaWYgKGluc3RfcmMgPT09ICdyb3cnKSB7XG4gICAgICByb3dfZGVuZHJvZ3JhbS5jaGFuZ2VfZ3JvdXBzKGluc3RfcmMsaW5zdF9pbmRleCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbF9kZW5kcm9ncmFtLmNoYW5nZV9ncm91cHMoaW5zdF9yYyxpbnN0X2luZGV4KTtcbiAgICB9XG4gIH1cblxuICB0aGlzLmNoYW5nZV9ncm91cHMgPSBuZXdfY2hhbmdlX2dyb3VwcztcblxuICAvLyBpbml0aWFsaXplIHNjcmVlbiByZXNpemluZyAtIG5lY2Vzc2FyeSBmb3IgcmVzaXppbmcgd2l0aCBuZXcgcGFyYW1zXG4gIGluaXRpYWxpemVfcmVzaXppbmcocGFyYW1zKTtcblxuICAvLyBuZWNlc3NhcnkgdG8gaGF2ZSB6b29tIGJlaGF2aW9yIHVwZGF0ZWQgb24gdXBkYXRpbmcgY2x1c3RlcmdyYW1cbiAgZDMuc2VsZWN0KHBhcmFtcy52aXoudml6X3N2ZykuY2FsbChwYXJhbXMuem9vbV9iZWhhdmlvcik7XG5cbiAgLy8gcmUtaW5pdGlhbGl6ZSB0aGUgZG91YmxlIGNsaWNrIGJlaGF2aW9yXG4gIGluaV9kb3VibGVjbGljayhwYXJhbXMpO1xuXG59O1xuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogc3JjL25ldHdvcmsvdXBkYXRlX25ldHdvcmsuanNcbiAqKi8iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUpBO0FBT0E7QUFDQTs7QUFSQTtBQUNBO0FBV0E7QUFDQTs7QUFiQTtBQWdCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBckJBO0FBQ0E7QUF3QkE7QUFDQTs7QUExQkE7QUFDQTs7QUFEQTtBQWdDQTtBQUNBO0FBQ0E7O0FBbENBO0FBcUNBO0FBQ0E7QUFGQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUhBO0FBREE7QUFDQTtBQU9BO0FBQ0E7O0FBbERBO0FBQ0E7O0FBREE7QUFDQTs7QUFEQTtBQUFBIiwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 43 */
/***/ function(module, exports, __webpack_require__) {

	eval("var utils = __webpack_require__(5);\nvar colors = __webpack_require__(23);\nvar transpose_network = __webpack_require__(44);\n\nvar defaults = {\n  // Label options\n  row_label_scale: 1,\n  col_label_scale: 1,\n  super_labels: false,\n  show_label_tooltips: false,\n  show_tile_tooltips: false,\n  // matrix options\n  transpose: false,\n  tile_colors: ['#FF0000', '#1C86EE'],\n  bar_colors: ['#FF0000', '#1C86EE'],\n  outline_colors: ['orange', 'black'],\n  highlight_color: '#FFFF00',\n  tile_title: false,\n  // Default domain is set to 0, which means that the domain will be set automatically\n  input_domain: 0,\n  opacity_scale: 'linear',\n  do_zoom: true,\n  background_color: '#FFFFFF',\n  super_border_color: '#F5F5F5',\n  resize: true,\n  outer_margins: {\n    top: 0,\n    bottom: 0,\n    left: 0,\n    right: 0\n  },\n  outer_margins_expand: {\n    top: -666,\n    bottom: 0,\n    left: 0,\n    right: 0\n  },\n  ini_expand: false,\n  // Gray border around the visualization\n  grey_border_width: 3,\n  // the distance between labels and clustergram\n  // a universal margin for the clustergram\n  uni_margin: 4,\n  // force the visualization to be square\n  force_square: 0,\n  tile_click_hlight: false,\n  super_label_scale: 1,\n  make_tile_tooltip: function (d) {\n    return d.info;\n  },\n  // initialize view, e.g. initialize with row filtering\n  ini_view: null,\n  // initialize column category - only show data from one category\n  current_col_cat: 'all_category',\n  use_sidebar: true\n};\n\nvar config = {};\n\nfunction make_config(args) {\n  // Mixin defaults with user-defined arguments.\n  config = utils.extend(defaults, args);\n\n  if (config.outer_margins_expand.top === -666) {\n    config.expand_button = false;\n  } else {\n    config.expand_button = true;\n  }\n\n  // save network_data to config\n  // extend does not properly pass network_data\n  config.network_data = args.network_data;\n\n  // replace undersores with space in row/col names\n  config.network_data.row_nodes.forEach(function (d) {\n    d.name = d.name.replace(/_/g, ' ');\n  });\n  config.network_data.col_nodes.forEach(function (d) {\n    d.name = d.name.replace(/_/g, ' ');\n  });\n\n  // replace underscore with space in row/col names from views\n  config.network_data.views.forEach(function (inst_view) {\n\n    var inst_nodes = inst_view.nodes;\n\n    // fix rows in views\n    inst_nodes.row_nodes.forEach(function (d) {\n      d.name = d.name.replace(/_/g, ' ');\n    });\n\n    // fix cols in views\n    inst_nodes.col_nodes.forEach(function (d) {\n      d.name = d.name.replace(/_/g, ' ');\n    });\n  });\n\n  var col_nodes = config.network_data.col_nodes;\n  var row_nodes = config.network_data.row_nodes;\n\n  // add names and instantaneous positions to links\n  config.network_data.links.forEach(function (d) {\n    d.name = row_nodes[d.source].name + '_' + col_nodes[d.target].name;\n    d.row_name = row_nodes[d.source].name;\n    d.col_name = col_nodes[d.target].name;\n  });\n\n  // transpose network if necessary\n  if (config.transpose) {\n    config.network_data = transpose_network(args.network_data);\n    var tmp_col_label = args.col_label;\n    var tmp_row_label = args.row_label;\n    args.row_label = tmp_col_label;\n    args.col_label = tmp_row_label;\n  }\n\n  // super-row/col labels\n  if (!utils.is_undefined(args.row_label) && !utils.is_undefined(args.col_label)) {\n    config.super_labels = true;\n    config.super = {};\n    config.super.row = args.row_label;\n    config.super.col = args.col_label;\n  }\n\n  // initialize cluster ordering - both rows and columns\n  config.inst_order = {};\n  if (!utils.is_undefined(args.order) && utils.is_supported_order(args.order)) {\n    config.inst_order.row = args.order;\n    config.inst_order.col = args.order;\n  } else {\n    config.inst_order.row = 'clust';\n    config.inst_order.col = 'clust';\n  }\n\n  // set row or column order directly -- note that row/col are swapped\n  // !! need to swap row/col orderings\n  if (!utils.is_undefined(args.row_order) && utils.is_supported_order(args.row_order)) {\n    // !! row and col orderings are swapped, need to fix\n    config.inst_order.col = args.row_order;\n  }\n\n  if (!utils.is_undefined(args.col_order) && utils.is_supported_order(args.col_order)) {\n    // !! row and col orderings are swapped, need to fix\n    config.inst_order.row = args.col_order;\n  }\n\n  config.show_dendrogram = utils.has(args.network_data.row_nodes[0], 'group') || utils.has(args.network_data.col_nodes[0], 'group');\n  config.show_categories = utils.has(args.network_data.row_nodes[0], 'cl') || utils.has(args.network_data.col_nodes[0], 'cl');\n\n  // check for category information\n  if (config.show_categories) {\n\n    // initialize dictionary of colors\n    config.class_colors = {};\n\n    // associate classes with colors\n    var class_rows = _.uniq(_.pluck(args.network_data.row_nodes, 'cl'));\n    config.class_colors.row = {};\n    class_rows.forEach(function (c_row, i) {\n      if (i === 0) {\n        config.class_colors.row[c_row] = '#eee';\n      } else {\n        config.class_colors.row[c_row] = colors.get_random_color(i);\n      }\n    });\n\n    // associate classes with colors\n    var class_cols = _.uniq(_.pluck(args.network_data.col_nodes, 'cl'));\n    config.class_colors.col = {};\n\n    // custom column group colors\n    var cat_colors = ['#1f77b4', 'orange', '#8c564b', 'yellow', 'red', 'pink', 'blue', '#e377c2', 'grey'];\n\n    class_cols.forEach(function (c_col, i) {\n      config.class_colors.col[c_col] = cat_colors[i % cat_colors.length];\n    });\n\n    // generate a dictionary of columns in each category\n    config.class_dict = {};\n    col_nodes.forEach(function (d) {\n      // initialize array for each category\n      if (!utils.has(config.class_dict, d.cl)) {\n        config.class_dict[d.cl] = [];\n      }\n      // add column name to category array\n      config.class_dict[d.cl].push(d.name);\n    });\n  }\n\n  return config;\n};\n\nmodule.exports = {\n  get: function () {\n    return config;\n  },\n  make_config: make_config\n};//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL2NvbmZpZy5qcz85ZDlhIl0sInNvdXJjZXNDb250ZW50IjpbInZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcbnZhciBjb2xvcnMgPSByZXF1aXJlKCcuL2NvbG9ycycpO1xudmFyIHRyYW5zcG9zZV9uZXR3b3JrID0gcmVxdWlyZSgnLi9uZXR3b3JrL3RyYW5zcG9zZV9uZXR3b3JrJyk7XG5cbnZhciBkZWZhdWx0cyA9IHtcbiAgLy8gTGFiZWwgb3B0aW9uc1xuICByb3dfbGFiZWxfc2NhbGU6IDEsXG4gIGNvbF9sYWJlbF9zY2FsZTogMSxcbiAgc3VwZXJfbGFiZWxzOiBmYWxzZSxcbiAgc2hvd19sYWJlbF90b29sdGlwczogZmFsc2UsXG4gIHNob3dfdGlsZV90b29sdGlwczogZmFsc2UsXG4gIC8vIG1hdHJpeCBvcHRpb25zXG4gIHRyYW5zcG9zZTogZmFsc2UsXG4gIHRpbGVfY29sb3JzOiBbJyNGRjAwMDAnLCAnIzFDODZFRSddLFxuICBiYXJfY29sb3JzOiBbJyNGRjAwMDAnLCAnIzFDODZFRSddLFxuICBvdXRsaW5lX2NvbG9yczogWydvcmFuZ2UnLCdibGFjayddLFxuICBoaWdobGlnaHRfY29sb3I6ICcjRkZGRjAwJyxcbiAgdGlsZV90aXRsZTogZmFsc2UsXG4gIC8vIERlZmF1bHQgZG9tYWluIGlzIHNldCB0byAwLCB3aGljaCBtZWFucyB0aGF0IHRoZSBkb21haW4gd2lsbCBiZSBzZXQgYXV0b21hdGljYWxseVxuICBpbnB1dF9kb21haW46IDAsXG4gIG9wYWNpdHlfc2NhbGU6ICdsaW5lYXInLFxuICBkb196b29tOiB0cnVlLFxuICBiYWNrZ3JvdW5kX2NvbG9yOiAnI0ZGRkZGRicsXG4gIHN1cGVyX2JvcmRlcl9jb2xvcjogJyNGNUY1RjUnLFxuICByZXNpemU6IHRydWUsXG4gIG91dGVyX21hcmdpbnM6IHtcbiAgICB0b3A6IDAsXG4gICAgYm90dG9tOiAwLFxuICAgIGxlZnQ6IDAsXG4gICAgcmlnaHQ6IDBcbiAgfSxcbiAgb3V0ZXJfbWFyZ2luc19leHBhbmQ6e1xuICAgIHRvcDogLTY2NixcbiAgICBib3R0b206IDAsXG4gICAgbGVmdDogMCxcbiAgICByaWdodDogMFxuICB9LFxuICBpbmlfZXhwYW5kOiBmYWxzZSxcbiAgLy8gR3JheSBib3JkZXIgYXJvdW5kIHRoZSB2aXN1YWxpemF0aW9uXG4gIGdyZXlfYm9yZGVyX3dpZHRoOiAzLFxuICAvLyB0aGUgZGlzdGFuY2UgYmV0d2VlbiBsYWJlbHMgYW5kIGNsdXN0ZXJncmFtXG4gIC8vIGEgdW5pdmVyc2FsIG1hcmdpbiBmb3IgdGhlIGNsdXN0ZXJncmFtXG4gIHVuaV9tYXJnaW46IDQsXG4gIC8vIGZvcmNlIHRoZSB2aXN1YWxpemF0aW9uIHRvIGJlIHNxdWFyZVxuICBmb3JjZV9zcXVhcmU6IDAsXG4gIHRpbGVfY2xpY2tfaGxpZ2h0OiBmYWxzZSxcbiAgc3VwZXJfbGFiZWxfc2NhbGU6IDEsXG4gIG1ha2VfdGlsZV90b29sdGlwOiBmdW5jdGlvbihkKSB7IHJldHVybiBkLmluZm87IH0sXG4gIC8vIGluaXRpYWxpemUgdmlldywgZS5nLiBpbml0aWFsaXplIHdpdGggcm93IGZpbHRlcmluZ1xuICBpbmlfdmlldzogbnVsbCxcbiAgLy8gaW5pdGlhbGl6ZSBjb2x1bW4gY2F0ZWdvcnkgLSBvbmx5IHNob3cgZGF0YSBmcm9tIG9uZSBjYXRlZ29yeVxuICBjdXJyZW50X2NvbF9jYXQ6ICdhbGxfY2F0ZWdvcnknLFxuICB1c2Vfc2lkZWJhcjogdHJ1ZVxufTtcblxudmFyIGNvbmZpZyA9IHt9O1xuXG5mdW5jdGlvbiBtYWtlX2NvbmZpZyhhcmdzKSB7XG4gIC8vIE1peGluIGRlZmF1bHRzIHdpdGggdXNlci1kZWZpbmVkIGFyZ3VtZW50cy5cbiAgY29uZmlnID0gdXRpbHMuZXh0ZW5kKGRlZmF1bHRzLCBhcmdzKTtcblxuICBpZiAoY29uZmlnLm91dGVyX21hcmdpbnNfZXhwYW5kLnRvcCA9PT0gLTY2Nil7XG4gICAgY29uZmlnLmV4cGFuZF9idXR0b24gPSBmYWxzZTtcbiAgfSBlbHNlIHtcbiAgICBjb25maWcuZXhwYW5kX2J1dHRvbiA9IHRydWU7XG4gIH1cblxuICAvLyBzYXZlIG5ldHdvcmtfZGF0YSB0byBjb25maWdcbiAgLy8gZXh0ZW5kIGRvZXMgbm90IHByb3Blcmx5IHBhc3MgbmV0d29ya19kYXRhXG4gIGNvbmZpZy5uZXR3b3JrX2RhdGEgPSBhcmdzLm5ldHdvcmtfZGF0YTtcblxuICAvLyByZXBsYWNlIHVuZGVyc29yZXMgd2l0aCBzcGFjZSBpbiByb3cvY29sIG5hbWVzXG4gIGNvbmZpZy5uZXR3b3JrX2RhdGEucm93X25vZGVzLmZvckVhY2goZnVuY3Rpb24oZCl7XG4gICAgZC5uYW1lID0gZC5uYW1lLnJlcGxhY2UoL18vZywgJyAnKTtcbiAgfSk7XG4gIGNvbmZpZy5uZXR3b3JrX2RhdGEuY29sX25vZGVzLmZvckVhY2goZnVuY3Rpb24oZCl7XG4gICAgZC5uYW1lID0gZC5uYW1lLnJlcGxhY2UoL18vZywgJyAnKTtcbiAgfSk7XG5cbiAgLy8gcmVwbGFjZSB1bmRlcnNjb3JlIHdpdGggc3BhY2UgaW4gcm93L2NvbCBuYW1lcyBmcm9tIHZpZXdzXG4gIGNvbmZpZy5uZXR3b3JrX2RhdGEudmlld3MuZm9yRWFjaChmdW5jdGlvbihpbnN0X3ZpZXcpe1xuXG4gICAgdmFyIGluc3Rfbm9kZXMgPSBpbnN0X3ZpZXcubm9kZXM7XG5cbiAgICAvLyBmaXggcm93cyBpbiB2aWV3c1xuICAgIGluc3Rfbm9kZXMucm93X25vZGVzLmZvckVhY2goZnVuY3Rpb24oZCl7XG4gICAgICBkLm5hbWUgPSBkLm5hbWUucmVwbGFjZSgvXy9nLCAnICcpO1xuICAgIH0pO1xuXG4gICAgLy8gZml4IGNvbHMgaW4gdmlld3NcbiAgICBpbnN0X25vZGVzLmNvbF9ub2Rlcy5mb3JFYWNoKGZ1bmN0aW9uKGQpe1xuICAgICAgZC5uYW1lID0gZC5uYW1lLnJlcGxhY2UoL18vZywgJyAnKTtcbiAgICB9KTtcblxuICB9KTtcblxuICB2YXIgY29sX25vZGVzID0gY29uZmlnLm5ldHdvcmtfZGF0YS5jb2xfbm9kZXM7XG4gIHZhciByb3dfbm9kZXMgPSBjb25maWcubmV0d29ya19kYXRhLnJvd19ub2RlcztcblxuICAvLyBhZGQgbmFtZXMgYW5kIGluc3RhbnRhbmVvdXMgcG9zaXRpb25zIHRvIGxpbmtzXG4gIGNvbmZpZy5uZXR3b3JrX2RhdGEubGlua3MuZm9yRWFjaChmdW5jdGlvbihkKXtcbiAgICBkLm5hbWUgPSByb3dfbm9kZXNbZC5zb3VyY2VdLm5hbWUgKyAnXycgKyBjb2xfbm9kZXNbZC50YXJnZXRdLm5hbWU7XG4gICAgZC5yb3dfbmFtZSA9IHJvd19ub2Rlc1tkLnNvdXJjZV0ubmFtZTtcbiAgICBkLmNvbF9uYW1lID0gY29sX25vZGVzW2QudGFyZ2V0XS5uYW1lO1xuICB9KTtcblxuXG4gIC8vIHRyYW5zcG9zZSBuZXR3b3JrIGlmIG5lY2Vzc2FyeVxuICBpZiAoY29uZmlnLnRyYW5zcG9zZSkge1xuICAgIGNvbmZpZy5uZXR3b3JrX2RhdGEgPSB0cmFuc3Bvc2VfbmV0d29yayhhcmdzLm5ldHdvcmtfZGF0YSk7XG4gICAgdmFyIHRtcF9jb2xfbGFiZWwgPSBhcmdzLmNvbF9sYWJlbDtcbiAgICB2YXIgdG1wX3Jvd19sYWJlbCA9IGFyZ3Mucm93X2xhYmVsO1xuICAgIGFyZ3Mucm93X2xhYmVsID0gdG1wX2NvbF9sYWJlbDtcbiAgICBhcmdzLmNvbF9sYWJlbCA9IHRtcF9yb3dfbGFiZWw7XG4gIH1cblxuICAvLyBzdXBlci1yb3cvY29sIGxhYmVsc1xuICBpZiAoIXV0aWxzLmlzX3VuZGVmaW5lZChhcmdzLnJvd19sYWJlbCkgJiYgIXV0aWxzLmlzX3VuZGVmaW5lZChhcmdzLmNvbF9sYWJlbCkpIHtcbiAgICBjb25maWcuc3VwZXJfbGFiZWxzID0gdHJ1ZTtcbiAgICBjb25maWcuc3VwZXIgPSB7fTtcbiAgICBjb25maWcuc3VwZXIucm93ID0gYXJncy5yb3dfbGFiZWw7XG4gICAgY29uZmlnLnN1cGVyLmNvbCA9IGFyZ3MuY29sX2xhYmVsO1xuICB9XG5cbiAgLy8gaW5pdGlhbGl6ZSBjbHVzdGVyIG9yZGVyaW5nIC0gYm90aCByb3dzIGFuZCBjb2x1bW5zXG4gIGNvbmZpZy5pbnN0X29yZGVyID0ge307XG4gIGlmICghdXRpbHMuaXNfdW5kZWZpbmVkKGFyZ3Mub3JkZXIpICYmIHV0aWxzLmlzX3N1cHBvcnRlZF9vcmRlcihhcmdzLm9yZGVyKSkge1xuICAgIGNvbmZpZy5pbnN0X29yZGVyLnJvdyA9IGFyZ3Mub3JkZXI7XG4gICAgY29uZmlnLmluc3Rfb3JkZXIuY29sID0gYXJncy5vcmRlcjtcbiAgfSBlbHNlIHtcbiAgICBjb25maWcuaW5zdF9vcmRlci5yb3cgPSAnY2x1c3QnO1xuICAgIGNvbmZpZy5pbnN0X29yZGVyLmNvbCA9ICdjbHVzdCc7XG4gIH1cblxuICAvLyBzZXQgcm93IG9yIGNvbHVtbiBvcmRlciBkaXJlY3RseSAtLSBub3RlIHRoYXQgcm93L2NvbCBhcmUgc3dhcHBlZFxuICAvLyAhISBuZWVkIHRvIHN3YXAgcm93L2NvbCBvcmRlcmluZ3NcbiAgaWYgKCF1dGlscy5pc191bmRlZmluZWQoYXJncy5yb3dfb3JkZXIpICYmIHV0aWxzLmlzX3N1cHBvcnRlZF9vcmRlcihhcmdzLnJvd19vcmRlcikpIHtcbiAgICAvLyAhISByb3cgYW5kIGNvbCBvcmRlcmluZ3MgYXJlIHN3YXBwZWQsIG5lZWQgdG8gZml4XG4gICAgY29uZmlnLmluc3Rfb3JkZXIuY29sID0gYXJncy5yb3dfb3JkZXI7XG4gIH1cblxuICBpZiAoIXV0aWxzLmlzX3VuZGVmaW5lZChhcmdzLmNvbF9vcmRlcikgJiYgdXRpbHMuaXNfc3VwcG9ydGVkX29yZGVyKGFyZ3MuY29sX29yZGVyKSkge1xuICAgIC8vICEhIHJvdyBhbmQgY29sIG9yZGVyaW5ncyBhcmUgc3dhcHBlZCwgbmVlZCB0byBmaXhcbiAgICBjb25maWcuaW5zdF9vcmRlci5yb3cgPSBhcmdzLmNvbF9vcmRlcjtcbiAgfVxuXG4gIGNvbmZpZy5zaG93X2RlbmRyb2dyYW0gPSB1dGlscy5oYXMoYXJncy5uZXR3b3JrX2RhdGEucm93X25vZGVzWzBdLCAnZ3JvdXAnKSB8fCB1dGlscy5oYXMoYXJncy5uZXR3b3JrX2RhdGEuY29sX25vZGVzWzBdLCAnZ3JvdXAnKTtcbiAgY29uZmlnLnNob3dfY2F0ZWdvcmllcyA9IHV0aWxzLmhhcyhhcmdzLm5ldHdvcmtfZGF0YS5yb3dfbm9kZXNbMF0sICdjbCcpICAgIHx8IHV0aWxzLmhhcyhhcmdzLm5ldHdvcmtfZGF0YS5jb2xfbm9kZXNbMF0sICdjbCcpO1xuXG4gIC8vIGNoZWNrIGZvciBjYXRlZ29yeSBpbmZvcm1hdGlvblxuICBpZiAoY29uZmlnLnNob3dfY2F0ZWdvcmllcykge1xuXG4gICAgLy8gaW5pdGlhbGl6ZSBkaWN0aW9uYXJ5IG9mIGNvbG9yc1xuICAgIGNvbmZpZy5jbGFzc19jb2xvcnMgPSB7fTtcblxuICAgIC8vIGFzc29jaWF0ZSBjbGFzc2VzIHdpdGggY29sb3JzXG4gICAgdmFyIGNsYXNzX3Jvd3MgPSBfLnVuaXEoXy5wbHVjayhhcmdzLm5ldHdvcmtfZGF0YS5yb3dfbm9kZXMsICdjbCcpKTtcbiAgICBjb25maWcuY2xhc3NfY29sb3JzLnJvdyA9IHt9O1xuICAgIGNsYXNzX3Jvd3MuZm9yRWFjaChmdW5jdGlvbihjX3JvdywgaSkge1xuICAgICAgaWYgKGkgPT09IDApIHtcbiAgICAgICAgY29uZmlnLmNsYXNzX2NvbG9ycy5yb3dbY19yb3ddID0gJyNlZWUnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uZmlnLmNsYXNzX2NvbG9ycy5yb3dbY19yb3ddID0gY29sb3JzLmdldF9yYW5kb21fY29sb3IoaSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBhc3NvY2lhdGUgY2xhc3NlcyB3aXRoIGNvbG9yc1xuICAgIHZhciBjbGFzc19jb2xzID0gXy51bmlxKF8ucGx1Y2soYXJncy5uZXR3b3JrX2RhdGEuY29sX25vZGVzLCAnY2wnKSk7XG4gICAgY29uZmlnLmNsYXNzX2NvbG9ycy5jb2wgPSB7fTtcblxuICAgIC8vIGN1c3RvbSBjb2x1bW4gZ3JvdXAgY29sb3JzXG4gICAgdmFyIGNhdF9jb2xvcnMgPSBbJyMxZjc3YjQnLCdvcmFuZ2UnLCcjOGM1NjRiJywneWVsbG93JywncmVkJywncGluaycsJ2JsdWUnLCcjZTM3N2MyJywnZ3JleSddO1xuXG4gICAgY2xhc3NfY29scy5mb3JFYWNoKGZ1bmN0aW9uKGNfY29sLCBpKSB7XG4gICAgICBjb25maWcuY2xhc3NfY29sb3JzLmNvbFtjX2NvbF0gPSBjYXRfY29sb3JzWyBpICUgY2F0X2NvbG9ycy5sZW5ndGggXTtcbiAgICB9KTtcblxuICAgIC8vIGdlbmVyYXRlIGEgZGljdGlvbmFyeSBvZiBjb2x1bW5zIGluIGVhY2ggY2F0ZWdvcnlcbiAgICBjb25maWcuY2xhc3NfZGljdCA9IHt9O1xuICAgIGNvbF9ub2Rlcy5mb3JFYWNoKGZ1bmN0aW9uKGQpe1xuICAgICAgLy8gaW5pdGlhbGl6ZSBhcnJheSBmb3IgZWFjaCBjYXRlZ29yeVxuICAgICAgaWYgKCF1dGlscy5oYXMoY29uZmlnLmNsYXNzX2RpY3QsIGQuY2wpKXtcbiAgICAgICAgY29uZmlnLmNsYXNzX2RpY3RbZC5jbF0gPSBbXTtcbiAgICAgIH1cbiAgICAgIC8vIGFkZCBjb2x1bW4gbmFtZSB0byBjYXRlZ29yeSBhcnJheVxuICAgICAgY29uZmlnLmNsYXNzX2RpY3RbZC5jbF0ucHVzaChkLm5hbWUpO1xuICAgIH0pO1xuXG4gIH1cblxuICByZXR1cm4gY29uZmlnO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGdldDogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGNvbmZpZztcbiAgfSxcbiAgbWFrZV9jb25maWc6IG1ha2VfY29uZmlnXG59O1xuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogc3JjL2NvbmZpZy5qc1xuICoqLyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTs7QUFFQTs7O0FBR0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBOztBQUVBOztBQUVBO0FBQ0E7QUFoREE7QUFDQTtBQWtEQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBSEE7QUFDQTs7O0FBTEE7QUFDQTs7QUFEQTtBQWdCQTtBQURBO0FBR0E7QUFDQTtBQURBO0FBQ0E7O0FBbkJBO0FBQ0E7QUF3QkE7QUFDQTs7QUFIQTtBQU1BO0FBREE7QUFDQTs7QUFOQTtBQVdBO0FBREE7QUFWQTtBQUNBO0FBZUE7QUFDQTtBQUNBOztBQXpDQTtBQTRDQTtBQUNBO0FBQ0E7QUFIQTtBQUNBOztBQTVDQTtBQW9EQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFDQTs7QUFwREE7QUE2REE7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQUNBOztBQTdEQTtBQXFFQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFMQTtBQUNBOzs7QUF0RUE7O0FBaUZBO0FBRkE7QUFDQTtBQUlBOztBQUVBO0FBRkE7QUFDQTtBQUlBO0FBQ0E7QUFDQTs7QUEzRkE7QUFDQTs7QUErRkE7QUFDQTs7QUFKQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUhBO0FBREE7QUFDQTs7QUFUQTtBQWtCQTtBQUNBOztBQW5CQTtBQUNBO0FBc0JBO0FBQ0E7QUFEQTtBQUNBOztBQXhCQTtBQTZCQTs7QUFFQTtBQUNBO0FBREE7O0FBRkE7QUFBQTtBQTdCQTtBQUNBO0FBdUNBO0FBcklBO0FBQ0E7QUF1SUE7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUpBIiwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 44 */
/***/ function(module, exports, __webpack_require__) {

	eval("var utils = __webpack_require__(5);\n/* Transpose network.\n */\nmodule.exports = function (net) {\n  var tnet = {},\n      inst_link,\n      i;\n\n  tnet.row_nodes = net.col_nodes;\n  tnet.col_nodes = net.row_nodes;\n  tnet.links = [];\n\n  for (i = 0; i < net.links.length; i++) {\n    inst_link = {};\n    inst_link.source = net.links[i].target;\n    inst_link.target = net.links[i].source;\n    inst_link.value = net.links[i].value;\n\n    // Optional highlight.\n    if (utils.has(net.links[i], 'highlight')) {\n      inst_link.highlight = net.links[i].highlight;\n    }\n    if (utils.has(net.links[i], 'value_up')) {\n      inst_link.value_up = net.links[i].value_up;\n    }\n    if (utils.has(net.links[i], 'value_dn')) {\n      inst_link.value_dn = net.links[i].value_dn;\n    }\n    if (utils.has(net.links[i], 'info')) {\n      inst_link.info = net.links[i].info;\n    }\n    tnet.links.push(inst_link);\n  }\n\n  return tnet;\n};//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDQuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL25ldHdvcmsvdHJhbnNwb3NlX25ldHdvcmsuanM/YjhmMSJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgdXRpbHMgPSByZXF1aXJlKCcuLi91dGlscycpO1xuLyogVHJhbnNwb3NlIG5ldHdvcmsuXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKG5ldCkge1xuICB2YXIgdG5ldCA9IHt9LFxuICAgICAgaW5zdF9saW5rLFxuICAgICAgaTtcblxuICB0bmV0LnJvd19ub2RlcyA9IG5ldC5jb2xfbm9kZXM7XG4gIHRuZXQuY29sX25vZGVzID0gbmV0LnJvd19ub2RlcztcbiAgdG5ldC5saW5rcyA9IFtdO1xuXG4gIGZvciAoaSA9IDA7IGkgPCBuZXQubGlua3MubGVuZ3RoOyBpKyspIHtcbiAgICBpbnN0X2xpbmsgPSB7fTtcbiAgICBpbnN0X2xpbmsuc291cmNlID0gbmV0LmxpbmtzW2ldLnRhcmdldDtcbiAgICBpbnN0X2xpbmsudGFyZ2V0ID0gbmV0LmxpbmtzW2ldLnNvdXJjZTtcbiAgICBpbnN0X2xpbmsudmFsdWUgPSBuZXQubGlua3NbaV0udmFsdWU7XG5cbiAgICAvLyBPcHRpb25hbCBoaWdobGlnaHQuXG4gICAgaWYgKHV0aWxzLmhhcyhuZXQubGlua3NbaV0sICdoaWdobGlnaHQnKSkge1xuICAgICAgaW5zdF9saW5rLmhpZ2hsaWdodCA9IG5ldC5saW5rc1tpXS5oaWdobGlnaHQ7XG4gICAgfVxuICAgIGlmICh1dGlscy5oYXMobmV0LmxpbmtzW2ldLCAndmFsdWVfdXAnKSkge1xuICAgICAgaW5zdF9saW5rLnZhbHVlX3VwID0gbmV0LmxpbmtzW2ldLnZhbHVlX3VwO1xuICAgIH1cbiAgICBpZiAodXRpbHMuaGFzKG5ldC5saW5rc1tpXSwgJ3ZhbHVlX2RuJykpIHtcbiAgICAgIGluc3RfbGluay52YWx1ZV9kbiA9IG5ldC5saW5rc1tpXS52YWx1ZV9kbjtcbiAgICB9XG4gICAgaWYgKHV0aWxzLmhhcyhuZXQubGlua3NbaV0sICdpbmZvJykpIHtcbiAgICAgIGluc3RfbGluay5pbmZvID0gbmV0LmxpbmtzW2ldLmluZm87XG4gICAgfVxuICAgIHRuZXQubGlua3MucHVzaChpbnN0X2xpbmspO1xuICB9XG5cbiAgcmV0dXJuIHRuZXQ7XG59O1xuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogc3JjL25ldHdvcmsvdHJhbnNwb3NlX25ldHdvcmsuanNcbiAqKi8iXSwibWFwcGluZ3MiOiJBQUFBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBTEE7QUFRQTtBQURBO0FBR0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQURBO0FBR0E7QUFuQkE7QUFDQTtBQXFCQTtBQS9CQSIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ },
/* 45 */
/***/ function(module, exports, __webpack_require__) {

	eval("var Params = __webpack_require__(1);\nvar resize_after_update = __webpack_require__(46);\nvar make_rows = __webpack_require__(25);\nvar make_cols = __webpack_require__(30);\nvar eeu_existing_row = __webpack_require__(47);\n\nmodule.exports = function (network_data, delays) {\n  var params = Params.get();\n\n  if (params.matrix.show_tile_tooltips) {\n    // d3-tooltip - for tiles\n    var tip = d3.tip().attr('class', 'd3-tip').direction('n').offset([0, 0]).html(params.matrix.make_tile_tooltip);\n\n    d3.select(params.root + '.clust_group').call(tip);\n  }\n\n  // reposition matrix\n  d3.select('.clust_container').attr('transform', 'translate(' + params.viz.clust.margin.left + ',' + params.viz.clust.margin.top + ')');\n\n  // reposition row container\n  d3.select(params.root + ' .row_viz_container').attr('transform', 'translate(' + params.norm_label.width.row + ',0)');\n\n  // reposition col container\n  d3.select(params.root + ' .col_label_outer_container').attr('transform', 'translate(0,' + params.norm_label.width.col + ')');\n\n  // reposition col_viz container\n  d3.select('.col_viz_outer_container').attr('transform', function () {\n    var inst_offset = params.norm_label.width.col + 2;\n    return 'translate(0,' + inst_offset + ')';\n  });\n\n  // get row and col names\n  var row_nodes_names = params.network_data.row_nodes_names;\n  var col_nodes_names = params.network_data.col_nodes_names;\n\n  var duration = 1000;\n\n  // make global so that names can be accessed\n  var row_nodes = network_data.row_nodes;\n  var col_nodes = network_data.col_nodes;\n  var links = network_data.links;\n\n  //\n  var tile_data = links;\n\n  // add name to links for object constancy\n  for (var i = 0; i < tile_data.length; i++) {\n    var d = tile_data[i];\n    tile_data[i].name = row_nodes[d.source].name + '_' + col_nodes[d.target].name;\n  }\n\n  function get_key(d) {\n    return d.name;\n  }\n\n  // exit\n  ////////////\n\n  // remove entire rows\n  var exiting_rows = d3.select(params.root + ' .clust_group').selectAll('.row').data(params.matrix.matrix, function (d) {\n    return d.name;\n  }).exit();\n\n  if (delays.run_transition) {\n    exiting_rows.transition().duration(duration).style('opacity', 0).remove();\n  } else {\n    exiting_rows.style('opacity', 0).remove();\n  }\n\n  // move rows\n  var move_rows = d3.select(params.root + ' .clust_group').selectAll('.row').data(params.matrix.matrix, function (d) {\n    return d.name;\n  });\n\n  if (delays.run_transition) {\n    move_rows.transition().delay(delays.update).duration(duration).attr('transform', function (d) {\n      var tmp_index = _.indexOf(row_nodes_names, d.name);\n      return 'translate(0,' + params.matrix.y_scale(tmp_index) + ')';\n    });\n  } else {\n    move_rows.attr('transform', function (d) {\n      var tmp_index = _.indexOf(row_nodes_names, d.name);\n      return 'translate(0,' + params.matrix.y_scale(tmp_index) + ')';\n    });\n  }\n\n  // update existing rows - enter, exit, update tiles in existing row\n  d3.select(params.root + ' .clust_group').selectAll('.row').each(function (d) {\n    eeu_existing_row(d, tip, delays, duration);\n  });\n\n  // enter exit update tiles\n\n  d3.selectAll('.horz_lines').remove();\n  d3.selectAll('.vert_lines').remove();\n\n  // remove row labels\n  d3.selectAll('.row_label_text').data(row_nodes, function (d) {\n    return d.name;\n  }).exit().transition().duration(duration).style('opacity', 0).remove();\n\n  // remove column labels\n  d3.selectAll('.col_label_click').data(col_nodes, function (d) {\n    return d.name;\n  }).exit().transition().duration(duration).style('opacity', 0).remove();\n\n  // remove row triangles and colorbars\n  d3.selectAll('.row_viz_group').data(row_nodes, function (d) {\n    return d.name;\n  }).exit().transition().duration(duration).style('opacity', 0).remove();\n\n  d3.selectAll('.col_label_text').data(col_nodes, function (d) {\n    return d.name;\n  }).exit().transition().duration(duration).style('opacity', 0).remove();\n\n  d3.selectAll('.horz_lines').data(row_nodes, function (d) {\n    return d.name;\n  }).exit().transition().duration(duration).style('opacity', 0).remove();\n\n  d3.selectAll('.vert_lines').data(col_nodes, function (d) {\n    return d.name;\n  }).exit().transition().duration(duration).style('opacity', 0).remove();\n\n  // remove dendrogram\n  d3.selectAll('.col_viz_group').data(col_nodes, function (d) {\n    return d.name;\n  }).exit().transition().duration(duration).style('opacity', 0).remove();\n\n  // resize clust components using appropriate delays\n  resize_after_update(params, row_nodes, col_nodes, links, duration, delays);\n\n  // enter new elements\n  //////////////////////////\n\n  // enter new rows\n  var new_row_groups = d3.select(params.root + ' .clust_group').selectAll('.row').data(params.matrix.matrix, function (d) {\n    return d.name;\n  }).enter().append('g').attr('class', 'row').attr('transform', function (d) {\n    var tmp_index = _.indexOf(row_nodes_names, d.name);\n    return 'translate(0,' + params.matrix.y_scale(tmp_index) + ')';\n  });\n\n  new_row_groups.each(enter_new_rows);\n\n  // make each row in the clustergrao\n  function enter_new_rows(ini_inp_row_data) {\n\n    var inp_row_data = ini_inp_row_data.row_data;\n\n    // remove zero values to make visualization faster\n    var row_data = _.filter(inp_row_data, function (num) {\n      return num.value !== 0;\n    });\n\n    // update tiles\n    ////////////////////////////////////////////\n    var tile = d3.select(this).selectAll('rect').data(row_data, function (d) {\n      return d.col_name;\n    }).enter().append('rect').attr('class', 'tile row_tile').attr('width', params.matrix.rect_width).attr('height', params.matrix.rect_height)\n    // switch the color based on up/dn value\n    .style('fill', function (d) {\n      return d.value > 0 ? params.matrix.tile_colors[0] : params.matrix.tile_colors[1];\n    }).on('mouseover', function (p) {\n      // highlight row - set text to active if\n      d3.selectAll('.row_label_text text').classed('active', function (d) {\n        return p.row_name === d.name;\n      });\n\n      d3.selectAll('.col_label_text text').classed('active', function (d) {\n        return p.col_name === d.name;\n      });\n    }).on('mouseout', function mouseout() {\n      d3.selectAll('text').classed('active', false);\n    });\n\n    tile.style('fill-opacity', 0).transition().delay(delays.enter).duration(duration).style('fill-opacity', function (d) {\n      // calculate output opacity using the opacity scale\n      var output_opacity = params.matrix.opacity_scale(Math.abs(d.value));\n      return output_opacity;\n    });\n\n    tile.attr('transform', function (d) {\n      var x_pos = params.matrix.x_scale(d.pos_x) + 0.5 * params.viz.border_width;\n      var y_pos = 0.5 * params.viz.border_width / params.viz.zoom_switch;\n      return 'translate(' + x_pos + ',' + y_pos + ')';\n    });\n\n    if (params.matrix.tile_type == 'updn') {\n\n      // value split\n      var row_split_data = _.filter(inp_row_data, function (num) {\n        return num.value_up != 0 || num.value_dn != 0;\n      });\n\n      // tile_up\n      var new_tiles_up = d3.select(this).selectAll('.tile_up').data(row_split_data, function (d) {\n        return d.col_name;\n      }).enter().append('path').attr('class', 'tile_up').attr('d', function () {\n\n        // up triangle\n        var start_x = 0;\n        var final_x = params.matrix.x_scale.rangeBand();\n        var start_y = 0;\n        var final_y = params.matrix.y_scale.rangeBand() - params.matrix.y_scale.rangeBand() / 60;\n\n        var output_string = 'M' + start_x + ',' + start_y + ', L' + start_x + ', ' + final_y + ', L' + final_x + ',0 Z';\n\n        return output_string;\n      }).attr('transform', function (d) {\n        var x_pos = params.matrix.x_scale(d.pos_x) + 0.5 * params.viz.border_width;\n        var y_pos = 0.5 * params.viz.border_width / params.viz.zoom_switch;\n        return 'translate(' + x_pos + ',' + y_pos + ')';\n      }).style('fill', function () {\n        return params.matrix.tile_colors[0];\n      }).on('mouseover', function (p) {\n        // highlight row - set text to active if\n        d3.selectAll('.row_label_text text').classed('active', function (d) {\n          return p.row_name === d.name;\n        });\n\n        d3.selectAll('.col_label_text text').classed('active', function (d) {\n          return p.col_name === d.name;\n        });\n        if (params.matrix.show_tile_tooltips) {\n          tip.show(p);\n        }\n      }).on('mouseout', function (d) {\n        d3.selectAll('text').classed('active', false);\n        if (params.matrix.show_tile_tooltips) {\n          tip.hide();\n        }\n      });\n\n      new_tiles_up.style('fill-opacity', 0).transition().delay(delays.enter).duration(duration).style('fill-opacity', function (d) {\n        var inst_opacity = 0;\n        if (Math.abs(d.value_dn) > 0) {\n          inst_opacity = params.matrix.opacity_scale(Math.abs(d.value_up));\n        }\n        return inst_opacity;\n      });\n\n      // tile_dn\n      var new_tiles_dn = d3.select(this).selectAll('.tile_dn').data(row_split_data, function (d) {\n        return d.col_name;\n      }).enter().append('path').attr('class', 'tile_dn').attr('d', function (d) {\n\n        // dn triangle\n        var start_x = 0;\n        var final_x = params.matrix.x_scale.rangeBand();\n        var start_y = params.matrix.y_scale.rangeBand() - params.matrix.y_scale.rangeBand() / 60;\n        var final_y = params.matrix.y_scale.rangeBand() - params.matrix.y_scale.rangeBand() / 60;\n\n        var output_string = 'M' + start_x + ', ' + start_y + ' ,   L' + final_x + ', ' + final_y + ',  L' + final_x + ',0 Z';\n\n        return output_string;\n      }).attr('transform', function (d) {\n        var x_pos = params.matrix.x_scale(d.pos_x) + 0.5 * params.viz.border_width;\n        var y_pos = 0.5 * params.viz.border_width / params.viz.zoom_switch;\n        return 'translate(' + x_pos + ',' + y_pos + ')';\n      }).style('fill', function () {\n        return params.matrix.tile_colors[1];\n      }).on('mouseover', function (p) {\n        // highlight row - set text to active if\n        d3.selectAll('.row_label_text text').classed('active', function (d) {\n          return p.row_name === d.name;\n        });\n\n        d3.selectAll('.col_label_text text').classed('active', function (d) {\n          return p.col_name === d.name;\n        });\n        if (params.matrix.show_tile_tooltips) {\n          tip.show(p);\n        }\n      }).on('mouseout', function (d) {\n        d3.selectAll('text').classed('active', false);\n        if (params.matrix.show_tile_tooltips) {\n          tip.hide();\n        }\n      });\n\n      new_tiles_dn.style('fill-opacity', 0).transition().delay(delays.enter).duration(duration).style('fill-opacity', function (d) {\n        var inst_opacity = 0;\n        if (Math.abs(d.value_up) > 0) {\n          inst_opacity = params.matrix.opacity_scale(Math.abs(d.value_dn));\n        }\n        return inst_opacity;\n      });\n\n      // remove tiles when splitting is done\n      tile.each(function (d) {\n        if (Math.abs(d.value_up) > 0 && Math.abs(d.value_dn) > 0) {\n          d3.select(this).remove();\n        }\n      });\n    }\n  }\n\n  // var labels = Labels(params);\n\n  var row_triangle_ini_group = make_rows(params, duration);\n  var container_all_col = make_cols(params, duration);\n\n  // Fade in new gridlines\n  ///////////////////////////\n  var row_nodes_names = params.network_data.row_nodes_names;\n  var col_nodes_names = params.network_data.col_nodes_names;\n\n  // append horizontal lines\n  d3.select(params.root + ' .clust_group').selectAll('.horz_lines').data(row_nodes, function (d) {\n    return d.name;\n  }).enter().append('g').attr('class', 'horz_lines').attr('transform', function (d) {\n    var inst_index = _.indexOf(row_nodes_names, d.name);\n    return 'translate(0,' + params.matrix.y_scale(inst_index) + ') rotate(0)';\n  }).append('line').attr('x1', 0).attr('x2', params.viz.clust.dim.width).style('stroke-width', params.viz.border_width / params.viz.zoom_switch + 'px').style('stroke', 'white').attr('opacity', 0).transition().delay(delays.enter).duration(2 * duration).attr('opacity', 1);\n\n  // append vertical line groups\n  d3.select(params.root + ' .clust_group').selectAll('.vert_lines').data(col_nodes).enter().append('g').attr('class', 'vert_lines').attr('transform', function (d) {\n    var inst_index = _.indexOf(col_nodes_names, d.name);\n    return 'translate(' + params.matrix.x_scale(inst_index) + ') rotate(-90)';\n  }).append('line').attr('x1', 0).attr('x2', -params.viz.clust.dim.height).style('stroke-width', params.viz.border_width + 'px').style('stroke', 'white').attr('opacity', 0).transition().delay(delays.enter).duration(2 * duration).attr('opacity', 1);\n};//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDUuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL25ldHdvcmsvZW50ZXJfZXhpdF91cGRhdGUuanM/OTRjYyJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgUGFyYW1zID0gcmVxdWlyZSgnLi4vcGFyYW1zJyk7XG52YXIgcmVzaXplX2FmdGVyX3VwZGF0ZSA9IHJlcXVpcmUoJy4uL3Jlc2V0X3NpemUvcmVzZXRfc2l6ZV9hZnRlcl91cGRhdGUnKTtcbnZhciBtYWtlX3Jvd3MgPSByZXF1aXJlKCcuLi9sYWJlbHMvbWFrZV9yb3dzJyk7XG52YXIgbWFrZV9jb2xzID0gcmVxdWlyZSgnLi4vbGFiZWxzL21ha2VfY29scycpO1xudmFyIGVldV9leGlzdGluZ19yb3cgPSByZXF1aXJlKCcuL2VldV9leGlzdGluZ19yb3cnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihuZXR3b3JrX2RhdGEsIGRlbGF5cyl7XG4gIHZhciBwYXJhbXMgPSBQYXJhbXMuZ2V0KCk7XG5cbiAgaWYgKHBhcmFtcy5tYXRyaXguc2hvd190aWxlX3Rvb2x0aXBzKXtcbiAgICAvLyBkMy10b29sdGlwIC0gZm9yIHRpbGVzXG4gICAgdmFyIHRpcCA9IGQzLnRpcCgpXG4gICAgICAuYXR0cignY2xhc3MnLCAnZDMtdGlwJylcbiAgICAgIC5kaXJlY3Rpb24oJ24nKVxuICAgICAgLm9mZnNldChbMCwgMF0pXG4gICAgICAuaHRtbChwYXJhbXMubWF0cml4Lm1ha2VfdGlsZV90b29sdGlwKTtcblxuICAgIGQzLnNlbGVjdChwYXJhbXMucm9vdCsnLmNsdXN0X2dyb3VwJylcbiAgICAgIC5jYWxsKHRpcCk7XG4gICAgfVxuXG4gIC8vIHJlcG9zaXRpb24gbWF0cml4XG4gIGQzLnNlbGVjdCgnLmNsdXN0X2NvbnRhaW5lcicpXG4gICAgLmF0dHIoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoJyArXG4gICAgICBwYXJhbXMudml6LmNsdXN0Lm1hcmdpbi5sZWZ0ICsgJywnICtcbiAgICAgIHBhcmFtcy52aXouY2x1c3QubWFyZ2luLnRvcCArICcpJyk7XG5cbiAgLy8gcmVwb3NpdGlvbiByb3cgY29udGFpbmVyXG4gIGQzLnNlbGVjdChwYXJhbXMucm9vdCsnIC5yb3dfdml6X2NvbnRhaW5lcicpXG4gICAgLmF0dHIoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoJyArIHBhcmFtcy5ub3JtX2xhYmVsLndpZHRoLnJvdyArICcsMCknKTtcblxuICAvLyByZXBvc2l0aW9uIGNvbCBjb250YWluZXJcbiAgZDMuc2VsZWN0KHBhcmFtcy5yb290KycgLmNvbF9sYWJlbF9vdXRlcl9jb250YWluZXInKVxuICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKDAsJyArIHBhcmFtcy5ub3JtX2xhYmVsLndpZHRoLmNvbCArICcpJyk7XG5cbiAgLy8gcmVwb3NpdGlvbiBjb2xfdml6IGNvbnRhaW5lclxuICBkMy5zZWxlY3QoJy5jb2xfdml6X291dGVyX2NvbnRhaW5lcicpXG4gICAgLmF0dHIoJ3RyYW5zZm9ybScsIGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgaW5zdF9vZmZzZXQgPSBwYXJhbXMubm9ybV9sYWJlbC53aWR0aC5jb2wgKyAyO1xuICAgICAgICByZXR1cm4gJ3RyYW5zbGF0ZSgwLCcgKyBpbnN0X29mZnNldCArICcpJztcbiAgICAgIH0pO1xuXG4gIC8vIGdldCByb3cgYW5kIGNvbCBuYW1lc1xuICB2YXIgcm93X25vZGVzX25hbWVzID0gcGFyYW1zLm5ldHdvcmtfZGF0YS5yb3dfbm9kZXNfbmFtZXM7XG4gIHZhciBjb2xfbm9kZXNfbmFtZXMgPSBwYXJhbXMubmV0d29ya19kYXRhLmNvbF9ub2Rlc19uYW1lcztcblxuICB2YXIgZHVyYXRpb24gPSAxMDAwO1xuXG4gIC8vIG1ha2UgZ2xvYmFsIHNvIHRoYXQgbmFtZXMgY2FuIGJlIGFjY2Vzc2VkXG4gIHZhciByb3dfbm9kZXMgPSBuZXR3b3JrX2RhdGEucm93X25vZGVzO1xuICB2YXIgY29sX25vZGVzID0gbmV0d29ya19kYXRhLmNvbF9ub2RlcztcbiAgdmFyIGxpbmtzID0gbmV0d29ya19kYXRhLmxpbmtzO1xuXG4gIC8vXG4gIHZhciB0aWxlX2RhdGEgPSBsaW5rcztcblxuICAvLyBhZGQgbmFtZSB0byBsaW5rcyBmb3Igb2JqZWN0IGNvbnN0YW5jeVxuICBmb3IgKHZhciBpID0gMDsgaSA8IHRpbGVfZGF0YS5sZW5ndGg7IGkrKykge1xuICAgIHZhciBkID0gdGlsZV9kYXRhW2ldO1xuICAgIHRpbGVfZGF0YVtpXS5uYW1lID0gcm93X25vZGVzW2Quc291cmNlXS5uYW1lICsgJ18nICsgY29sX25vZGVzW2QudGFyZ2V0XS5uYW1lO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0X2tleShkKXtcbiAgICByZXR1cm4gZC5uYW1lIDtcbiAgfVxuXG4gIC8vIGV4aXRcbiAgLy8vLy8vLy8vLy8vXG5cbiAgLy8gcmVtb3ZlIGVudGlyZSByb3dzXG4gIHZhciBleGl0aW5nX3Jvd3MgPSBkMy5zZWxlY3QocGFyYW1zLnJvb3QrJyAuY2x1c3RfZ3JvdXAnKVxuICAgIC5zZWxlY3RBbGwoJy5yb3cnKVxuICAgIC5kYXRhKHBhcmFtcy5tYXRyaXgubWF0cml4LCBmdW5jdGlvbihkKXtyZXR1cm4gZC5uYW1lO30pXG4gICAgLmV4aXQoKTtcblxuICBpZiAoZGVsYXlzLnJ1bl90cmFuc2l0aW9uKXtcbiAgICBleGl0aW5nX3Jvd3NcbiAgICAgIC50cmFuc2l0aW9uKCkuZHVyYXRpb24oZHVyYXRpb24pXG4gICAgICAuc3R5bGUoJ29wYWNpdHknLDApXG4gICAgICAucmVtb3ZlKCk7XG4gIH0gZWxzZSB7XG4gICAgZXhpdGluZ19yb3dzXG4gICAgICAuc3R5bGUoJ29wYWNpdHknLDApXG4gICAgICAucmVtb3ZlKCk7XG4gIH1cblxuICAvLyBtb3ZlIHJvd3NcbiAgdmFyIG1vdmVfcm93cyA9IGQzLnNlbGVjdChwYXJhbXMucm9vdCsnIC5jbHVzdF9ncm91cCcpXG4gICAgLnNlbGVjdEFsbCgnLnJvdycpXG4gICAgLmRhdGEocGFyYW1zLm1hdHJpeC5tYXRyaXgsIGZ1bmN0aW9uKGQpe3JldHVybiBkLm5hbWU7fSk7XG5cbiAgaWYgKGRlbGF5cy5ydW5fdHJhbnNpdGlvbil7XG4gICAgbW92ZV9yb3dzXG4gICAgICAudHJhbnNpdGlvbigpLmRlbGF5KGRlbGF5cy51cGRhdGUpLmR1cmF0aW9uKGR1cmF0aW9uKVxuICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsIGZ1bmN0aW9uKGQpe1xuICAgICAgICB2YXIgdG1wX2luZGV4ID0gXy5pbmRleE9mKHJvd19ub2Rlc19uYW1lcywgZC5uYW1lKTtcbiAgICAgICAgcmV0dXJuICd0cmFuc2xhdGUoMCwnK3BhcmFtcy5tYXRyaXgueV9zY2FsZSh0bXBfaW5kZXgpKycpJztcbiAgICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIG1vdmVfcm93c1xuICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsIGZ1bmN0aW9uKGQpe1xuICAgICAgICB2YXIgdG1wX2luZGV4ID0gXy5pbmRleE9mKHJvd19ub2Rlc19uYW1lcywgZC5uYW1lKTtcbiAgICAgICAgcmV0dXJuICd0cmFuc2xhdGUoMCwnK3BhcmFtcy5tYXRyaXgueV9zY2FsZSh0bXBfaW5kZXgpKycpJztcbiAgICAgIH0pO1xuICB9XG5cbiAgLy8gdXBkYXRlIGV4aXN0aW5nIHJvd3MgLSBlbnRlciwgZXhpdCwgdXBkYXRlIHRpbGVzIGluIGV4aXN0aW5nIHJvd1xuICBkMy5zZWxlY3QocGFyYW1zLnJvb3QrJyAuY2x1c3RfZ3JvdXAnKVxuICAgIC5zZWxlY3RBbGwoJy5yb3cnKVxuICAgIC5lYWNoKGZ1bmN0aW9uKGQpIHtcbiAgICAgIGVldV9leGlzdGluZ19yb3coZCwgdGlwLCBkZWxheXMsIGR1cmF0aW9uKTtcbiAgICB9KTtcblxuICAvLyBlbnRlciBleGl0IHVwZGF0ZSB0aWxlc1xuXG5cblxuICBkMy5zZWxlY3RBbGwoJy5ob3J6X2xpbmVzJykucmVtb3ZlKCk7XG4gIGQzLnNlbGVjdEFsbCgnLnZlcnRfbGluZXMnKS5yZW1vdmUoKTtcblxuICAvLyByZW1vdmUgcm93IGxhYmVsc1xuICBkMy5zZWxlY3RBbGwoJy5yb3dfbGFiZWxfdGV4dCcpXG4gICAgLmRhdGEocm93X25vZGVzLCBmdW5jdGlvbihkKXsgcmV0dXJuIGQubmFtZTt9KVxuICAgIC5leGl0KClcbiAgICAudHJhbnNpdGlvbigpLmR1cmF0aW9uKGR1cmF0aW9uKVxuICAgIC5zdHlsZSgnb3BhY2l0eScsMClcbiAgICAucmVtb3ZlKCk7XG5cbiAgLy8gcmVtb3ZlIGNvbHVtbiBsYWJlbHNcbiAgZDMuc2VsZWN0QWxsKCcuY29sX2xhYmVsX2NsaWNrJylcbiAgICAuZGF0YShjb2xfbm9kZXMsIGZ1bmN0aW9uKGQpe3JldHVybiBkLm5hbWU7fSlcbiAgICAuZXhpdCgpXG4gICAgLnRyYW5zaXRpb24oKS5kdXJhdGlvbihkdXJhdGlvbilcbiAgICAuc3R5bGUoJ29wYWNpdHknLDApXG4gICAgLnJlbW92ZSgpO1xuXG4gIC8vIHJlbW92ZSByb3cgdHJpYW5nbGVzIGFuZCBjb2xvcmJhcnNcbiAgZDMuc2VsZWN0QWxsKCcucm93X3Zpel9ncm91cCcpXG4gICAgLmRhdGEocm93X25vZGVzLCBmdW5jdGlvbihkKXtyZXR1cm4gZC5uYW1lO30pXG4gICAgLmV4aXQoKVxuICAgIC50cmFuc2l0aW9uKCkuZHVyYXRpb24oZHVyYXRpb24pXG4gICAgLnN0eWxlKCdvcGFjaXR5JywwKVxuICAgIC5yZW1vdmUoKTtcblxuICBkMy5zZWxlY3RBbGwoJy5jb2xfbGFiZWxfdGV4dCcpXG4gICAgLmRhdGEoY29sX25vZGVzLCBmdW5jdGlvbihkKXtyZXR1cm4gZC5uYW1lO30pXG4gICAgLmV4aXQoKVxuICAgIC50cmFuc2l0aW9uKCkuZHVyYXRpb24oZHVyYXRpb24pXG4gICAgLnN0eWxlKCdvcGFjaXR5JywwKVxuICAgIC5yZW1vdmUoKTtcblxuICBkMy5zZWxlY3RBbGwoJy5ob3J6X2xpbmVzJylcbiAgICAuZGF0YShyb3dfbm9kZXMsIGZ1bmN0aW9uKGQpe3JldHVybiBkLm5hbWU7fSlcbiAgICAuZXhpdCgpXG4gICAgLnRyYW5zaXRpb24oKS5kdXJhdGlvbihkdXJhdGlvbilcbiAgICAuc3R5bGUoJ29wYWNpdHknLDApXG4gICAgLnJlbW92ZSgpO1xuXG4gIGQzLnNlbGVjdEFsbCgnLnZlcnRfbGluZXMnKVxuICAgIC5kYXRhKGNvbF9ub2RlcywgZnVuY3Rpb24oZCl7cmV0dXJuIGQubmFtZTt9KVxuICAgIC5leGl0KClcbiAgICAudHJhbnNpdGlvbigpLmR1cmF0aW9uKGR1cmF0aW9uKVxuICAgIC5zdHlsZSgnb3BhY2l0eScsMClcbiAgICAucmVtb3ZlKCk7XG5cbiAgLy8gcmVtb3ZlIGRlbmRyb2dyYW1cbiAgZDMuc2VsZWN0QWxsKCcuY29sX3Zpel9ncm91cCcpXG4gICAgLmRhdGEoY29sX25vZGVzLCBmdW5jdGlvbihkKXtyZXR1cm4gZC5uYW1lO30pXG4gICAgLmV4aXQoKVxuICAgIC50cmFuc2l0aW9uKCkuZHVyYXRpb24oZHVyYXRpb24pXG4gICAgLnN0eWxlKCdvcGFjaXR5JywwKVxuICAgIC5yZW1vdmUoKTtcblxuICAvLyByZXNpemUgY2x1c3QgY29tcG9uZW50cyB1c2luZyBhcHByb3ByaWF0ZSBkZWxheXNcbiAgcmVzaXplX2FmdGVyX3VwZGF0ZShwYXJhbXMsIHJvd19ub2RlcywgY29sX25vZGVzLCBsaW5rcywgZHVyYXRpb24sIGRlbGF5cyk7XG5cblxuICAvLyBlbnRlciBuZXcgZWxlbWVudHNcbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICAvLyBlbnRlciBuZXcgcm93c1xuICB2YXIgbmV3X3Jvd19ncm91cHMgPSBkMy5zZWxlY3QocGFyYW1zLnJvb3QrJyAuY2x1c3RfZ3JvdXAnKVxuICAgIC5zZWxlY3RBbGwoJy5yb3cnKVxuICAgIC5kYXRhKHBhcmFtcy5tYXRyaXgubWF0cml4LCBmdW5jdGlvbihkKXtyZXR1cm4gZC5uYW1lO30pXG4gICAgLmVudGVyKClcbiAgICAuYXBwZW5kKCdnJylcbiAgICAuYXR0cignY2xhc3MnLCdyb3cnKVxuICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCBmdW5jdGlvbihkKSB7XG4gICAgICB2YXIgdG1wX2luZGV4ID0gXy5pbmRleE9mKHJvd19ub2Rlc19uYW1lcywgZC5uYW1lKTtcbiAgICAgIHJldHVybiAndHJhbnNsYXRlKDAsJyArIHBhcmFtcy5tYXRyaXgueV9zY2FsZSh0bXBfaW5kZXgpICsgJyknO1xuICAgIH0pICA7XG5cbiAgbmV3X3Jvd19ncm91cHMuZWFjaChlbnRlcl9uZXdfcm93cyk7XG5cbiAgLy8gbWFrZSBlYWNoIHJvdyBpbiB0aGUgY2x1c3RlcmdyYW9cbiAgZnVuY3Rpb24gZW50ZXJfbmV3X3Jvd3MoaW5pX2lucF9yb3dfZGF0YSkge1xuXG4gICAgdmFyIGlucF9yb3dfZGF0YSA9IGluaV9pbnBfcm93X2RhdGEucm93X2RhdGE7XG5cbiAgICAvLyByZW1vdmUgemVybyB2YWx1ZXMgdG8gbWFrZSB2aXN1YWxpemF0aW9uIGZhc3RlclxuICAgIHZhciByb3dfZGF0YSA9IF8uZmlsdGVyKGlucF9yb3dfZGF0YSwgZnVuY3Rpb24obnVtKSB7XG4gICAgICByZXR1cm4gbnVtLnZhbHVlICE9PSAwO1xuICAgIH0pO1xuXG4gICAgLy8gdXBkYXRlIHRpbGVzXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICB2YXIgdGlsZSA9IGQzLnNlbGVjdCh0aGlzKVxuICAgICAgLnNlbGVjdEFsbCgncmVjdCcpXG4gICAgICAuZGF0YShyb3dfZGF0YSwgZnVuY3Rpb24oZCl7IHJldHVybiBkLmNvbF9uYW1lOyB9KVxuICAgICAgLmVudGVyKClcbiAgICAgIC5hcHBlbmQoJ3JlY3QnKVxuICAgICAgLmF0dHIoJ2NsYXNzJywgJ3RpbGUgcm93X3RpbGUnKVxuICAgICAgLmF0dHIoJ3dpZHRoJywgcGFyYW1zLm1hdHJpeC5yZWN0X3dpZHRoKVxuICAgICAgLmF0dHIoJ2hlaWdodCcsIHBhcmFtcy5tYXRyaXgucmVjdF9oZWlnaHQpXG4gICAgICAvLyBzd2l0Y2ggdGhlIGNvbG9yIGJhc2VkIG9uIHVwL2RuIHZhbHVlXG4gICAgICAuc3R5bGUoJ2ZpbGwnLCBmdW5jdGlvbihkKSB7XG4gICAgICAgIHJldHVybiBkLnZhbHVlID4gMCA/IHBhcmFtcy5tYXRyaXgudGlsZV9jb2xvcnNbMF0gOiBwYXJhbXMubWF0cml4LnRpbGVfY29sb3JzWzFdO1xuICAgICAgfSlcbiAgICAgIC5vbignbW91c2VvdmVyJywgZnVuY3Rpb24ocCkge1xuICAgICAgICAvLyBoaWdobGlnaHQgcm93IC0gc2V0IHRleHQgdG8gYWN0aXZlIGlmXG4gICAgICAgIGQzLnNlbGVjdEFsbCgnLnJvd19sYWJlbF90ZXh0IHRleHQnKVxuICAgICAgICAgIC5jbGFzc2VkKCdhY3RpdmUnLCBmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICByZXR1cm4gcC5yb3dfbmFtZSA9PT0gZC5uYW1lO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgIGQzLnNlbGVjdEFsbCgnLmNvbF9sYWJlbF90ZXh0IHRleHQnKVxuICAgICAgICAgIC5jbGFzc2VkKCdhY3RpdmUnLCBmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICByZXR1cm4gcC5jb2xfbmFtZSA9PT0gZC5uYW1lO1xuICAgICAgICAgIH0pO1xuICAgICAgfSlcbiAgICAgIC5vbignbW91c2VvdXQnLCBmdW5jdGlvbiBtb3VzZW91dCgpIHtcbiAgICAgICAgZDMuc2VsZWN0QWxsKCd0ZXh0JykuY2xhc3NlZCgnYWN0aXZlJywgZmFsc2UpO1xuICAgICAgfSk7XG5cbiAgICB0aWxlXG4gICAgICAuc3R5bGUoJ2ZpbGwtb3BhY2l0eScsMClcbiAgICAgIC50cmFuc2l0aW9uKCkuZGVsYXkoZGVsYXlzLmVudGVyKS5kdXJhdGlvbihkdXJhdGlvbilcbiAgICAgIC5zdHlsZSgnZmlsbC1vcGFjaXR5JywgZnVuY3Rpb24oZCkge1xuICAgICAgICAvLyBjYWxjdWxhdGUgb3V0cHV0IG9wYWNpdHkgdXNpbmcgdGhlIG9wYWNpdHkgc2NhbGVcbiAgICAgICAgdmFyIG91dHB1dF9vcGFjaXR5ID0gcGFyYW1zLm1hdHJpeC5vcGFjaXR5X3NjYWxlKE1hdGguYWJzKGQudmFsdWUpKTtcbiAgICAgICAgcmV0dXJuIG91dHB1dF9vcGFjaXR5O1xuICAgICAgfSk7XG5cbiAgICB0aWxlXG4gICAgICAuYXR0cigndHJhbnNmb3JtJywgZnVuY3Rpb24oZCkge1xuICAgICAgICB2YXIgeF9wb3MgPSBwYXJhbXMubWF0cml4Lnhfc2NhbGUoZC5wb3NfeCkgKyAwLjUqcGFyYW1zLnZpei5ib3JkZXJfd2lkdGg7XG4gICAgICAgIHZhciB5X3BvcyA9IDAuNSpwYXJhbXMudml6LmJvcmRlcl93aWR0aC9wYXJhbXMudml6Lnpvb21fc3dpdGNoO1xuICAgICAgICByZXR1cm4gJ3RyYW5zbGF0ZSgnICsgeF9wb3MgKyAnLCcreV9wb3MrJyknO1xuICAgICAgfSk7XG5cbiAgICBpZiAocGFyYW1zLm1hdHJpeC50aWxlX3R5cGUgPT0gJ3VwZG4nKXtcblxuICAgICAgLy8gdmFsdWUgc3BsaXRcbiAgICAgIHZhciByb3dfc3BsaXRfZGF0YSA9IF8uZmlsdGVyKGlucF9yb3dfZGF0YSwgZnVuY3Rpb24obnVtKXtcbiAgICAgICAgcmV0dXJuIG51bS52YWx1ZV91cCAhPSAwIHx8IG51bS52YWx1ZV9kbiAhPTAgO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIHRpbGVfdXBcbiAgICAgIHZhciBuZXdfdGlsZXNfdXAgPSBkMy5zZWxlY3QodGhpcylcbiAgICAgICAgLnNlbGVjdEFsbCgnLnRpbGVfdXAnKVxuICAgICAgICAuZGF0YShyb3dfc3BsaXRfZGF0YSwgZnVuY3Rpb24oZCl7IHJldHVybiBkLmNvbF9uYW1lOyB9KVxuICAgICAgICAuZW50ZXIoKVxuICAgICAgICAuYXBwZW5kKCdwYXRoJylcbiAgICAgICAgLmF0dHIoJ2NsYXNzJywndGlsZV91cCcpXG4gICAgICAgIC5hdHRyKCdkJywgZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAvLyB1cCB0cmlhbmdsZVxuICAgICAgICAgIHZhciBzdGFydF94ID0gMDtcbiAgICAgICAgICB2YXIgZmluYWxfeCA9IHBhcmFtcy5tYXRyaXgueF9zY2FsZS5yYW5nZUJhbmQoKTtcbiAgICAgICAgICB2YXIgc3RhcnRfeSA9IDA7XG4gICAgICAgICAgdmFyIGZpbmFsX3kgPSBwYXJhbXMubWF0cml4Lnlfc2NhbGUucmFuZ2VCYW5kKCkgLSBwYXJhbXMubWF0cml4Lnlfc2NhbGUucmFuZ2VCYW5kKCkgLzYwO1xuXG4gICAgICAgICAgdmFyIG91dHB1dF9zdHJpbmcgPSAnTScgKyBzdGFydF94ICsgJywnICsgc3RhcnRfeSArICcsIEwnICtcbiAgICAgICAgICBzdGFydF94ICsgJywgJyArIGZpbmFsX3kgKyAnLCBMJyArIGZpbmFsX3ggKyAnLDAgWic7XG5cbiAgICAgICAgICByZXR1cm4gb3V0cHV0X3N0cmluZztcbiAgICAgICAgfSlcbiAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsIGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICB2YXIgeF9wb3MgPSBwYXJhbXMubWF0cml4Lnhfc2NhbGUoZC5wb3NfeCkgKyAwLjUqcGFyYW1zLnZpei5ib3JkZXJfd2lkdGg7XG4gICAgICAgICAgdmFyIHlfcG9zID0gMC41KnBhcmFtcy52aXouYm9yZGVyX3dpZHRoL3BhcmFtcy52aXouem9vbV9zd2l0Y2g7XG4gICAgICAgICAgcmV0dXJuICd0cmFuc2xhdGUoJyArIHhfcG9zICsgJywnK3lfcG9zKycpJztcbiAgICAgICAgfSlcbiAgICAgICAgLnN0eWxlKCdmaWxsJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIHBhcmFtcy5tYXRyaXgudGlsZV9jb2xvcnNbMF07XG4gICAgICAgIH0pXG4gICAgICAgIC5vbignbW91c2VvdmVyJywgZnVuY3Rpb24ocCkge1xuICAgICAgICAvLyBoaWdobGlnaHQgcm93IC0gc2V0IHRleHQgdG8gYWN0aXZlIGlmXG4gICAgICAgIGQzLnNlbGVjdEFsbCgnLnJvd19sYWJlbF90ZXh0IHRleHQnKVxuICAgICAgICAgIC5jbGFzc2VkKCdhY3RpdmUnLCBmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICByZXR1cm4gcC5yb3dfbmFtZSA9PT0gZC5uYW1lO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgIGQzLnNlbGVjdEFsbCgnLmNvbF9sYWJlbF90ZXh0IHRleHQnKVxuICAgICAgICAgIC5jbGFzc2VkKCdhY3RpdmUnLCBmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICByZXR1cm4gcC5jb2xfbmFtZSA9PT0gZC5uYW1lO1xuICAgICAgICAgIH0pO1xuICAgICAgICBpZiAocGFyYW1zLm1hdHJpeC5zaG93X3RpbGVfdG9vbHRpcHMpe1xuICAgICAgICAgIHRpcC5zaG93KHApO1xuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgLm9uKCdtb3VzZW91dCcsIGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgZDMuc2VsZWN0QWxsKCd0ZXh0JykuY2xhc3NlZCgnYWN0aXZlJywgZmFsc2UpO1xuICAgICAgICBpZiAocGFyYW1zLm1hdHJpeC5zaG93X3RpbGVfdG9vbHRpcHMpe1xuICAgICAgICAgIHRpcC5oaWRlKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBuZXdfdGlsZXNfdXBcbiAgICAgICAgLnN0eWxlKCdmaWxsLW9wYWNpdHknLDApXG4gICAgICAgIC50cmFuc2l0aW9uKCkuZGVsYXkoZGVsYXlzLmVudGVyKS5kdXJhdGlvbihkdXJhdGlvbilcbiAgICAgICAgLnN0eWxlKCdmaWxsLW9wYWNpdHknLGZ1bmN0aW9uKGQpe1xuICAgICAgICAgIHZhciBpbnN0X29wYWNpdHkgPSAwO1xuICAgICAgICAgIGlmIChNYXRoLmFicyhkLnZhbHVlX2RuKT4wKXtcbiAgICAgICAgICAgIGluc3Rfb3BhY2l0eSA9IHBhcmFtcy5tYXRyaXgub3BhY2l0eV9zY2FsZShNYXRoLmFicyhkLnZhbHVlX3VwKSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBpbnN0X29wYWNpdHk7XG4gICAgICAgIH0pO1xuXG5cbiAgICAgIC8vIHRpbGVfZG5cbiAgICAgIHZhciBuZXdfdGlsZXNfZG4gPSBkMy5zZWxlY3QodGhpcylcbiAgICAgICAgLnNlbGVjdEFsbCgnLnRpbGVfZG4nKVxuICAgICAgICAuZGF0YShyb3dfc3BsaXRfZGF0YSwgZnVuY3Rpb24oZCl7cmV0dXJuIGQuY29sX25hbWU7fSlcbiAgICAgICAgLmVudGVyKClcbiAgICAgICAgLmFwcGVuZCgncGF0aCcpXG4gICAgICAgIC5hdHRyKCdjbGFzcycsJ3RpbGVfZG4nKVxuICAgICAgICAuYXR0cignZCcsIGZ1bmN0aW9uKGQpIHtcblxuICAgICAgICAgIC8vIGRuIHRyaWFuZ2xlXG4gICAgICAgICAgdmFyIHN0YXJ0X3ggPSAwO1xuICAgICAgICAgIHZhciBmaW5hbF94ID0gcGFyYW1zLm1hdHJpeC54X3NjYWxlLnJhbmdlQmFuZCgpO1xuICAgICAgICAgIHZhciBzdGFydF95ID0gcGFyYW1zLm1hdHJpeC55X3NjYWxlLnJhbmdlQmFuZCgpIC0gcGFyYW1zLm1hdHJpeC55X3NjYWxlLnJhbmdlQmFuZCgpIC82MDtcbiAgICAgICAgICB2YXIgZmluYWxfeSA9IHBhcmFtcy5tYXRyaXgueV9zY2FsZS5yYW5nZUJhbmQoKSAtIHBhcmFtcy5tYXRyaXgueV9zY2FsZS5yYW5nZUJhbmQoKSAvNjA7XG5cbiAgICAgICAgICB2YXIgb3V0cHV0X3N0cmluZyA9ICdNJyArIHN0YXJ0X3ggKyAnLCAnICsgc3RhcnRfeSArICcgLCAgIEwnICtcbiAgICAgICAgICBmaW5hbF94ICsgJywgJyArIGZpbmFsX3kgKyAnLCAgTCcgKyBmaW5hbF94ICsgJywwIFonO1xuXG4gICAgICAgICAgcmV0dXJuIG91dHB1dF9zdHJpbmc7XG4gICAgICAgIH0pXG4gICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCBmdW5jdGlvbihkKSB7XG4gICAgICAgICAgdmFyIHhfcG9zID0gcGFyYW1zLm1hdHJpeC54X3NjYWxlKGQucG9zX3gpICsgMC41KnBhcmFtcy52aXouYm9yZGVyX3dpZHRoO1xuICAgICAgICAgIHZhciB5X3BvcyA9IDAuNSpwYXJhbXMudml6LmJvcmRlcl93aWR0aC9wYXJhbXMudml6Lnpvb21fc3dpdGNoO1xuICAgICAgICAgIHJldHVybiAndHJhbnNsYXRlKCcgKyB4X3BvcyArICcsJyt5X3BvcysnKSc7XG4gICAgICAgIH0pXG4gICAgICAgIC5zdHlsZSgnZmlsbCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiBwYXJhbXMubWF0cml4LnRpbGVfY29sb3JzWzFdO1xuICAgICAgICB9KVxuICAgICAgICAub24oJ21vdXNlb3ZlcicsIGZ1bmN0aW9uKHApIHtcbiAgICAgICAgLy8gaGlnaGxpZ2h0IHJvdyAtIHNldCB0ZXh0IHRvIGFjdGl2ZSBpZlxuICAgICAgICBkMy5zZWxlY3RBbGwoJy5yb3dfbGFiZWxfdGV4dCB0ZXh0JylcbiAgICAgICAgICAuY2xhc3NlZCgnYWN0aXZlJywgZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgcmV0dXJuIHAucm93X25hbWUgPT09IGQubmFtZTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICBkMy5zZWxlY3RBbGwoJy5jb2xfbGFiZWxfdGV4dCB0ZXh0JylcbiAgICAgICAgICAuY2xhc3NlZCgnYWN0aXZlJywgZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgcmV0dXJuIHAuY29sX25hbWUgPT09IGQubmFtZTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgaWYgKHBhcmFtcy5tYXRyaXguc2hvd190aWxlX3Rvb2x0aXBzKXtcbiAgICAgICAgICB0aXAuc2hvdyhwKTtcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIC5vbignbW91c2VvdXQnLCBmdW5jdGlvbihkKSB7XG4gICAgICAgIGQzLnNlbGVjdEFsbCgndGV4dCcpLmNsYXNzZWQoJ2FjdGl2ZScsIGZhbHNlKTtcbiAgICAgICAgaWYgKHBhcmFtcy5tYXRyaXguc2hvd190aWxlX3Rvb2x0aXBzKXtcbiAgICAgICAgICB0aXAuaGlkZSgpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgbmV3X3RpbGVzX2RuXG4gICAgICAgIC5zdHlsZSgnZmlsbC1vcGFjaXR5JywwKVxuICAgICAgICAudHJhbnNpdGlvbigpLmRlbGF5KGRlbGF5cy5lbnRlcikuZHVyYXRpb24oZHVyYXRpb24pXG4gICAgICAgIC5zdHlsZSgnZmlsbC1vcGFjaXR5JyxmdW5jdGlvbihkKXtcbiAgICAgICAgICB2YXIgaW5zdF9vcGFjaXR5ID0gMDtcbiAgICAgICAgICBpZiAoTWF0aC5hYnMoZC52YWx1ZV91cCk+MCl7XG4gICAgICAgICAgICBpbnN0X29wYWNpdHkgPSBwYXJhbXMubWF0cml4Lm9wYWNpdHlfc2NhbGUoTWF0aC5hYnMoZC52YWx1ZV9kbikpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gaW5zdF9vcGFjaXR5O1xuICAgICAgICB9KTtcblxuICAgICAgLy8gcmVtb3ZlIHRpbGVzIHdoZW4gc3BsaXR0aW5nIGlzIGRvbmVcbiAgICAgIHRpbGVcbiAgICAgICAgLmVhY2goZnVuY3Rpb24oZCl7XG4gICAgICAgICAgaWYgKCBNYXRoLmFicyhkLnZhbHVlX3VwKT4wICYmIE1hdGguYWJzKGQudmFsdWVfZG4pPjAgKXtcbiAgICAgICAgICAgIGQzLnNlbGVjdCh0aGlzKS5yZW1vdmUoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgfVxuXG4gIH1cblxuICAvLyB2YXIgbGFiZWxzID0gTGFiZWxzKHBhcmFtcyk7XG5cbiAgdmFyIHJvd190cmlhbmdsZV9pbmlfZ3JvdXAgPSBtYWtlX3Jvd3MocGFyYW1zLCBkdXJhdGlvbik7XG4gIHZhciBjb250YWluZXJfYWxsX2NvbCA9IG1ha2VfY29scyhwYXJhbXMsIGR1cmF0aW9uKTtcblxuICAvLyBGYWRlIGluIG5ldyBncmlkbGluZXNcbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gIHZhciByb3dfbm9kZXNfbmFtZXMgPSBwYXJhbXMubmV0d29ya19kYXRhLnJvd19ub2Rlc19uYW1lcztcbiAgdmFyIGNvbF9ub2Rlc19uYW1lcyA9IHBhcmFtcy5uZXR3b3JrX2RhdGEuY29sX25vZGVzX25hbWVzO1xuXG5cbiAgLy8gYXBwZW5kIGhvcml6b250YWwgbGluZXNcbiAgZDMuc2VsZWN0KHBhcmFtcy5yb290KycgLmNsdXN0X2dyb3VwJylcbiAgICAuc2VsZWN0QWxsKCcuaG9yel9saW5lcycpXG4gICAgLmRhdGEocm93X25vZGVzLCBmdW5jdGlvbihkKXtyZXR1cm4gZC5uYW1lO30pXG4gICAgLmVudGVyKClcbiAgICAuYXBwZW5kKCdnJylcbiAgICAuYXR0cignY2xhc3MnLCdob3J6X2xpbmVzJylcbiAgICAuYXR0cigndHJhbnNmb3JtJywgZnVuY3Rpb24oZCkge1xuICAgICAgdmFyIGluc3RfaW5kZXggPSBfLmluZGV4T2Yocm93X25vZGVzX25hbWVzLCBkLm5hbWUpO1xuICAgICAgcmV0dXJuICd0cmFuc2xhdGUoMCwnICsgcGFyYW1zLm1hdHJpeC55X3NjYWxlKGluc3RfaW5kZXgpICsgJykgcm90YXRlKDApJztcbiAgICB9KVxuICAgIC5hcHBlbmQoJ2xpbmUnKVxuICAgIC5hdHRyKCd4MScsMClcbiAgICAuYXR0cigneDInLHBhcmFtcy52aXouY2x1c3QuZGltLndpZHRoKVxuICAgIC5zdHlsZSgnc3Ryb2tlLXdpZHRoJywgcGFyYW1zLnZpei5ib3JkZXJfd2lkdGgvcGFyYW1zLnZpei56b29tX3N3aXRjaCsncHgnKVxuICAgIC5zdHlsZSgnc3Ryb2tlJywnd2hpdGUnKVxuICAgIC5hdHRyKCdvcGFjaXR5JywwKVxuICAgIC50cmFuc2l0aW9uKCkuZGVsYXkoZGVsYXlzLmVudGVyKS5kdXJhdGlvbigyKmR1cmF0aW9uKVxuICAgIC5hdHRyKCdvcGFjaXR5JywxKTtcblxuICAvLyBhcHBlbmQgdmVydGljYWwgbGluZSBncm91cHNcbiAgZDMuc2VsZWN0KHBhcmFtcy5yb290KycgLmNsdXN0X2dyb3VwJylcbiAgICAuc2VsZWN0QWxsKCcudmVydF9saW5lcycpXG4gICAgLmRhdGEoY29sX25vZGVzKVxuICAgIC5lbnRlcigpXG4gICAgLmFwcGVuZCgnZycpXG4gICAgLmF0dHIoJ2NsYXNzJywgJ3ZlcnRfbGluZXMnKVxuICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCBmdW5jdGlvbihkKSB7XG4gICAgICB2YXIgaW5zdF9pbmRleCA9IF8uaW5kZXhPZihjb2xfbm9kZXNfbmFtZXMsIGQubmFtZSk7XG4gICAgICByZXR1cm4gJ3RyYW5zbGF0ZSgnICsgcGFyYW1zLm1hdHJpeC54X3NjYWxlKGluc3RfaW5kZXgpICsgJykgcm90YXRlKC05MCknO1xuICAgIH0pXG4gICAgLmFwcGVuZCgnbGluZScpXG4gICAgLmF0dHIoJ3gxJywgMClcbiAgICAuYXR0cigneDInLCAtcGFyYW1zLnZpei5jbHVzdC5kaW0uaGVpZ2h0KVxuICAgIC5zdHlsZSgnc3Ryb2tlLXdpZHRoJywgcGFyYW1zLnZpei5ib3JkZXJfd2lkdGggKyAncHgnKVxuICAgIC5zdHlsZSgnc3Ryb2tlJywgJ3doaXRlJylcbiAgICAuYXR0cignb3BhY2l0eScsMClcbiAgICAudHJhbnNpdGlvbigpLmRlbGF5KGRlbGF5cy5lbnRlcikuZHVyYXRpb24oMipkdXJhdGlvbilcbiAgICAuYXR0cignb3BhY2l0eScsMSk7XG5cbn07XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiBzcmMvbmV0d29yay9lbnRlcl9leGl0X3VwZGF0ZS5qc1xuICoqLyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUtBO0FBUkE7QUFDQTs7QUFKQTtBQUNBOztBQURBO0FBQ0E7O0FBREE7QUFDQTs7QUFEQTtBQWdDQTtBQUNBO0FBRkE7QUFDQTs7QUFoQ0E7QUFzQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBekNBO0FBNENBO0FBQ0E7QUFDQTs7QUE5Q0E7QUFDQTs7QUFEQTtBQW9EQTtBQUNBO0FBRkE7QUFDQTtBQUlBO0FBQ0E7QUFEQTtBQUNBOzs7OztBQXpEQTtBQWtFQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBREE7QUFNQTtBQU5BO0FBQ0E7O0FBdEVBO0FBbUZBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBRkE7QUFIQTtBQVFBO0FBRUE7QUFDQTtBQUZBO0FBVEE7QUFDQTs7QUF0RkE7QUF3R0E7QUFEQTtBQUNBOzs7QUF4R0E7QUFnSEE7QUFDQTs7QUFqSEE7QUFvSEE7QUFBQTtBQUNBOztBQXJIQTtBQTRIQTtBQUFBO0FBQ0E7O0FBN0hBO0FBb0lBO0FBQUE7QUFDQTtBQUtBO0FBQ0E7QUFBQTtBQUNBO0FBS0E7QUFDQTtBQUFBO0FBQ0E7QUFLQTtBQUNBO0FBQUE7QUFDQTs7QUExSkE7QUFpS0E7QUFBQTtBQUNBOztBQWxLQTtBQUNBOzs7OztBQURBO0FBaUxBO0FBQUE7QUFLQTtBQUNBO0FBRkE7QUFDQTtBQUlBO0FBQ0E7O0FBM0xBO0FBQ0E7QUE4TEE7QUFDQTs7QUFIQTtBQU1BO0FBREE7QUFDQTs7O0FBTkE7QUFhQTtBQUFBOztBQUZBO0FBVUE7QUFEQTs7QUFLQTtBQUVBO0FBREE7QUFDQTtBQUdBO0FBRUE7QUFEQTtBQVJBO0FBYUE7QUFEQTtBQUNBO0FBR0E7O0FBS0E7QUFDQTtBQUhBO0FBQ0E7QUFLQTtBQUVBO0FBQ0E7QUFDQTtBQUhBO0FBQ0E7QUFLQTtBQUNBOztBQUVBO0FBQ0E7QUFEQTtBQUNBOztBQUpBO0FBVUE7QUFBQTtBQUNBOztBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFYQTtBQWNBO0FBQ0E7QUFDQTtBQUhBO0FBTUE7QUFEQTs7QUFLQTtBQUVBO0FBREE7QUFDQTtBQUdBO0FBRUE7QUFEQTtBQUdBO0FBQ0E7QUFEQTtBQVhBO0FBZ0JBO0FBQ0E7QUFDQTtBQURBO0FBRkE7QUFDQTtBQU1BO0FBSUE7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUxBO0FBQ0E7O0FBN0RBO0FBd0VBO0FBQUE7QUFDQTs7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBWEE7QUFjQTtBQUNBO0FBQ0E7QUFIQTtBQU1BO0FBREE7O0FBS0E7QUFFQTtBQURBO0FBQ0E7QUFHQTtBQUVBO0FBREE7QUFHQTtBQUNBO0FBREE7QUFYQTtBQWdCQTtBQUNBO0FBQ0E7QUFEQTtBQUZBO0FBQ0E7QUFNQTtBQUlBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFMQTtBQUNBOztBQTNIQTtBQXFJQTtBQUNBO0FBREE7QUFEQTtBQXBJQTtBQXZEQTtBQUNBOzs7QUE5TEE7QUFxWUE7QUFDQTs7O0FBdFlBO0FBMFlBO0FBQ0E7O0FBM1lBO0FBZ1pBO0FBQUE7QUFLQTtBQUNBO0FBRkE7QUFDQTs7QUFyWkE7QUF5YUE7QUFDQTtBQUZBO0FBeGFBIiwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 46 */
/***/ function(module, exports, __webpack_require__) {

	eval("var utils = __webpack_require__(5);\nvar Params = __webpack_require__(1);\n\nmodule.exports = function (row_nodes, col_nodes, links, duration, delays) {\n  var params = Params.get();\n\n  var row_nodes_names = params.network_data.row_nodes_names;\n  var col_nodes_names = params.network_data.col_nodes_names;\n\n  // reset zoom\n  //////////////////////////////\n  var zoom_y = 1;\n  var zoom_x = 1;\n  var pan_dx = 0;\n  var pan_dy = 0;\n\n  var half_height = params.viz.clust.dim.height / 2;\n  var center_y = -(zoom_y - 1) * half_height;\n\n  this.viz.get_clust_group().attr('transform', 'translate(' + [0, 0 + center_y] + ')' + ' scale(' + 1 + ',' + zoom_y + ')' + 'translate(' + [pan_dx, pan_dy] + ')');\n\n  d3.select(params.root + ' .row_label_zoom_container').attr('transform', 'translate(' + [0, center_y] + ')' + ' scale(' + zoom_y + ',' + zoom_y + ')' + 'translate(' + [0, pan_dy] + ')');\n\n  d3.select(params.root + ' .row_zoom_container').attr('transform', 'translate(' + [0, center_y] + ')' + ' scale(' + 1 + ',' + zoom_y + ')' + 'translate(' + [0, pan_dy] + ')');\n\n  d3.select(params.root + ' .col_zoom_container').attr('transform', ' scale(' + 1 + ',' + 1 + ')' + 'translate(' + [pan_dx, 0] + ')');\n\n  d3.select('.col_viz_zoom_container').attr('transform', ' scale(' + 1 + ',' + 1 + ')' + 'translate(' + [pan_dx, 0] + ')');\n\n  // set y translate: center_y is positive, positive moves the visualization down\n  // the translate vector has the initial margin, the first y centering, and pan_dy\n  // times the scaling zoom_y\n  var net_y_offset = params.viz.clust.margin.top + center_y + pan_dy * zoom_y;\n\n  // Resetting some visualization parameters\n  ///////////////////////////////////////////////\n\n  // get height and width from parent div\n  params.viz.svg_dim = {};\n  params.viz.svg_dim.width = Number(d3.select(params.viz.viz_wrapper).style('width').replace('px', ''));\n  params.viz.svg_dim.height = Number(d3.select(params.viz.viz_wrapper).style('height').replace('px', ''));\n\n  // reduce width by row/col labels and by grey_border width (reduce width by less since this is less aparent with slanted col labels)\n  var ini_clust_width = params.viz.svg_dim.width - (params.labels.super_label_width + params.norm_label.width.row + params.class_room.row) - params.viz.grey_border_width - params.viz.spillover_x_offset;\n\n  // there is space between the clustergram and the border\n  var ini_clust_height = params.viz.svg_dim.height - (params.labels.super_label_width + params.norm_label.width.col + params.class_room.col) - 5 * params.viz.grey_border_width;\n\n  // reduce clustergram width if triangles are taller than the normal width\n  // of the columns\n  var tmp_x_scale = d3.scale.ordinal().rangeBands([0, ini_clust_width]);\n  tmp_x_scale.domain(params.matrix.orders.ini_row);\n  var triangle_height = tmp_x_scale.rangeBand() / 2;\n  if (triangle_height > params.norm_label.width.col) {\n    ini_clust_width = ini_clust_width * (params.norm_label.width.col / triangle_height);\n  }\n  params.viz.clust.dim.width = ini_clust_width;\n\n  // clustergram height\n  ////////////////////////\n  // ensure that rects are never taller than they are wide\n  // force square tiles\n  if (ini_clust_width / params.viz.num_col_nodes < ini_clust_height / params.viz.num_row_nodes) {\n\n    // scale the height\n    params.viz.clust.dim.height = ini_clust_width * (params.viz.num_row_nodes / params.viz.num_col_nodes);\n\n    // keep track of whether or not a force square has occurred\n    // so that I can adjust the font accordingly\n    params.viz.force_square = 1;\n\n    // make sure that force_square does not cause the entire visualization\n    // to be taller than the svg, if it does, then undo\n    if (params.viz.clust.dim.height > ini_clust_height) {\n      // make the height equal to the width\n      params.viz.clust.dim.height = ini_clust_height;\n      // keep track of whether or not a force square has occurred\n      params.viz.force_square = 0;\n    }\n  }\n  // do not force square tiles\n  else {\n      // the height will be calculated normally - leading to wide tiles\n      params.viz.clust.dim.height = ini_clust_height;\n      // keep track of whether or not a force square has occurred\n      params.viz.force_square = 0;\n    }\n\n  // zoom_switch from 1 to 2d zoom\n  params.viz.zoom_switch = params.viz.clust.dim.width / params.viz.num_col_nodes / (params.viz.clust.dim.height / params.viz.num_row_nodes);\n\n  // zoom_switch can not be less than 1\n  if (params.viz.zoom_switch < 1) {\n    params.viz.zoom_switch = 1;\n  }\n\n  // redefine x_scale and y_scale rangeBands\n  params.matrix.x_scale.rangeBands([0, params.viz.clust.dim.width]);\n  params.matrix.y_scale.rangeBands([0, params.viz.clust.dim.height]);\n\n  // redefine zoom extent\n  params.viz.real_zoom = params.norm_label.width.col / (params.matrix.x_scale.rangeBand() / 2);\n  params.zoom_behavior.scaleExtent([1, params.viz.real_zoom * params.viz.zoom_switch]);\n\n  // redefine border width\n  params.viz.border_width = params.matrix.x_scale.rangeBand() / 40;\n\n  // the default font sizes are set here\n  params.labels.default_fs_row = params.matrix.y_scale.rangeBand() * 1.01;\n  params.labels.default_fs_col = params.matrix.x_scale.rangeBand() * 0.85;\n\n  // Begin resizing the visualization\n  /////////////////////////////////////////\n  /////////////////////////////////////////\n\n  // resize the svg\n  ///////////////////////\n  var svg_group = d3.select(params.viz.viz_wrapper).select('svg');\n\n  svg_group.select(params.root + ' .grey_background').transition().delay(delays.update).duration(duration).attr('width', params.viz.clust.dim.width).attr('height', params.viz.clust.dim.height);\n\n  //////////////////////\n  // set up later\n  //////////////////////\n  // svg_group.selectAll('.highlighting_rect')\n  //   // .transition().delay(delays.update).duration(duration)\n  //   .attr('width', params.matrix.x_scale.rangeBand() * 0.80)\n  //   .attr('height', params.matrix.y_scale.rangeBand() * 0.80);\n  // svg_group.selectAll('.tile_split_up')\n  //   // .transition().delay(delays.update).duration(duration)\n  //   .attr('d', function() {\n  //     var start_x = 0;\n  //     var final_x = params.matrix.x_scale.rangeBand();\n  //     var start_y = 0;\n  //     var final_y = params.matrix.y_scale.rangeBand() - params.matrix.y_scale.rangeBand()/60;\n  //     var output_string = 'M' + start_x + ',' + start_y + ', L' +\n  //       start_x + ', ' + final_y + ', L' + final_x + ',0 Z';\n  //     return output_string;\n  //   })\n  // svg_group.selectAll('.tile_split_dn')\n  //   // .transition().delay(delays.update).duration(duration)\n  //   .attr('d', function() {\n  //     var start_x = 0;\n  //     var final_x = params.matrix.x_scale.rangeBand();\n  //     var start_y = params.matrix.y_scale.rangeBand() - params.matrix.y_scale.rangeBand()/60;\n  //     var final_y = params.matrix.y_scale.rangeBand() - params.matrix.y_scale.rangeBand()/60;\n  //     var output_string = 'M' + start_x + ', ' + start_y + ' ,   L' +\n  //       final_x + ', ' + final_y + ',  L' + final_x + ',0 Z';\n  //     return output_string;\n  //   })\n\n  // add text to row/col during resize\n  function normal_name(d) {\n    var inst_name = d.name.replace(/_/g, ' ').split('#')[0];\n    if (inst_name.length > params.labels.max_label_char) {\n      inst_name = inst_name.substring(0, params.labels.max_label_char) + '..';\n    }\n    return inst_name;\n  }\n\n  // resize row labels\n  ///////////////////////////\n\n  if (delays.run_transition) {\n\n    svg_group.select(params.root + ' .row_container').transition().delay(delays.update).duration(duration).attr('transform', 'translate(' + params.norm_label.margin.left + ',' + params.viz.clust.margin.top + ')');\n\n    svg_group.select(params.root + ' .row_container').select('.white_bars').transition().delay(delays.update).duration(duration).attr('width', params.norm_label.background.row).attr('height', 30 * params.viz.clust.dim.height + 'px');\n\n    svg_group.select(params.root + ' .row_container').select('.row_label_container').transition().delay(delays.update).duration(duration).attr('transform', 'translate(' + params.norm_label.width.row + ',0)');\n\n    svg_group.selectAll('.row_label_text').data(row_nodes, function (d) {\n      return d.name;\n    }).transition().delay(delays.update).duration(duration).attr('transform', function (d) {\n      var inst_index = _.indexOf(row_nodes_names, d.name);\n      return 'translate(0,' + params.matrix.y_scale(inst_index) + ')';\n    }).attr('y', params.matrix.rect_height * 0.5 + params.labels.default_fs_row * 0.35);\n  } else {\n    svg_group.select(params.root + ' .row_container').attr('transform', 'translate(' + params.norm_label.margin.left + ',' + params.viz.clust.margin.top + ')');\n\n    svg_group.select(params.root + ' .row_container').select('.white_bars').attr('width', params.norm_label.background.row).attr('height', 30 * params.viz.clust.dim.height + 'px');\n\n    svg_group.select(params.root + ' .row_container').select('.row_label_container').attr('transform', 'translate(' + params.norm_label.width.row + ',0)');\n\n    svg_group.selectAll('.row_label_text').data(row_nodes, function (d) {\n      return d.name;\n    }).attr('transform', function (d) {\n      var inst_index = _.indexOf(row_nodes_names, d.name);\n      return 'translate(0,' + params.matrix.y_scale(inst_index) + ')';\n    }).attr('y', params.matrix.rect_height * 0.5 + params.labels.default_fs_row * 0.35);\n  }\n\n  // do not delay the font size change since this will break the bounding box calc\n  svg_group.selectAll('.row_label_text').select('text').style('font-size', params.labels.default_fs_row + 'px').text(function (d) {\n    return normal_name(d);\n  });\n\n  // change the size of the highlighting rects\n  svg_group.selectAll('.row_label_text').each(function () {\n    var bbox = d3.select(this).select('text')[0][0].getBBox();\n    d3.select(this).select('rect').attr('x', bbox.x).attr('y', 0).attr('width', bbox.width).attr('height', params.matrix.y_scale.rangeBand()).style('fill', 'yellow').style('opacity', function (d) {\n      var inst_opacity = 0;\n      // highlight target genes\n      if (d.target === 1) {\n        inst_opacity = 1;\n      }\n      return inst_opacity;\n    });\n  });\n\n  // label the widest row and col labels\n  params.bounding_width_max = {};\n  params.bounding_width_max.row = 0;\n  d3.selectAll('.row_label_text').each(function () {\n    var tmp_width = d3.select(this).select('text').node().getBBox().width;\n    if (tmp_width > params.bounding_width_max.row) {\n      params.bounding_width_max.row = tmp_width;\n    }\n  });\n\n  // check if widest row or col are wider than the allowed label width\n  ////////////////////////////////////////////////////////////////////////\n  params.ini_scale_font = {};\n  params.ini_scale_font.row = 1;\n  params.ini_scale_font.col = 1;\n\n  if (params.bounding_width_max.row > params.norm_label.width.row) {\n\n    // calc reduction in font size\n    params.ini_scale_font.row = params.norm_label.width.row / params.bounding_width_max.row;\n    // redefine bounding_width_max.row\n    params.bounding_width_max.row = params.ini_scale_font.row * params.bounding_width_max.row;\n\n    // redefine default fs\n    params.labels.default_fs_row = params.labels.default_fs_row * params.ini_scale_font.row;\n    // reduce font size\n    d3.selectAll('.row_label_text').each(function () {\n      d3.select(this).select('text').style('font-size', params.labels.default_fs_row + 'px');\n    });\n  }\n\n  if (delays.run_transition) {\n\n    // positioning row text after row text size may have been reduced\n    svg_group.selectAll('.row_label_text').select('text').transition().delay(delays.update).duration(duration).attr('y', params.matrix.rect_height * 0.5 + params.labels.default_fs_row * 0.35);\n\n    svg_group.select('.row_viz_container').transition().delay(delays.update).duration(duration).attr('transform', 'translate(' + params.norm_label.width.row + ',0)');\n\n    svg_group.select('.row_viz_container').transition().delay(delays.update).duration(duration).select('white_bars').attr('width', params.class_room.row + 'px').attr('height', function () {\n      var inst_height = params.viz.clust.dim.height;\n      return inst_height;\n    });\n\n    svg_group.selectAll('.row_viz_group').data(row_nodes, function (d) {\n      return d.name;\n    }).transition().delay(delays.update).duration(duration).attr('transform', function (d) {\n      var inst_index = _.indexOf(row_nodes_names, d.name);\n      return 'translate(0, ' + params.matrix.y_scale(inst_index) + ')';\n    });\n\n    svg_group.selectAll('.row_viz_group').select('path').transition().delay(delays.update).duration(duration).attr('d', function () {\n      var origin_x = params.class_room.symbol_width - 1;\n      var origin_y = 0;\n      var mid_x = 1;\n      var mid_y = params.matrix.y_scale.rangeBand() / 2;\n      var final_x = params.class_room.symbol_width - 1;\n      var final_y = params.matrix.y_scale.rangeBand();\n      var output_string = 'M ' + origin_x + ',' + origin_y + ' L ' + mid_x + ',' + mid_y + ', L ' + final_x + ',' + final_y + ' Z';\n      return output_string;\n    });\n  } else {\n\n    // positioning row text after row text size may have been reduced\n    svg_group.selectAll('.row_label_text').select('text').attr('y', params.matrix.rect_height * 0.5 + params.labels.default_fs_row * 0.35);\n\n    svg_group.select('.row_viz_container').attr('transform', 'translate(' + params.norm_label.width.row + ',0)');\n\n    svg_group.select('.row_viz_container').select('white_bars').attr('width', params.class_room.row + 'px').attr('height', function () {\n      var inst_height = params.viz.clust.dim.height;\n      return inst_height;\n    });\n\n    svg_group.selectAll('.row_viz_group').data(row_nodes, function (d) {\n      return d.name;\n    }).attr('transform', function (d) {\n      var inst_index = _.indexOf(row_nodes_names, d.name);\n      return 'translate(0, ' + params.matrix.y_scale(inst_index) + ')';\n    });\n\n    svg_group.selectAll('.row_viz_group').select('path').attr('d', function () {\n      var origin_x = params.class_room.symbol_width - 1;\n      var origin_y = 0;\n      var mid_x = 1;\n      var mid_y = params.matrix.y_scale.rangeBand() / 2;\n      var final_x = params.class_room.symbol_width - 1;\n      var final_y = params.matrix.y_scale.rangeBand();\n      var output_string = 'M ' + origin_x + ',' + origin_y + ' L ' + mid_x + ',' + mid_y + ', L ' + final_x + ',' + final_y + ' Z';\n      return output_string;\n    });\n  }\n\n  if (utils.has(params.network_data.row_nodes[0], 'value')) {\n\n    // set bar scale\n    var enr_max = Math.abs(_.max(params.network_data.row_nodes, function (d) {\n      return Math.abs(d.value);\n    }).value);\n    params.labels.bar_scale_row = d3.scale.linear().domain([0, enr_max]).range([0, params.norm_label.width.row]);\n\n    svg_group.selectAll('.row_bars')\n    // .transition().delay(delays.update).duration(duration)\n    .attr('width', function (d) {\n      var inst_value = 0;\n      inst_value = params.labels.bar_scale_row(Math.abs(d.value));\n      return inst_value;\n    }).attr('x', function (d) {\n      var inst_value = 0;\n      inst_value = -params.labels.bar_scale_row(Math.abs(d.value));\n      return inst_value;\n    }).attr('height', params.matrix.y_scale.rangeBand());\n  }\n\n  // resize col labels\n  ///////////////////////\n\n  if (delays.run_transition) {\n\n    svg_group.select(params.root + ' .col_container').transition().delay(delays.update).duration(duration).attr('transform', 'translate(' + params.viz.clust.margin.left + ',' + params.norm_label.margin.top + ')');\n\n    svg_group.select(params.root + ' .col_container').transition().delay(delays.update).duration(duration).select('.white_bars').attr('width', 30 * params.viz.clust.dim.width + 'px').attr('height', params.norm_label.background.col);\n\n    svg_group.select(params.root + ' .col_container').transition().delay(delays.update).duration(duration).select('.col_label_outer_container').attr('transform', 'translate(0,' + params.norm_label.width.col + ')');\n\n    // offset click group column label\n    var x_offset_click = params.matrix.x_scale.rangeBand() / 2 + params.viz.border_width;\n    // reduce width of rotated rects\n    var reduce_rect_width = params.matrix.x_scale.rangeBand() * 0.36;\n\n    svg_group.selectAll('.col_label_text').data(col_nodes, function (d) {\n      return d.name;\n    }).transition().delay(delays.update).duration(duration).attr('transform', function (d) {\n      var inst_index = _.indexOf(col_nodes_names, d.name);\n      return 'translate(' + params.matrix.x_scale(inst_index) + ') rotate(-90)';\n    });\n\n    svg_group.selectAll('.col_label_click').transition().delay(delays.update).duration(duration).attr('transform', 'translate(' + params.matrix.x_scale.rangeBand() / 2 + ',' + x_offset_click + ') rotate(45)');\n\n    svg_group.selectAll('.col_label_click').select('text').style('font-size', params.labels.default_fs_col + 'px').text(function (d) {\n      return normal_name(d);\n    });\n\n    svg_group.selectAll('.col_label_click').select('text').transition().delay(delays.update).duration(duration).attr('y', params.matrix.x_scale.rangeBand() * 0.60).attr('dx', 2 * params.viz.border_width);\n  } else {\n\n    svg_group.select(params.root + ' .col_container').attr('transform', 'translate(' + params.viz.clust.margin.left + ',' + params.norm_label.margin.top + ')');\n\n    svg_group.select(params.root + ' .col_container').select('.white_bars').attr('width', 30 * params.viz.clust.dim.width + 'px').attr('height', params.norm_label.background.col);\n\n    svg_group.select(params.root + ' .col_container').select('.col_label_outer_container').attr('transform', 'translate(0,' + params.norm_label.width.col + ')');\n\n    // offset click group column label\n    var x_offset_click = params.matrix.x_scale.rangeBand() / 2 + params.viz.border_width;\n    // reduce width of rotated rects\n    var reduce_rect_width = params.matrix.x_scale.rangeBand() * 0.36;\n\n    svg_group.selectAll('.col_label_text').data(col_nodes, function (d) {\n      return d.name;\n    }).attr('transform', function (d) {\n      var inst_index = _.indexOf(col_nodes_names, d.name);\n      return 'translate(' + params.matrix.x_scale(inst_index) + ') rotate(-90)';\n    });\n\n    svg_group.selectAll('.col_label_click').attr('transform', 'translate(' + params.matrix.x_scale.rangeBand() / 2 + ',' + x_offset_click + ') rotate(45)');\n\n    svg_group.selectAll('.col_label_click').select('text').style('font-size', params.labels.default_fs_col + 'px').text(function (d) {\n      return normal_name(d);\n    });\n\n    svg_group.selectAll('.col_label_click').select('text').attr('y', params.matrix.x_scale.rangeBand() * 0.60).attr('dx', 2 * params.viz.border_width);\n  }\n\n  params.bounding_width_max.col = 0;\n  svg_group.selectAll('.col_label_click').each(function () {\n    var tmp_width = d3.select(this).select('text').node().getBBox().width;\n    if (tmp_width > params.bounding_width_max.col) {\n      params.bounding_width_max.col = tmp_width;\n    }\n  });\n\n  if (params.bounding_width_max.col > params.norm_label.width.col) {\n\n    // calc reduction in font size\n    params.ini_scale_font.col = params.norm_label.width.col / params.bounding_width_max.col;\n    // redefine bounding_width_max.col\n    params.bounding_width_max.col = params.ini_scale_font.col * params.bounding_width_max.col;\n    // redefine default fs\n    params.labels.default_fs_col = params.labels.default_fs_col * params.ini_scale_font.col;\n    // reduce font size\n    d3.selectAll('.col_label_click').each(function () {\n      d3.select(this).select('text').style('font-size', params.labels.default_fs_col + 'px');\n    });\n    // .attr('y', params.matrix.rect_width * 0.5 + params.labels.default_fs_col*0.25 )\n  }\n\n  svg_group.selectAll('.col_label_click').each(function () {\n    d3.select(this).select('text')[0][0].getBBox();\n    // d3.select(this)\n    //   .select('rect')\n    //   .attr('x', bbox.x * 1.25)\n    //   .attr('y', 0)\n    //   .attr('width', bbox.width * 1.25)\n    //   .attr('height', params.matrix.x_scale.rangeBand() * 0.6)\n    //   .style('fill', 'yellow')\n    //   .style('opacity', 0);\n  });\n\n  if (delays.run_transition) {\n\n    // resize column triangle\n    svg_group.selectAll('.col_label_click').select('path').transition().delay(delays.update).duration(duration).attr('d', function () {\n      // x and y are flipped since its rotated\n      var origin_y = -params.viz.border_width;\n      var start_x = 0;\n      var final_x = params.matrix.x_scale.rangeBand() - reduce_rect_width;\n      var start_y = -(params.matrix.x_scale.rangeBand() - reduce_rect_width + params.viz.border_width);\n      var final_y = -params.viz.border_width;\n      var output_string = 'M ' + origin_y + ',0 L ' + start_y + ',' + start_x + ', L ' + final_y + ',' + final_x + ' Z';\n      return output_string;\n    }).attr('fill', function (d) {\n      var inst_color = '#eee';\n      if (params.labels.show_categories) {\n        inst_color = params.labels.class_colors.col[d.cl];\n      }\n      return inst_color;\n    });\n  } else {\n    // resize column triangle\n    svg_group.selectAll('.col_label_click').select('path').attr('d', function () {\n      // x and y are flipped since its rotated\n      var origin_y = -params.viz.border_width;\n      var start_x = 0;\n      var final_x = params.matrix.x_scale.rangeBand() - reduce_rect_width;\n      var start_y = -(params.matrix.x_scale.rangeBand() - reduce_rect_width + params.viz.border_width);\n      var final_y = -params.viz.border_width;\n      var output_string = 'M ' + origin_y + ',0 L ' + start_y + ',' + start_x + ', L ' + final_y + ',' + final_x + ' Z';\n      return output_string;\n    }).attr('fill', function (d) {\n      var inst_color = '#eee';\n      if (params.labels.show_categories) {\n        inst_color = params.labels.class_colors.col[d.cl];\n      }\n      return inst_color;\n    });\n  }\n\n  // append column value bars\n  if (utils.has(params.network_data.col_nodes[0], 'value')) {\n\n    console.log('resizing col bars');\n\n    svg_group.selectAll('.col_bars').data(col_nodes, function (d) {\n      return d.name;\n    }).transition().delay(delays.update).duration(duration).attr('width', function (d) {\n      var inst_value = 0;\n      if (d.value > 0) {\n\n        console.log(String(d.name) + ' ' + String(d.value) + '\\n\\n');\n        inst_value = params.labels.bar_scale_col(d.value);\n      }\n      return inst_value;\n    })\n    // rotate labels - reduce width if rotating\n    .attr('height', params.matrix.x_scale.rangeBand() * 0.66);\n  }\n\n  if (params.labels.show_categories) {\n    // change the size of the highlighting rects\n    d3.selectAll('.col_label_click').each(function (d) {\n      var bbox = d3.select(this).select('text')[0][0].getBBox();\n\n      d3.select(this).select('rect').transition().delay(delays.update).duration(duration).attr('width', bbox.width * 1.1).attr('height', 0.67 * params.matrix.rect_width).style('fill', function (d) {\n        var inst_color = 'white';\n        if (params.labels.show_categories) {\n          inst_color = params.labels.class_colors.col[d.cl];\n        }\n        return inst_color;\n      }).style('opacity', 0.30);\n    });\n  }\n\n  // resize dendrogram\n  ///////////////////\n\n  if (delays.run_transition) {\n\n    svg_group.selectAll('.row_class_rect').transition().delay(delays.update).duration(duration).attr('width', function () {\n      var inst_width = params.class_room.symbol_width - 1;\n      return inst_width + 'px';\n    }).attr('height', params.matrix.y_scale.rangeBand()).attr('x', function () {\n      var inst_offset = params.class_room.symbol_width + 1;\n      return inst_offset + 'px';\n    });\n\n    svg_group.selectAll('.col_class_rect').transition().delay(delays.update).duration(duration).attr('width', params.matrix.x_scale.rangeBand()).attr('height', function () {\n      var inst_height = params.class_room.col - 1;\n      return inst_height;\n    });\n\n    svg_group.selectAll('.col_viz_group').data(col_nodes, function (d) {\n      return d.name;\n    }).transition().delay(delays.update).duration(duration).attr('transform', function (d) {\n      var inst_index = _.indexOf(col_nodes_names, d.name);\n      return 'translate(' + params.matrix.x_scale(inst_index) + ',0)';\n    });\n  } else {\n\n    svg_group.selectAll('.row_class_rect').attr('width', function () {\n      var inst_width = params.class_room.symbol_width - 1;\n      return inst_width + 'px';\n    }).attr('height', params.matrix.y_scale.rangeBand()).attr('x', function () {\n      var inst_offset = params.class_room.symbol_width + 1;\n      return inst_offset + 'px';\n    });\n\n    svg_group.selectAll('.col_class_rect').attr('width', params.matrix.x_scale.rangeBand()).attr('height', function () {\n      var inst_height = params.class_room.col - 1;\n      return inst_height;\n    });\n\n    svg_group.selectAll('.col_viz_group').data(col_nodes, function (d) {\n      return d.name;\n    }).attr('transform', function (d) {\n      var inst_index = _.indexOf(col_nodes_names, d.name);\n      return 'translate(' + params.matrix.x_scale(inst_index) + ',0)';\n    });\n  }\n\n  // reposition grid lines\n  ////////////////////////////\n  svg_group.selectAll('.horz_lines').data(row_nodes, function (d) {\n    return d.name;\n  })\n  // .transition().delay(delays.update).duration(duration)\n  .attr('transform', function (d) {\n    var inst_index = _.indexOf(row_nodes_names, d.name);\n    return 'translate(0,' + params.matrix.y_scale(inst_index) + ') rotate(0)';\n  });\n\n  svg_group.selectAll('.horz_lines').select('line')\n  // .transition().delay(delays.update).duration(duration)\n  .attr('x2', params.viz.clust.dim.width).style('stroke-width', params.viz.border_width / params.viz.zoom_switch + 'px');\n\n  svg_group.selectAll('.vert_lines').data(col_nodes, function (d) {\n    return d.name;\n  })\n  // .transition().delay(delays.update).duration(duration)\n  .attr('transform', function (d) {\n    var inst_index = _.indexOf(col_nodes_names, d.name);\n    return 'translate(' + params.matrix.x_scale(inst_index) + ') rotate(-90)';\n  });\n\n  svg_group.selectAll('.vert_lines').select('line')\n  // .transition().delay(delays.update).duration(duration)\n  .attr('x2', -params.viz.clust.dim.height).style('stroke-width', params.viz.border_width + 'px');\n\n  // resize superlabels\n  /////////////////////////////////////\n  svg_group.select('.super_col_bk g')\n  // .transition().delay(delays.update).duration(duration)\n  .attr('height', params.labels.super_label_width + 'px').attr('transform', 'translate(0,' + params.viz.grey_border_width + ')');\n\n  // super col title\n  svg_group.select('.super_col')\n  // .transition().delay(delays.update).duration(duration)\n  .attr('transform', function () {\n    var inst_x = params.viz.clust.dim.width / 2 + params.norm_label.width.row;\n    var inst_y = params.labels.super_label_width - params.viz.uni_margin;\n    return 'translate(' + inst_x + ',' + inst_y + ')';\n  });\n\n  // super row title\n  svg_group.select('.super_row_bkg')\n  // .transition().delay(delays.update).duration(duration)\n  .attr('width', params.labels.super_label_width + 'px').attr('transform', 'translate(' + params.viz.grey_border_width + ',0)');\n\n  // append super title row group\n  svg_group.select('.super_row')\n  // .transition().delay(delays.update).duration(duration)\n  .attr('transform', function () {\n    var inst_x = params.labels.super_label_width - params.viz.uni_margin;\n    var inst_y = params.viz.clust.dim.height / 2 + params.norm_label.width.col;\n    return 'translate(' + inst_x + ',' + inst_y + ')';\n  });\n\n  // resize spillover\n  //////////////////////////\n  // hide spillover from slanted column labels on right side\n  svg_group.select('.right_slant_triangle').transition().delay(delays.update).duration(duration).attr('transform', 'translate(' + params.viz.clust.dim.width + ',' + params.norm_label.width.col + ')');\n\n  svg_group.select('.left_slant_triangle').transition().delay(delays.update).duration(duration).attr('transform', 'translate(-1,' + params.norm_label.width.col + ')');\n\n  svg_group.select('.top_left_white').transition().delay(delays.update).duration(duration).attr('width', params.viz.clust.margin.left).attr('height', params.viz.clust.margin.top);\n\n  svg_group.select('.right_spillover').transition().delay(delays.update).duration(duration).attr('transform', function () {\n    var tmp_left = params.viz.clust.margin.left + params.viz.clust.dim.width;\n    var tmp_top = params.norm_label.margin.top + params.norm_label.width.col;\n    return 'translate(' + tmp_left + ',' + tmp_top + ')';\n  });\n\n  // white border bottom - prevent clustergram from hitting border\n  svg_group.select('.bottom_spillover').transition().delay(delays.update).duration(duration).attr('width', params.viz.svg_dim.width).attr('height', 2 * params.viz.grey_border_width).attr('transform', function () {\n    // shift up enough to show the entire border width\n    var inst_offset = params.viz.svg_dim.height - 3 * params.viz.grey_border_width;\n    return 'translate(0,' + inst_offset + ')';\n  });\n\n  // reset zoom and translate\n  //////////////////////////////\n  params.zoom_behavior.scale(1).translate([params.viz.clust.margin.left, params.viz.clust.margin.top]);\n};//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDYuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL3Jlc2V0X3NpemUvcmVzZXRfc2l6ZV9hZnRlcl91cGRhdGUuanM/NjNmYyJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgdXRpbHMgPSByZXF1aXJlKCcuLi91dGlscycpO1xudmFyIFBhcmFtcyA9IHJlcXVpcmUoJy4uL3BhcmFtcycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHJvd19ub2RlcywgY29sX25vZGVzLCBsaW5rcywgZHVyYXRpb24sIGRlbGF5cykge1xuICB2YXIgcGFyYW1zID0gUGFyYW1zLmdldCgpO1xuICBcbiAgdmFyIHJvd19ub2Rlc19uYW1lcyA9IHBhcmFtcy5uZXR3b3JrX2RhdGEucm93X25vZGVzX25hbWVzO1xuICB2YXIgY29sX25vZGVzX25hbWVzID0gcGFyYW1zLm5ldHdvcmtfZGF0YS5jb2xfbm9kZXNfbmFtZXM7XG5cbiAgLy8gcmVzZXQgem9vbVxuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgdmFyIHpvb21feSA9IDE7XG4gIHZhciB6b29tX3ggPSAxO1xuICB2YXIgcGFuX2R4ID0gMDtcbiAgdmFyIHBhbl9keSA9IDA7XG5cbiAgdmFyIGhhbGZfaGVpZ2h0ID0gcGFyYW1zLnZpei5jbHVzdC5kaW0uaGVpZ2h0IC8gMjtcbiAgdmFyIGNlbnRlcl95ID0gLSh6b29tX3kgLSAxKSAqIGhhbGZfaGVpZ2h0O1xuXG4gIHRoaXMudml6LmdldF9jbHVzdF9ncm91cCgpXG4gICAgLmF0dHIoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoJyArIFswLCAwICsgY2VudGVyX3ldICsgJyknICtcbiAgICAnIHNjYWxlKCcgKyAxICsgJywnICsgem9vbV95ICsgJyknICsgJ3RyYW5zbGF0ZSgnICsgW3Bhbl9keCxwYW5fZHldICsgJyknKTtcblxuICBkMy5zZWxlY3QocGFyYW1zLnJvb3QrJyAucm93X2xhYmVsX3pvb21fY29udGFpbmVyJylcbiAgICAuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgnICsgWzAsIGNlbnRlcl95XSArICcpJyArICcgc2NhbGUoJyArXG4gICAgem9vbV95ICsgJywnICsgem9vbV95ICsgJyknICsgJ3RyYW5zbGF0ZSgnICsgWzAsIHBhbl9keV0gKyAnKScpO1xuXG4gIGQzLnNlbGVjdChwYXJhbXMucm9vdCsnIC5yb3dfem9vbV9jb250YWluZXInKVxuICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKCcgKyBbMCwgY2VudGVyX3ldICsgJyknICsgJyBzY2FsZSgnICtcbiAgICAxICsgJywnICsgem9vbV95ICsgJyknICsgJ3RyYW5zbGF0ZSgnICsgWzAsIHBhbl9keV0gKyAnKScpO1xuXG4gIGQzLnNlbGVjdChwYXJhbXMucm9vdCsnIC5jb2xfem9vbV9jb250YWluZXInKVxuICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAnIHNjYWxlKCcgKyAxICsgJywnICsgMSArICcpJyArICd0cmFuc2xhdGUoJyArIFtwYW5fZHgsIDBdICsgJyknKTtcblxuICBkMy5zZWxlY3QoJy5jb2xfdml6X3pvb21fY29udGFpbmVyJylcbiAgICAuYXR0cigndHJhbnNmb3JtJywgJyBzY2FsZSgnICsgMSArICcsJyArIDEgKyAnKScgKyAndHJhbnNsYXRlKCcgKyBbcGFuX2R4LCAwXSArICcpJyk7XG5cbiAgLy8gc2V0IHkgdHJhbnNsYXRlOiBjZW50ZXJfeSBpcyBwb3NpdGl2ZSwgcG9zaXRpdmUgbW92ZXMgdGhlIHZpc3VhbGl6YXRpb24gZG93blxuICAvLyB0aGUgdHJhbnNsYXRlIHZlY3RvciBoYXMgdGhlIGluaXRpYWwgbWFyZ2luLCB0aGUgZmlyc3QgeSBjZW50ZXJpbmcsIGFuZCBwYW5fZHlcbiAgLy8gdGltZXMgdGhlIHNjYWxpbmcgem9vbV95XG4gIHZhciBuZXRfeV9vZmZzZXQgPSBwYXJhbXMudml6LmNsdXN0Lm1hcmdpbi50b3AgKyBjZW50ZXJfeSArIHBhbl9keSAqIHpvb21feTtcblxuXG4gIC8vIFJlc2V0dGluZyBzb21lIHZpc3VhbGl6YXRpb24gcGFyYW1ldGVyc1xuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gIC8vIGdldCBoZWlnaHQgYW5kIHdpZHRoIGZyb20gcGFyZW50IGRpdlxuICBwYXJhbXMudml6LnN2Z19kaW0gPSB7fTtcbiAgcGFyYW1zLnZpei5zdmdfZGltLndpZHRoICA9IE51bWJlcihkMy5zZWxlY3QocGFyYW1zLnZpei52aXpfd3JhcHBlcikuc3R5bGUoJ3dpZHRoJykucmVwbGFjZSgncHgnLCAnJykpO1xuICBwYXJhbXMudml6LnN2Z19kaW0uaGVpZ2h0ID0gTnVtYmVyKGQzLnNlbGVjdChwYXJhbXMudml6LnZpel93cmFwcGVyKS5zdHlsZSgnaGVpZ2h0JykucmVwbGFjZSgncHgnLCAnJykpO1xuXG4gIC8vIHJlZHVjZSB3aWR0aCBieSByb3cvY29sIGxhYmVscyBhbmQgYnkgZ3JleV9ib3JkZXIgd2lkdGggKHJlZHVjZSB3aWR0aCBieSBsZXNzIHNpbmNlIHRoaXMgaXMgbGVzcyBhcGFyZW50IHdpdGggc2xhbnRlZCBjb2wgbGFiZWxzKVxuICB2YXIgaW5pX2NsdXN0X3dpZHRoID0gcGFyYW1zLnZpei5zdmdfZGltLndpZHRoIC0gKHBhcmFtcy5sYWJlbHMuc3VwZXJfbGFiZWxfd2lkdGggK1xuICAgIHBhcmFtcy5ub3JtX2xhYmVsLndpZHRoLnJvdyArIHBhcmFtcy5jbGFzc19yb29tLnJvdykgLSBwYXJhbXMudml6LmdyZXlfYm9yZGVyX3dpZHRoIC0gcGFyYW1zLnZpei5zcGlsbG92ZXJfeF9vZmZzZXQ7XG5cbiAgLy8gdGhlcmUgaXMgc3BhY2UgYmV0d2VlbiB0aGUgY2x1c3RlcmdyYW0gYW5kIHRoZSBib3JkZXJcbiAgdmFyIGluaV9jbHVzdF9oZWlnaHQgPSBwYXJhbXMudml6LnN2Z19kaW0uaGVpZ2h0IC0gKHBhcmFtcy5sYWJlbHMuc3VwZXJfbGFiZWxfd2lkdGggK1xuICAgIHBhcmFtcy5ub3JtX2xhYmVsLndpZHRoLmNvbCArIHBhcmFtcy5jbGFzc19yb29tLmNvbCkgLSA1ICogcGFyYW1zLnZpei5ncmV5X2JvcmRlcl93aWR0aDtcblxuICAvLyByZWR1Y2UgY2x1c3RlcmdyYW0gd2lkdGggaWYgdHJpYW5nbGVzIGFyZSB0YWxsZXIgdGhhbiB0aGUgbm9ybWFsIHdpZHRoXG4gIC8vIG9mIHRoZSBjb2x1bW5zXG4gIHZhciB0bXBfeF9zY2FsZSA9IGQzLnNjYWxlLm9yZGluYWwoKS5yYW5nZUJhbmRzKFswLCBpbmlfY2x1c3Rfd2lkdGhdKTtcbiAgdG1wX3hfc2NhbGUuZG9tYWluKHBhcmFtcy5tYXRyaXgub3JkZXJzLmluaV9yb3cpO1xuICB2YXIgdHJpYW5nbGVfaGVpZ2h0ID0gdG1wX3hfc2NhbGUucmFuZ2VCYW5kKCkvMiA7XG4gIGlmICh0cmlhbmdsZV9oZWlnaHQgPiBwYXJhbXMubm9ybV9sYWJlbC53aWR0aC5jb2wpe1xuICAgIGluaV9jbHVzdF93aWR0aCA9IGluaV9jbHVzdF93aWR0aCAqICggcGFyYW1zLm5vcm1fbGFiZWwud2lkdGguY29sL3RyaWFuZ2xlX2hlaWdodCApO1xuICB9XG4gIHBhcmFtcy52aXouY2x1c3QuZGltLndpZHRoID0gaW5pX2NsdXN0X3dpZHRoIDtcblxuICAvLyBjbHVzdGVyZ3JhbSBoZWlnaHRcbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gIC8vIGVuc3VyZSB0aGF0IHJlY3RzIGFyZSBuZXZlciB0YWxsZXIgdGhhbiB0aGV5IGFyZSB3aWRlXG4gIC8vIGZvcmNlIHNxdWFyZSB0aWxlc1xuICBpZiAoaW5pX2NsdXN0X3dpZHRoIC8gcGFyYW1zLnZpei5udW1fY29sX25vZGVzIDwgaW5pX2NsdXN0X2hlaWdodCAvIHBhcmFtcy52aXoubnVtX3Jvd19ub2Rlcykge1xuXG4gICAgLy8gc2NhbGUgdGhlIGhlaWdodFxuICAgIHBhcmFtcy52aXouY2x1c3QuZGltLmhlaWdodCA9IGluaV9jbHVzdF93aWR0aCAqIChwYXJhbXMudml6Lm51bV9yb3dfbm9kZXMgLyBwYXJhbXMudml6Lm51bV9jb2xfbm9kZXMpO1xuXG4gICAgLy8ga2VlcCB0cmFjayBvZiB3aGV0aGVyIG9yIG5vdCBhIGZvcmNlIHNxdWFyZSBoYXMgb2NjdXJyZWRcbiAgICAvLyBzbyB0aGF0IEkgY2FuIGFkanVzdCB0aGUgZm9udCBhY2NvcmRpbmdseVxuICAgIHBhcmFtcy52aXouZm9yY2Vfc3F1YXJlID0gMTtcblxuICAgIC8vIG1ha2Ugc3VyZSB0aGF0IGZvcmNlX3NxdWFyZSBkb2VzIG5vdCBjYXVzZSB0aGUgZW50aXJlIHZpc3VhbGl6YXRpb25cbiAgICAvLyB0byBiZSB0YWxsZXIgdGhhbiB0aGUgc3ZnLCBpZiBpdCBkb2VzLCB0aGVuIHVuZG9cbiAgICBpZiAocGFyYW1zLnZpei5jbHVzdC5kaW0uaGVpZ2h0ID4gaW5pX2NsdXN0X2hlaWdodCkge1xuICAgIC8vIG1ha2UgdGhlIGhlaWdodCBlcXVhbCB0byB0aGUgd2lkdGhcbiAgICBwYXJhbXMudml6LmNsdXN0LmRpbS5oZWlnaHQgPSBpbmlfY2x1c3RfaGVpZ2h0O1xuICAgIC8vIGtlZXAgdHJhY2sgb2Ygd2hldGhlciBvciBub3QgYSBmb3JjZSBzcXVhcmUgaGFzIG9jY3VycmVkXG4gICAgcGFyYW1zLnZpei5mb3JjZV9zcXVhcmUgPSAwO1xuICAgIH1cbiAgfVxuICAvLyBkbyBub3QgZm9yY2Ugc3F1YXJlIHRpbGVzXG4gIGVsc2Uge1xuICAgIC8vIHRoZSBoZWlnaHQgd2lsbCBiZSBjYWxjdWxhdGVkIG5vcm1hbGx5IC0gbGVhZGluZyB0byB3aWRlIHRpbGVzXG4gICAgcGFyYW1zLnZpei5jbHVzdC5kaW0uaGVpZ2h0ID0gaW5pX2NsdXN0X2hlaWdodDtcbiAgICAvLyBrZWVwIHRyYWNrIG9mIHdoZXRoZXIgb3Igbm90IGEgZm9yY2Ugc3F1YXJlIGhhcyBvY2N1cnJlZFxuICAgIHBhcmFtcy52aXouZm9yY2Vfc3F1YXJlID0gMDtcbiAgfVxuXG4gIC8vIHpvb21fc3dpdGNoIGZyb20gMSB0byAyZCB6b29tXG4gIHBhcmFtcy52aXouem9vbV9zd2l0Y2ggPSAocGFyYW1zLnZpei5jbHVzdC5kaW0ud2lkdGggLyBwYXJhbXMudml6Lm51bV9jb2xfbm9kZXMpIC8gKHBhcmFtcy52aXouY2x1c3QuZGltLmhlaWdodCAvIHBhcmFtcy52aXoubnVtX3Jvd19ub2Rlcyk7XG5cbiAgLy8gem9vbV9zd2l0Y2ggY2FuIG5vdCBiZSBsZXNzIHRoYW4gMVxuICBpZiAocGFyYW1zLnZpei56b29tX3N3aXRjaCA8IDEpIHtcbiAgICBwYXJhbXMudml6Lnpvb21fc3dpdGNoID0gMTtcbiAgfVxuXG5cbiAgLy8gcmVkZWZpbmUgeF9zY2FsZSBhbmQgeV9zY2FsZSByYW5nZUJhbmRzXG4gIHBhcmFtcy5tYXRyaXgueF9zY2FsZS5yYW5nZUJhbmRzKFswLCBwYXJhbXMudml6LmNsdXN0LmRpbS53aWR0aF0pO1xuICBwYXJhbXMubWF0cml4Lnlfc2NhbGUucmFuZ2VCYW5kcyhbMCwgcGFyYW1zLnZpei5jbHVzdC5kaW0uaGVpZ2h0XSk7XG5cbiAgLy8gcmVkZWZpbmUgem9vbSBleHRlbnRcbiAgcGFyYW1zLnZpei5yZWFsX3pvb20gPSBwYXJhbXMubm9ybV9sYWJlbC53aWR0aC5jb2wgLyAocGFyYW1zLm1hdHJpeC54X3NjYWxlLnJhbmdlQmFuZCgpLzIpO1xuICBwYXJhbXMuem9vbV9iZWhhdmlvclxuICAgIC5zY2FsZUV4dGVudChbMSwgcGFyYW1zLnZpei5yZWFsX3pvb20gKiBwYXJhbXMudml6Lnpvb21fc3dpdGNoXSk7XG5cbiAgLy8gcmVkZWZpbmUgYm9yZGVyIHdpZHRoXG4gIHBhcmFtcy52aXouYm9yZGVyX3dpZHRoID0gcGFyYW1zLm1hdHJpeC54X3NjYWxlLnJhbmdlQmFuZCgpIC8gNDA7XG5cbiAgLy8gdGhlIGRlZmF1bHQgZm9udCBzaXplcyBhcmUgc2V0IGhlcmVcbiAgcGFyYW1zLmxhYmVscy5kZWZhdWx0X2ZzX3JvdyA9IHBhcmFtcy5tYXRyaXgueV9zY2FsZS5yYW5nZUJhbmQoKSAqIDEuMDE7XG4gIHBhcmFtcy5sYWJlbHMuZGVmYXVsdF9mc19jb2wgPSBwYXJhbXMubWF0cml4Lnhfc2NhbGUucmFuZ2VCYW5kKCkgKiAwLjg1O1xuXG5cblxuICAvLyBCZWdpbiByZXNpemluZyB0aGUgdmlzdWFsaXphdGlvblxuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gIC8vIHJlc2l6ZSB0aGUgc3ZnXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gIHZhciBzdmdfZ3JvdXAgPSBkMy5zZWxlY3QocGFyYW1zLnZpei52aXpfd3JhcHBlcilcbiAgICAuc2VsZWN0KCdzdmcnKTtcblxuICBzdmdfZ3JvdXAuc2VsZWN0KHBhcmFtcy5yb290KycgLmdyZXlfYmFja2dyb3VuZCcpXG4gICAgLnRyYW5zaXRpb24oKS5kZWxheShkZWxheXMudXBkYXRlKS5kdXJhdGlvbihkdXJhdGlvbilcbiAgICAuYXR0cignd2lkdGgnLCBwYXJhbXMudml6LmNsdXN0LmRpbS53aWR0aClcbiAgICAuYXR0cignaGVpZ2h0JywgcGFyYW1zLnZpei5jbHVzdC5kaW0uaGVpZ2h0KTtcblxuXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgLy8gc2V0IHVwIGxhdGVyXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgLy8gc3ZnX2dyb3VwLnNlbGVjdEFsbCgnLmhpZ2hsaWdodGluZ19yZWN0JylcbiAgLy8gICAvLyAudHJhbnNpdGlvbigpLmRlbGF5KGRlbGF5cy51cGRhdGUpLmR1cmF0aW9uKGR1cmF0aW9uKVxuICAvLyAgIC5hdHRyKCd3aWR0aCcsIHBhcmFtcy5tYXRyaXgueF9zY2FsZS5yYW5nZUJhbmQoKSAqIDAuODApXG4gIC8vICAgLmF0dHIoJ2hlaWdodCcsIHBhcmFtcy5tYXRyaXgueV9zY2FsZS5yYW5nZUJhbmQoKSAqIDAuODApO1xuICAvLyBzdmdfZ3JvdXAuc2VsZWN0QWxsKCcudGlsZV9zcGxpdF91cCcpXG4gIC8vICAgLy8gLnRyYW5zaXRpb24oKS5kZWxheShkZWxheXMudXBkYXRlKS5kdXJhdGlvbihkdXJhdGlvbilcbiAgLy8gICAuYXR0cignZCcsIGZ1bmN0aW9uKCkge1xuICAvLyAgICAgdmFyIHN0YXJ0X3ggPSAwO1xuICAvLyAgICAgdmFyIGZpbmFsX3ggPSBwYXJhbXMubWF0cml4Lnhfc2NhbGUucmFuZ2VCYW5kKCk7XG4gIC8vICAgICB2YXIgc3RhcnRfeSA9IDA7XG4gIC8vICAgICB2YXIgZmluYWxfeSA9IHBhcmFtcy5tYXRyaXgueV9zY2FsZS5yYW5nZUJhbmQoKSAtIHBhcmFtcy5tYXRyaXgueV9zY2FsZS5yYW5nZUJhbmQoKS82MDtcbiAgLy8gICAgIHZhciBvdXRwdXRfc3RyaW5nID0gJ00nICsgc3RhcnRfeCArICcsJyArIHN0YXJ0X3kgKyAnLCBMJyArXG4gIC8vICAgICAgIHN0YXJ0X3ggKyAnLCAnICsgZmluYWxfeSArICcsIEwnICsgZmluYWxfeCArICcsMCBaJztcbiAgLy8gICAgIHJldHVybiBvdXRwdXRfc3RyaW5nO1xuICAvLyAgIH0pXG4gIC8vIHN2Z19ncm91cC5zZWxlY3RBbGwoJy50aWxlX3NwbGl0X2RuJylcbiAgLy8gICAvLyAudHJhbnNpdGlvbigpLmRlbGF5KGRlbGF5cy51cGRhdGUpLmR1cmF0aW9uKGR1cmF0aW9uKVxuICAvLyAgIC5hdHRyKCdkJywgZnVuY3Rpb24oKSB7XG4gIC8vICAgICB2YXIgc3RhcnRfeCA9IDA7XG4gIC8vICAgICB2YXIgZmluYWxfeCA9IHBhcmFtcy5tYXRyaXgueF9zY2FsZS5yYW5nZUJhbmQoKTtcbiAgLy8gICAgIHZhciBzdGFydF95ID0gcGFyYW1zLm1hdHJpeC55X3NjYWxlLnJhbmdlQmFuZCgpIC0gcGFyYW1zLm1hdHJpeC55X3NjYWxlLnJhbmdlQmFuZCgpLzYwO1xuICAvLyAgICAgdmFyIGZpbmFsX3kgPSBwYXJhbXMubWF0cml4Lnlfc2NhbGUucmFuZ2VCYW5kKCkgLSBwYXJhbXMubWF0cml4Lnlfc2NhbGUucmFuZ2VCYW5kKCkvNjA7XG4gIC8vICAgICB2YXIgb3V0cHV0X3N0cmluZyA9ICdNJyArIHN0YXJ0X3ggKyAnLCAnICsgc3RhcnRfeSArICcgLCAgIEwnICtcbiAgLy8gICAgICAgZmluYWxfeCArICcsICcgKyBmaW5hbF95ICsgJywgIEwnICsgZmluYWxfeCArICcsMCBaJztcbiAgLy8gICAgIHJldHVybiBvdXRwdXRfc3RyaW5nO1xuICAvLyAgIH0pXG5cbiAgLy8gYWRkIHRleHQgdG8gcm93L2NvbCBkdXJpbmcgcmVzaXplXG4gIGZ1bmN0aW9uIG5vcm1hbF9uYW1lKGQpe1xuICAgIHZhciBpbnN0X25hbWUgPSBkLm5hbWUucmVwbGFjZSgvXy9nLCAnICcpLnNwbGl0KCcjJylbMF07XG4gICAgaWYgKGluc3RfbmFtZS5sZW5ndGggPiBwYXJhbXMubGFiZWxzLm1heF9sYWJlbF9jaGFyKXtcbiAgICAgIGluc3RfbmFtZSA9IGluc3RfbmFtZS5zdWJzdHJpbmcoMCxwYXJhbXMubGFiZWxzLm1heF9sYWJlbF9jaGFyKSsnLi4nO1xuICAgIH1cbiAgICByZXR1cm4gaW5zdF9uYW1lO1xuICB9XG5cbiAgLy8gcmVzaXplIHJvdyBsYWJlbHNcbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgaWYgKGRlbGF5cy5ydW5fdHJhbnNpdGlvbil7XG5cbiAgICBzdmdfZ3JvdXAuc2VsZWN0KHBhcmFtcy5yb290KycgLnJvd19jb250YWluZXInKVxuICAgICAgLnRyYW5zaXRpb24oKS5kZWxheShkZWxheXMudXBkYXRlKS5kdXJhdGlvbihkdXJhdGlvbilcbiAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKCcgKyBwYXJhbXMubm9ybV9sYWJlbC5tYXJnaW4ubGVmdCArICcsJyArXG4gICAgICBwYXJhbXMudml6LmNsdXN0Lm1hcmdpbi50b3AgKyAnKScpO1xuXG4gICAgc3ZnX2dyb3VwLnNlbGVjdChwYXJhbXMucm9vdCsnIC5yb3dfY29udGFpbmVyJylcbiAgICAgIC5zZWxlY3QoJy53aGl0ZV9iYXJzJylcbiAgICAgIC50cmFuc2l0aW9uKCkuZGVsYXkoZGVsYXlzLnVwZGF0ZSkuZHVyYXRpb24oZHVyYXRpb24pXG4gICAgICAuYXR0cignd2lkdGgnLCBwYXJhbXMubm9ybV9sYWJlbC5iYWNrZ3JvdW5kLnJvdylcbiAgICAgIC5hdHRyKCdoZWlnaHQnLCAzMCpwYXJhbXMudml6LmNsdXN0LmRpbS5oZWlnaHQgKyAncHgnKTtcblxuICAgIHN2Z19ncm91cC5zZWxlY3QocGFyYW1zLnJvb3QrJyAucm93X2NvbnRhaW5lcicpXG4gICAgICAuc2VsZWN0KCcucm93X2xhYmVsX2NvbnRhaW5lcicpXG4gICAgICAudHJhbnNpdGlvbigpLmRlbGF5KGRlbGF5cy51cGRhdGUpLmR1cmF0aW9uKGR1cmF0aW9uKVxuICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoJyArIHBhcmFtcy5ub3JtX2xhYmVsLndpZHRoLnJvdyArICcsMCknKTtcblxuICAgIHN2Z19ncm91cC5zZWxlY3RBbGwoJy5yb3dfbGFiZWxfdGV4dCcpXG4gICAgICAuZGF0YShyb3dfbm9kZXMsIGZ1bmN0aW9uKGQpe3JldHVybiBkLm5hbWU7fSlcbiAgICAgIC50cmFuc2l0aW9uKCkuZGVsYXkoZGVsYXlzLnVwZGF0ZSkuZHVyYXRpb24oZHVyYXRpb24pXG4gICAgICAuYXR0cigndHJhbnNmb3JtJywgZnVuY3Rpb24oZCkge1xuICAgICAgICB2YXIgaW5zdF9pbmRleCA9IF8uaW5kZXhPZihyb3dfbm9kZXNfbmFtZXMsIGQubmFtZSk7XG4gICAgICAgIHJldHVybiAndHJhbnNsYXRlKDAsJyArIHBhcmFtcy5tYXRyaXgueV9zY2FsZShpbnN0X2luZGV4KSArICcpJztcbiAgICAgIH0pXG4gICAgICAuYXR0cigneScsIHBhcmFtcy5tYXRyaXgucmVjdF9oZWlnaHQgKiAwLjUgKyBwYXJhbXMubGFiZWxzLmRlZmF1bHRfZnNfcm93KjAuMzUgKTtcblxuICB9IGVsc2Uge1xuICAgICAgc3ZnX2dyb3VwLnNlbGVjdChwYXJhbXMucm9vdCsnIC5yb3dfY29udGFpbmVyJylcbiAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKCcgKyBwYXJhbXMubm9ybV9sYWJlbC5tYXJnaW4ubGVmdCArICcsJyArXG4gICAgICBwYXJhbXMudml6LmNsdXN0Lm1hcmdpbi50b3AgKyAnKScpO1xuXG4gICAgc3ZnX2dyb3VwLnNlbGVjdChwYXJhbXMucm9vdCsnIC5yb3dfY29udGFpbmVyJylcbiAgICAgIC5zZWxlY3QoJy53aGl0ZV9iYXJzJylcbiAgICAgIC5hdHRyKCd3aWR0aCcsIHBhcmFtcy5ub3JtX2xhYmVsLmJhY2tncm91bmQucm93KVxuICAgICAgLmF0dHIoJ2hlaWdodCcsIDMwKnBhcmFtcy52aXouY2x1c3QuZGltLmhlaWdodCArICdweCcpO1xuXG4gICAgc3ZnX2dyb3VwLnNlbGVjdChwYXJhbXMucm9vdCArICcgLnJvd19jb250YWluZXInKVxuICAgICAgLnNlbGVjdCgnLnJvd19sYWJlbF9jb250YWluZXInKVxuICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoJyArIHBhcmFtcy5ub3JtX2xhYmVsLndpZHRoLnJvdyArICcsMCknKTtcblxuICAgIHN2Z19ncm91cC5zZWxlY3RBbGwoJy5yb3dfbGFiZWxfdGV4dCcpXG4gICAgICAuZGF0YShyb3dfbm9kZXMsIGZ1bmN0aW9uKGQpe3JldHVybiBkLm5hbWU7fSlcbiAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCBmdW5jdGlvbihkKSB7XG4gICAgICAgIHZhciBpbnN0X2luZGV4ID0gXy5pbmRleE9mKHJvd19ub2Rlc19uYW1lcywgZC5uYW1lKTtcbiAgICAgICAgcmV0dXJuICd0cmFuc2xhdGUoMCwnICsgcGFyYW1zLm1hdHJpeC55X3NjYWxlKGluc3RfaW5kZXgpICsgJyknO1xuICAgICAgfSlcbiAgICAgIC5hdHRyKCd5JywgcGFyYW1zLm1hdHJpeC5yZWN0X2hlaWdodCAqIDAuNSArIHBhcmFtcy5sYWJlbHMuZGVmYXVsdF9mc19yb3cqMC4zNSApO1xuICB9XG5cbiAgIC8vIGRvIG5vdCBkZWxheSB0aGUgZm9udCBzaXplIGNoYW5nZSBzaW5jZSB0aGlzIHdpbGwgYnJlYWsgdGhlIGJvdW5kaW5nIGJveCBjYWxjXG4gIHN2Z19ncm91cC5zZWxlY3RBbGwoJy5yb3dfbGFiZWxfdGV4dCcpXG4gICAgLnNlbGVjdCgndGV4dCcpXG4gICAgLnN0eWxlKCdmb250LXNpemUnLCBwYXJhbXMubGFiZWxzLmRlZmF1bHRfZnNfcm93ICsgJ3B4JylcbiAgICAudGV4dChmdW5jdGlvbihkKXsgcmV0dXJuIG5vcm1hbF9uYW1lKGQpO30pO1xuXG4gIC8vIGNoYW5nZSB0aGUgc2l6ZSBvZiB0aGUgaGlnaGxpZ2h0aW5nIHJlY3RzXG4gIHN2Z19ncm91cC5zZWxlY3RBbGwoJy5yb3dfbGFiZWxfdGV4dCcpXG4gICAgLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgYmJveCA9IGQzLnNlbGVjdCh0aGlzKS5zZWxlY3QoJ3RleHQnKVswXVswXS5nZXRCQm94KCk7XG4gICAgICBkMy5zZWxlY3QodGhpcylcbiAgICAgICAgLnNlbGVjdCgncmVjdCcpXG4gICAgICAgIC5hdHRyKCd4JywgYmJveC54IClcbiAgICAgICAgLmF0dHIoJ3knLCAwKVxuICAgICAgICAuYXR0cignd2lkdGgnLCBiYm94LndpZHRoIClcbiAgICAgICAgLmF0dHIoJ2hlaWdodCcsIHBhcmFtcy5tYXRyaXgueV9zY2FsZS5yYW5nZUJhbmQoKSlcbiAgICAgICAgLnN0eWxlKCdmaWxsJywgJ3llbGxvdycpXG4gICAgICAgIC5zdHlsZSgnb3BhY2l0eScsIGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICB2YXIgaW5zdF9vcGFjaXR5ID0gMDtcbiAgICAgICAgICAvLyBoaWdobGlnaHQgdGFyZ2V0IGdlbmVzXG4gICAgICAgICAgaWYgKGQudGFyZ2V0ID09PSAxKSB7XG4gICAgICAgICAgICBpbnN0X29wYWNpdHkgPSAxO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gaW5zdF9vcGFjaXR5O1xuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAvLyBsYWJlbCB0aGUgd2lkZXN0IHJvdyBhbmQgY29sIGxhYmVsc1xuICBwYXJhbXMuYm91bmRpbmdfd2lkdGhfbWF4ID0ge307XG4gIHBhcmFtcy5ib3VuZGluZ193aWR0aF9tYXgucm93ID0gMDtcbiAgZDMuc2VsZWN0QWxsKCcucm93X2xhYmVsX3RleHQnKS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgIHZhciB0bXBfd2lkdGggPSBkMy5zZWxlY3QodGhpcykuc2VsZWN0KCd0ZXh0Jykubm9kZSgpLmdldEJCb3goKS53aWR0aDtcbiAgICBpZiAodG1wX3dpZHRoID4gcGFyYW1zLmJvdW5kaW5nX3dpZHRoX21heC5yb3cpIHtcbiAgICAgIHBhcmFtcy5ib3VuZGluZ193aWR0aF9tYXgucm93ID0gdG1wX3dpZHRoO1xuICAgIH1cbiAgfSk7XG5cbiAgLy8gY2hlY2sgaWYgd2lkZXN0IHJvdyBvciBjb2wgYXJlIHdpZGVyIHRoYW4gdGhlIGFsbG93ZWQgbGFiZWwgd2lkdGhcbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gIHBhcmFtcy5pbmlfc2NhbGVfZm9udCA9IHt9O1xuICBwYXJhbXMuaW5pX3NjYWxlX2ZvbnQucm93ID0gMTtcbiAgcGFyYW1zLmluaV9zY2FsZV9mb250LmNvbCA9IDE7XG5cbiAgaWYgKHBhcmFtcy5ib3VuZGluZ193aWR0aF9tYXgucm93ID4gcGFyYW1zLm5vcm1fbGFiZWwud2lkdGgucm93KSB7XG5cbiAgICAvLyBjYWxjIHJlZHVjdGlvbiBpbiBmb250IHNpemVcbiAgICBwYXJhbXMuaW5pX3NjYWxlX2ZvbnQucm93ID0gcGFyYW1zLm5vcm1fbGFiZWwud2lkdGgucm93IC8gcGFyYW1zLmJvdW5kaW5nX3dpZHRoX21heC5yb3c7XG4gICAgLy8gcmVkZWZpbmUgYm91bmRpbmdfd2lkdGhfbWF4LnJvd1xuICAgIHBhcmFtcy5ib3VuZGluZ193aWR0aF9tYXgucm93ID0gcGFyYW1zLmluaV9zY2FsZV9mb250LnJvdyAqIHBhcmFtcy5ib3VuZGluZ193aWR0aF9tYXgucm93O1xuXG4gICAgLy8gcmVkZWZpbmUgZGVmYXVsdCBmc1xuICAgIHBhcmFtcy5sYWJlbHMuZGVmYXVsdF9mc19yb3cgPSBwYXJhbXMubGFiZWxzLmRlZmF1bHRfZnNfcm93ICogcGFyYW1zLmluaV9zY2FsZV9mb250LnJvdztcbiAgICAvLyByZWR1Y2UgZm9udCBzaXplXG4gICAgZDMuc2VsZWN0QWxsKCcucm93X2xhYmVsX3RleHQnKS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgZDMuc2VsZWN0KHRoaXMpLnNlbGVjdCgndGV4dCcpXG4gICAgICAgIC5zdHlsZSgnZm9udC1zaXplJywgcGFyYW1zLmxhYmVscy5kZWZhdWx0X2ZzX3JvdyArICdweCcpO1xuICAgIH0pO1xuICB9XG5cbiAgaWYgKGRlbGF5cy5ydW5fdHJhbnNpdGlvbil7XG5cbiAgICAvLyBwb3NpdGlvbmluZyByb3cgdGV4dCBhZnRlciByb3cgdGV4dCBzaXplIG1heSBoYXZlIGJlZW4gcmVkdWNlZFxuICAgIHN2Z19ncm91cC5zZWxlY3RBbGwoJy5yb3dfbGFiZWxfdGV4dCcpXG4gICAgICAuc2VsZWN0KCd0ZXh0JylcbiAgICAgIC50cmFuc2l0aW9uKCkuZGVsYXkoZGVsYXlzLnVwZGF0ZSkuZHVyYXRpb24oZHVyYXRpb24pXG4gICAgICAuYXR0cigneScsIHBhcmFtcy5tYXRyaXgucmVjdF9oZWlnaHQgKiAwLjUgKyBwYXJhbXMubGFiZWxzLmRlZmF1bHRfZnNfcm93KjAuMzUgKTtcblxuICAgIHN2Z19ncm91cC5zZWxlY3QoJy5yb3dfdml6X2NvbnRhaW5lcicpXG4gICAgICAudHJhbnNpdGlvbigpLmRlbGF5KGRlbGF5cy51cGRhdGUpLmR1cmF0aW9uKGR1cmF0aW9uKVxuICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoJyArIHBhcmFtcy5ub3JtX2xhYmVsLndpZHRoLnJvdyArICcsMCknKTtcblxuICAgIHN2Z19ncm91cC5zZWxlY3QoJy5yb3dfdml6X2NvbnRhaW5lcicpXG4gICAgICAudHJhbnNpdGlvbigpLmRlbGF5KGRlbGF5cy51cGRhdGUpLmR1cmF0aW9uKGR1cmF0aW9uKVxuICAgICAgLnNlbGVjdCgnd2hpdGVfYmFycycpXG4gICAgICAuYXR0cignd2lkdGgnLCBwYXJhbXMuY2xhc3Nfcm9vbS5yb3cgKyAncHgnKVxuICAgICAgLmF0dHIoJ2hlaWdodCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgaW5zdF9oZWlnaHQgPSBwYXJhbXMudml6LmNsdXN0LmRpbS5oZWlnaHQ7XG4gICAgICAgIHJldHVybiBpbnN0X2hlaWdodDtcbiAgICAgIH0pO1xuXG4gICAgc3ZnX2dyb3VwLnNlbGVjdEFsbCgnLnJvd192aXpfZ3JvdXAnKVxuICAgICAgLmRhdGEocm93X25vZGVzLCBmdW5jdGlvbihkKXtyZXR1cm4gZC5uYW1lO30pXG4gICAgICAudHJhbnNpdGlvbigpLmRlbGF5KGRlbGF5cy51cGRhdGUpLmR1cmF0aW9uKGR1cmF0aW9uKVxuICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsIGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICB2YXIgaW5zdF9pbmRleCA9IF8uaW5kZXhPZihyb3dfbm9kZXNfbmFtZXMsIGQubmFtZSk7XG4gICAgICAgICAgcmV0dXJuICd0cmFuc2xhdGUoMCwgJyArIHBhcmFtcy5tYXRyaXgueV9zY2FsZShpbnN0X2luZGV4KSArICcpJztcbiAgICAgICAgfSk7XG5cbiAgICBzdmdfZ3JvdXAuc2VsZWN0QWxsKCcucm93X3Zpel9ncm91cCcpXG4gICAgICAuc2VsZWN0KCdwYXRoJylcbiAgICAgIC50cmFuc2l0aW9uKCkuZGVsYXkoZGVsYXlzLnVwZGF0ZSkuZHVyYXRpb24oZHVyYXRpb24pXG4gICAgICAuYXR0cignZCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgb3JpZ2luX3ggPSBwYXJhbXMuY2xhc3Nfcm9vbS5zeW1ib2xfd2lkdGggLSAxO1xuICAgICAgICB2YXIgb3JpZ2luX3kgPSAwO1xuICAgICAgICB2YXIgbWlkX3ggPSAxO1xuICAgICAgICB2YXIgbWlkX3kgPSBwYXJhbXMubWF0cml4Lnlfc2NhbGUucmFuZ2VCYW5kKCkgLyAyO1xuICAgICAgICB2YXIgZmluYWxfeCA9IHBhcmFtcy5jbGFzc19yb29tLnN5bWJvbF93aWR0aCAtIDE7XG4gICAgICAgIHZhciBmaW5hbF95ID0gcGFyYW1zLm1hdHJpeC55X3NjYWxlLnJhbmdlQmFuZCgpO1xuICAgICAgICB2YXIgb3V0cHV0X3N0cmluZyA9ICdNICcgKyBvcmlnaW5feCArICcsJyArIG9yaWdpbl95ICsgJyBMICcgK1xuICAgICAgICAgIG1pZF94ICsgJywnICsgbWlkX3kgKyAnLCBMICcgKyBmaW5hbF94ICsgJywnICsgZmluYWxfeSArICcgWic7XG4gICAgICAgIHJldHVybiBvdXRwdXRfc3RyaW5nO1xuICAgICAgfSk7XG5cbiAgfSBlbHNlIHtcblxuICAgIC8vIHBvc2l0aW9uaW5nIHJvdyB0ZXh0IGFmdGVyIHJvdyB0ZXh0IHNpemUgbWF5IGhhdmUgYmVlbiByZWR1Y2VkXG4gICAgc3ZnX2dyb3VwLnNlbGVjdEFsbCgnLnJvd19sYWJlbF90ZXh0JylcbiAgICAgIC5zZWxlY3QoJ3RleHQnKVxuICAgICAgLmF0dHIoJ3knLCBwYXJhbXMubWF0cml4LnJlY3RfaGVpZ2h0ICogMC41ICsgcGFyYW1zLmxhYmVscy5kZWZhdWx0X2ZzX3JvdyowLjM1ICk7XG5cbiAgICBzdmdfZ3JvdXAuc2VsZWN0KCcucm93X3Zpel9jb250YWluZXInKVxuICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoJyArIHBhcmFtcy5ub3JtX2xhYmVsLndpZHRoLnJvdyArICcsMCknKTtcblxuICAgIHN2Z19ncm91cC5zZWxlY3QoJy5yb3dfdml6X2NvbnRhaW5lcicpXG4gICAgICAuc2VsZWN0KCd3aGl0ZV9iYXJzJylcbiAgICAgIC5hdHRyKCd3aWR0aCcsIHBhcmFtcy5jbGFzc19yb29tLnJvdyArICdweCcpXG4gICAgICAuYXR0cignaGVpZ2h0JywgZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBpbnN0X2hlaWdodCA9IHBhcmFtcy52aXouY2x1c3QuZGltLmhlaWdodDtcbiAgICAgICAgcmV0dXJuIGluc3RfaGVpZ2h0O1xuICAgICAgfSk7XG5cbiAgICBzdmdfZ3JvdXAuc2VsZWN0QWxsKCcucm93X3Zpel9ncm91cCcpXG4gICAgICAuZGF0YShyb3dfbm9kZXMsIGZ1bmN0aW9uKGQpe3JldHVybiBkLm5hbWU7fSlcbiAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCBmdW5jdGlvbihkKSB7XG4gICAgICAgICAgdmFyIGluc3RfaW5kZXggPSBfLmluZGV4T2Yocm93X25vZGVzX25hbWVzLCBkLm5hbWUpO1xuICAgICAgICAgIHJldHVybiAndHJhbnNsYXRlKDAsICcgKyBwYXJhbXMubWF0cml4Lnlfc2NhbGUoaW5zdF9pbmRleCkgKyAnKSc7XG4gICAgICAgIH0pO1xuXG4gICAgc3ZnX2dyb3VwLnNlbGVjdEFsbCgnLnJvd192aXpfZ3JvdXAnKVxuICAgICAgLnNlbGVjdCgncGF0aCcpXG4gICAgICAuYXR0cignZCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgb3JpZ2luX3ggPSBwYXJhbXMuY2xhc3Nfcm9vbS5zeW1ib2xfd2lkdGggLSAxO1xuICAgICAgICB2YXIgb3JpZ2luX3kgPSAwO1xuICAgICAgICB2YXIgbWlkX3ggPSAxO1xuICAgICAgICB2YXIgbWlkX3kgPSBwYXJhbXMubWF0cml4Lnlfc2NhbGUucmFuZ2VCYW5kKCkgLyAyO1xuICAgICAgICB2YXIgZmluYWxfeCA9IHBhcmFtcy5jbGFzc19yb29tLnN5bWJvbF93aWR0aCAtIDE7XG4gICAgICAgIHZhciBmaW5hbF95ID0gcGFyYW1zLm1hdHJpeC55X3NjYWxlLnJhbmdlQmFuZCgpO1xuICAgICAgICB2YXIgb3V0cHV0X3N0cmluZyA9ICdNICcgKyBvcmlnaW5feCArICcsJyArIG9yaWdpbl95ICsgJyBMICcgK1xuICAgICAgICAgIG1pZF94ICsgJywnICsgbWlkX3kgKyAnLCBMICcgKyBmaW5hbF94ICsgJywnICsgZmluYWxfeSArICcgWic7XG4gICAgICAgIHJldHVybiBvdXRwdXRfc3RyaW5nO1xuICAgICAgfSk7XG5cbiAgfVxuXG4gICAgaWYgKHV0aWxzLmhhcyggcGFyYW1zLm5ldHdvcmtfZGF0YS5yb3dfbm9kZXNbMF0sICd2YWx1ZScpKSB7XG5cbiAgICAgIC8vIHNldCBiYXIgc2NhbGVcbiAgICAgIHZhciBlbnJfbWF4ID0gTWF0aC5hYnMoXy5tYXgoIHBhcmFtcy5uZXR3b3JrX2RhdGEucm93X25vZGVzLCBmdW5jdGlvbihkKSB7IHJldHVybiBNYXRoLmFicyhkLnZhbHVlKTsgfSApLnZhbHVlKSA7XG4gICAgICBwYXJhbXMubGFiZWxzLmJhcl9zY2FsZV9yb3cgPSBkMy5zY2FsZVxuICAgICAgICAubGluZWFyKClcbiAgICAgICAgLmRvbWFpbihbMCwgZW5yX21heF0pXG4gICAgICAgIC5yYW5nZShbMCwgcGFyYW1zLm5vcm1fbGFiZWwud2lkdGgucm93IF0pO1xuXG4gICAgICBzdmdfZ3JvdXAuc2VsZWN0QWxsKCcucm93X2JhcnMnKVxuICAgICAgICAvLyAudHJhbnNpdGlvbigpLmRlbGF5KGRlbGF5cy51cGRhdGUpLmR1cmF0aW9uKGR1cmF0aW9uKVxuICAgICAgICAuYXR0cignd2lkdGgnLCBmdW5jdGlvbihkKSB7XG4gICAgICAgICAgdmFyIGluc3RfdmFsdWUgPSAwO1xuICAgICAgICAgIGluc3RfdmFsdWUgPSBwYXJhbXMubGFiZWxzLmJhcl9zY2FsZV9yb3coIE1hdGguYWJzKGQudmFsdWUpICk7XG4gICAgICAgICAgcmV0dXJuIGluc3RfdmFsdWU7XG4gICAgICAgIH0pXG4gICAgICAgIC5hdHRyKCd4JywgZnVuY3Rpb24oZCkge1xuICAgICAgICAgIHZhciBpbnN0X3ZhbHVlID0gMDtcbiAgICAgICAgICBpbnN0X3ZhbHVlID0gLXBhcmFtcy5sYWJlbHMuYmFyX3NjYWxlX3JvdyggTWF0aC5hYnMoZC52YWx1ZSkgKTtcbiAgICAgICAgICByZXR1cm4gaW5zdF92YWx1ZTtcbiAgICAgICAgfSlcbiAgICAgICAgLmF0dHIoJ2hlaWdodCcsIHBhcmFtcy5tYXRyaXgueV9zY2FsZS5yYW5nZUJhbmQoKSApO1xuXG4gICAgfVxuXG5cblxuICAgIC8vIHJlc2l6ZSBjb2wgbGFiZWxzXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICAgIGlmIChkZWxheXMucnVuX3RyYW5zaXRpb24pe1xuXG4gICAgICBzdmdfZ3JvdXAuc2VsZWN0KHBhcmFtcy5yb290KycgLmNvbF9jb250YWluZXInKVxuICAgICAgICAudHJhbnNpdGlvbigpLmRlbGF5KGRlbGF5cy51cGRhdGUpLmR1cmF0aW9uKGR1cmF0aW9uKVxuICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgnICsgcGFyYW1zLnZpei5jbHVzdC5tYXJnaW4ubGVmdCArICcsJyArXG4gICAgICAgIHBhcmFtcy5ub3JtX2xhYmVsLm1hcmdpbi50b3AgKyAnKScpO1xuXG4gICAgICBzdmdfZ3JvdXAuc2VsZWN0KHBhcmFtcy5yb290KycgLmNvbF9jb250YWluZXInKVxuICAgICAgICAudHJhbnNpdGlvbigpLmRlbGF5KGRlbGF5cy51cGRhdGUpLmR1cmF0aW9uKGR1cmF0aW9uKVxuICAgICAgICAuc2VsZWN0KCcud2hpdGVfYmFycycpXG4gICAgICAgIC5hdHRyKCd3aWR0aCcsIDMwICogcGFyYW1zLnZpei5jbHVzdC5kaW0ud2lkdGggKyAncHgnKVxuICAgICAgICAuYXR0cignaGVpZ2h0JywgcGFyYW1zLm5vcm1fbGFiZWwuYmFja2dyb3VuZC5jb2wpO1xuXG4gICAgICBzdmdfZ3JvdXAuc2VsZWN0KHBhcmFtcy5yb290KycgLmNvbF9jb250YWluZXInKVxuICAgICAgICAudHJhbnNpdGlvbigpLmRlbGF5KGRlbGF5cy51cGRhdGUpLmR1cmF0aW9uKGR1cmF0aW9uKVxuICAgICAgICAuc2VsZWN0KCcuY29sX2xhYmVsX291dGVyX2NvbnRhaW5lcicpXG4gICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKDAsJyArIHBhcmFtcy5ub3JtX2xhYmVsLndpZHRoLmNvbCArICcpJyk7XG5cbiAgICAgIC8vIG9mZnNldCBjbGljayBncm91cCBjb2x1bW4gbGFiZWxcbiAgICAgIHZhciB4X29mZnNldF9jbGljayA9IHBhcmFtcy5tYXRyaXgueF9zY2FsZS5yYW5nZUJhbmQoKSAvIDIgKyBwYXJhbXMudml6LmJvcmRlcl93aWR0aDtcbiAgICAgIC8vIHJlZHVjZSB3aWR0aCBvZiByb3RhdGVkIHJlY3RzXG4gICAgICB2YXIgcmVkdWNlX3JlY3Rfd2lkdGggPSBwYXJhbXMubWF0cml4Lnhfc2NhbGUucmFuZ2VCYW5kKCkgKiAwLjM2O1xuXG4gICAgICBzdmdfZ3JvdXAuc2VsZWN0QWxsKCcuY29sX2xhYmVsX3RleHQnKVxuICAgICAgICAuZGF0YShjb2xfbm9kZXMsIGZ1bmN0aW9uKGQpe3JldHVybiBkLm5hbWU7fSlcbiAgICAgICAgLnRyYW5zaXRpb24oKS5kZWxheShkZWxheXMudXBkYXRlKS5kdXJhdGlvbihkdXJhdGlvbilcbiAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsIGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICB2YXIgaW5zdF9pbmRleCA9IF8uaW5kZXhPZihjb2xfbm9kZXNfbmFtZXMsIGQubmFtZSk7XG4gICAgICAgICAgcmV0dXJuICd0cmFuc2xhdGUoJyArIHBhcmFtcy5tYXRyaXgueF9zY2FsZShpbnN0X2luZGV4KSArICcpIHJvdGF0ZSgtOTApJztcbiAgICAgICAgfSk7XG5cbiAgICAgIHN2Z19ncm91cC5zZWxlY3RBbGwoJy5jb2xfbGFiZWxfY2xpY2snKVxuICAgICAgICAudHJhbnNpdGlvbigpLmRlbGF5KGRlbGF5cy51cGRhdGUpLmR1cmF0aW9uKGR1cmF0aW9uKVxuICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgnICsgcGFyYW1zLm1hdHJpeC54X3NjYWxlLnJhbmdlQmFuZCgpIC8gMiArICcsJyArIHhfb2Zmc2V0X2NsaWNrICsgJykgcm90YXRlKDQ1KScpO1xuXG4gICAgICBzdmdfZ3JvdXAuc2VsZWN0QWxsKCcuY29sX2xhYmVsX2NsaWNrJylcbiAgICAgICAgLnNlbGVjdCgndGV4dCcpXG4gICAgICAgIC5zdHlsZSgnZm9udC1zaXplJywgcGFyYW1zLmxhYmVscy5kZWZhdWx0X2ZzX2NvbCArICdweCcpXG4gICAgICAgIC50ZXh0KGZ1bmN0aW9uKGQpeyByZXR1cm4gbm9ybWFsX25hbWUoZCk7fSk7XG5cbiAgICAgIHN2Z19ncm91cC5zZWxlY3RBbGwoJy5jb2xfbGFiZWxfY2xpY2snKVxuICAgICAgICAuc2VsZWN0KCd0ZXh0JylcbiAgICAgICAgLnRyYW5zaXRpb24oKS5kZWxheShkZWxheXMudXBkYXRlKS5kdXJhdGlvbihkdXJhdGlvbilcbiAgICAgICAgLmF0dHIoJ3knLCBwYXJhbXMubWF0cml4Lnhfc2NhbGUucmFuZ2VCYW5kKCkgKiAwLjYwKVxuICAgICAgICAuYXR0cignZHgnLCAyICogcGFyYW1zLnZpei5ib3JkZXJfd2lkdGgpO1xuXG4gICAgfSBlbHNlIHtcblxuICAgICAgc3ZnX2dyb3VwLnNlbGVjdChwYXJhbXMucm9vdCsnIC5jb2xfY29udGFpbmVyJylcbiAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoJyArIHBhcmFtcy52aXouY2x1c3QubWFyZ2luLmxlZnQgKyAnLCcgK1xuICAgICAgICBwYXJhbXMubm9ybV9sYWJlbC5tYXJnaW4udG9wICsgJyknKTtcblxuICAgICAgc3ZnX2dyb3VwLnNlbGVjdChwYXJhbXMucm9vdCsnIC5jb2xfY29udGFpbmVyJylcbiAgICAgICAgLnNlbGVjdCgnLndoaXRlX2JhcnMnKVxuICAgICAgICAuYXR0cignd2lkdGgnLCAzMCAqIHBhcmFtcy52aXouY2x1c3QuZGltLndpZHRoICsgJ3B4JylcbiAgICAgICAgLmF0dHIoJ2hlaWdodCcsIHBhcmFtcy5ub3JtX2xhYmVsLmJhY2tncm91bmQuY29sKTtcblxuICAgICAgc3ZnX2dyb3VwLnNlbGVjdChwYXJhbXMucm9vdCsnIC5jb2xfY29udGFpbmVyJylcbiAgICAgICAgLnNlbGVjdCgnLmNvbF9sYWJlbF9vdXRlcl9jb250YWluZXInKVxuICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgwLCcgKyBwYXJhbXMubm9ybV9sYWJlbC53aWR0aC5jb2wgKyAnKScpO1xuXG4gICAgICAvLyBvZmZzZXQgY2xpY2sgZ3JvdXAgY29sdW1uIGxhYmVsXG4gICAgICB2YXIgeF9vZmZzZXRfY2xpY2sgPSBwYXJhbXMubWF0cml4Lnhfc2NhbGUucmFuZ2VCYW5kKCkgLyAyICsgcGFyYW1zLnZpei5ib3JkZXJfd2lkdGg7XG4gICAgICAvLyByZWR1Y2Ugd2lkdGggb2Ygcm90YXRlZCByZWN0c1xuICAgICAgdmFyIHJlZHVjZV9yZWN0X3dpZHRoID0gcGFyYW1zLm1hdHJpeC54X3NjYWxlLnJhbmdlQmFuZCgpICogMC4zNjtcblxuICAgICAgc3ZnX2dyb3VwLnNlbGVjdEFsbCgnLmNvbF9sYWJlbF90ZXh0JylcbiAgICAgICAgLmRhdGEoY29sX25vZGVzLCBmdW5jdGlvbihkKXtyZXR1cm4gZC5uYW1lO30pXG4gICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCBmdW5jdGlvbihkKSB7XG4gICAgICAgICAgdmFyIGluc3RfaW5kZXggPSBfLmluZGV4T2YoY29sX25vZGVzX25hbWVzLCBkLm5hbWUpO1xuICAgICAgICAgIHJldHVybiAndHJhbnNsYXRlKCcgKyBwYXJhbXMubWF0cml4Lnhfc2NhbGUoaW5zdF9pbmRleCkgKyAnKSByb3RhdGUoLTkwKSc7XG4gICAgICAgIH0pO1xuXG4gICAgICBzdmdfZ3JvdXAuc2VsZWN0QWxsKCcuY29sX2xhYmVsX2NsaWNrJylcbiAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoJyArIHBhcmFtcy5tYXRyaXgueF9zY2FsZS5yYW5nZUJhbmQoKSAvIDIgKyAnLCcgKyB4X29mZnNldF9jbGljayArICcpIHJvdGF0ZSg0NSknKTtcblxuICAgICAgc3ZnX2dyb3VwLnNlbGVjdEFsbCgnLmNvbF9sYWJlbF9jbGljaycpXG4gICAgICAgIC5zZWxlY3QoJ3RleHQnKVxuICAgICAgICAuc3R5bGUoJ2ZvbnQtc2l6ZScsIHBhcmFtcy5sYWJlbHMuZGVmYXVsdF9mc19jb2wgKyAncHgnKVxuICAgICAgICAudGV4dChmdW5jdGlvbihkKXsgcmV0dXJuIG5vcm1hbF9uYW1lKGQpO30pO1xuXG4gICAgICBzdmdfZ3JvdXAuc2VsZWN0QWxsKCcuY29sX2xhYmVsX2NsaWNrJylcbiAgICAgICAgLnNlbGVjdCgndGV4dCcpXG4gICAgICAgIC5hdHRyKCd5JywgcGFyYW1zLm1hdHJpeC54X3NjYWxlLnJhbmdlQmFuZCgpICogMC42MClcbiAgICAgICAgLmF0dHIoJ2R4JywgMiAqIHBhcmFtcy52aXouYm9yZGVyX3dpZHRoKTtcblxuICAgIH1cblxuXG5cbiAgICBwYXJhbXMuYm91bmRpbmdfd2lkdGhfbWF4LmNvbCA9IDA7XG4gICAgc3ZnX2dyb3VwLnNlbGVjdEFsbCgnLmNvbF9sYWJlbF9jbGljaycpLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgdG1wX3dpZHRoID0gZDMuc2VsZWN0KHRoaXMpLnNlbGVjdCgndGV4dCcpLm5vZGUoKS5nZXRCQm94KCkud2lkdGg7XG4gICAgICBpZiAodG1wX3dpZHRoID4gcGFyYW1zLmJvdW5kaW5nX3dpZHRoX21heC5jb2wpIHtcbiAgICAgICAgcGFyYW1zLmJvdW5kaW5nX3dpZHRoX21heC5jb2wgPSB0bXBfd2lkdGg7XG4gICAgICB9XG4gICAgfSk7XG5cblxuICAgIGlmIChwYXJhbXMuYm91bmRpbmdfd2lkdGhfbWF4LmNvbCA+IHBhcmFtcy5ub3JtX2xhYmVsLndpZHRoLmNvbCkge1xuXG4gICAgICAvLyBjYWxjIHJlZHVjdGlvbiBpbiBmb250IHNpemVcbiAgICAgIHBhcmFtcy5pbmlfc2NhbGVfZm9udC5jb2wgPSBwYXJhbXMubm9ybV9sYWJlbC53aWR0aC5jb2wgLyBwYXJhbXMuYm91bmRpbmdfd2lkdGhfbWF4LmNvbDtcbiAgICAgIC8vIHJlZGVmaW5lIGJvdW5kaW5nX3dpZHRoX21heC5jb2xcbiAgICAgIHBhcmFtcy5ib3VuZGluZ193aWR0aF9tYXguY29sID0gcGFyYW1zLmluaV9zY2FsZV9mb250LmNvbCAqIHBhcmFtcy5ib3VuZGluZ193aWR0aF9tYXguY29sO1xuICAgICAgLy8gcmVkZWZpbmUgZGVmYXVsdCBmc1xuICAgICAgcGFyYW1zLmxhYmVscy5kZWZhdWx0X2ZzX2NvbCA9IHBhcmFtcy5sYWJlbHMuZGVmYXVsdF9mc19jb2wgKiBwYXJhbXMuaW5pX3NjYWxlX2ZvbnQuY29sO1xuICAgICAgLy8gcmVkdWNlIGZvbnQgc2l6ZVxuICAgICAgZDMuc2VsZWN0QWxsKCcuY29sX2xhYmVsX2NsaWNrJykuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgIGQzLnNlbGVjdCh0aGlzKS5zZWxlY3QoJ3RleHQnKVxuICAgICAgICAuc3R5bGUoJ2ZvbnQtc2l6ZScsIHBhcmFtcy5sYWJlbHMuZGVmYXVsdF9mc19jb2wgKyAncHgnKTtcbiAgICAgIH0pO1xuICAgICAgLy8gLmF0dHIoJ3knLCBwYXJhbXMubWF0cml4LnJlY3Rfd2lkdGggKiAwLjUgKyBwYXJhbXMubGFiZWxzLmRlZmF1bHRfZnNfY29sKjAuMjUgKVxuICAgIH1cblxuICAgIHN2Z19ncm91cC5zZWxlY3RBbGwoJy5jb2xfbGFiZWxfY2xpY2snKVxuICAgICAgLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgIGQzLnNlbGVjdCh0aGlzKVxuICAgICAgICAgIC5zZWxlY3QoJ3RleHQnKVswXVswXVxuICAgICAgICAgIC5nZXRCQm94KCk7XG4gICAgICAgIC8vIGQzLnNlbGVjdCh0aGlzKVxuICAgICAgICAvLyAgIC5zZWxlY3QoJ3JlY3QnKVxuICAgICAgICAvLyAgIC5hdHRyKCd4JywgYmJveC54ICogMS4yNSlcbiAgICAgICAgLy8gICAuYXR0cigneScsIDApXG4gICAgICAgIC8vICAgLmF0dHIoJ3dpZHRoJywgYmJveC53aWR0aCAqIDEuMjUpXG4gICAgICAgIC8vICAgLmF0dHIoJ2hlaWdodCcsIHBhcmFtcy5tYXRyaXgueF9zY2FsZS5yYW5nZUJhbmQoKSAqIDAuNilcbiAgICAgICAgLy8gICAuc3R5bGUoJ2ZpbGwnLCAneWVsbG93JylcbiAgICAgICAgLy8gICAuc3R5bGUoJ29wYWNpdHknLCAwKTtcbiAgICAgIH0pO1xuXG5cblxuICAgIGlmIChkZWxheXMucnVuX3RyYW5zaXRpb24pe1xuXG4gICAgICAvLyByZXNpemUgY29sdW1uIHRyaWFuZ2xlXG4gICAgICBzdmdfZ3JvdXAuc2VsZWN0QWxsKCcuY29sX2xhYmVsX2NsaWNrJylcbiAgICAgICAgLnNlbGVjdCgncGF0aCcpXG4gICAgICAgIC50cmFuc2l0aW9uKCkuZGVsYXkoZGVsYXlzLnVwZGF0ZSkuZHVyYXRpb24oZHVyYXRpb24pXG4gICAgICAgIC5hdHRyKCdkJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgLy8geCBhbmQgeSBhcmUgZmxpcHBlZCBzaW5jZSBpdHMgcm90YXRlZFxuICAgICAgICAgIHZhciBvcmlnaW5feSA9IC1wYXJhbXMudml6LmJvcmRlcl93aWR0aDtcbiAgICAgICAgICB2YXIgc3RhcnRfeCA9IDA7XG4gICAgICAgICAgdmFyIGZpbmFsX3ggPSBwYXJhbXMubWF0cml4Lnhfc2NhbGUucmFuZ2VCYW5kKCkgLSByZWR1Y2VfcmVjdF93aWR0aDtcbiAgICAgICAgICB2YXIgc3RhcnRfeSA9IC0ocGFyYW1zLm1hdHJpeC54X3NjYWxlLnJhbmdlQmFuZCgpIC0gcmVkdWNlX3JlY3Rfd2lkdGggK1xuICAgICAgICAgIHBhcmFtcy52aXouYm9yZGVyX3dpZHRoKTtcbiAgICAgICAgICB2YXIgZmluYWxfeSA9IC1wYXJhbXMudml6LmJvcmRlcl93aWR0aDtcbiAgICAgICAgICB2YXIgb3V0cHV0X3N0cmluZyA9ICdNICcgKyBvcmlnaW5feSArICcsMCBMICcgKyBzdGFydF95ICsgJywnICtcbiAgICAgICAgICAgIHN0YXJ0X3ggKyAnLCBMICcgKyBmaW5hbF95ICsgJywnICsgZmluYWxfeCArICcgWic7XG4gICAgICAgICAgcmV0dXJuIG91dHB1dF9zdHJpbmc7XG4gICAgICAgIH0pXG4gICAgICAgIC5hdHRyKCdmaWxsJywgZnVuY3Rpb24oZCkge1xuICAgICAgICAgIHZhciBpbnN0X2NvbG9yID0gJyNlZWUnO1xuICAgICAgICAgIGlmIChwYXJhbXMubGFiZWxzLnNob3dfY2F0ZWdvcmllcykge1xuICAgICAgICAgICAgaW5zdF9jb2xvciA9IHBhcmFtcy5sYWJlbHMuY2xhc3NfY29sb3JzLmNvbFtkLmNsXTtcblxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gaW5zdF9jb2xvcjtcbiAgICAgICAgfSk7XG5cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gcmVzaXplIGNvbHVtbiB0cmlhbmdsZVxuICAgICAgc3ZnX2dyb3VwLnNlbGVjdEFsbCgnLmNvbF9sYWJlbF9jbGljaycpXG4gICAgICAgIC5zZWxlY3QoJ3BhdGgnKVxuICAgICAgICAuYXR0cignZCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIC8vIHggYW5kIHkgYXJlIGZsaXBwZWQgc2luY2UgaXRzIHJvdGF0ZWRcbiAgICAgICAgICB2YXIgb3JpZ2luX3kgPSAtcGFyYW1zLnZpei5ib3JkZXJfd2lkdGg7XG4gICAgICAgICAgdmFyIHN0YXJ0X3ggPSAwO1xuICAgICAgICAgIHZhciBmaW5hbF94ID0gcGFyYW1zLm1hdHJpeC54X3NjYWxlLnJhbmdlQmFuZCgpIC0gcmVkdWNlX3JlY3Rfd2lkdGg7XG4gICAgICAgICAgdmFyIHN0YXJ0X3kgPSAtKHBhcmFtcy5tYXRyaXgueF9zY2FsZS5yYW5nZUJhbmQoKSAtIHJlZHVjZV9yZWN0X3dpZHRoICtcbiAgICAgICAgICBwYXJhbXMudml6LmJvcmRlcl93aWR0aCk7XG4gICAgICAgICAgdmFyIGZpbmFsX3kgPSAtcGFyYW1zLnZpei5ib3JkZXJfd2lkdGg7XG4gICAgICAgICAgdmFyIG91dHB1dF9zdHJpbmcgPSAnTSAnICsgb3JpZ2luX3kgKyAnLDAgTCAnICsgc3RhcnRfeSArICcsJyArXG4gICAgICAgICAgICBzdGFydF94ICsgJywgTCAnICsgZmluYWxfeSArICcsJyArIGZpbmFsX3ggKyAnIFonO1xuICAgICAgICAgIHJldHVybiBvdXRwdXRfc3RyaW5nO1xuICAgICAgICB9KVxuICAgICAgICAuYXR0cignZmlsbCcsIGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICB2YXIgaW5zdF9jb2xvciA9ICcjZWVlJztcbiAgICAgICAgICBpZiAocGFyYW1zLmxhYmVscy5zaG93X2NhdGVnb3JpZXMpIHtcbiAgICAgICAgICAgIGluc3RfY29sb3IgPSBwYXJhbXMubGFiZWxzLmNsYXNzX2NvbG9ycy5jb2xbZC5jbF07XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBpbnN0X2NvbG9yO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBhcHBlbmQgY29sdW1uIHZhbHVlIGJhcnNcbiAgICBpZiAodXRpbHMuaGFzKCBwYXJhbXMubmV0d29ya19kYXRhLmNvbF9ub2Rlc1swXSwgJ3ZhbHVlJykpIHtcblxuICAgICAgY29uc29sZS5sb2coJ3Jlc2l6aW5nIGNvbCBiYXJzJyk7XG5cbiAgICAgIHN2Z19ncm91cC5zZWxlY3RBbGwoJy5jb2xfYmFycycpXG4gICAgICAgIC5kYXRhKGNvbF9ub2RlcywgZnVuY3Rpb24oZCl7cmV0dXJuIGQubmFtZTt9KVxuICAgICAgICAudHJhbnNpdGlvbigpLmRlbGF5KGRlbGF5cy51cGRhdGUpLmR1cmF0aW9uKGR1cmF0aW9uKVxuICAgICAgICAuYXR0cignd2lkdGgnLCBmdW5jdGlvbihkKSB7XG4gICAgICAgICAgdmFyIGluc3RfdmFsdWUgPSAwO1xuICAgICAgICAgIGlmIChkLnZhbHVlID4gMCl7XG5cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCBTdHJpbmcoZC5uYW1lKSArJyAnKyBTdHJpbmcoZC52YWx1ZSkgKydcXG5cXG4nKTtcbiAgICAgICAgICAgIGluc3RfdmFsdWUgPSBwYXJhbXMubGFiZWxzLmJhcl9zY2FsZV9jb2woZC52YWx1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBpbnN0X3ZhbHVlO1xuICAgICAgICB9KVxuICAgICAgICAvLyByb3RhdGUgbGFiZWxzIC0gcmVkdWNlIHdpZHRoIGlmIHJvdGF0aW5nXG4gICAgICAgIC5hdHRyKCdoZWlnaHQnLCBwYXJhbXMubWF0cml4Lnhfc2NhbGUucmFuZ2VCYW5kKCkgKiAwLjY2KTtcbiAgICB9XG5cbiAgaWYgKHBhcmFtcy5sYWJlbHMuc2hvd19jYXRlZ29yaWVzKXtcbiAgICAvLyBjaGFuZ2UgdGhlIHNpemUgb2YgdGhlIGhpZ2hsaWdodGluZyByZWN0c1xuICAgIGQzLnNlbGVjdEFsbCgnLmNvbF9sYWJlbF9jbGljaycpXG4gICAgICAuZWFjaChmdW5jdGlvbihkKSB7XG4gICAgICAgIHZhciBiYm94ID0gZDMuc2VsZWN0KHRoaXMpXG4gICAgICAgICAgLnNlbGVjdCgndGV4dCcpWzBdWzBdXG4gICAgICAgICAgLmdldEJCb3goKTtcblxuICAgICAgICBkMy5zZWxlY3QodGhpcylcbiAgICAgICAgICAuc2VsZWN0KCdyZWN0JylcbiAgICAgICAgICAudHJhbnNpdGlvbigpLmRlbGF5KGRlbGF5cy51cGRhdGUpLmR1cmF0aW9uKGR1cmF0aW9uKVxuICAgICAgICAgIC5hdHRyKCd3aWR0aCcsIGJib3gud2lkdGggKiAxLjEpXG4gICAgICAgICAgLmF0dHIoJ2hlaWdodCcsIDAuNjcqcGFyYW1zLm1hdHJpeC5yZWN0X3dpZHRoKVxuICAgICAgICAgIC5zdHlsZSgnZmlsbCcsIGZ1bmN0aW9uKGQpe1xuICAgICAgICAgICAgdmFyIGluc3RfY29sb3IgPSAnd2hpdGUnO1xuICAgICAgICAgICAgaWYgKHBhcmFtcy5sYWJlbHMuc2hvd19jYXRlZ29yaWVzKXtcbiAgICAgICAgICAgICAgaW5zdF9jb2xvciA9IHBhcmFtcy5sYWJlbHMuY2xhc3NfY29sb3JzLmNvbFtkLmNsXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBpbnN0X2NvbG9yO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLnN0eWxlKCdvcGFjaXR5JywgMC4zMCk7XG4gICAgICB9KTtcbiAgfVxuXG4gIC8vIHJlc2l6ZSBkZW5kcm9ncmFtXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICBpZiAoZGVsYXlzLnJ1bl90cmFuc2l0aW9uKXtcblxuICAgIHN2Z19ncm91cC5zZWxlY3RBbGwoJy5yb3dfY2xhc3NfcmVjdCcpXG4gICAgICAudHJhbnNpdGlvbigpLmRlbGF5KGRlbGF5cy51cGRhdGUpLmR1cmF0aW9uKGR1cmF0aW9uKVxuICAgICAgLmF0dHIoJ3dpZHRoJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBpbnN0X3dpZHRoID0gcGFyYW1zLmNsYXNzX3Jvb20uc3ltYm9sX3dpZHRoIC0gMTtcbiAgICAgICAgcmV0dXJuIGluc3Rfd2lkdGggKyAncHgnO1xuICAgICAgfSlcbiAgICAgIC5hdHRyKCdoZWlnaHQnLCBwYXJhbXMubWF0cml4Lnlfc2NhbGUucmFuZ2VCYW5kKCkpXG4gICAgICAuYXR0cigneCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgaW5zdF9vZmZzZXQgPSBwYXJhbXMuY2xhc3Nfcm9vbS5zeW1ib2xfd2lkdGggKyAxO1xuICAgICAgICByZXR1cm4gaW5zdF9vZmZzZXQgKyAncHgnO1xuICAgICAgfSk7XG5cbiAgICBzdmdfZ3JvdXAuc2VsZWN0QWxsKCcuY29sX2NsYXNzX3JlY3QnKVxuICAgICAgLnRyYW5zaXRpb24oKS5kZWxheShkZWxheXMudXBkYXRlKS5kdXJhdGlvbihkdXJhdGlvbilcbiAgICAgIC5hdHRyKCd3aWR0aCcsIHBhcmFtcy5tYXRyaXgueF9zY2FsZS5yYW5nZUJhbmQoKSlcbiAgICAgIC5hdHRyKCdoZWlnaHQnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGluc3RfaGVpZ2h0ID0gcGFyYW1zLmNsYXNzX3Jvb20uY29sIC0gMTtcbiAgICAgICAgcmV0dXJuIGluc3RfaGVpZ2h0O1xuICAgICAgfSk7XG5cbiAgICBzdmdfZ3JvdXAuc2VsZWN0QWxsKCcuY29sX3Zpel9ncm91cCcpXG4gICAgICAuZGF0YShjb2xfbm9kZXMsIGZ1bmN0aW9uKGQpe3JldHVybiBkLm5hbWU7fSlcbiAgICAgIC50cmFuc2l0aW9uKCkuZGVsYXkoZGVsYXlzLnVwZGF0ZSkuZHVyYXRpb24oZHVyYXRpb24pXG4gICAgICAuYXR0cigndHJhbnNmb3JtJywgZnVuY3Rpb24oZCkge1xuICAgICAgICB2YXIgaW5zdF9pbmRleCA9IF8uaW5kZXhPZihjb2xfbm9kZXNfbmFtZXMsIGQubmFtZSk7XG4gICAgICAgIHJldHVybiAndHJhbnNsYXRlKCcgKyBwYXJhbXMubWF0cml4Lnhfc2NhbGUoaW5zdF9pbmRleCkgKyAnLDApJztcbiAgICAgIH0pO1xuXG4gICAgfSBlbHNlIHtcblxuICAgICAgc3ZnX2dyb3VwLnNlbGVjdEFsbCgnLnJvd19jbGFzc19yZWN0JylcbiAgICAgIC5hdHRyKCd3aWR0aCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgaW5zdF93aWR0aCA9IHBhcmFtcy5jbGFzc19yb29tLnN5bWJvbF93aWR0aCAtIDE7XG4gICAgICAgIHJldHVybiBpbnN0X3dpZHRoICsgJ3B4JztcbiAgICAgIH0pXG4gICAgICAuYXR0cignaGVpZ2h0JywgcGFyYW1zLm1hdHJpeC55X3NjYWxlLnJhbmdlQmFuZCgpKVxuICAgICAgLmF0dHIoJ3gnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGluc3Rfb2Zmc2V0ID0gcGFyYW1zLmNsYXNzX3Jvb20uc3ltYm9sX3dpZHRoICsgMTtcbiAgICAgICAgcmV0dXJuIGluc3Rfb2Zmc2V0ICsgJ3B4JztcbiAgICAgIH0pO1xuXG4gICAgc3ZnX2dyb3VwLnNlbGVjdEFsbCgnLmNvbF9jbGFzc19yZWN0JylcbiAgICAgIC5hdHRyKCd3aWR0aCcsIHBhcmFtcy5tYXRyaXgueF9zY2FsZS5yYW5nZUJhbmQoKSlcbiAgICAgIC5hdHRyKCdoZWlnaHQnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGluc3RfaGVpZ2h0ID0gcGFyYW1zLmNsYXNzX3Jvb20uY29sIC0gMTtcbiAgICAgICAgcmV0dXJuIGluc3RfaGVpZ2h0O1xuICAgICAgfSk7XG5cbiAgICBzdmdfZ3JvdXAuc2VsZWN0QWxsKCcuY29sX3Zpel9ncm91cCcpXG4gICAgICAuZGF0YShjb2xfbm9kZXMsIGZ1bmN0aW9uKGQpe3JldHVybiBkLm5hbWU7fSlcbiAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCBmdW5jdGlvbihkKSB7XG4gICAgICAgIHZhciBpbnN0X2luZGV4ID0gXy5pbmRleE9mKGNvbF9ub2Rlc19uYW1lcywgZC5uYW1lKTtcbiAgICAgICAgcmV0dXJuICd0cmFuc2xhdGUoJyArIHBhcmFtcy5tYXRyaXgueF9zY2FsZShpbnN0X2luZGV4KSArICcsMCknO1xuICAgICAgfSk7XG5cbiAgICB9XG5cbiAgLy8gcmVwb3NpdGlvbiBncmlkIGxpbmVzXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgc3ZnX2dyb3VwLnNlbGVjdEFsbCgnLmhvcnpfbGluZXMnKVxuICAgIC5kYXRhKHJvd19ub2RlcywgZnVuY3Rpb24oZCl7cmV0dXJuIGQubmFtZTt9KVxuICAgIC8vIC50cmFuc2l0aW9uKCkuZGVsYXkoZGVsYXlzLnVwZGF0ZSkuZHVyYXRpb24oZHVyYXRpb24pXG4gICAgLmF0dHIoJ3RyYW5zZm9ybScsIGZ1bmN0aW9uKGQpIHtcbiAgICAgIHZhciBpbnN0X2luZGV4ID0gXy5pbmRleE9mKHJvd19ub2Rlc19uYW1lcywgZC5uYW1lKTtcbiAgICAgIHJldHVybiAndHJhbnNsYXRlKDAsJyArIHBhcmFtcy5tYXRyaXgueV9zY2FsZShpbnN0X2luZGV4KSArICcpIHJvdGF0ZSgwKSc7XG4gICAgfSk7XG5cbiAgc3ZnX2dyb3VwLnNlbGVjdEFsbCgnLmhvcnpfbGluZXMnKVxuICAgIC5zZWxlY3QoJ2xpbmUnKVxuICAgIC8vIC50cmFuc2l0aW9uKCkuZGVsYXkoZGVsYXlzLnVwZGF0ZSkuZHVyYXRpb24oZHVyYXRpb24pXG4gICAgLmF0dHIoJ3gyJyxwYXJhbXMudml6LmNsdXN0LmRpbS53aWR0aClcbiAgICAuc3R5bGUoJ3N0cm9rZS13aWR0aCcsIHBhcmFtcy52aXouYm9yZGVyX3dpZHRoL3BhcmFtcy52aXouem9vbV9zd2l0Y2grJ3B4Jyk7XG5cbiAgc3ZnX2dyb3VwLnNlbGVjdEFsbCgnLnZlcnRfbGluZXMnKVxuICAgIC5kYXRhKGNvbF9ub2RlcywgZnVuY3Rpb24oZCl7cmV0dXJuIGQubmFtZTt9KVxuICAgIC8vIC50cmFuc2l0aW9uKCkuZGVsYXkoZGVsYXlzLnVwZGF0ZSkuZHVyYXRpb24oZHVyYXRpb24pXG4gICAgLmF0dHIoJ3RyYW5zZm9ybScsIGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgdmFyIGluc3RfaW5kZXggPSBfLmluZGV4T2YoY29sX25vZGVzX25hbWVzLCBkLm5hbWUpO1xuICAgICAgICByZXR1cm4gJ3RyYW5zbGF0ZSgnICsgcGFyYW1zLm1hdHJpeC54X3NjYWxlKGluc3RfaW5kZXgpICsgJykgcm90YXRlKC05MCknO1xuICAgIH0pO1xuXG4gIHN2Z19ncm91cC5zZWxlY3RBbGwoJy52ZXJ0X2xpbmVzJylcbiAgICAuc2VsZWN0KCdsaW5lJylcbiAgICAvLyAudHJhbnNpdGlvbigpLmRlbGF5KGRlbGF5cy51cGRhdGUpLmR1cmF0aW9uKGR1cmF0aW9uKVxuICAgIC5hdHRyKCd4MicsIC1wYXJhbXMudml6LmNsdXN0LmRpbS5oZWlnaHQpXG4gICAgLnN0eWxlKCdzdHJva2Utd2lkdGgnLCBwYXJhbXMudml6LmJvcmRlcl93aWR0aCArICdweCcpO1xuXG4gIC8vIHJlc2l6ZSBzdXBlcmxhYmVsc1xuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gIHN2Z19ncm91cC5zZWxlY3QoJy5zdXBlcl9jb2xfYmsgZycpXG4gICAgLy8gLnRyYW5zaXRpb24oKS5kZWxheShkZWxheXMudXBkYXRlKS5kdXJhdGlvbihkdXJhdGlvbilcbiAgICAuYXR0cignaGVpZ2h0JywgcGFyYW1zLmxhYmVscy5zdXBlcl9sYWJlbF93aWR0aCArICdweCcpXG4gICAgLmF0dHIoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoMCwnICsgcGFyYW1zLnZpei5ncmV5X2JvcmRlcl93aWR0aCArICcpJyk7XG5cbiAgLy8gc3VwZXIgY29sIHRpdGxlXG4gIHN2Z19ncm91cC5zZWxlY3QoJy5zdXBlcl9jb2wnKVxuICAgIC8vIC50cmFuc2l0aW9uKCkuZGVsYXkoZGVsYXlzLnVwZGF0ZSkuZHVyYXRpb24oZHVyYXRpb24pXG4gICAgLmF0dHIoJ3RyYW5zZm9ybScsIGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGluc3RfeCA9IHBhcmFtcy52aXouY2x1c3QuZGltLndpZHRoIC8gMiArIHBhcmFtcy5ub3JtX2xhYmVsLndpZHRoXG4gICAgICAgIC5yb3c7XG4gICAgICB2YXIgaW5zdF95ID0gcGFyYW1zLmxhYmVscy5zdXBlcl9sYWJlbF93aWR0aCAtIHBhcmFtcy52aXoudW5pX21hcmdpbjtcbiAgICAgIHJldHVybiAndHJhbnNsYXRlKCcgKyBpbnN0X3ggKyAnLCcgKyBpbnN0X3kgKyAnKSc7XG4gICAgfSk7XG5cbiAgLy8gc3VwZXIgcm93IHRpdGxlXG4gIHN2Z19ncm91cC5zZWxlY3QoJy5zdXBlcl9yb3dfYmtnJylcbiAgICAvLyAudHJhbnNpdGlvbigpLmRlbGF5KGRlbGF5cy51cGRhdGUpLmR1cmF0aW9uKGR1cmF0aW9uKVxuICAgIC5hdHRyKCd3aWR0aCcsIHBhcmFtcy5sYWJlbHMuc3VwZXJfbGFiZWxfd2lkdGggKyAncHgnKVxuICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKCcgKyBwYXJhbXMudml6LmdyZXlfYm9yZGVyX3dpZHRoICsgJywwKScpO1xuXG4gIC8vIGFwcGVuZCBzdXBlciB0aXRsZSByb3cgZ3JvdXBcbiAgc3ZnX2dyb3VwLnNlbGVjdCgnLnN1cGVyX3JvdycpXG4gICAgLy8gLnRyYW5zaXRpb24oKS5kZWxheShkZWxheXMudXBkYXRlKS5kdXJhdGlvbihkdXJhdGlvbilcbiAgICAuYXR0cigndHJhbnNmb3JtJywgZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgaW5zdF94ID0gcGFyYW1zLmxhYmVscy5zdXBlcl9sYWJlbF93aWR0aCAtIHBhcmFtcy52aXoudW5pX21hcmdpbjtcbiAgICAgIHZhciBpbnN0X3kgPSBwYXJhbXMudml6LmNsdXN0LmRpbS5oZWlnaHQgLyAyICsgcGFyYW1zLm5vcm1fbGFiZWwud2lkdGhcbiAgICAgICAgLmNvbDtcbiAgICAgIHJldHVybiAndHJhbnNsYXRlKCcgKyBpbnN0X3ggKyAnLCcgKyBpbnN0X3kgKyAnKSc7XG4gICAgfSk7XG5cbiAgLy8gcmVzaXplIHNwaWxsb3ZlclxuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAvLyBoaWRlIHNwaWxsb3ZlciBmcm9tIHNsYW50ZWQgY29sdW1uIGxhYmVscyBvbiByaWdodCBzaWRlXG4gIHN2Z19ncm91cC5zZWxlY3QoJy5yaWdodF9zbGFudF90cmlhbmdsZScpXG4gICAgLnRyYW5zaXRpb24oKS5kZWxheShkZWxheXMudXBkYXRlKS5kdXJhdGlvbihkdXJhdGlvbilcbiAgICAuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgnICsgcGFyYW1zLnZpei5jbHVzdC5kaW0ud2lkdGggKyAnLCcgK1xuICAgIHBhcmFtcy5ub3JtX2xhYmVsLndpZHRoLmNvbCArICcpJyk7XG5cbiAgc3ZnX2dyb3VwLnNlbGVjdCgnLmxlZnRfc2xhbnRfdHJpYW5nbGUnKVxuICAgIC50cmFuc2l0aW9uKCkuZGVsYXkoZGVsYXlzLnVwZGF0ZSkuZHVyYXRpb24oZHVyYXRpb24pXG4gICAgLmF0dHIoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoLTEsJyArIHBhcmFtcy5ub3JtX2xhYmVsLndpZHRoLmNvbCArJyknKTtcblxuICBzdmdfZ3JvdXAuc2VsZWN0KCcudG9wX2xlZnRfd2hpdGUnKVxuICAgIC50cmFuc2l0aW9uKCkuZGVsYXkoZGVsYXlzLnVwZGF0ZSkuZHVyYXRpb24oZHVyYXRpb24pXG4gICAgLmF0dHIoJ3dpZHRoJywgcGFyYW1zLnZpei5jbHVzdC5tYXJnaW4ubGVmdClcbiAgICAuYXR0cignaGVpZ2h0JywgcGFyYW1zLnZpei5jbHVzdC5tYXJnaW4udG9wKTtcblxuICBzdmdfZ3JvdXAuc2VsZWN0KCcucmlnaHRfc3BpbGxvdmVyJylcbiAgICAudHJhbnNpdGlvbigpLmRlbGF5KGRlbGF5cy51cGRhdGUpLmR1cmF0aW9uKGR1cmF0aW9uKVxuICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCBmdW5jdGlvbigpIHtcbiAgICAgIHZhciB0bXBfbGVmdCA9IHBhcmFtcy52aXouY2x1c3QubWFyZ2luLmxlZnQgKyBwYXJhbXMudml6LmNsdXN0LmRpbS53aWR0aDtcbiAgICAgIHZhciB0bXBfdG9wID0gcGFyYW1zLm5vcm1fbGFiZWwubWFyZ2luLnRvcCArIHBhcmFtcy5ub3JtX2xhYmVsLndpZHRoXG4gICAgICAgIC5jb2w7XG4gICAgICByZXR1cm4gJ3RyYW5zbGF0ZSgnICsgdG1wX2xlZnQgKyAnLCcgKyB0bXBfdG9wICsgJyknO1xuICAgIH0pO1xuXG4gIC8vIHdoaXRlIGJvcmRlciBib3R0b20gLSBwcmV2ZW50IGNsdXN0ZXJncmFtIGZyb20gaGl0dGluZyBib3JkZXJcbiAgc3ZnX2dyb3VwLnNlbGVjdCgnLmJvdHRvbV9zcGlsbG92ZXInKVxuICAgIC50cmFuc2l0aW9uKCkuZGVsYXkoZGVsYXlzLnVwZGF0ZSkuZHVyYXRpb24oZHVyYXRpb24pXG4gICAgLmF0dHIoJ3dpZHRoJywgcGFyYW1zLnZpei5zdmdfZGltLndpZHRoKVxuICAgIC5hdHRyKCdoZWlnaHQnLCAyICogcGFyYW1zLnZpei5ncmV5X2JvcmRlcl93aWR0aClcbiAgICAuYXR0cigndHJhbnNmb3JtJywgZnVuY3Rpb24oKSB7XG4gICAgICAvLyBzaGlmdCB1cCBlbm91Z2ggdG8gc2hvdyB0aGUgZW50aXJlIGJvcmRlciB3aWR0aFxuICAgICAgdmFyIGluc3Rfb2Zmc2V0ID0gcGFyYW1zLnZpei5zdmdfZGltLmhlaWdodCAtIDMgKiBwYXJhbXMudml6LmdyZXlfYm9yZGVyX3dpZHRoO1xuICAgICAgcmV0dXJuICd0cmFuc2xhdGUoMCwnICsgaW5zdF9vZmZzZXQgKyAnKSc7XG4gICAgfSk7XG5cblxuICAvLyByZXNldCB6b29tIGFuZCB0cmFuc2xhdGVcbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gIHBhcmFtcy56b29tX2JlaGF2aW9yLnNjYWxlKDEpLnRyYW5zbGF0ZShcbiAgICAgIFsgcGFyYW1zLnZpei5jbHVzdC5tYXJnaW4ubGVmdCwgcGFyYW1zLnZpei5jbHVzdC5tYXJnaW4udG9wXVxuICApO1xufTtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIHNyYy9yZXNldF9zaXplL3Jlc2V0X3NpemVfYWZ0ZXJfdXBkYXRlLmpzXG4gKiovIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUxBO0FBU0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUdBO0FBQ0E7QUFHQTtBQUNBO0FBRUE7QUFDQTs7OztBQWhDQTtBQUNBOzs7OztBQURBO0FBNkNBO0FBQ0E7QUFDQTs7QUEvQ0E7QUFDQTs7QUFEQTtBQUNBOzs7QUFEQTtBQTJEQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTs7Ozs7QUFqRUE7QUFDQTs7QUF3RUE7QUFDQTs7O0FBSkE7QUFDQTs7O0FBREE7O0FBYUE7O0FBRkE7QUFBQTs7O0FBWEE7O0FBcUJBOztBQUZBO0FBbkJBO0FBQ0E7O0FBdkVBO0FBQ0E7O0FBREE7QUFxR0E7QUFEQTtBQUNBOztBQXJHQTtBQTJHQTtBQUNBOztBQTVHQTtBQStHQTtBQUNBOztBQWhIQTtBQUNBOztBQURBO0FBdUhBO0FBQ0E7Ozs7Ozs7QUF4SEE7QUFDQTtBQW1JQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQXJJQTtBQTBLQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBTEE7QUFDQTs7OztBQTFLQTtBQUNBO0FBcUxBO0FBQ0E7QUFJQTtBQUNBO0FBS0E7QUFDQTtBQUlBO0FBQ0E7QUFBQTtBQUdBO0FBQ0E7QUFGQTtBQXJCQTtBQTRCQTtBQUNBO0FBR0E7QUFDQTtBQUlBO0FBQ0E7QUFHQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBRkE7QUEzQ0E7QUFDQTs7QUFyTEE7QUEwT0E7QUFBQTtBQUNBOztBQTNPQTtBQStPQTtBQUNBO0FBUUE7O0FBREE7QUFJQTtBQURBO0FBR0E7QUFOQTtBQVRBO0FBQ0E7O0FBL09BO0FBbVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUZBO0FBQ0E7OztBQXJRQTtBQThRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUhBO0FBQ0E7O0FBREE7O0FBQUE7QUFXQTtBQURBO0FBVkE7QUFDQTtBQWVBO0FBQ0E7O0FBRUE7QUFDQTtBQUlBO0FBQ0E7QUFHQTtBQUtBO0FBQ0E7QUFGQTtBQUNBO0FBSUE7QUFDQTtBQUFBO0FBR0E7QUFDQTtBQUZBO0FBQ0E7QUFJQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFUQTtBQWhDQTtBQUNBOztBQThDQTtBQUNBO0FBR0E7QUFDQTtBQUVBO0FBSUE7QUFDQTtBQUZBO0FBQ0E7QUFJQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBRkE7QUFDQTtBQUlBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQVRBO0FBdkVBO0FBQ0E7QUFvRkE7QUFDQTs7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBSUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQU1BO0FBQ0E7QUFDQTtBQUhBO0FBaEJBO0FBQ0E7Ozs7QUF2WEE7QUFDQTtBQXFaQTtBQUNBO0FBSUE7QUFDQTtBQUtBO0FBQ0E7O0FBZEE7O0FBQUE7QUFDQTtBQXNCQTtBQUNBO0FBQUE7QUFHQTtBQUNBO0FBRkE7QUFDQTtBQUlBO0FBQ0E7QUFHQTtBQUdBO0FBQUE7QUFDQTtBQUNBO0FBeENBO0FBQ0E7QUErQ0E7QUFDQTtBQUdBO0FBQ0E7QUFJQTtBQUNBOztBQVpBOztBQUFBO0FBQ0E7QUFtQkE7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUZBO0FBQ0E7QUFJQTtBQUNBO0FBRUE7QUFHQTtBQUFBO0FBQ0E7QUFDQTtBQWpGQTtBQUNBO0FBeUZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUZBO0FBQ0E7QUFPQTtBQUNBOztBQUVBOztBQUhBOztBQUFBOztBQUFBO0FBVUE7QUFEQTs7QUFUQTtBQUNBO0FBZUE7QUFFQTs7Ozs7Ozs7O0FBREE7QUFDQTtBQWVBO0FBQ0E7O0FBRUE7O0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFWQTtBQWFBO0FBQ0E7QUFDQTtBQURBO0FBSUE7QUFOQTtBQWxCQTs7QUE2QkE7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFWQTtBQWFBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFMQTtBQTNDQTtBQUNBOztBQXpoQkE7QUFDQTtBQThrQkE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBUEE7O0FBSEE7QUFKQTtBQUNBO0FBbUJBOztBQUVBO0FBRUE7QUFDQTtBQUdBO0FBTUE7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUxBO0FBVkE7QUFIQTtBQUNBOzs7O0FBbG1CQTtBQUNBO0FBNm5CQTtBQUdBO0FBQ0E7QUFGQTtBQU1BO0FBQ0E7QUFGQTtBQUNBO0FBSUE7QUFJQTtBQUNBO0FBRkE7QUFDQTtBQUlBO0FBQ0E7QUFBQTtBQUdBO0FBQ0E7QUFGQTtBQXpCQTtBQUNBO0FBK0JBO0FBRUE7QUFDQTtBQUZBO0FBTUE7QUFDQTtBQUZBO0FBQ0E7QUFJQTtBQUdBO0FBQ0E7QUFGQTtBQUNBO0FBSUE7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUZBO0FBcERBO0FBQ0E7OztBQTduQkE7QUEwckJBO0FBQUE7O0FBREE7QUFJQTtBQUNBO0FBRkE7QUFDQTtBQUlBOztBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7O0FBREE7QUFJQTtBQUNBO0FBRkE7QUFDQTtBQUlBOztBQUdBO0FBQ0E7OztBQW50QkE7O0FBeXRCQTtBQUNBOztBQTF0QkE7O0FBK3RCQTtBQUNBO0FBRUE7QUFDQTtBQUpBO0FBQ0E7O0FBaHVCQTs7QUF5dUJBO0FBQ0E7O0FBMXVCQTs7QUErdUJBO0FBQ0E7QUFDQTtBQUVBO0FBSkE7QUFDQTs7OztBQWh2QkE7QUFDQTtBQTZ2QkE7QUFDQTtBQUdBO0FBQ0E7QUFJQTtBQUdBO0FBQ0E7QUFFQTtBQUpBO0FBQ0E7O0FBMXdCQTs7QUF1eEJBO0FBQ0E7QUFIQTtBQUNBOzs7QUF0eEJBO0FBQUEiLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 47 */
/***/ function(module, exports, __webpack_require__) {

	eval("var Params = __webpack_require__(1);\n\nmodule.exports = function (ini_inp_row_data, tip, delays, duration) {\n  var params = Params.get();\n\n  var inp_row_data = ini_inp_row_data.row_data;\n\n  // remove zero values from\n  var row_values = _.filter(inp_row_data, function (num) {\n    return num.value != 0;\n  });\n\n  // bind data to tiles\n  var cur_row_tiles = d3.select(this).selectAll('.tile').data(row_values, function (d) {\n    return d.col_name;\n  });\n\n  ///////////////////////////\n  // Exit\n  ///////////////////////////\n  if (delays.run_transition) {\n    cur_row_tiles.exit().transition().duration(300).attr('fill-opacity', 0).remove();\n  } else {\n    cur_row_tiles.exit().attr('fill-opacity', 0).remove();\n  }\n\n  if (params.matrix.tile_type == 'updn') {\n\n    // value split\n    var row_split_data = _.filter(inp_row_data, function (num) {\n      return num.value_up != 0 || num.value_dn != 0;\n    });\n\n    // tile_up\n    var cur_tiles_up = d3.select(this).selectAll('.tile_up').data(row_split_data, function (d) {\n      return d.col_name;\n    });\n\n    if (delays.run_transition) {\n      cur_tiles_up.exit().transition().duration(300).attr('fill', '0').remove();\n    } else {\n      cur_tiles_up.exit().attr('fill', 0).remove();\n    }\n\n    // tile_dn\n    var cur_tiles_dn = d3.select(this).selectAll('.tile_dn').data(row_split_data, function (d) {\n      return d.col_name;\n    });\n\n    if (delays.run_transition) {\n      cur_tiles_dn.exit().transition().duration(300).attr('fill', 0).remove();\n    } else {\n      cur_tiles_dn.exit().attr('fill', 0).remove();\n    }\n  }\n\n  ///////////////////////////\n  // Update\n  ///////////////////////////\n\n  // update tiles in x direction\n  var update_row_tiles = cur_row_tiles.on('mouseover', function (p) {\n    // highlight row - set text to active if\n    d3.selectAll('.row_label_text text').classed('active', function (d) {\n      return p.row_name === d.name;\n    });\n\n    d3.selectAll('.col_label_text text').classed('active', function (d) {\n      return p.col_name === d.name;\n    });\n    if (params.matrix.show_tile_tooltips) {\n      tip.show(p);\n    }\n  }).on('mouseout', function mouseout() {\n    d3.selectAll('text').classed('active', false);\n    if (params.matrix.show_tile_tooltips) {\n      tip.hide();\n    }\n  });\n\n  var col_nodes_names = params.network_data.col_nodes_names;\n\n  if (delays.run_transition) {\n    update_row_tiles.transition().delay(delays.update).duration(duration).attr('width', params.matrix.rect_width).attr('height', params.matrix.rect_height).attr('transform', function (d) {\n      if (_.contains(col_nodes_names, d.col_name)) {\n        var inst_col_index = _.indexOf(col_nodes_names, d.col_name);\n        var x_pos = params.matrix.x_scale(inst_col_index) + 0.5 * params.viz.border_width;\n        return 'translate(' + x_pos + ',0)';\n      }\n    });\n  } else {\n    update_row_tiles.attr('width', params.matrix.rect_width).attr('height', params.matrix.rect_height).attr('transform', function (d) {\n      if (_.contains(col_nodes_names, d.col_name)) {\n        var inst_col_index = _.indexOf(col_nodes_names, d.col_name);\n        var x_pos = params.matrix.x_scale(inst_col_index) + 0.5 * params.viz.border_width;\n        return 'translate(' + x_pos + ',0)';\n      }\n    });\n  }\n\n  if (params.matrix.tile_type == 'updn') {\n\n    // update split tiles_up\n    var update_tiles_up = cur_tiles_up.on('mouseover', function (p) {\n      // highlight row - set text to active if\n      d3.selectAll('.row_label_text text').classed('active', function (d) {\n        return p.row_name === d.name;\n      });\n\n      d3.selectAll('.col_label_text text').classed('active', function (d) {\n        return p.col_name === d.name;\n      });\n      if (params.matrix.show_tile_tooltips) {\n        tip.show(p);\n      }\n    }).on('mouseout', function mouseout() {\n      d3.selectAll('text').classed('active', false);\n      if (params.matrix.show_tile_tooltips) {\n        tip.hide();\n      }\n    });\n\n    if (delays.run_transition) {\n      update_tiles_up.transition().delay(delays.update).duration(duration).attr('d', function (d) {\n        // up triangle\n        var start_x = 0;\n        var final_x = params.matrix.x_scale.rangeBand();\n        var start_y = 0;\n        var final_y = params.matrix.y_scale.rangeBand() - params.matrix.y_scale.rangeBand() / 60;\n        var output_string = 'M' + start_x + ',' + start_y + ', L' + start_x + ', ' + final_y + ', L' + final_x + ',0 Z';\n        return output_string;\n      }).attr('transform', function (d) {\n        var x_pos = params.matrix.x_scale(d.pos_x) + 0.5 * params.viz.border_width;\n        var y_pos = 0.5 * params.viz.border_width / params.viz.zoom_switch;\n        return 'translate(' + x_pos + ',' + y_pos + ')';\n      });\n    } else {\n      update_tiles_up.attr('d', function (d) {\n        // up triangle\n        var start_x = 0;\n        var final_x = params.matrix.x_scale.rangeBand();\n        var start_y = 0;\n        var final_y = params.matrix.y_scale.rangeBand() - params.matrix.y_scale.rangeBand() / 60;\n        var output_string = 'M' + start_x + ',' + start_y + ', L' + start_x + ', ' + final_y + ', L' + final_x + ',0 Z';\n        return output_string;\n      }).attr('transform', function (d) {\n        var x_pos = params.matrix.x_scale(d.pos_x) + 0.5 * params.viz.border_width;\n        var y_pos = 0.5 * params.viz.border_width / params.viz.zoom_switch;\n        return 'translate(' + x_pos + ',' + y_pos + ')';\n      });\n    }\n\n    // update split tiles_dn\n    var update_tiles_dn = cur_tiles_dn.on('mouseover', function (p) {\n      // highlight row - set text to active if\n      d3.selectAll('.row_label_text text').classed('active', function (d) {\n        return p.row_name === d.name;\n      });\n\n      d3.selectAll('.col_label_text text').classed('active', function (d) {\n        return p.col_name === d.name;\n      });\n      if (params.matrix.show_tile_tooltips) {\n        tip.show(p);\n      }\n    }).on('mouseout', function mouseout() {\n      d3.selectAll('text').classed('active', false);\n      if (params.matrix.show_tile_tooltips) {\n        tip.hide();\n      }\n    });\n\n    if (delays.run_transition) {\n      update_tiles_dn.transition().delay(delays.update).duration(duration).attr('d', function (d) {\n        // dn triangle\n        var start_x = 0;\n        var final_x = params.matrix.x_scale.rangeBand();\n        var start_y = params.matrix.y_scale.rangeBand() - params.matrix.y_scale.rangeBand() / 60;\n        var final_y = params.matrix.y_scale.rangeBand() - params.matrix.y_scale.rangeBand() / 60;\n        var output_string = 'M' + start_x + ', ' + start_y + ' ,   L' + final_x + ', ' + final_y + ',  L' + final_x + ',0 Z';\n        return output_string;\n      }).attr('transform', function (d) {\n        var x_pos = params.matrix.x_scale(d.pos_x) + 0.5 * params.viz.border_width;\n        var y_pos = 0.5 * params.viz.border_width / params.viz.zoom_switch;\n        return 'translate(' + x_pos + ',' + y_pos + ')';\n      });\n    } else {\n      update_tiles_dn.attr('d', function (d) {\n        // dn triangle\n        var start_x = 0;\n        var final_x = params.matrix.x_scale.rangeBand();\n        var start_y = params.matrix.y_scale.rangeBand() - params.matrix.y_scale.rangeBand() / 60;\n        var final_y = params.matrix.y_scale.rangeBand() - params.matrix.y_scale.rangeBand() / 60;\n        var output_string = 'M' + start_x + ', ' + start_y + ' ,   L' + final_x + ', ' + final_y + ',  L' + final_x + ',0 Z';\n        return output_string;\n      }).attr('transform', function (d) {\n        var x_pos = params.matrix.x_scale(d.pos_x) + 0.5 * params.viz.border_width;\n        var y_pos = 0.5 * params.viz.border_width / params.viz.zoom_switch;\n        return 'translate(' + x_pos + ',' + y_pos + ')';\n      });\n    }\n\n    // remove tiles when splitting is done\n    cur_row_tiles.selectAll('.tile').each(function (d) {\n      if (Math.abs(d.value_up) > 0 && Math.abs(d.value_dn) > 0) {\n        d3.select(this).remove();\n      }\n    });\n  }\n\n  ///////////////////////////\n  // Enter\n  ///////////////////////////\n  // enter new tiles\n  var new_tiles = cur_row_tiles.enter().append('rect').attr('class', 'tile row_tile').attr('width', params.matrix.rect_width).attr('height', params.matrix.rect_height).on('mouseover', function (p) {\n    // highlight row - set text to active if\n    d3.selectAll('.row_label_text text').classed('active', function (d) {\n      return p.row_name === d.name;\n    });\n\n    d3.selectAll('.col_label_text text').classed('active', function (d) {\n      return p.col_name === d.name;\n    });\n    if (params.matrix.show_tile_tooltips) {\n      tip.show(p);\n    }\n  }).on('mouseout', function mouseout() {\n    d3.selectAll('text').classed('active', false);\n    if (params.matrix.show_tile_tooltips) {\n      tip.hide();\n    }\n  }).attr('fill-opacity', 0).attr('transform', function (d) {\n    var x_pos = params.matrix.x_scale(d.pos_x) + 0.5 * params.viz.border_width;\n    var y_pos = 0.5 * params.viz.border_width / params.viz.zoom_switch;\n    return 'translate(' + x_pos + ',' + y_pos + ')';\n  });\n\n  if (delays.run_transition) {\n    new_tiles.transition().delay(delays.enter).duration(duration).style('fill', function (d) {\n      return d.value > 0 ? params.matrix.tile_colors[0] : params.matrix.tile_colors[1];\n    }).attr('fill-opacity', function (d) {\n      var output_opacity = params.matrix.opacity_scale(Math.abs(d.value));\n      return output_opacity;\n    });\n  } else {\n    new_tiles.style('fill', function (d) {\n      return d.value > 0 ? params.matrix.tile_colors[0] : params.matrix.tile_colors[1];\n    }).attr('fill-opacity', function (d) {\n      var output_opacity = params.matrix.opacity_scale(Math.abs(d.value));\n      return output_opacity;\n    });\n  }\n\n  // remove new tiles if necessary\n  new_tiles.each(function (d) {\n    if (Math.abs(d.value_up) > 0 && Math.abs(d.value_dn) > 0) {\n      d3.select(this).remove();\n    }\n  });\n\n  ////////////////////////////////////////////////////\n  // need to add split tiles to existing rows\n  ////////////////////////////////////////////////////\n};undefined\n//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDcuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL25ldHdvcmsvZWV1X2V4aXN0aW5nX3Jvdy5qcz85M2MxIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBQYXJhbXMgPSByZXF1aXJlKCcuLi9wYXJhbXMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpbmlfaW5wX3Jvd19kYXRhLCB0aXAsIGRlbGF5cywgZHVyYXRpb24pIHtcbiAgdmFyIHBhcmFtcyA9IFBhcmFtcy5nZXQoKTtcblxuICB2YXIgaW5wX3Jvd19kYXRhID0gaW5pX2lucF9yb3dfZGF0YS5yb3dfZGF0YTtcblxuICAvLyByZW1vdmUgemVybyB2YWx1ZXMgZnJvbVxuICB2YXIgcm93X3ZhbHVlcyA9IF8uZmlsdGVyKGlucF9yb3dfZGF0YSwgZnVuY3Rpb24obnVtKXtcbiAgICByZXR1cm4gbnVtLnZhbHVlICE9MDtcbiAgfSk7XG5cbiAgLy8gYmluZCBkYXRhIHRvIHRpbGVzXG4gIHZhciBjdXJfcm93X3RpbGVzID0gZDMuc2VsZWN0KHRoaXMpXG4gICAgLnNlbGVjdEFsbCgnLnRpbGUnKVxuICAgIC5kYXRhKHJvd192YWx1ZXMsIGZ1bmN0aW9uKGQpe1xuICAgICAgcmV0dXJuIGQuY29sX25hbWU7XG4gICAgfSk7XG5cbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gIC8vIEV4aXRcbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gIGlmIChkZWxheXMucnVuX3RyYW5zaXRpb24pe1xuICAgIGN1cl9yb3dfdGlsZXNcbiAgICAgIC5leGl0KClcbiAgICAgIC50cmFuc2l0aW9uKCkuZHVyYXRpb24oMzAwKVxuICAgICAgLmF0dHIoJ2ZpbGwtb3BhY2l0eScsMClcbiAgICAgIC5yZW1vdmUoKTtcbiAgfSBlbHNlIHtcbiAgICBjdXJfcm93X3RpbGVzXG4gICAgICAuZXhpdCgpXG4gICAgICAuYXR0cignZmlsbC1vcGFjaXR5JywwKVxuICAgICAgLnJlbW92ZSgpO1xuICB9XG5cbiAgaWYgKHBhcmFtcy5tYXRyaXgudGlsZV90eXBlID09ICd1cGRuJyl7XG5cbiAgICAvLyB2YWx1ZSBzcGxpdFxuICAgIHZhciByb3dfc3BsaXRfZGF0YSA9IF8uZmlsdGVyKGlucF9yb3dfZGF0YSwgZnVuY3Rpb24obnVtKXtcbiAgICAgIHJldHVybiBudW0udmFsdWVfdXAgIT0gMCB8fCBudW0udmFsdWVfZG4gIT0wIDtcbiAgICB9KTtcblxuICAgIC8vIHRpbGVfdXBcbiAgICB2YXIgY3VyX3RpbGVzX3VwID0gZDMuc2VsZWN0KHRoaXMpXG4gICAgICAuc2VsZWN0QWxsKCcudGlsZV91cCcpXG4gICAgICAuZGF0YShyb3dfc3BsaXRfZGF0YSwgZnVuY3Rpb24oZCl7cmV0dXJuIGQuY29sX25hbWU7fSk7XG5cbiAgICBpZiAoZGVsYXlzLnJ1bl90cmFuc2l0aW9uKXtcbiAgICAgIGN1cl90aWxlc191cFxuICAgICAgICAuZXhpdCgpXG4gICAgICAgIC50cmFuc2l0aW9uKCkuZHVyYXRpb24oMzAwKVxuICAgICAgICAuYXR0cignZmlsbCcsJzAnKVxuICAgICAgICAucmVtb3ZlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGN1cl90aWxlc191cFxuICAgICAgICAuZXhpdCgpXG4gICAgICAgIC5hdHRyKCdmaWxsJywwKVxuICAgICAgICAucmVtb3ZlKCk7XG4gICAgfVxuXG4gICAgLy8gdGlsZV9kblxuICAgIHZhciBjdXJfdGlsZXNfZG4gPSBkMy5zZWxlY3QodGhpcylcbiAgICAgIC5zZWxlY3RBbGwoJy50aWxlX2RuJylcbiAgICAgIC5kYXRhKHJvd19zcGxpdF9kYXRhLCBmdW5jdGlvbihkKXtyZXR1cm4gZC5jb2xfbmFtZTt9KTtcblxuICAgIGlmIChkZWxheXMucnVuX3RyYW5zaXRpb24pe1xuICAgICAgY3VyX3RpbGVzX2RuXG4gICAgICAgIC5leGl0KClcbiAgICAgICAgLnRyYW5zaXRpb24oKS5kdXJhdGlvbigzMDApXG4gICAgICAgIC5hdHRyKCdmaWxsJywwKVxuICAgICAgICAucmVtb3ZlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGN1cl90aWxlc19kblxuICAgICAgICAuZXhpdCgpXG4gICAgICAgIC5hdHRyKCdmaWxsJywwKVxuICAgICAgICAucmVtb3ZlKCk7XG4gICAgfVxuXG4gIH1cblxuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgLy8gVXBkYXRlXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gIC8vIHVwZGF0ZSB0aWxlcyBpbiB4IGRpcmVjdGlvblxuICB2YXIgdXBkYXRlX3Jvd190aWxlcyA9IGN1cl9yb3dfdGlsZXNcbiAgICAub24oJ21vdXNlb3ZlcicsIGZ1bmN0aW9uKHApIHtcbiAgICAgIC8vIGhpZ2hsaWdodCByb3cgLSBzZXQgdGV4dCB0byBhY3RpdmUgaWZcbiAgICAgIGQzLnNlbGVjdEFsbCgnLnJvd19sYWJlbF90ZXh0IHRleHQnKVxuICAgICAgICAuY2xhc3NlZCgnYWN0aXZlJywgZnVuY3Rpb24oZCkge1xuICAgICAgICAgIHJldHVybiBwLnJvd19uYW1lID09PSBkLm5hbWU7XG4gICAgICAgIH0pO1xuXG4gICAgICBkMy5zZWxlY3RBbGwoJy5jb2xfbGFiZWxfdGV4dCB0ZXh0JylcbiAgICAgICAgLmNsYXNzZWQoJ2FjdGl2ZScsIGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICByZXR1cm4gcC5jb2xfbmFtZSA9PT0gZC5uYW1lO1xuICAgICAgICB9KTtcbiAgICAgIGlmIChwYXJhbXMubWF0cml4LnNob3dfdGlsZV90b29sdGlwcyl7XG4gICAgICAgIHRpcC5zaG93KHApO1xuICAgICAgfVxuICAgIH0pXG4gICAgLm9uKCdtb3VzZW91dCcsIGZ1bmN0aW9uIG1vdXNlb3V0KCkge1xuICAgICAgZDMuc2VsZWN0QWxsKCd0ZXh0JykuY2xhc3NlZCgnYWN0aXZlJywgZmFsc2UpO1xuICAgICAgaWYgKHBhcmFtcy5tYXRyaXguc2hvd190aWxlX3Rvb2x0aXBzKXtcbiAgICAgICAgdGlwLmhpZGUoKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICB2YXIgY29sX25vZGVzX25hbWVzID0gcGFyYW1zLm5ldHdvcmtfZGF0YS5jb2xfbm9kZXNfbmFtZXM7XG5cbiAgaWYgKGRlbGF5cy5ydW5fdHJhbnNpdGlvbil7XG4gICAgdXBkYXRlX3Jvd190aWxlc1xuICAgICAgLnRyYW5zaXRpb24oKS5kZWxheShkZWxheXMudXBkYXRlKS5kdXJhdGlvbihkdXJhdGlvbilcbiAgICAgIC5hdHRyKCd3aWR0aCcsIHBhcmFtcy5tYXRyaXgucmVjdF93aWR0aClcbiAgICAgIC5hdHRyKCdoZWlnaHQnLCBwYXJhbXMubWF0cml4LnJlY3RfaGVpZ2h0KVxuICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsIGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgaWYgKF8uY29udGFpbnMoY29sX25vZGVzX25hbWVzLCBkLmNvbF9uYW1lKSl7XG4gICAgICAgICAgdmFyIGluc3RfY29sX2luZGV4ID0gXy5pbmRleE9mKGNvbF9ub2Rlc19uYW1lcywgZC5jb2xfbmFtZSk7XG4gICAgICAgICAgdmFyIHhfcG9zID0gcGFyYW1zLm1hdHJpeC54X3NjYWxlKGluc3RfY29sX2luZGV4KSArIDAuNSpwYXJhbXMudml6LmJvcmRlcl93aWR0aDtcbiAgICAgICAgICByZXR1cm4gJ3RyYW5zbGF0ZSgnICsgeF9wb3MgKyAnLDApJztcbiAgICAgICAgfVxuICAgICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgdXBkYXRlX3Jvd190aWxlc1xuICAgICAgLmF0dHIoJ3dpZHRoJywgcGFyYW1zLm1hdHJpeC5yZWN0X3dpZHRoKVxuICAgICAgLmF0dHIoJ2hlaWdodCcsIHBhcmFtcy5tYXRyaXgucmVjdF9oZWlnaHQpXG4gICAgICAuYXR0cigndHJhbnNmb3JtJywgZnVuY3Rpb24oZCkge1xuICAgICAgICBpZiAoXy5jb250YWlucyhjb2xfbm9kZXNfbmFtZXMsIGQuY29sX25hbWUpKXtcbiAgICAgICAgICB2YXIgaW5zdF9jb2xfaW5kZXggPSBfLmluZGV4T2YoY29sX25vZGVzX25hbWVzLCBkLmNvbF9uYW1lKTtcbiAgICAgICAgICB2YXIgeF9wb3MgPSBwYXJhbXMubWF0cml4Lnhfc2NhbGUoaW5zdF9jb2xfaW5kZXgpICsgMC41KnBhcmFtcy52aXouYm9yZGVyX3dpZHRoO1xuICAgICAgICAgIHJldHVybiAndHJhbnNsYXRlKCcgKyB4X3BvcyArICcsMCknO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgfVxuXG4gIGlmIChwYXJhbXMubWF0cml4LnRpbGVfdHlwZSA9PSAndXBkbicpe1xuXG4gICAgLy8gdXBkYXRlIHNwbGl0IHRpbGVzX3VwXG4gICAgdmFyIHVwZGF0ZV90aWxlc191cCA9IGN1cl90aWxlc191cFxuICAgICAgLm9uKCdtb3VzZW92ZXInLCBmdW5jdGlvbihwKSB7XG4gICAgICAgIC8vIGhpZ2hsaWdodCByb3cgLSBzZXQgdGV4dCB0byBhY3RpdmUgaWZcbiAgICAgICAgZDMuc2VsZWN0QWxsKCcucm93X2xhYmVsX3RleHQgdGV4dCcpXG4gICAgICAgICAgLmNsYXNzZWQoJ2FjdGl2ZScsIGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgIHJldHVybiBwLnJvd19uYW1lID09PSBkLm5hbWU7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgZDMuc2VsZWN0QWxsKCcuY29sX2xhYmVsX3RleHQgdGV4dCcpXG4gICAgICAgICAgLmNsYXNzZWQoJ2FjdGl2ZScsIGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgIHJldHVybiBwLmNvbF9uYW1lID09PSBkLm5hbWU7XG4gICAgICAgICAgfSk7XG4gICAgICAgIGlmIChwYXJhbXMubWF0cml4LnNob3dfdGlsZV90b29sdGlwcyl7XG4gICAgICAgICAgdGlwLnNob3cocCk7XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICAub24oJ21vdXNlb3V0JywgZnVuY3Rpb24gbW91c2VvdXQoKSB7XG4gICAgICAgIGQzLnNlbGVjdEFsbCgndGV4dCcpLmNsYXNzZWQoJ2FjdGl2ZScsIGZhbHNlKTtcbiAgICAgICAgaWYgKHBhcmFtcy5tYXRyaXguc2hvd190aWxlX3Rvb2x0aXBzKXtcbiAgICAgICAgICB0aXAuaGlkZSgpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgIGlmIChkZWxheXMucnVuX3RyYW5zaXRpb24pe1xuICAgICAgdXBkYXRlX3RpbGVzX3VwXG4gICAgICAgIC50cmFuc2l0aW9uKCkuZGVsYXkoZGVsYXlzLnVwZGF0ZSkuZHVyYXRpb24oZHVyYXRpb24pXG4gICAgICAgIC5hdHRyKCdkJywgZnVuY3Rpb24oZCkge1xuICAgICAgICAgIC8vIHVwIHRyaWFuZ2xlXG4gICAgICAgICAgdmFyIHN0YXJ0X3ggPSAwO1xuICAgICAgICAgIHZhciBmaW5hbF94ID0gcGFyYW1zLm1hdHJpeC54X3NjYWxlLnJhbmdlQmFuZCgpO1xuICAgICAgICAgIHZhciBzdGFydF95ID0gMDtcbiAgICAgICAgICB2YXIgZmluYWxfeSA9IHBhcmFtcy5tYXRyaXgueV9zY2FsZS5yYW5nZUJhbmQoKSAtIHBhcmFtcy5tYXRyaXgueV9zY2FsZS5yYW5nZUJhbmQoKSAvNjA7XG4gICAgICAgICAgdmFyIG91dHB1dF9zdHJpbmcgPSAnTScgKyBzdGFydF94ICsgJywnICsgc3RhcnRfeSArICcsIEwnICtcbiAgICAgICAgICBzdGFydF94ICsgJywgJyArIGZpbmFsX3kgKyAnLCBMJyArIGZpbmFsX3ggKyAnLDAgWic7XG4gICAgICAgICAgcmV0dXJuIG91dHB1dF9zdHJpbmc7XG4gICAgICAgIH0pXG4gICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCBmdW5jdGlvbihkKSB7XG4gICAgICAgICAgdmFyIHhfcG9zID0gcGFyYW1zLm1hdHJpeC54X3NjYWxlKGQucG9zX3gpICsgMC41KnBhcmFtcy52aXouYm9yZGVyX3dpZHRoO1xuICAgICAgICAgIHZhciB5X3BvcyA9IDAuNSpwYXJhbXMudml6LmJvcmRlcl93aWR0aC9wYXJhbXMudml6Lnpvb21fc3dpdGNoO1xuICAgICAgICAgIHJldHVybiAndHJhbnNsYXRlKCcgKyB4X3BvcyArICcsJyt5X3BvcysnKSc7XG4gICAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB1cGRhdGVfdGlsZXNfdXBcbiAgICAgICAgLmF0dHIoJ2QnLCBmdW5jdGlvbihkKSB7XG4gICAgICAgICAgLy8gdXAgdHJpYW5nbGVcbiAgICAgICAgICB2YXIgc3RhcnRfeCA9IDA7XG4gICAgICAgICAgdmFyIGZpbmFsX3ggPSBwYXJhbXMubWF0cml4Lnhfc2NhbGUucmFuZ2VCYW5kKCk7XG4gICAgICAgICAgdmFyIHN0YXJ0X3kgPSAwO1xuICAgICAgICAgIHZhciBmaW5hbF95ID0gcGFyYW1zLm1hdHJpeC55X3NjYWxlLnJhbmdlQmFuZCgpIC0gcGFyYW1zLm1hdHJpeC55X3NjYWxlLnJhbmdlQmFuZCgpIC82MDtcbiAgICAgICAgICB2YXIgb3V0cHV0X3N0cmluZyA9ICdNJyArIHN0YXJ0X3ggKyAnLCcgKyBzdGFydF95ICsgJywgTCcgK1xuICAgICAgICAgIHN0YXJ0X3ggKyAnLCAnICsgZmluYWxfeSArICcsIEwnICsgZmluYWxfeCArICcsMCBaJztcbiAgICAgICAgICByZXR1cm4gb3V0cHV0X3N0cmluZztcbiAgICAgICAgfSlcbiAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsIGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICB2YXIgeF9wb3MgPSBwYXJhbXMubWF0cml4Lnhfc2NhbGUoZC5wb3NfeCkgKyAwLjUqcGFyYW1zLnZpei5ib3JkZXJfd2lkdGg7XG4gICAgICAgICAgdmFyIHlfcG9zID0gMC41KnBhcmFtcy52aXouYm9yZGVyX3dpZHRoL3BhcmFtcy52aXouem9vbV9zd2l0Y2g7XG4gICAgICAgICAgcmV0dXJuICd0cmFuc2xhdGUoJyArIHhfcG9zICsgJywnK3lfcG9zKycpJztcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gdXBkYXRlIHNwbGl0IHRpbGVzX2RuXG4gICAgdmFyIHVwZGF0ZV90aWxlc19kbiA9IGN1cl90aWxlc19kblxuICAgICAgLm9uKCdtb3VzZW92ZXInLCBmdW5jdGlvbihwKSB7XG4gICAgICAgIC8vIGhpZ2hsaWdodCByb3cgLSBzZXQgdGV4dCB0byBhY3RpdmUgaWZcbiAgICAgICAgZDMuc2VsZWN0QWxsKCcucm93X2xhYmVsX3RleHQgdGV4dCcpXG4gICAgICAgICAgLmNsYXNzZWQoJ2FjdGl2ZScsIGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgIHJldHVybiBwLnJvd19uYW1lID09PSBkLm5hbWU7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgZDMuc2VsZWN0QWxsKCcuY29sX2xhYmVsX3RleHQgdGV4dCcpXG4gICAgICAgICAgLmNsYXNzZWQoJ2FjdGl2ZScsIGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgIHJldHVybiBwLmNvbF9uYW1lID09PSBkLm5hbWU7XG4gICAgICAgICAgfSk7XG4gICAgICAgIGlmIChwYXJhbXMubWF0cml4LnNob3dfdGlsZV90b29sdGlwcyl7XG4gICAgICAgICAgdGlwLnNob3cocCk7XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICAub24oJ21vdXNlb3V0JywgZnVuY3Rpb24gbW91c2VvdXQoKSB7XG4gICAgICAgIGQzLnNlbGVjdEFsbCgndGV4dCcpLmNsYXNzZWQoJ2FjdGl2ZScsIGZhbHNlKTtcbiAgICAgICAgaWYgKHBhcmFtcy5tYXRyaXguc2hvd190aWxlX3Rvb2x0aXBzKXtcbiAgICAgICAgICB0aXAuaGlkZSgpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgIGlmIChkZWxheXMucnVuX3RyYW5zaXRpb24pe1xuICAgICAgdXBkYXRlX3RpbGVzX2RuXG4gICAgICAgIC50cmFuc2l0aW9uKCkuZGVsYXkoZGVsYXlzLnVwZGF0ZSkuZHVyYXRpb24oZHVyYXRpb24pXG4gICAgICAgIC5hdHRyKCdkJywgZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgLy8gZG4gdHJpYW5nbGVcbiAgICAgICAgICAgIHZhciBzdGFydF94ID0gMDtcbiAgICAgICAgICAgIHZhciBmaW5hbF94ID0gcGFyYW1zLm1hdHJpeC54X3NjYWxlLnJhbmdlQmFuZCgpO1xuICAgICAgICAgICAgdmFyIHN0YXJ0X3kgPSBwYXJhbXMubWF0cml4Lnlfc2NhbGUucmFuZ2VCYW5kKCkgLSBwYXJhbXMubWF0cml4Lnlfc2NhbGUucmFuZ2VCYW5kKCkgLzYwO1xuICAgICAgICAgICAgdmFyIGZpbmFsX3kgPSBwYXJhbXMubWF0cml4Lnlfc2NhbGUucmFuZ2VCYW5kKCkgLSBwYXJhbXMubWF0cml4Lnlfc2NhbGUucmFuZ2VCYW5kKCkgLzYwO1xuICAgICAgICAgICAgdmFyIG91dHB1dF9zdHJpbmcgPSAnTScgKyBzdGFydF94ICsgJywgJyArIHN0YXJ0X3kgKyAnICwgICBMJyArXG4gICAgICAgICAgICBmaW5hbF94ICsgJywgJyArIGZpbmFsX3kgKyAnLCAgTCcgKyBmaW5hbF94ICsgJywwIFonO1xuICAgICAgICAgICAgcmV0dXJuIG91dHB1dF9zdHJpbmc7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgdmFyIHhfcG9zID0gcGFyYW1zLm1hdHJpeC54X3NjYWxlKGQucG9zX3gpICsgMC41KnBhcmFtcy52aXouYm9yZGVyX3dpZHRoO1xuICAgICAgICAgICAgdmFyIHlfcG9zID0gMC41KnBhcmFtcy52aXouYm9yZGVyX3dpZHRoL3BhcmFtcy52aXouem9vbV9zd2l0Y2g7XG4gICAgICAgICAgICByZXR1cm4gJ3RyYW5zbGF0ZSgnICsgeF9wb3MgKyAnLCcreV9wb3MrJyknO1xuICAgICAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB1cGRhdGVfdGlsZXNfZG5cbiAgICAgICAgLmF0dHIoJ2QnLCBmdW5jdGlvbihkKSB7XG4gICAgICAgICAgLy8gZG4gdHJpYW5nbGVcbiAgICAgICAgICB2YXIgc3RhcnRfeCA9IDA7XG4gICAgICAgICAgdmFyIGZpbmFsX3ggPSBwYXJhbXMubWF0cml4Lnhfc2NhbGUucmFuZ2VCYW5kKCk7XG4gICAgICAgICAgdmFyIHN0YXJ0X3kgPSBwYXJhbXMubWF0cml4Lnlfc2NhbGUucmFuZ2VCYW5kKCkgLSBwYXJhbXMubWF0cml4Lnlfc2NhbGUucmFuZ2VCYW5kKCkgLzYwO1xuICAgICAgICAgIHZhciBmaW5hbF95ID0gcGFyYW1zLm1hdHJpeC55X3NjYWxlLnJhbmdlQmFuZCgpIC0gcGFyYW1zLm1hdHJpeC55X3NjYWxlLnJhbmdlQmFuZCgpIC82MDtcbiAgICAgICAgICB2YXIgb3V0cHV0X3N0cmluZyA9ICdNJyArIHN0YXJ0X3ggKyAnLCAnICsgc3RhcnRfeSArICcgLCAgIEwnICtcbiAgICAgICAgICBmaW5hbF94ICsgJywgJyArIGZpbmFsX3kgKyAnLCAgTCcgKyBmaW5hbF94ICsgJywwIFonO1xuICAgICAgICAgIHJldHVybiBvdXRwdXRfc3RyaW5nO1xuICAgICAgICB9KVxuICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgZnVuY3Rpb24oZCkge1xuICAgICAgICAgIHZhciB4X3BvcyA9IHBhcmFtcy5tYXRyaXgueF9zY2FsZShkLnBvc194KSArIDAuNSpwYXJhbXMudml6LmJvcmRlcl93aWR0aDtcbiAgICAgICAgICB2YXIgeV9wb3MgPSAwLjUqcGFyYW1zLnZpei5ib3JkZXJfd2lkdGgvcGFyYW1zLnZpei56b29tX3N3aXRjaDtcbiAgICAgICAgICByZXR1cm4gJ3RyYW5zbGF0ZSgnICsgeF9wb3MgKyAnLCcreV9wb3MrJyknO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyByZW1vdmUgdGlsZXMgd2hlbiBzcGxpdHRpbmcgaXMgZG9uZVxuICAgIGN1cl9yb3dfdGlsZXNcbiAgICAgIC5zZWxlY3RBbGwoJy50aWxlJylcbiAgICAgIC5lYWNoKGZ1bmN0aW9uKGQpe1xuICAgICAgICBpZiAoIE1hdGguYWJzKGQudmFsdWVfdXApPjAgJiYgTWF0aC5hYnMoZC52YWx1ZV9kbik+MCApe1xuICAgICAgICAgIGQzLnNlbGVjdCh0aGlzKS5yZW1vdmUoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gIH1cblxuXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAvLyBFbnRlclxuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgLy8gZW50ZXIgbmV3IHRpbGVzXG4gIHZhciBuZXdfdGlsZXMgPSBjdXJfcm93X3RpbGVzXG4gICAgLmVudGVyKClcbiAgICAuYXBwZW5kKCdyZWN0JylcbiAgICAuYXR0cignY2xhc3MnLCAndGlsZSByb3dfdGlsZScpXG4gICAgLmF0dHIoJ3dpZHRoJywgcGFyYW1zLm1hdHJpeC5yZWN0X3dpZHRoKVxuICAgIC5hdHRyKCdoZWlnaHQnLCBwYXJhbXMubWF0cml4LnJlY3RfaGVpZ2h0KVxuICAgIC5vbignbW91c2VvdmVyJywgZnVuY3Rpb24ocCkge1xuICAgICAgLy8gaGlnaGxpZ2h0IHJvdyAtIHNldCB0ZXh0IHRvIGFjdGl2ZSBpZlxuICAgICAgZDMuc2VsZWN0QWxsKCcucm93X2xhYmVsX3RleHQgdGV4dCcpXG4gICAgICAgIC5jbGFzc2VkKCdhY3RpdmUnLCBmdW5jdGlvbihkKSB7XG4gICAgICAgICAgcmV0dXJuIHAucm93X25hbWUgPT09IGQubmFtZTtcbiAgICAgICAgfSk7XG5cbiAgICAgIGQzLnNlbGVjdEFsbCgnLmNvbF9sYWJlbF90ZXh0IHRleHQnKVxuICAgICAgICAuY2xhc3NlZCgnYWN0aXZlJywgZnVuY3Rpb24oZCkge1xuICAgICAgICAgIHJldHVybiBwLmNvbF9uYW1lID09PSBkLm5hbWU7XG4gICAgICAgIH0pO1xuICAgICAgaWYgKHBhcmFtcy5tYXRyaXguc2hvd190aWxlX3Rvb2x0aXBzKXtcbiAgICAgICAgdGlwLnNob3cocCk7XG4gICAgICB9XG4gICAgfSlcbiAgICAub24oJ21vdXNlb3V0JywgZnVuY3Rpb24gbW91c2VvdXQoKSB7XG4gICAgICBkMy5zZWxlY3RBbGwoJ3RleHQnKS5jbGFzc2VkKCdhY3RpdmUnLCBmYWxzZSk7XG4gICAgICBpZiAocGFyYW1zLm1hdHJpeC5zaG93X3RpbGVfdG9vbHRpcHMpe1xuICAgICAgICB0aXAuaGlkZSgpO1xuICAgICAgfVxuICAgIH0pXG4gICAgLmF0dHIoJ2ZpbGwtb3BhY2l0eScsMClcbiAgICAuYXR0cigndHJhbnNmb3JtJywgZnVuY3Rpb24oZCl7XG4gICAgICB2YXIgeF9wb3MgPSBwYXJhbXMubWF0cml4Lnhfc2NhbGUoZC5wb3NfeCkgKyAwLjUqcGFyYW1zLnZpei5ib3JkZXJfd2lkdGg7XG4gICAgICB2YXIgeV9wb3MgPSAwLjUqcGFyYW1zLnZpei5ib3JkZXJfd2lkdGgvcGFyYW1zLnZpei56b29tX3N3aXRjaDtcbiAgICAgIHJldHVybiAndHJhbnNsYXRlKCcreF9wb3MrJywnK3lfcG9zKycpJztcbiAgICB9KTtcblxuXG4gIGlmIChkZWxheXMucnVuX3RyYW5zaXRpb24pe1xuICAgIG5ld190aWxlc1xuICAgICAgLnRyYW5zaXRpb24oKS5kZWxheShkZWxheXMuZW50ZXIpLmR1cmF0aW9uKGR1cmF0aW9uKVxuICAgICAgLnN0eWxlKCdmaWxsJywgZnVuY3Rpb24oZCkge1xuICAgICAgICByZXR1cm4gZC52YWx1ZSA+IDAgPyBwYXJhbXMubWF0cml4LnRpbGVfY29sb3JzWzBdIDogcGFyYW1zLm1hdHJpeC50aWxlX2NvbG9yc1sxXTtcbiAgICAgIH0pXG4gICAgICAuYXR0cignZmlsbC1vcGFjaXR5JyxmdW5jdGlvbihkKXtcbiAgICAgICAgdmFyIG91dHB1dF9vcGFjaXR5ID0gcGFyYW1zLm1hdHJpeC5vcGFjaXR5X3NjYWxlKE1hdGguYWJzKGQudmFsdWUpKTtcbiAgICAgICAgcmV0dXJuIG91dHB1dF9vcGFjaXR5O1xuICAgICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgbmV3X3RpbGVzXG4gICAgICAuc3R5bGUoJ2ZpbGwnLCBmdW5jdGlvbihkKSB7XG4gICAgICAgIHJldHVybiBkLnZhbHVlID4gMCA/IHBhcmFtcy5tYXRyaXgudGlsZV9jb2xvcnNbMF0gOiBwYXJhbXMubWF0cml4LnRpbGVfY29sb3JzWzFdO1xuICAgICAgfSlcbiAgICAgIC5hdHRyKCdmaWxsLW9wYWNpdHknLGZ1bmN0aW9uKGQpe1xuICAgICAgICB2YXIgb3V0cHV0X29wYWNpdHkgPSBwYXJhbXMubWF0cml4Lm9wYWNpdHlfc2NhbGUoTWF0aC5hYnMoZC52YWx1ZSkpO1xuICAgICAgICByZXR1cm4gb3V0cHV0X29wYWNpdHk7XG4gICAgICB9KTtcbiAgfVxuXG4gIC8vIHJlbW92ZSBuZXcgdGlsZXMgaWYgbmVjZXNzYXJ5XG4gIG5ld190aWxlc1xuICAgIC5lYWNoKGZ1bmN0aW9uKGQpe1xuICAgICAgaWYgKE1hdGguYWJzKGQudmFsdWVfdXApID4gMCAmJiBNYXRoLmFicyhkLnZhbHVlX2RuKSA+IDApIHtcbiAgICAgICAgZDMuc2VsZWN0KHRoaXMpLnJlbW92ZSgpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgLy8gbmVlZCB0byBhZGQgc3BsaXQgdGlsZXMgdG8gZXhpc3Rpbmcgcm93c1xuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbn07XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiBzcmMvbmV0d29yay9lZXVfZXhpc3Rpbmdfcm93LmpzXG4gKiovIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFKQTtBQU9BO0FBREE7QUFDQTs7QUFQQTtBQWNBO0FBREE7QUFDQTs7OztBQWRBO0FBcUJBO0FBREE7QUFPQTtBQVBBO0FBQ0E7QUFZQTtBQUNBOztBQUVBO0FBQ0E7QUFEQTtBQUNBOztBQUpBO0FBVUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBT0E7QUFQQTtBQUNBOztBQWJBO0FBNEJBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQU9BO0FBUEE7QUE5QkE7QUFDQTs7Ozs7O0FBbENBOztBQXNGQTtBQUVBO0FBREE7QUFDQTtBQUdBO0FBRUE7QUFEQTtBQUdBO0FBQ0E7QUFEQTtBQVhBO0FBZ0JBO0FBQ0E7QUFDQTtBQURBO0FBRkE7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQURBO0FBTEE7QUFhQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFEQTtBQWhCQTtBQUNBO0FBd0JBO0FBQ0E7O0FBRUE7O0FBR0E7QUFFQTtBQURBO0FBQ0E7QUFHQTtBQUVBO0FBREE7QUFHQTtBQUNBO0FBREE7QUFYQTtBQWdCQTtBQUNBO0FBQ0E7QUFEQTtBQUZBO0FBQ0E7QUFNQTtBQUNBOztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQVJBO0FBV0E7QUFDQTtBQUNBO0FBSEE7QUFiQTtBQW1CQTs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFSQTtBQVdBO0FBQ0E7QUFDQTtBQUhBO0FBOUJBO0FBQ0E7O0FBM0JBOztBQW1FQTtBQUVBO0FBREE7QUFDQTtBQUdBO0FBRUE7QUFEQTtBQUdBO0FBQ0E7QUFEQTtBQVhBO0FBZ0JBO0FBQ0E7QUFDQTtBQURBO0FBRkE7QUFDQTtBQU1BO0FBQ0E7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBUkE7QUFXQTtBQUNBO0FBQ0E7QUFIQTtBQWJBO0FBbUJBOztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQVJBO0FBV0E7QUFDQTtBQUNBO0FBSEE7QUE5QkE7QUFDQTs7QUF4RkE7QUFnSUE7QUFDQTtBQURBO0FBREE7QUEvSEE7QUFDQTs7Ozs7QUF0SUE7O0FBd1JBO0FBRUE7QUFEQTtBQUNBO0FBR0E7QUFFQTtBQURBO0FBR0E7QUFDQTtBQURBO0FBWEE7QUFnQkE7QUFDQTtBQUNBO0FBREE7QUFGQTtBQVFBO0FBQ0E7QUFDQTtBQUhBO0FBQ0E7QUFNQTtBQUNBO0FBR0E7QUFEQTtBQUlBO0FBQ0E7QUFGQTtBQU5BO0FBV0E7QUFFQTtBQURBO0FBSUE7QUFDQTtBQUZBO0FBZkE7QUFDQTs7QUFwVEE7QUEyVUE7QUFDQTtBQURBO0FBREE7QUFDQTs7OztBQTNVQUFBQUE7Iiwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 48 */
/***/ function(module, exports) {

	eval("module.exports = function (old_params, params) {\n\n  // exit, update, enter\n\n  // check if exit or enter or both are required\n  var old_row_nodes = old_params.network_data.row_nodes;\n  var old_col_nodes = old_params.network_data.col_nodes;\n  var old_row = _.map(old_row_nodes, function (d) {\n    return d.name;\n  });\n  var old_col = _.map(old_col_nodes, function (d) {\n    return d.name;\n  });\n  var all_old_nodes = old_row.concat(old_col);\n\n  var row_nodes = params.network_data.row_nodes;\n  var col_nodes = params.network_data.col_nodes;\n  var row = _.map(row_nodes, function (d) {\n    return d.name;\n  });\n  var col = _.map(col_nodes, function (d) {\n    return d.name;\n  });\n  var all_nodes = row.concat(col);\n\n  var exit_nodes = _.difference(all_old_nodes, all_nodes).length;\n  var enter_nodes = _.difference(all_nodes, all_old_nodes).length;\n\n  var delays = {};\n\n  if (exit_nodes > 0) {\n    delays.update = 1000;\n  } else {\n    delays.update = 0;\n  }\n\n  if (enter_nodes > 0) {\n    delays.enter = 1000;\n  } else {\n    delays.enter = 0;\n  }\n\n  delays.enter = delays.enter + delays.update;\n\n  delays.run_transition = true;\n\n  var old_num_links = old_params.network_data.links.length;\n  var new_num_links = params.network_data.links.length;\n  var cutoff_num_links = 0.35 * params.matrix.def_large_matrix;\n\n  if (old_num_links > cutoff_num_links || new_num_links > cutoff_num_links) {\n    delays.run_transition = false;\n    delays.update = 0;\n    delays.enter = 0;\n  }\n\n  // reduce opacity during update\n  d3.select(params.viz.viz_svg).style('opacity', 0.70);\n\n  function finish_update() {\n    d3.select(params.viz.viz_svg).transition().duration(250).style('opacity', 1.0);\n  }\n  setTimeout(finish_update, delays.enter);\n\n  return delays;\n};//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDguanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL25ldHdvcmsvZGVmaW5lX2VudGVyX2V4aXRfZGVsYXlzLmpzPzU4M2EiXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihvbGRfcGFyYW1zLCBwYXJhbXMpIHtcblxuICAvLyBleGl0LCB1cGRhdGUsIGVudGVyXG5cbiAgLy8gY2hlY2sgaWYgZXhpdCBvciBlbnRlciBvciBib3RoIGFyZSByZXF1aXJlZFxuICB2YXIgb2xkX3Jvd19ub2RlcyA9IG9sZF9wYXJhbXMubmV0d29ya19kYXRhLnJvd19ub2RlcztcbiAgdmFyIG9sZF9jb2xfbm9kZXMgPSBvbGRfcGFyYW1zLm5ldHdvcmtfZGF0YS5jb2xfbm9kZXM7XG4gIHZhciBvbGRfcm93ID0gXy5tYXAob2xkX3Jvd19ub2RlcywgZnVuY3Rpb24oZCl7cmV0dXJuIGQubmFtZTt9KTtcbiAgdmFyIG9sZF9jb2wgPSBfLm1hcChvbGRfY29sX25vZGVzLCBmdW5jdGlvbihkKXtyZXR1cm4gZC5uYW1lO30pO1xuICB2YXIgYWxsX29sZF9ub2RlcyA9IG9sZF9yb3cuY29uY2F0KG9sZF9jb2wpO1xuXG4gIHZhciByb3dfbm9kZXMgPSBwYXJhbXMubmV0d29ya19kYXRhLnJvd19ub2RlcztcbiAgdmFyIGNvbF9ub2RlcyA9IHBhcmFtcy5uZXR3b3JrX2RhdGEuY29sX25vZGVzO1xuICB2YXIgcm93ID0gXy5tYXAocm93X25vZGVzLCBmdW5jdGlvbihkKXtyZXR1cm4gZC5uYW1lO30pO1xuICB2YXIgY29sID0gXy5tYXAoY29sX25vZGVzLCBmdW5jdGlvbihkKXtyZXR1cm4gZC5uYW1lO30pO1xuICB2YXIgYWxsX25vZGVzID0gcm93LmNvbmNhdChjb2wpO1xuXG4gIHZhciBleGl0X25vZGVzICA9IF8uZGlmZmVyZW5jZSggYWxsX29sZF9ub2RlcywgYWxsX25vZGVzICkubGVuZ3RoO1xuICB2YXIgZW50ZXJfbm9kZXMgPSBfLmRpZmZlcmVuY2UoIGFsbF9ub2RlcywgYWxsX29sZF9ub2RlcyApLmxlbmd0aDtcblxuICB2YXIgZGVsYXlzID0ge307XG5cbiAgaWYgKGV4aXRfbm9kZXMgPiAwKXtcbiAgICBkZWxheXMudXBkYXRlID0gMTAwMDtcbiAgfSBlbHNlIHtcbiAgICBkZWxheXMudXBkYXRlID0gMDtcbiAgfVxuXG4gIGlmIChlbnRlcl9ub2RlcyA+IDApe1xuICAgIGRlbGF5cy5lbnRlciA9IDEwMDA7XG4gIH0gZWxzZSB7XG4gICAgZGVsYXlzLmVudGVyID0gMDtcbiAgfVxuXG4gIGRlbGF5cy5lbnRlciAgPSBkZWxheXMuZW50ZXIgKyBkZWxheXMudXBkYXRlIDtcblxuICBkZWxheXMucnVuX3RyYW5zaXRpb24gPSB0cnVlO1xuXG4gIHZhciBvbGRfbnVtX2xpbmtzID0gb2xkX3BhcmFtcy5uZXR3b3JrX2RhdGEubGlua3MubGVuZ3RoO1xuICB2YXIgbmV3X251bV9saW5rcyA9IHBhcmFtcy5uZXR3b3JrX2RhdGEubGlua3MubGVuZ3RoO1xuICB2YXIgY3V0b2ZmX251bV9saW5rcyA9IDAuMzUqcGFyYW1zLm1hdHJpeC5kZWZfbGFyZ2VfbWF0cml4O1xuXG4gIGlmICggb2xkX251bV9saW5rcyA+IGN1dG9mZl9udW1fbGlua3MgfHwgbmV3X251bV9saW5rcyA+IGN1dG9mZl9udW1fbGlua3MgKXtcbiAgICBkZWxheXMucnVuX3RyYW5zaXRpb24gPSBmYWxzZTtcbiAgICBkZWxheXMudXBkYXRlID0gMDtcbiAgICBkZWxheXMuZW50ZXIgPSAwO1xuICB9XG5cbiAgLy8gcmVkdWNlIG9wYWNpdHkgZHVyaW5nIHVwZGF0ZVxuICBkMy5zZWxlY3QocGFyYW1zLnZpei52aXpfc3ZnKVxuICAgIC5zdHlsZSgnb3BhY2l0eScsMC43MCk7XG5cbiAgZnVuY3Rpb24gZmluaXNoX3VwZGF0ZSgpe1xuICAgIGQzLnNlbGVjdChwYXJhbXMudml6LnZpel9zdmcpXG4gICAgICAudHJhbnNpdGlvbigpLmR1cmF0aW9uKDI1MClcbiAgICAgIC5zdHlsZSgnb3BhY2l0eScsMS4wKTtcbiAgfVxuICBzZXRUaW1lb3V0KGZpbmlzaF91cGRhdGUsIGRlbGF5cy5lbnRlcik7XG5cbiAgcmV0dXJuIGRlbGF5cztcbn07XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiBzcmMvbmV0d29yay9kZWZpbmVfZW50ZXJfZXhpdF9kZWxheXMuanNcbiAqKi8iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBSEE7QUFDQTtBQUtBO0FBQ0E7QUFEQTtBQUdBO0FBSEE7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBQ0E7O0FBM0NBO0FBQ0E7QUFtREE7QUFDQTtBQURBO0FBS0E7QUFDQTtBQUNBO0FBM0RBIiwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 49 */
/***/ function(module, exports, __webpack_require__) {

	eval("var Params = __webpack_require__(1);\n/* Represents sidebar with controls.\n */\nmodule.exports = function (viz) {\n  var params = Params.get();\n\n  var row_order_controls = '' + '<div class=\"viz_medium_text\">Row Order</div>' + ' <div class=\"btn-group toggle_col_order\" data-toggle=\"buttons\">' + '   <label class=\"btn btn-primary active order_name\" name=\"clust_row\">' + '     <input type=\"radio\" name=\"options\" autocomplete=\"off\" checked > Cluster' + '   </label>' + '   <label class=\"btn btn-primary order_name\"  name=\"rank_row\">' + '     <input type=\"radio\" name=\"options\" autocomplete=\"off\"> Rank' + '   </label>' + '</div>';\n\n  var col_order_controls = '<div class=\"viz_medium_text\">Column Order</div>' + '<div class=\"btn-group toggle_row_order\" data-toggle=\"buttons\" >' + '<label class=\"btn btn-primary active order_name\" name=\"clust_col\">' + '<input type=\"radio\" name=\"options\" autocomplete=\"off\" checked > Cluster' + '</label>' + '<label class=\"btn btn-primary order_name\" name=\"rank_col\">' + '<input type=\"radio\" name=\"options\" autocomplete=\"off\" > Rank' + '</label>' + '</div>';\n\n  var search_controls = '<div id=\"gene_search_container\" class=\"row\">' + '<input id=\"gene_search_box\" type=\"text\" class=\"form-control\" placeholder=\"Input Gene\">' + '<div id=\"gene_search_button\" class=\"btn-group\" data-toggle=\"buttons\" >' + '<label id=\"submit_gene_button\" class=\"btn btn-primary active\">' + '<input type=\"radio\" name=\"options\" id=\"\" autocomplete=\"off\" checked > Search' + '</label>' + '</div>' + '</div>';\n\n  var colorbar_sliders = '<p class=\"viz_medium_text\">Row Group Size</p>' + '<div id=\"slider_row\"></div>' + '<p class=\"viz_medium_text\">Column Group Size</p>' + '<div id=\"slider_col\"></div>';\n\n  var N_row_sum = '<div class=\"viz_medium_text N_row_sum\">Top rows: all rows </div>' + '<div class=\"slider_filter slider_N_row_sum\"></div>';\n\n  var sidebar = d3.select(params.root).append('div').attr('class', params.sidebar.sidebar_class).style('margin-left', '10px').style('float', 'left');\n\n  sidebar.append('div').html(row_order_controls);\n\n  sidebar.append('div').html(col_order_controls);\n\n  sidebar.append('div').html(search_controls);\n\n  sidebar.append('div').html(colorbar_sliders);\n\n  sidebar.append('div').html(N_row_sum);\n\n  // 1. Recreate sidebar in JavaScript from HTML.\n  // 2. Rename all IDs to classes.\n  //    Don't forget load_clustergram.js\n  // 3. Move behavior in load_clustergram.js to sidebar.js\n  //    Example of advanced behavior:\n  //\n  //    if (params.use_controls) {\n  //       sidebar.select(params.root).append('div').....\n};undefined\n//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDkuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL3NpZGViYXIuanM/ODUxZiJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgUGFyYW1zID0gcmVxdWlyZSgnLi9wYXJhbXMnKTtcbi8qIFJlcHJlc2VudHMgc2lkZWJhciB3aXRoIGNvbnRyb2xzLlxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHZpeikge1xuICB2YXIgcGFyYW1zID0gUGFyYW1zLmdldCgpO1xuXG4gIHZhciByb3dfb3JkZXJfY29udHJvbHMgPSAnJyArXG4gICAgJzxkaXYgY2xhc3M9XCJ2aXpfbWVkaXVtX3RleHRcIj5Sb3cgT3JkZXI8L2Rpdj4nICtcbiAgICAnIDxkaXYgY2xhc3M9XCJidG4tZ3JvdXAgdG9nZ2xlX2NvbF9vcmRlclwiIGRhdGEtdG9nZ2xlPVwiYnV0dG9uc1wiPicgK1xuICAgICcgICA8bGFiZWwgY2xhc3M9XCJidG4gYnRuLXByaW1hcnkgYWN0aXZlIG9yZGVyX25hbWVcIiBuYW1lPVwiY2x1c3Rfcm93XCI+JyArXG4gICAgJyAgICAgPGlucHV0IHR5cGU9XCJyYWRpb1wiIG5hbWU9XCJvcHRpb25zXCIgYXV0b2NvbXBsZXRlPVwib2ZmXCIgY2hlY2tlZCA+IENsdXN0ZXInICtcbiAgICAnICAgPC9sYWJlbD4nICtcbiAgICAnICAgPGxhYmVsIGNsYXNzPVwiYnRuIGJ0bi1wcmltYXJ5IG9yZGVyX25hbWVcIiAgbmFtZT1cInJhbmtfcm93XCI+JyArXG4gICAgJyAgICAgPGlucHV0IHR5cGU9XCJyYWRpb1wiIG5hbWU9XCJvcHRpb25zXCIgYXV0b2NvbXBsZXRlPVwib2ZmXCI+IFJhbmsnICtcbiAgICAnICAgPC9sYWJlbD4nICtcbiAgICAnPC9kaXY+JztcblxuXG4gIHZhciBjb2xfb3JkZXJfY29udHJvbHMgPSAnPGRpdiBjbGFzcz1cInZpel9tZWRpdW1fdGV4dFwiPkNvbHVtbiBPcmRlcjwvZGl2PicgK1xuICAgICc8ZGl2IGNsYXNzPVwiYnRuLWdyb3VwIHRvZ2dsZV9yb3dfb3JkZXJcIiBkYXRhLXRvZ2dsZT1cImJ1dHRvbnNcIiA+JyArXG4gICAgICAnPGxhYmVsIGNsYXNzPVwiYnRuIGJ0bi1wcmltYXJ5IGFjdGl2ZSBvcmRlcl9uYW1lXCIgbmFtZT1cImNsdXN0X2NvbFwiPicgK1xuICAgICAgICAnPGlucHV0IHR5cGU9XCJyYWRpb1wiIG5hbWU9XCJvcHRpb25zXCIgYXV0b2NvbXBsZXRlPVwib2ZmXCIgY2hlY2tlZCA+IENsdXN0ZXInICtcbiAgICAgICc8L2xhYmVsPicgK1xuICAgICAgJzxsYWJlbCBjbGFzcz1cImJ0biBidG4tcHJpbWFyeSBvcmRlcl9uYW1lXCIgbmFtZT1cInJhbmtfY29sXCI+JyArXG4gICAgICAgICc8aW5wdXQgdHlwZT1cInJhZGlvXCIgbmFtZT1cIm9wdGlvbnNcIiBhdXRvY29tcGxldGU9XCJvZmZcIiA+IFJhbmsnICtcbiAgICAgICc8L2xhYmVsPicgK1xuICAgICc8L2Rpdj4nO1xuXG4gIHZhciBzZWFyY2hfY29udHJvbHMgPSAnPGRpdiBpZD1cImdlbmVfc2VhcmNoX2NvbnRhaW5lclwiIGNsYXNzPVwicm93XCI+JyArXG4gICAgICAgICc8aW5wdXQgaWQ9XCJnZW5lX3NlYXJjaF9ib3hcIiB0eXBlPVwidGV4dFwiIGNsYXNzPVwiZm9ybS1jb250cm9sXCIgcGxhY2Vob2xkZXI9XCJJbnB1dCBHZW5lXCI+JyArXG4gICAgICAgICc8ZGl2IGlkPVwiZ2VuZV9zZWFyY2hfYnV0dG9uXCIgY2xhc3M9XCJidG4tZ3JvdXBcIiBkYXRhLXRvZ2dsZT1cImJ1dHRvbnNcIiA+JyArXG4gICAgICAgICAgJzxsYWJlbCBpZD1cInN1Ym1pdF9nZW5lX2J1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1wcmltYXJ5IGFjdGl2ZVwiPicgK1xuICAgICAgICAgICAgJzxpbnB1dCB0eXBlPVwicmFkaW9cIiBuYW1lPVwib3B0aW9uc1wiIGlkPVwiXCIgYXV0b2NvbXBsZXRlPVwib2ZmXCIgY2hlY2tlZCA+IFNlYXJjaCcgK1xuICAgICAgICAgICc8L2xhYmVsPicgK1xuICAgICAgICAnPC9kaXY+JyArXG4gICAgJzwvZGl2Pic7XG5cbiAgdmFyIGNvbG9yYmFyX3NsaWRlcnMgPSAnPHAgY2xhc3M9XCJ2aXpfbWVkaXVtX3RleHRcIj5Sb3cgR3JvdXAgU2l6ZTwvcD4nICtcbiAgICAnPGRpdiBpZD1cInNsaWRlcl9yb3dcIj48L2Rpdj4nICtcbiAgICAnPHAgY2xhc3M9XCJ2aXpfbWVkaXVtX3RleHRcIj5Db2x1bW4gR3JvdXAgU2l6ZTwvcD4nICtcbiAgICAnPGRpdiBpZD1cInNsaWRlcl9jb2xcIj48L2Rpdj4nO1xuXG4gIHZhciBOX3Jvd19zdW0gPSAnPGRpdiBjbGFzcz1cInZpel9tZWRpdW1fdGV4dCBOX3Jvd19zdW1cIj5Ub3Agcm93czogYWxsIHJvd3MgPC9kaXY+JyArXG4gICAgJzxkaXYgY2xhc3M9XCJzbGlkZXJfZmlsdGVyIHNsaWRlcl9OX3Jvd19zdW1cIj48L2Rpdj4nO1xuXG4gIHZhciBzaWRlYmFyID0gZDNcbiAgICAuc2VsZWN0KHBhcmFtcy5yb290KVxuICAgIC5hcHBlbmQoJ2RpdicpXG4gICAgLmF0dHIoJ2NsYXNzJywgcGFyYW1zLnNpZGViYXIuc2lkZWJhcl9jbGFzcyApXG4gICAgLnN0eWxlKCdtYXJnaW4tbGVmdCcsJzEwcHgnKVxuICAgIC5zdHlsZSgnZmxvYXQnLCAnbGVmdCcpO1xuXG4gIHNpZGViYXJcbiAgICAuYXBwZW5kKCdkaXYnKVxuICAgIC5odG1sKHJvd19vcmRlcl9jb250cm9scyk7XG5cbiAgc2lkZWJhclxuICAgIC5hcHBlbmQoJ2RpdicpXG4gICAgLmh0bWwoY29sX29yZGVyX2NvbnRyb2xzKTtcblxuICBzaWRlYmFyXG4gICAgLmFwcGVuZCgnZGl2JylcbiAgICAuaHRtbChzZWFyY2hfY29udHJvbHMpO1xuXG4gIHNpZGViYXJcbiAgICAuYXBwZW5kKCdkaXYnKVxuICAgIC5odG1sKGNvbG9yYmFyX3NsaWRlcnMpO1xuXG4gIHNpZGViYXJcbiAgICAuYXBwZW5kKCdkaXYnKVxuICAgIC5odG1sKE5fcm93X3N1bSk7XG5cblxuICAvLyAxLiBSZWNyZWF0ZSBzaWRlYmFyIGluIEphdmFTY3JpcHQgZnJvbSBIVE1MLlxuICAvLyAyLiBSZW5hbWUgYWxsIElEcyB0byBjbGFzc2VzLlxuICAvLyAgICBEb24ndCBmb3JnZXQgbG9hZF9jbHVzdGVyZ3JhbS5qc1xuICAvLyAzLiBNb3ZlIGJlaGF2aW9yIGluIGxvYWRfY2x1c3RlcmdyYW0uanMgdG8gc2lkZWJhci5qc1xuICAvLyAgICBFeGFtcGxlIG9mIGFkdmFuY2VkIGJlaGF2aW9yOlxuICAvL1xuICAvLyAgICBpZiAocGFyYW1zLnVzZV9jb250cm9scykge1xuICAvLyAgICAgICBzaWRlYmFyLnNlbGVjdChwYXJhbXMucm9vdCkuYXBwZW5kKCdkaXYnKS4uLi4uXG5cbn07XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiBzcmMvc2lkZWJhci5qc1xuICoqLyJdLCJtYXBwaW5ncyI6IkFBQUE7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFXQTtBQUNBO0FBU0E7QUFDQTtBQVFBO0FBQ0E7QUFJQTtBQUNBO0FBRUE7QUFDQTtBQU1BO0FBQ0E7QUFHQTtBQUNBO0FBR0E7QUFDQTtBQUdBO0FBQ0E7QUFHQTtBQUNBOzs7Ozs7Ozs7QUFsRUFBQUFBOyIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ },
/* 50 */
/***/ function(module, exports, __webpack_require__) {

	eval("var Params = __webpack_require__(1);\n\nmodule.exports = function (inst_cat) {\n  var params = Params.get();\n  // change the category\n  params.current_col_cat = inst_cat;\n  console.log('changed category to ' + String(inst_cat));\n};//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL25ldHdvcmsvY2hhbmdlX2NhdGVnb3J5LmpzP2E2NTgiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIFBhcmFtcyA9IHJlcXVpcmUoJy4uL3BhcmFtcycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGluc3RfY2F0KSB7XG4gIHZhciBwYXJhbXMgPSBQYXJhbXMuZ2V0KCk7XG4gIC8vIGNoYW5nZSB0aGUgY2F0ZWdvcnlcbiAgcGFyYW1zLmN1cnJlbnRfY29sX2NhdCA9IGluc3RfY2F0O1xuICBjb25zb2xlLmxvZygnY2hhbmdlZCBjYXRlZ29yeSB0byAnICsgU3RyaW5nKGluc3RfY2F0KSk7XG59O1xuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogc3JjL25ldHdvcmsvY2hhbmdlX2NhdGVnb3J5LmpzXG4gKiovIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTs7QUFEQTtBQUlBO0FBSkEiLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 51 */
/***/ function(module, exports, __webpack_require__) {

	eval("var Params = __webpack_require__(1);\nvar utils = __webpack_require__(5);\nvar ini_sliders = __webpack_require__(52);\n\nmodule.exports = function (filter_type) {\n  var params = Params.get();\n\n  // filter\n  ////////////////////\n\n  var views = params.network_data.views;\n  var all_views = _.filter(views, function (d) {\n    return utils.has(d, filter_type);\n  });\n\n  var cgm = this;\n\n  // // filter for column category if necessary\n  // if ( utils.has(all_views[0],'col_cat') ) {\n\n  //   // get views with current_col_cat\n  //   all_views = _.filter(all_views, function(d){\n  //     if (d.col_cat == params.current_col_cat){\n  //       return d;\n  //     }\n  //   })\n  // }\n\n  console.log('found ' + String(all_views.length) + ' views for ' + filter_type);\n\n  var inst_max = all_views.length - 1;\n\n  // make dictionary\n  var N_dict = {};\n\n  // filters\n  var all_filt = _.pluck(params.network_data.views, 'N_row_sum');\n\n  all_filt.forEach(function (d) {\n    var tmp_index = _.indexOf(all_filt, d);\n\n    N_dict[tmp_index] = d;\n  });\n\n  var update_network = this.update_network;\n\n  $('.slider_' + filter_type).slider({\n    value: 0,\n    min: 0,\n    max: inst_max,\n    step: 1,\n    stop: function (event, ui) {\n\n      // get value\n      var inst_index = $('.slider_' + filter_type).slider(\"value\");\n\n      var inst_top = N_dict[inst_index];\n\n      var change_view = { 'N_row_sum': inst_top };\n      var filter_name = 'N_row_sum';\n\n      var viz_svg = cgm.params.viz.viz_svg;\n\n      d3.select(viz_svg).style('opacity', 0.70);\n\n      d3.select('.' + filter_type).text('Top rows: ' + inst_top + ' rows');\n\n      // $('.slider_filter').slider('disable');\n      d3.selectAll('.btn').attr('disabled', true);\n      d3.selectAll('.category_section').on('click', '').select('text').style('opacity', 0.5);\n\n      cgm.update_network(change_view);\n\n      ini_sliders(cgm);\n\n      function enable_slider() {\n        // $('.slider_filter').slider('enable');\n        d3.selectAll('.btn').attr('disabled', null);\n        // d3.selectAll('.category_section')\n        //   .on('click', category_key_click)\n        //   .select('text')\n        //   .style('opacity',1);\n      }\n      setTimeout(enable_slider, 2500);\n    }\n  });\n};//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTEuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL2ZpbHRlcnMvc2V0X3VwX05fZmlsdGVycy5qcz8wNmY0Il0sInNvdXJjZXNDb250ZW50IjpbInZhciBQYXJhbXMgPSByZXF1aXJlKCcuLi9wYXJhbXMnKTtcbnZhciB1dGlscyA9IHJlcXVpcmUoJy4uL3V0aWxzJyk7XG52YXIgaW5pX3NsaWRlcnMgPSByZXF1aXJlKCcuL2luaV9zbGlkZXJzJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oZmlsdGVyX3R5cGUpIHtcbiAgdmFyIHBhcmFtcyA9IFBhcmFtcy5nZXQoKTtcblxuICAvLyBmaWx0ZXJcbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICB2YXIgdmlld3MgPSBwYXJhbXMubmV0d29ya19kYXRhLnZpZXdzO1xuICB2YXIgYWxsX3ZpZXdzID0gXy5maWx0ZXIodmlld3MsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIHV0aWxzLmhhcyhkLGZpbHRlcl90eXBlKTsgfSk7XG5cbiAgdmFyIGNnbSA9IHRoaXM7XG5cbiAgLy8gLy8gZmlsdGVyIGZvciBjb2x1bW4gY2F0ZWdvcnkgaWYgbmVjZXNzYXJ5XG4gIC8vIGlmICggdXRpbHMuaGFzKGFsbF92aWV3c1swXSwnY29sX2NhdCcpICkge1xuXG4gIC8vICAgLy8gZ2V0IHZpZXdzIHdpdGggY3VycmVudF9jb2xfY2F0XG4gIC8vICAgYWxsX3ZpZXdzID0gXy5maWx0ZXIoYWxsX3ZpZXdzLCBmdW5jdGlvbihkKXtcbiAgLy8gICAgIGlmIChkLmNvbF9jYXQgPT0gcGFyYW1zLmN1cnJlbnRfY29sX2NhdCl7XG4gIC8vICAgICAgIHJldHVybiBkO1xuICAvLyAgICAgfVxuICAvLyAgIH0pXG4gIC8vIH1cblxuICBjb25zb2xlLmxvZyggJ2ZvdW5kICcgKyBTdHJpbmcoYWxsX3ZpZXdzLmxlbmd0aCkgKycgdmlld3MgZm9yICcgKyBmaWx0ZXJfdHlwZSApO1xuXG4gIHZhciBpbnN0X21heCA9IGFsbF92aWV3cy5sZW5ndGggLSAxO1xuXG4gIC8vIG1ha2UgZGljdGlvbmFyeVxuICB2YXIgTl9kaWN0ID0ge307XG5cbiAgLy8gZmlsdGVyc1xuICB2YXIgYWxsX2ZpbHQgPSBfLnBsdWNrKCBwYXJhbXMubmV0d29ya19kYXRhLnZpZXdzLCdOX3Jvd19zdW0nKTtcblxuICBhbGxfZmlsdC5mb3JFYWNoKGZ1bmN0aW9uKGQpe1xuICAgIHZhciB0bXBfaW5kZXggPSBfLmluZGV4T2YoYWxsX2ZpbHQsIGQpO1xuXG4gICAgTl9kaWN0W3RtcF9pbmRleF0gPSBkO1xuXG4gIH0pO1xuXG4gIHZhciB1cGRhdGVfbmV0d29yayA9IHRoaXMudXBkYXRlX25ldHdvcms7XG5cblxuICAkKCAnLnNsaWRlcl8nK2ZpbHRlcl90eXBlICkuc2xpZGVyKHtcbiAgICB2YWx1ZTowLFxuICAgIG1pbjogMCxcbiAgICBtYXg6IGluc3RfbWF4LFxuICAgIHN0ZXA6IDEsXG4gICAgc3RvcDogZnVuY3Rpb24oIGV2ZW50LCB1aSApIHtcblxuICAgICAgLy8gZ2V0IHZhbHVlXG4gICAgICB2YXIgaW5zdF9pbmRleCA9ICQoICcuc2xpZGVyXycrZmlsdGVyX3R5cGUgKS5zbGlkZXIoIFwidmFsdWVcIiApO1xuXG4gICAgICB2YXIgaW5zdF90b3AgPSBOX2RpY3RbaW5zdF9pbmRleF07XG5cbiAgICAgIHZhciBjaGFuZ2VfdmlldyA9IHsnTl9yb3dfc3VtJzppbnN0X3RvcH07XG4gICAgICB2YXIgZmlsdGVyX25hbWUgPSAnTl9yb3dfc3VtJztcblxuICAgICAgdmFyIHZpel9zdmcgPSBjZ20ucGFyYW1zLnZpei52aXpfc3ZnO1xuXG4gICAgICBkMy5zZWxlY3Qodml6X3N2Zykuc3R5bGUoJ29wYWNpdHknLDAuNzApO1xuXG4gICAgICBkMy5zZWxlY3QoJy4nK2ZpbHRlcl90eXBlKS50ZXh0KCdUb3Agcm93czogJytpbnN0X3RvcCsnIHJvd3MnKTtcblxuICAgICAgLy8gJCgnLnNsaWRlcl9maWx0ZXInKS5zbGlkZXIoJ2Rpc2FibGUnKTtcbiAgICAgIGQzLnNlbGVjdEFsbCgnLmJ0bicpLmF0dHIoJ2Rpc2FibGVkJyx0cnVlKTtcbiAgICAgIGQzLnNlbGVjdEFsbCgnLmNhdGVnb3J5X3NlY3Rpb24nKVxuICAgICAgICAub24oJ2NsaWNrJywgJycpXG4gICAgICAgIC5zZWxlY3QoJ3RleHQnKVxuICAgICAgICAuc3R5bGUoJ29wYWNpdHknLDAuNSk7XG5cblxuICAgICAgY2dtLnVwZGF0ZV9uZXR3b3JrKGNoYW5nZV92aWV3KTtcblxuICAgICAgaW5pX3NsaWRlcnMoY2dtKTtcblxuICAgICAgZnVuY3Rpb24gZW5hYmxlX3NsaWRlcigpe1xuICAgICAgICAvLyAkKCcuc2xpZGVyX2ZpbHRlcicpLnNsaWRlcignZW5hYmxlJyk7XG4gICAgICAgIGQzLnNlbGVjdEFsbCgnLmJ0bicpLmF0dHIoJ2Rpc2FibGVkJyxudWxsKTtcbiAgICAgICAgLy8gZDMuc2VsZWN0QWxsKCcuY2F0ZWdvcnlfc2VjdGlvbicpXG4gICAgICAgIC8vICAgLm9uKCdjbGljaycsIGNhdGVnb3J5X2tleV9jbGljaylcbiAgICAgICAgLy8gICAuc2VsZWN0KCd0ZXh0JylcbiAgICAgICAgLy8gICAuc3R5bGUoJ29wYWNpdHknLDEpO1xuICAgICAgfVxuICAgICAgc2V0VGltZW91dChlbmFibGVfc2xpZGVyLCAyNTAwKTtcblxuICAgIH1cbiAgfSk7XG5cbn07XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiBzcmMvZmlsdGVycy9zZXRfdXBfTl9maWx0ZXJzLmpzXG4gKiovIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQUZBO0FBT0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUFWQTtBQUNBO0FBdUJBO0FBQ0E7O0FBekJBO0FBQ0E7O0FBREE7QUFDQTtBQStCQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBQ0E7QUFNQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBZkE7QUFrQkE7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7Ozs7O0FBRkE7QUFRQTtBQXBDQTtBQUxBO0FBMUNBIiwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 52 */
/***/ function(module, exports) {

	eval("module.exports = function (cgm) {\n\n  // col groups\n  $(\"#slider_col\").slider({\n    value: 0.5,\n    min: 0,\n    max: 1,\n    step: 0.1,\n    slide: function (event, ui) {\n      $(\"#amount\").val(\"$\" + ui.value);\n      var inst_index = ui.value * 10;\n      cgm.change_groups('col', inst_index);\n    }\n  });\n  $(\"#amount\").val(\"$\" + $(\"#slider_col\").slider(\"value\"));\n\n  // row groups\n  $(\"#slider_row\").slider({\n    value: 0.5,\n    min: 0,\n    max: 1,\n    step: 0.1,\n    slide: function (event, ui) {\n      $(\"#amount\").val(\"$\" + ui.value);\n      var inst_index = ui.value * 10;\n      cgm.change_groups('row', inst_index);\n    }\n  });\n  $(\"#amount\").val(\"$\" + $(\"#slider_row\").slider(\"value\"));\n\n  // opacity scale\n  $(\"#slider_opacity\").slider({\n    value: 0.2,\n    min: 0.0,\n    max: 1.0,\n    step: 0.1,\n    slide: function (event, ui) {\n      $(\"#amount\").val(\"$\" + ui.value);\n      var inst_index = ui.value;\n      cgm.opacity_slider(inst_index);\n    }\n  });\n  $(\"#amount\").val(\"$\" + $(\"#slider_opacity\").slider(\"value\"));\n\n  $('#gene_search_box').autocomplete({\n    source: cgm.get_genes()\n  });\n\n  // submit genes button\n  $('#gene_search_box').keyup(function (e) {\n    if (e.keyCode === 13) {\n      var search_gene = $('#gene_search_box').val();\n      cgm.find_gene(search_gene);\n    }\n  });\n\n  $('#submit_gene_button').off().click(function () {\n    var gene = $('#gene_search_box').val();\n    cgm.find_gene(gene);\n  });\n\n  $('.toggle_row_order .btn').off().click(function (evt) {\n    var order_id = $(evt.target).attr('name').split('_')[0];\n    console.log('toggle_row_order');\n    cgm.reorder(order_id, 'row');\n  });\n\n  $('.toggle_col_order .btn').off().click(function (evt) {\n    var order_id = $(evt.target).attr('name').split('_')[0];\n    console.log('toggle_col_order');\n    cgm.reorder(order_id, 'col');\n  });\n};//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTIuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL2ZpbHRlcnMvaW5pX3NsaWRlcnMuanM/OGQxZSJdLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGNnbSl7XG5cbiAgLy8gY29sIGdyb3Vwc1xuICAkKCBcIiNzbGlkZXJfY29sXCIgKS5zbGlkZXIoe1xuICAgIHZhbHVlOjAuNSxcbiAgICBtaW46IDAsXG4gICAgbWF4OiAxLFxuICAgIHN0ZXA6IDAuMSxcbiAgICBzbGlkZTogZnVuY3Rpb24oIGV2ZW50LCB1aSApIHtcbiAgICAgICQoIFwiI2Ftb3VudFwiICkudmFsKCBcIiRcIiArIHVpLnZhbHVlICk7XG4gICAgICB2YXIgaW5zdF9pbmRleCA9IHVpLnZhbHVlKjEwO1xuICAgICAgY2dtLmNoYW5nZV9ncm91cHMoJ2NvbCcsaW5zdF9pbmRleCk7XG4gICAgfVxuICB9KTtcbiAgJCggXCIjYW1vdW50XCIgKS52YWwoIFwiJFwiICsgJCggXCIjc2xpZGVyX2NvbFwiICkuc2xpZGVyKCBcInZhbHVlXCIgKSApO1xuXG4gIC8vIHJvdyBncm91cHNcbiAgJCggXCIjc2xpZGVyX3Jvd1wiICkuc2xpZGVyKHtcbiAgICB2YWx1ZTowLjUsXG4gICAgbWluOiAwLFxuICAgIG1heDogMSxcbiAgICBzdGVwOiAwLjEsXG4gICAgc2xpZGU6IGZ1bmN0aW9uKCBldmVudCwgdWkgKSB7XG4gICAgICAkKCBcIiNhbW91bnRcIiApLnZhbCggXCIkXCIgKyB1aS52YWx1ZSApO1xuICAgICAgdmFyIGluc3RfaW5kZXggPSB1aS52YWx1ZSoxMDtcbiAgICAgIGNnbS5jaGFuZ2VfZ3JvdXBzKCdyb3cnLGluc3RfaW5kZXgpO1xuICAgIH1cbiAgfSk7XG4gICQoIFwiI2Ftb3VudFwiICkudmFsKCBcIiRcIiArICQoIFwiI3NsaWRlcl9yb3dcIiApLnNsaWRlciggXCJ2YWx1ZVwiICkgKTtcblxuICAvLyBvcGFjaXR5IHNjYWxlXG4gICQoIFwiI3NsaWRlcl9vcGFjaXR5XCIgKS5zbGlkZXIoe1xuICAgIHZhbHVlOjAuMixcbiAgICBtaW46IDAuMCxcbiAgICBtYXg6IDEuMCxcbiAgICBzdGVwOiAwLjEsXG4gICAgc2xpZGU6IGZ1bmN0aW9uKCBldmVudCwgdWkgKSB7XG4gICAgICAkKCBcIiNhbW91bnRcIiApLnZhbCggXCIkXCIgKyB1aS52YWx1ZSApO1xuICAgICAgdmFyIGluc3RfaW5kZXggPSB1aS52YWx1ZTtcbiAgICAgIGNnbS5vcGFjaXR5X3NsaWRlcihpbnN0X2luZGV4KTtcbiAgICB9XG4gIH0pO1xuICAkKCBcIiNhbW91bnRcIiApLnZhbCggXCIkXCIgKyAkKCBcIiNzbGlkZXJfb3BhY2l0eVwiICkuc2xpZGVyKCBcInZhbHVlXCIgKSApO1xuXG4gICQoJyNnZW5lX3NlYXJjaF9ib3gnKS5hdXRvY29tcGxldGUoe1xuICAgIHNvdXJjZTogY2dtLmdldF9nZW5lcygpXG4gIH0pO1xuXG4gIC8vIHN1Ym1pdCBnZW5lcyBidXR0b25cbiAgJCgnI2dlbmVfc2VhcmNoX2JveCcpLmtleXVwKGZ1bmN0aW9uKGUpIHtcbiAgICBpZiAoZS5rZXlDb2RlID09PSAxMykge1xuICAgICAgdmFyIHNlYXJjaF9nZW5lID0gJCgnI2dlbmVfc2VhcmNoX2JveCcpLnZhbCgpO1xuICAgICAgY2dtLmZpbmRfZ2VuZShzZWFyY2hfZ2VuZSk7XG4gICAgfVxuICB9KTtcblxuICAkKCcjc3VibWl0X2dlbmVfYnV0dG9uJykub2ZmKCkuY2xpY2soZnVuY3Rpb24oKSB7XG4gICAgdmFyIGdlbmUgPSAkKCcjZ2VuZV9zZWFyY2hfYm94JykudmFsKCk7XG4gICAgY2dtLmZpbmRfZ2VuZShnZW5lKTtcbiAgfSk7XG5cbiAgJCgnLnRvZ2dsZV9yb3dfb3JkZXIgLmJ0bicpLm9mZigpLmNsaWNrKGZ1bmN0aW9uKGV2dCkge1xuICAgIHZhciBvcmRlcl9pZCA9ICQoZXZ0LnRhcmdldCkuYXR0cignbmFtZScpLnNwbGl0KCdfJylbMF07XG4gICAgY29uc29sZS5sb2coJ3RvZ2dsZV9yb3dfb3JkZXInKTtcbiAgICBjZ20ucmVvcmRlcihvcmRlcl9pZCwncm93Jyk7XG4gIH0pO1xuXG4gICQoJy50b2dnbGVfY29sX29yZGVyIC5idG4nKS5vZmYoKS5jbGljayhmdW5jdGlvbihldnQpIHtcbiAgICB2YXIgb3JkZXJfaWQgPSAkKGV2dC50YXJnZXQpLmF0dHIoJ25hbWUnKS5zcGxpdCgnXycpWzBdO1xuICAgIGNvbnNvbGUubG9nKCd0b2dnbGVfY29sX29yZGVyJyk7XG4gICAgY2dtLnJlb3JkZXIob3JkZXJfaWQsJ2NvbCcpO1xuICB9KTtcblxufTtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIHNyYy9maWx0ZXJzL2luaV9zbGlkZXJzLmpzXG4gKiovIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBTEE7QUFXQTtBQUNBOztBQWZBO0FBa0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUxBO0FBV0E7QUFDQTs7QUE3QkE7QUFnQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBTEE7QUFXQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7O0FBN0NBO0FBa0RBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUZBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBbkVBIiwic291cmNlUm9vdCI6IiJ9");

/***/ }
/******/ ]);