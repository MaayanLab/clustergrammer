var Clustergrammer=function(t){function e(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){"use strict";function n(t){function e(){b.select(S.params.viz.viz_svg).style("opacity",.5);var t=500;this.params.viz.run_trans===!0&&(t=2500),setTimeout(r,t,this)}function r(t){s(t)}function n(t){f(this,t)}function z(t,e,r){p(this,t,e,r)}function k(){return y}function A(t,e){"sum"===e&&(e="rank"),"var"===e&&(e="rankvar"),w(this,e,t)}function E(){return x(this.params)}function N(t,e){h(this,t,e)}var M=o(t),S={};return S.params=a(M),S.config=M,S.params.zoom_behavior=b.behavior.zoom().scaleExtent([1,S.params.viz.square_zoom*S.params.viz.zoom_ratio.x]).on("zoom",function(){g(S)}),S.params.zoom_behavior.translate([S.params.viz.clust.margin.left,S.params.viz.clust.margin.top]),i(S),S.update_view=h,S.resize_viz=e,S.play_demo=l,S.ini_demo=c,S.filter_viz_using_nodes=u,S.filter_viz_using_names=d,S.update_cats=n,S.reset_cats=_,S.zoom=z,S.save_matrix=v,S.brush_crop_matrix=m,S.d3_tip_custom=k,S.reorder=A,S.export_matrix_string=E,S.update_view=N,S}var o=r(1),a=r(22),i=r(121),s=r(212),l=r(241),c=r(280),u=r(283),d=r(284),f=r(285),_=r(286),p=r(190),h=r(288),v=r(291),m=r(295),g=r(213),y=r(132),w=r(189),x=r(293),b=r(297);b.slider=r(298),t.exports=n},function(t,e,r){"use strict";var n=r(2),o=r(3),a=r(4),i=r(18),s=r(19),l=r(20),c=r(21);t.exports=function(t){var e=s(),r=n.extend(e,t);r.network_data=t.network_data;var u=": ";["row","col"].forEach(function(t){var e=r.network_data[t+"_nodes"]||[],n=c(e);e.forEach(function(e,o){e[t+"_index"]=o,n&&(r.super_labels=!0,r.super[t]=e.name.split(u)[0],e.name=e.name.split(u)[1]),e.name=String(e.name),e.name=e.name.replace(/_/g," ")})}),r.network_data.row_nodes_names=n.pluck(r.network_data.row_nodes,"name"),r.network_data.col_nodes_names=n.pluck(r.network_data.col_nodes,"name"),r.sim_mat=l(r);var d=a(r.network_data.views),f={};Object.keys(d.possible_filters||{}).forEach(function(t){var e=i(d.filter_data,t);f[t]=e}),n.has(r.network_data,"views")&&r.network_data.views.forEach(function(t){Object.keys(d.possible_filters||{}).forEach(function(e){n.has(t,e)||(t[e]=f[e])});var e=t.nodes;["row","col"].forEach(function(t){var r=c(e[t+"_nodes"]);e[t+"_nodes"].forEach(function(e,n){e[t+"_index"]=n,r&&(e.name=e.name.split(u)[1]),e.name=String(e.name),e.name=e.name.replace(/_/g," ")})})});var _=r.network_data.col_nodes,p=r.network_data.row_nodes;if(n.has(r.network_data,"mat")){for(var h=[],v=r.network_data.mat,m={},g=0;g<v.length;g++)for(var y=0;y<v[0].length;y++)m={},m.source=g,m.target=y,m.value=v[g][y],h.push(m);r.network_data.links=h}if(r.network_data.links.forEach(function(t){t.name=p[t.source].name+"_"+_[t.target].name,t.row_name=p[t.source].name,t.col_name=_[t.target].name}),r.transpose){r.network_data=o(r.network_data);var w=t.col_label,x=t.row_label;t.row_label=w,t.col_label=x}n.is_undefined(t.row_label)||n.is_undefined(t.col_label)||(r.super_labels=!0,r.super={},r.super.row=t.row_label,r.super.col=t.col_label),r.inst_order={},!n.is_undefined(t.order)&&n.is_supported_order(t.order)?(r.inst_order.row=t.order,r.inst_order.col=t.order):(r.inst_order.row="clust",r.inst_order.col="clust"),!n.is_undefined(t.row_order)&&n.is_supported_order(t.row_order)&&(r.inst_order.col=t.row_order),!n.is_undefined(t.col_order)&&n.is_supported_order(t.col_order)&&(r.inst_order.row=t.col_order);var b=n.has(r.network_data.row_nodes[0],"group"),z=n.has(r.network_data.col_nodes[0],"group");return r.show_dendrogram=b||z,n.has(r.network_data.links[0],"value_orig")?r.keep_orig=!0:r.keep_orig=!1,r}},function(t,e){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports={normal_name:function(t){var e=t.name.replace(/_/g," ").split("#")[0];return e},is_supported_order:function(t){return"ini"===t||"clust"===t||"rank_var"===t||"rank"===t||"class"===t||"alpha"==t},has:function(t,e){return t&&hasOwnProperty.call(t,e)},property:function(t){return function(e){return null==e?void 0:e[t]}},pluck:function(t,e){var r=this;return t.map(r.property(e))},is_undefined:function(t){return void 0===t},extend:function(t,e){t=t||{};for(var n in e)"object"===r(e[n])?t[n]=this.extend(t[n],e[n]):t[n]=e[n];return t}}},function(t,e,r){"use strict";var n=r(2);t.exports=function(t){var e,r,o={};for(o.row_nodes=t.col_nodes,o.col_nodes=t.row_nodes,o.links=[],r=0;r<t.links.length;r++)e={},e.source=t.links[r].target,e.target=t.links[r].source,e.value=t.links[r].value,n.has(t.links[r],"highlight")&&(e.highlight=t.links[r].highlight),n.has(t.links[r],"value_up")&&(e.value_up=t.links[r].value_up),n.has(t.links[r],"value_dn")&&(e.value_dn=t.links[r].value_dn),n.has(t.links[r],"info")&&(e.info=t.links[r].info),o.links.push(e);return o}},function(t,e,r){"use strict";var n=r(5),o=r(2);t.exports=function(t){var e={},r={};n(t,function(t){var e=Object.keys(t||{});e.forEach(function(e){"nodes"!=e&&(o.has(r,e)||(r[e]=[]),r[e].push(t[e]),r[e]=Array.from(new Set([r[e]])))})});var a=Object.keys(r);a.forEach(function(t){var o=r[t],a=o.length,i="categorical";n(o,function(t){"number"==typeof t&&(i="numerical")}),a>1&&(e[t]=i)});var i={};return i.possible_filters=e,i.filter_data=r,i}},function(t,e,r){"use strict";function n(t,e,r){e=o(e,r);var n,s;if(a(t))for(n=0,s=t.length;n<s;n++)e(t[n],n,t);else{var l=i(t);for(n=0,s=l.length;n<s;n++)e(t[l[n]],l[n],t)}return t}var o=r(6),a=r(7),i=r(12);t.exports=n},function(t,e){"use strict";function r(t,e,r){if(void 0===e)return t;switch(null==r?3:r){case 1:return function(r){return t.call(e,r)};case 3:return function(r,n,o){return t.call(e,r,n,o)};case 4:return function(r,n,o,a){return t.call(e,r,n,o,a)}}return function(){return t.apply(e,arguments)}}t.exports=r},function(t,e,r){"use strict";var n=r(8),o=r(10),a=n(o);t.exports=a},function(t,e,r){"use strict";function n(t){return function(e){var r=t(e);return"number"==typeof r&&r>=0&&r<=o.MAX_ARRAY_INDEX}}var o=r(9);t.exports=n},function(t,e){(function(t){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(e,"__esModule",{value:!0});var n="1.13.6",o="object"==("undefined"==typeof self?"undefined":r(self))&&self.self===self&&self||"object"==("undefined"==typeof t?"undefined":r(t))&&t.global===t&&t||Function("return this")()||{},a=Array.prototype,i=Object.prototype,s="undefined"!=typeof Symbol?Symbol.prototype:null,l=a.push,c=a.slice,u=i.toString,d=i.hasOwnProperty,f="undefined"!=typeof ArrayBuffer,_="undefined"!=typeof DataView,p=Array.isArray,h=Object.keys,v=Object.create,m=f&&ArrayBuffer.isView,g=isNaN,y=isFinite,w=!{toString:null}.propertyIsEnumerable("toString"),x=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],b=Math.pow(2,53)-1;e.ArrayProto=a,e.MAX_ARRAY_INDEX=b,e.ObjProto=i,e.SymbolProto=s,e.VERSION=n,e._isFinite=y,e._isNaN=g,e.hasEnumBug=w,e.hasOwnProperty=d,e.nativeCreate=v,e.nativeIsArray=p,e.nativeIsView=m,e.nativeKeys=h,e.nonEnumerableProps=x,e.push=l,e.root=o,e.slice=c,e.supportsArrayBuffer=f,e.supportsDataView=_,e.toString=u}).call(e,function(){return this}())},function(t,e,r){"use strict";var n=r(11),o=n("length");t.exports=o},function(t,e){"use strict";function r(t){return function(e){return null==e?void 0:e[t]}}t.exports=r},function(t,e,r){"use strict";function n(t){if(!o(t))return[];if(a.nativeKeys)return a.nativeKeys(t);var e=[];for(var r in t)i(t,r)&&e.push(r);return a.hasEnumBug&&s(t,e),e}var o=r(13),a=r(9),i=r(14),s=r(15);t.exports=n},function(t,e){"use strict";function r(t){var e="undefined"==typeof t?"undefined":n(t);return"function"===e||"object"===e&&!!t}var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports=r},function(t,e,r){"use strict";function n(t,e){return null!=t&&o.hasOwnProperty.call(t,e)}var o=r(9);t.exports=n},function(t,e,r){"use strict";function n(t){for(var e={},r=t.length,n=0;n<r;++n)e[t[n]]=!0;return{contains:function(t){return e[t]===!0},push:function(r){return e[r]=!0,t.push(r)}}}function o(t,e){e=n(e);var r=a.nonEnumerableProps.length,o=t.constructor,l=i(o)&&o.prototype||a.ObjProto,c="constructor";for(s(t,c)&&!e.contains(c)&&e.push(c);r--;)c=a.nonEnumerableProps[r],c in t&&t[c]!==l[c]&&!e.contains(c)&&e.push(c)}var a=r(9),i=r(16),s=r(14);t.exports=o},function(t,e,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=r(17),a=r(9),i=o("Function"),s=a.root.document&&a.root.document.childNodes;"function"!=typeof/./&&"object"!=("undefined"==typeof Int8Array?"undefined":n(Int8Array))&&"function"!=typeof s&&(i=function(t){return"function"==typeof t||!1});var l=i;t.exports=l},function(t,e,r){"use strict";function n(t){var e="[object "+t+"]";return function(t){return o.toString.call(t)===e}}var o=r(9);t.exports=n},function(t,e){"use strict";t.exports=function(t,e){var r=t[e].sort(function(t,e){return e-t})[0];return r=String(r)}},function(t,e){"use strict";t.exports=function(){var t={row_label_scale:1,col_label_scale:1,super_labels:!1,super:{},show_label_tooltips:!0,show_tile_tooltips:!0,transpose:!1,tile_colors:["#FF0000","#1C86EE"],bar_colors:["#FF0000","#1C86EE"],cat_value_colors:["#2F4F4F","#9370DB"],outline_colors:["orange","black"],highlight_color:"#FFFF00",tile_title:!1,input_domain:0,opacity_scale:"linear",do_zoom:!0,is_zoom:0,is_slider_drag:!1,is_cropping:!1,background_color:"#FFFFFF",clust_group_background_color:"#E4E5E7",super_border_color:"#F5F5F5",outer_margins:{top:0,bottom:0,left:0,right:0},ini_expand:!1,grey_border_width:2,tile_click_hlight:!1,super_label_scale:1,make_tile_tooltip:function(t){return t.info},ini_view:null,requested_view:null,use_sidebar:!0,title:null,about:null,sidebar_width:160,sidebar_icons:!0,row_search_placeholder:"Row",buffer_width:10,show_sim_mat:!1,cat_colors:null,resize:!0,clamp_opacity:.85,expand_button:!0,max_allow_fs:20,dendro_filter:{row:!1,col:!1},cat_filter:{row:!1,col:!1},crop_filter_nodes:{row:!1,col:!1},row_tip_callback:null,col_tip_callback:null,tile_tip_callback:null,matrix_update_callback:null,cat_update_callback:null,dendro_callback:null,dendro_click_callback:null,new_row_cats:null,make_modals:!0,show_viz_border:!1};return t}},function(t,e,r){"use strict";var n=r(5);t.exports=function(t){var e=!1,r=t.network_data.row_nodes_names.length,o=t.network_data.col_nodes_names.length;if(r==o){var a=t.network_data.row_nodes_names,i=t.network_data.col_nodes_names;e=!0,n(a,function(t){var r=a.indexOf(t);t!==i[r]&&(e=!1)})}return e&&(t.expand_button=!1),e}},function(t,e,r){"use strict";var n=r(5);t.exports=function(t){var e=": ",r=!0;return n(t,function(t){var n=String(t.name);n.indexOf(e)<0&&(r=!1)}),r}},function(t,e,r){"use strict";var n=r(23),o=r(92),a=r(4),i=r(93),s=r(120),l=r(110);t.exports=function(t){var e=l.extend(!0,{},t),r=e;if(r.inst_nodes={},r.inst_nodes.row_nodes=r.network_data.row_nodes,r.inst_nodes.col_nodes=r.network_data.col_nodes,null!==r.ini_view){var c=r.ini_view,u=a(r.network_data.views);r.viz={},r.viz.possible_filters=u.possible_filters,r.viz.filter_data=u.filter_data,c=o(r,c),r.network_data=n(e,r,c),r.requested_view=c}return r=i(r),r.zoom_info=s(),r}},function(t,e,r){"use strict";var n=r(24),o=r(76),a=r(2);t.exports=function(t,e,r){var i=t.network_data.views,s=!1;a.has(i[0],"enr_score_type")&&(s=!0);var l=o(e,i,r);s&&0==l.length&&(r={N_row_sum:"all",N_col_sum:"10"},l=o(e,i,r));var c,u=l[0];if("undefined"!=typeof u){var d=u.nodes;c=n(t,d)}else c=t.network_data;return c}},function(t,e,r){"use strict";var n=r(2),o=r(25),a=o.create();a.import(r(38)),a.import(r(75)),t.exports=function(t,e){var r=t.network_data.links,o=n.pluck(e.row_nodes,"name")||[],i=n.pluck(e.col_nodes,"name")||[],s=a.matrix(a.zeros([e.row_nodes.length,e.col_nodes.length]));s=s.toArray();var l=_.filter(r,function(t){var e=t.name.split("_")[0],r=t.name.split("_")[1],n=o.indexOf(e),a=i.indexOf(r);if(n>-1&a>-1)return t.source=n,t.target=a,s[n][a]=t.value,t}),c={};return c.row_nodes=e.row_nodes,c.row_nodes_names=o,c.col_nodes=e.col_nodes,c.col_nodes_names=i,c.links=l,c.all_links=r,c.mat=s,c.views=t.network_data.views,n.has(t.network_data,"cat_colors")&&(c.cat_colors=t.network_data.cat_colors),c}},function(t,e,r){"use strict";t.exports=r(26)},function(t,e,r){"use strict";var n=r(27).isFactory,o=r(29),a=r(33),i=r(35),s=r(37);e.create=function(t){function e(t){if(!n(t))throw new Error("Factory object with properties `type`, `name`, and `factory` expected");var o,a=r.indexOf(t);return a===-1?(o=t.math===!0?t.factory(c.type,u,e,c.typed,c):t.factory(c.type,u,e,c.typed),r.push(t),l.push(o)):o=l[a],o}if("function"!=typeof Object.create)throw new Error("ES5 not supported by this JavaScript engine. Please load the es5-shim and es5-sham library for compatibility.");var r=[],l=[],c=a.mixin({});c.type={},c.expression={transform:{},mathWithTransform:{}},c.typed=o.create(c.type);var u={epsilon:1e-12,matrix:"Matrix",number:"number",precision:64,predictable:!1,randomSeed:null};return c.import=e(i),c.config=e(s),c.expression.mathWithTransform.config=c.config,t&&c.config(t),c}},function(t,e,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=r(28);e.clone=function t(r){var a="undefined"==typeof r?"undefined":n(r);if("number"===a||"string"===a||"boolean"===a||null===r||void 0===r)return r;if("function"==typeof r.clone)return r.clone();if(Array.isArray(r))return r.map(function(e){return t(e)});if(r instanceof Number)return new Number(r.valueOf());if(r instanceof String)return new String(r.valueOf());if(r instanceof Boolean)return new Boolean(r.valueOf());if(r instanceof Date)return new Date(r.valueOf());if(o(r))return r;if(r instanceof RegExp)throw new TypeError("Cannot clone "+r);return e.map(r,t)},e.map=function(t,r){var n={};for(var o in t)e.hasOwnProperty(t,o)&&(n[o]=r(t[o]));return n},e.extend=function(t,r){for(var n in r)e.hasOwnProperty(r,n)&&(t[n]=r[n]);return t},e.deepExtend=function t(r,n){if(Array.isArray(n))throw new TypeError("Arrays are not supported by deepExtend");for(var o in n)if(e.hasOwnProperty(n,o))if(n[o]&&n[o].constructor===Object)void 0===r[o]&&(r[o]={}),r[o].constructor===Object?t(r[o],n[o]):r[o]=n[o];else{if(Array.isArray(n[o]))throw new TypeError("Arrays are not supported by deepExtend");r[o]=n[o]}return r},e.deepEqual=function(t,r){var o,a,i;if(Array.isArray(t)){if(!Array.isArray(r))return!1;if(t.length!=r.length)return!1;for(a=0,i=t.length;a<i;a++)if(!e.deepEqual(t[a],r[a]))return!1;return!0}if(t instanceof Object){if(Array.isArray(r)||!(r instanceof Object))return!1;for(o in t)if(!e.deepEqual(t[o],r[o]))return!1;for(o in r)if(!e.deepEqual(t[o],r[o]))return!1;return!0}return("undefined"==typeof t?"undefined":n(t))===("undefined"==typeof r?"undefined":n(r))&&t==r},e.canDefineProperty=function(){try{if(Object.defineProperty)return Object.defineProperty({},"x",{get:function(){}}),!0}catch(t){}return!1},e.lazy=function(t,r,n){if(e.canDefineProperty()){var o,a=!0;Object.defineProperty(t,r,{get:function(){return a&&(o=n(),a=!1),o},set:function(t){o=t,a=!1},configurable:!0,enumerable:!0})}else t[r]=n()},e.traverse=function(t,e){var r=t;if(e)for(var n=e.split("."),o=0;o<n.length;o++){var a=n[o];a in r||(r[a]={}),r=r[a]}return r},e.hasOwnProperty=function(t,e){return t&&Object.hasOwnProperty.call(t,e)},e.isFactory=function(t){return t&&"function"==typeof t.factory}},function(t,e){"use strict";t.exports=function(t){return t&&t.constructor.prototype.isBigNumber||!1}},function(t,e,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=r(30),a=r(31).digits,i=r(28),s=r(32),l=function(){return l=o.create,o};e.create=function(t){t.isNumber=function(t){return"number"==typeof t},t.isComplex=function(e){return t.Complex&&e instanceof t.Complex||!1},t.isBigNumber=i,t.isFraction=function(e){return t.Fraction&&e instanceof t.Fraction||!1},t.isUnit=function(t){return t&&t.constructor.prototype.isUnit||!1},t.isString=function(t){return"string"==typeof t},t.isArray=Array.isArray,t.isMatrix=s,t.isDenseMatrix=function(t){return t&&t.isDenseMatrix&&t.constructor.prototype.isMatrix||!1},t.isSparseMatrix=function(t){return t&&t.isSparseMatrix&&t.constructor.prototype.isMatrix||!1},t.isRange=function(t){return t&&t.constructor.prototype.isRange||!1},t.isIndex=function(t){return t&&t.constructor.prototype.isIndex||!1},t.isBoolean=function(t){return"boolean"==typeof t},t.isResultSet=function(t){return t&&t.constructor.prototype.isResultSet||!1},t.isHelp=function(t){return t&&t.constructor.prototype.isHelp||!1},t.isFunction=function(t){return"function"==typeof t},t.isDate=function(t){return t instanceof Date},t.isRegExp=function(t){return t instanceof RegExp},t.isObject=function(t){return"object"===("undefined"==typeof t?"undefined":n(t))},t.isNull=function(t){return null===t},t.isUndefined=function(t){return void 0===t},t.isAccessorNode=function(t){return t&&t.isAccessorNode&&t.constructor.prototype.isNode||!1},t.isArrayNode=function(t){return t&&t.isArrayNode&&t.constructor.prototype.isNode||!1},t.isAssignmentNode=function(t){return t&&t.isAssignmentNode&&t.constructor.prototype.isNode||!1},t.isBlockNode=function(t){return t&&t.isBlockNode&&t.constructor.prototype.isNode||!1},t.isConditionalNode=function(t){return t&&t.isConditionalNode&&t.constructor.prototype.isNode||!1},t.isConstantNode=function(t){return t&&t.isConstantNode&&t.constructor.prototype.isNode||!1},t.isFunctionAssignmentNode=function(t){return t&&t.isFunctionAssignmentNode&&t.constructor.prototype.isNode||!1},t.isFunctionNode=function(t){return t&&t.isFunctionNode&&t.constructor.prototype.isNode||!1},t.isIndexNode=function(t){return t&&t.isIndexNode&&t.constructor.prototype.isNode||!1},t.isNode=function(t){return t&&t.isNode&&t.constructor.prototype.isNode||!1},t.isObjectNode=function(t){return t&&t.isObjectNode&&t.constructor.prototype.isNode||!1},t.isOperatorNode=function(t){return t&&t.isOperatorNode&&t.constructor.prototype.isNode||!1},t.isParenthesisNode=function(t){return t&&t.isParenthesisNode&&t.constructor.prototype.isNode||!1},t.isRangeNode=function(t){return t&&t.isRangeNode&&t.constructor.prototype.isNode||!1},t.isSymbolNode=function(t){return t&&t.isSymbolNode&&t.constructor.prototype.isNode||!1},t.isChain=function(t){return t&&t.constructor.prototype.isChain||!1};var e=l();return e.types=[{name:"number",test:t.isNumber},{name:"Complex",test:t.isComplex},{name:"BigNumber",test:t.isBigNumber},{name:"Fraction",test:t.isFraction},{name:"Unit",test:t.isUnit},{name:"string",test:t.isString},{name:"Array",test:t.isArray},{name:"Matrix",test:t.isMatrix},{name:"DenseMatrix",test:t.isDenseMatrix},{name:"SparseMatrix",test:t.isSparseMatrix},{name:"Range",test:t.isRange},{name:"Index",test:t.isIndex},{name:"boolean",test:t.isBoolean},{name:"ResultSet",test:t.isResultSet},{name:"Help",test:t.isHelp},{name:"function",test:t.isFunction},{name:"Date",test:t.isDate},{name:"RegExp",test:t.isRegExp},{name:"Object",test:t.isObject},{name:"null",test:t.isNull},{name:"undefined",test:t.isUndefined},{name:"OperatorNode",test:t.isOperatorNode},{name:"ConstantNode",test:t.isConstantNode},{name:"SymbolNode",test:t.isSymbolNode},{name:"ParenthesisNode",test:t.isParenthesisNode},{name:"FunctionNode",test:t.isFunctionNode},{name:"FunctionAssignmentNode",test:t.isFunctionAssignmentNode},{name:"ArrayNode",test:t.isArrayNode},{name:"AssignmentNode",test:t.isAssignmentNode},{name:"BlockNode",test:t.isBlockNode},{name:"ConditionalNode",test:t.isConditionalNode},{name:"IndexNode",test:t.isIndexNode},{name:"RangeNode",test:t.isRangeNode},{name:"Node",test:t.isNode}],e.conversions=[{from:"number",to:"BigNumber",convert:function(e){if(a(e)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+e+"). Use function bignumber(x) to convert to BigNumber.");return new t.BigNumber(e)}},{from:"number",to:"Complex",convert:function(e){return new t.Complex(e,0)}},{from:"number",to:"string",convert:function(t){return t+""}},{from:"BigNumber",to:"Complex",convert:function(e){return new t.Complex(e.toNumber(),0)}},{from:"Fraction",to:"BigNumber",convert:function(t){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(e){return new t.Complex(e.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(e){var r=new t.Fraction(e);if(r.valueOf()!==e)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+e+"). Use function fraction(x) to convert to Fraction.");return new t.Fraction(e)}},{from:"string",to:"number",convert:function(t){var e=Number(t);if(isNaN(e))throw new Error('Cannot convert "'+t+'" to a number');return e}},{from:"string",to:"BigNumber",convert:function(e){try{return new t.BigNumber(e)}catch(t){throw new Error('Cannot convert "'+e+'" to BigNumber')}}},{from:"string",to:"Fraction",convert:function(e){try{return new t.Fraction(e)}catch(t){throw new Error('Cannot convert "'+e+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(e){try{return new t.Complex(e)}catch(t){throw new Error('Cannot convert "'+e+'" to Complex')}}},{from:"boolean",to:"number",convert:function(t){return+t}},{from:"boolean",to:"BigNumber",convert:function(e){return new t.BigNumber(+e)}},{from:"boolean",to:"Fraction",convert:function(e){return new t.Fraction(+e)}},{from:"boolean",to:"string",convert:function(t){return+t}},{from:"null",to:"number",convert:function(){return 0}},{from:"null",to:"string",convert:function(){return"null"}},{from:"null",to:"BigNumber",convert:function(){return new t.BigNumber(0)}},{from:"null",to:"Fraction",convert:function(){return new t.Fraction(0)}},{from:"Array",to:"Matrix",convert:function(e){return new t.DenseMatrix(e)}},{from:"Matrix",to:"Array",convert:function(t){return t.valueOf()}}],e}},function(t,e,r){var n,o,a,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(r,i){o=[],n=i,a="function"==typeof n?n.apply(e,o):n,!(void 0!==a&&(t.exports=a))}(void 0,function(){function t(){function e(t){for(var e,r=0;r<A.types.length;r++){var n=A.types[r];if(n.name===t){e=n.test;break}}if(!e){var o;for(r=0;r<A.types.length;r++)if(n=A.types[r],n.name.toLowerCase()==t.toLowerCase()){o=n.name;break}throw new Error('Unknown type "'+t+'"'+(o?'. Did you mean "'+o+'"?':""))}return e}function r(t){for(var e="",r=0;r<t.length;r++){var n=t[r];if(n.signatures&&""!=n.name)if(""==e)e=n.name;else if(e!=n.name){var o=new Error("Function names do not match (expected: "+e+", actual: "+n.name+")");throw o.data={actual:n.name,expected:e},o}}return e}function n(t,e,r,n,o){var a,i=v(n),s=o?o.split(","):null,l=t||"unnamed",c=s&&m(s,"any"),u={fn:t,index:r,actual:n,expected:s};a=s?e>r&&!c?"Unexpected type of argument in function "+l+" (expected: "+s.join(" or ")+", actual: "+i+", index: "+r+")":"Too few arguments in function "+l+" (expected: "+s.join(" or ")+", index: "+r+")":"Too many arguments in function "+l+" (expected: "+r+", actual: "+e+")";var d=new TypeError(a);return d.data=u,d}function o(t){this.name=t||"refs",this.categories={}}function a(t,e){if("string"==typeof t){var r=t.trim(),n="..."===r.substr(0,3);if(n&&(r=r.substr(3)),""===r)this.types=["any"];else{this.types=r.split("|");for(var o=0;o<this.types.length;o++)this.types[o]=this.types[o].trim()}}else{if(!Array.isArray(t)){if(t instanceof a)return t.clone();throw new Error("String or Array expected")}this.types=t}this.conversions=[],this.varArgs=n||e||!1,this.anyType=this.types.indexOf("any")!==-1}function s(t,e){var r;if("string"==typeof t)r=""!==t?t.split(","):[];else{if(!Array.isArray(t))throw new Error("string or Array expected");r=t}this.params=new Array(r.length),this.anyType=!1,this.varArgs=!1;for(var n=0;n<r.length;n++){var o=new a(r[n]);if(this.params[n]=o,o.anyType&&(this.anyType=!0),n===r.length-1)this.varArgs=o.varArgs;else if(o.varArgs)throw new SyntaxError('Unexpected variable arguments operator "..."')}this.fn=e}function l(t,e,r,n){this.path=t||[],this.param=t[t.length-1]||null,this.signature=e||null,this.childs=r||[],this.fallThrough=n||!1}function c(t){var e,r,n={},o=[];for(var a in t)if(t.hasOwnProperty(a)){var i=t[a];if(e=new s(a,i),e.ignore())continue;var l=e.expand();for(r=0;r<l.length;r++){var c=l[r],u=c.toString(),d=n[u];if(d){var f=s.compare(c,d);if(f<0)n[u]=c;else if(0===f)throw new Error('Signature "'+u+'" is defined twice')}else n[u]=c}}for(u in n)n.hasOwnProperty(u)&&o.push(n[u]);for(o.sort(function(t,e){return s.compare(t,e)}),r=0;r<o.length;r++)if(e=o[r],e.varArgs)for(var _=e.params.length-1,p=e.params[_],h=0;h<p.types.length;){if(p.conversions[h])for(var v=p.types[h],g=0;g<o.length;g++){var y=o[g],w=y.params[_];if(y!==e&&w&&m(w.types,v)&&!w.conversions[_]){p.types.splice(h,1),p.conversions.splice(h,1),h--;break}}h++}return o}function u(t){for(var e=[],r=0;r<t.length;r++)t[r].anyType&&e.push(t[r]);return e}function d(t){for(var e={},r=0;r<t.length;r++){var n=t[r];if(n.fn&&!n.hasConversions()){var o=n.params.join(",");e[o]=n.fn}}return e}function f(t,e,r){var n,o,i,s=e.length,c=[];for(n=0;n<t.length;n++)o=t[n],o.params.length!==s||i||(i=o),void 0!=o.params[s]&&c.push(o);c.sort(function(t,e){return a.compare(t.params[s],e.params[s])});var u=[];for(n=0;n<c.length;n++){o=c[n];var d=o.params[s],_=u.filter(function(t){return t.param.overlapping(d)})[0];if(_){if(_.param.varArgs)throw new Error('Conflicting types "'+_.param+'" and "'+d+'"');_.signatures.push(o)}else u.push({param:d,signatures:[o]})}var p=[];for(n=0;n<r.length;n++)r[n].paramsStartWith(e)&&p.push(r[n]);var h=!1;for(n=0;n<p.length;n++)if(!m(t,p[n])){h=!0;break}var v=new Array(u.length);for(n=0;n<u.length;n++){var g=u[n];v[n]=f(g.signatures,e.concat(g.param),p)}return new l(e,i,v,h)}function _(t){for(var e=[],r=0;r<t;r++)e[r]="arg"+r;return e}function p(t,e){var r=new o,a=c(e);if(0==a.length)throw new Error("No signatures provided");var i=u(a),s=f(a,[],i),l=[],p=(t||"").replace(/[^a-zA-Z0-9_$]/g,"_"),v=_(h(a));l.push("function "+p+"("+v.join(", ")+") {"),l.push('  "use strict";'),l.push("  var name = "+JSON.stringify(t||"")+";"),l.push(s.toCode(r,"  ",!1)),l.push("}");var m=[r.toCode(),"return "+l.join("\n")].join("\n"),g=new Function(r.name,"createError",m),y=g(r,n);return y.signatures=d(a),y}function h(t){for(var e=0,r=0;r<t.length;r++){var n=t[r].params.length;n>e&&(e=n)}return e}function v(t){for(var e,r=0;r<A.types.length;r++){var n=A.types[r];if("Object"===n.name)e=n;else if(n.test(t))return n.name}return e&&e.test(t)?e.name:"unknown"}function m(t,e){return t.indexOf(e)!==-1}function g(t){return t[t.length-1]}function y(t,e){if(!t.signatures)throw new TypeError("Function is no typed-function");var r;if("string"==typeof e){r=e.split(",");for(var n=0;n<r.length;n++)r[n]=r[n].trim()}else{if(!Array.isArray(e))throw new TypeError("String array or a comma separated string expected");r=e}var o=r.join(","),a=t.signatures[o];if(a)return a;throw new TypeError("Signature not found (signature: "+(t.name||"unnamed")+"("+r.join(", ")+"))")}function w(t,e){var r=v(t);if(e===r)return t;for(var n=0;n<A.conversions.length;n++){var o=A.conversions[n];if(o.from===r&&o.to===e)return o.convert(t)}throw new Error("Cannot convert from "+r+" to "+e)}o.prototype.add=function(t,e){var r=e||"fn";this.categories[r]||(this.categories[r]=[]);var n=this.categories[r].indexOf(t);return n==-1&&(n=this.categories[r].length,this.categories[r].push(t)),r+n},o.prototype.toCode=function(){var t=[],e=this.name+".categories",r=this.categories;for(var n in r)if(r.hasOwnProperty(n))for(var o=r[n],a=0;a<o.length;a++)t.push("var "+n+a+" = "+e+"['"+n+"']["+a+"];");return t.join("\n")},a.compare=function(t,e){if(t.anyType)return 1;if(e.anyType)return-1;if(m(t.types,"Object"))return 1;if(m(e.types,"Object"))return-1;if(t.hasConversions()){if(e.hasConversions()){var r,n,o;for(r=0;r<t.conversions.length;r++)if(void 0!==t.conversions[r]){n=t.conversions[r];break}for(r=0;r<e.conversions.length;r++)if(void 0!==e.conversions[r]){o=e.conversions[r];break}return A.conversions.indexOf(n)-A.conversions.indexOf(o)}return 1}if(e.hasConversions())return-1;var a,i;for(r=0;r<A.types.length;r++)if(A.types[r].name===t.types[0]){a=r;break}for(r=0;r<A.types.length;r++)if(A.types[r].name===e.types[0]){i=r;break}return a-i},a.prototype.overlapping=function(t){for(var e=0;e<this.types.length;e++)if(m(t.types,this.types[e]))return!0;return!1},a.prototype.matches=function(t){return this.anyType||t.anyType||this.overlapping(t)},a.prototype.clone=function(){var t=new a(this.types.slice(),this.varArgs);return t.conversions=this.conversions.slice(),t},a.prototype.hasConversions=function(){return this.conversions.length>0},a.prototype.contains=function(t){for(var e=0;e<this.types.length;e++)if(t[this.types[e]])return!0;return!1},a.prototype.toString=function(t){for(var e=[],r={},n=0;n<this.types.length;n++){var o=this.conversions[n],a=t&&o?o.to:this.types[n];a in r||(r[a]=!0,e.push(a))}return(this.varArgs?"...":"")+e.join("|")},s.prototype.clone=function(){return new s(this.params.slice(),this.fn)},s.prototype.expand=function(){function t(r,n){if(n.length<r.params.length){var o,i,l,c=r.params[n.length];if(c.varArgs){for(i=c.clone(),o=0;o<A.conversions.length;o++)if(l=A.conversions[o],!m(c.types,l.from)&&m(c.types,l.to)){var u=i.types.length;i.types[u]=l.from,i.conversions[u]=l}t(r,n.concat(i))}else{for(o=0;o<c.types.length;o++)t(r,n.concat(new a(c.types[o])));for(o=0;o<A.conversions.length;o++)l=A.conversions[o],!m(c.types,l.from)&&m(c.types,l.to)&&(i=new a(l.from),i.conversions[0]=l,t(r,n.concat(i)))}}else e.push(new s(n,r.fn))}var e=[];return t(this,[]),e},s.compare=function(t,e){if(t.params.length>e.params.length)return 1;if(t.params.length<e.params.length)return-1;var r,n=t.params.length,o=0,i=0;for(r=0;r<n;r++)t.params[r].hasConversions()&&o++,e.params[r].hasConversions()&&i++;if(o>i)return 1;if(o<i)return-1;for(r=0;r<t.params.length;r++){var s=a.compare(t.params[r],e.params[r]);if(0!==s)return s}return 0},s.prototype.hasConversions=function(){for(var t=0;t<this.params.length;t++)if(this.params[t].hasConversions())return!0;return!1},s.prototype.ignore=function(){for(var t={},e=0;e<A.ignore.length;e++)t[A.ignore[e]]=!0;for(e=0;e<this.params.length;e++)if(this.params[e].contains(t))return!0;return!1},s.prototype.paramsStartWith=function(t){if(0===t.length)return!0;for(var e=g(this.params),r=g(t),n=0;n<t.length;n++){var o=this.params[n]||(e.varArgs?e:null),a=t[n]||(r.varArgs?r:null);if(!o||!a||!o.matches(a))return!1}return!0},s.prototype.toCode=function(t,e){for(var r=[],n=new Array(this.params.length),o=0;o<this.params.length;o++){var a=this.params[o],i=a.conversions[0];a.varArgs?n[o]="varArgs":i?n[o]=t.add(i.convert,"convert")+"(arg"+o+")":n[o]="arg"+o}var s=this.fn?t.add(this.fn,"signature"):void 0;return s?e+"return "+s+"("+n.join(", ")+"); // signature: "+this.params.join(", "):r.join("\n");
},s.prototype.toString=function(){return this.params.join(", ")},l.prototype.toCode=function(t,r){var n=[];if(this.param){var o=this.path.length-1,a=this.param.conversions[0],i="// type: "+(a?a.from+" (convert to "+a.to+")":this.param);if(this.param.varArgs)if(this.param.anyType)n.push(r+"if (arguments.length > "+o+") {"),n.push(r+"  var varArgs = [];"),n.push(r+"  for (var i = "+o+"; i < arguments.length; i++) {"),n.push(r+"    varArgs.push(arguments[i]);"),n.push(r+"  }"),n.push(this.signature.toCode(t,r+"  ")),n.push(r+"}");else{for(var s=function(r,n){for(var o=[],a=0;a<r.length;a++)o[a]=t.add(e(r[a]),"test")+"("+n+")";return o.join(" || ")}.bind(this),l=this.param.types,c=[],u=0;u<l.length;u++)void 0===this.param.conversions[u]&&c.push(l[u]);n.push(r+"if ("+s(l,"arg"+o)+") { "+i),n.push(r+"  var varArgs = [arg"+o+"];"),n.push(r+"  for (var i = "+(o+1)+"; i < arguments.length; i++) {"),n.push(r+"    if ("+s(c,"arguments[i]")+") {"),n.push(r+"      varArgs.push(arguments[i]);");for(var u=0;u<l.length;u++){var d=this.param.conversions[u];if(d){var f=t.add(e(l[u]),"test"),_=t.add(d.convert,"convert");n.push(r+"    }"),n.push(r+"    else if ("+f+"(arguments[i])) {"),n.push(r+"      varArgs.push("+_+"(arguments[i]));")}}n.push(r+"    } else {"),n.push(r+"      throw createError(name, arguments.length, i, arguments[i], '"+c.join(",")+"');"),n.push(r+"    }"),n.push(r+"  }"),n.push(this.signature.toCode(t,r+"  ")),n.push(r+"}")}else if(this.param.anyType)n.push(r+"// type: any"),n.push(this._innerCode(t,r));else{var p=this.param.types[0],f="any"!==p?t.add(e(p),"test"):null;n.push(r+"if ("+f+"(arg"+o+")) { "+i),n.push(this._innerCode(t,r+"  ")),n.push(r+"}")}}else n.push(this._innerCode(t,r));return n.join("\n")},l.prototype._innerCode=function(t,e){var r,n=[];for(this.signature&&(n.push(e+"if (arguments.length === "+this.path.length+") {"),n.push(this.signature.toCode(t,e+"  ")),n.push(e+"}")),r=0;r<this.childs.length;r++)n.push(this.childs[r].toCode(t,e));if(!this.fallThrough||this.param&&this.param.anyType){var o=this._exceptions(t,e);o&&n.push(o)}return n.join("\n")},l.prototype._exceptions=function(t,e){var r=this.path.length;if(0===this.childs.length)return[e+"if (arguments.length > "+r+") {",e+"  throw createError(name, arguments.length, "+r+", arguments["+r+"]);",e+"}"].join("\n");for(var n={},o=[],a=0;a<this.childs.length;a++){var i=this.childs[a];if(i.param)for(var s=0;s<i.param.types.length;s++){var l=i.param.types[s];l in n||i.param.conversions[s]||(n[l]=!0,o.push(l))}}return e+"throw createError(name, arguments.length, "+r+", arguments["+r+"], '"+o.join(",")+"');"};var x=[{name:"number",test:function(t){return"number"==typeof t}},{name:"string",test:function(t){return"string"==typeof t}},{name:"boolean",test:function(t){return"boolean"==typeof t}},{name:"Function",test:function(t){return"function"==typeof t}},{name:"Array",test:Array.isArray},{name:"Date",test:function(t){return t instanceof Date}},{name:"RegExp",test:function(t){return t instanceof RegExp}},{name:"Object",test:function(t){return"object"===("undefined"==typeof t?"undefined":i(t))}},{name:"null",test:function(t){return null===t}},{name:"undefined",test:function(t){return void 0===t}}],b={},z=[],k=[],A={config:b,types:x,conversions:z,ignore:k};return A=p("typed",{Object:function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(t[n]);var o=r(e);return p(o,t)},"string, Object":p,"...Function":function(t){for(var e,n=r(t),o={},a=0;a<t.length;a++){var s=t[a];if("object"!==i(s.signatures))throw e=new TypeError("Function is no typed-function (index: "+a+")"),e.data={index:a},e;for(var l in s.signatures)if(s.signatures.hasOwnProperty(l))if(o.hasOwnProperty(l)){if(s.signatures[l]!==o[l])throw e=new Error('Signature "'+l+'" is defined twice'),e.data={signature:l},e}else o[l]=s.signatures[l]}return p(n,o)}}),A.config=b,A.types=x,A.conversions=z,A.ignore=k,A.create=t,A.find=y,A.convert=w,A.addType=function(t){if(!t||"string"!=typeof t.name||"function"!=typeof t.test)throw new TypeError("Object with properties {name: string, test: function} expected");A.types.push(t)},A.addConversion=function(t){if(!t||"string"!=typeof t.from||"string"!=typeof t.to||"function"!=typeof t.convert)throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");A.conversions.push(t)},A}return t()})},function(t,e){"use strict";function r(t){for(var e=[],r=0;r<t;r++)e.push(0);return e}e.isNumber=function(t){return"number"==typeof t},e.isInteger=function(t){return!!isFinite(t)&&t==Math.round(t)},e.sign=Math.sign||function(t){return t>0?1:t<0?-1:0},e.format=function(t,r){if("function"==typeof r)return r(t);if(t===1/0)return"Infinity";if(t===-(1/0))return"-Infinity";if(isNaN(t))return"NaN";var n="auto",o=void 0;switch(r&&(r.notation&&(n=r.notation),e.isNumber(r)?o=r:r.precision&&(o=r.precision)),n){case"fixed":return e.toFixed(t,o);case"exponential":return e.toExponential(t,o);case"engineering":return e.toEngineering(t,o);case"auto":return e.toPrecision(t,o,r&&r.exponential).replace(/((\.\d*?)(0+))($|e)/,function(){var t=arguments[2],e=arguments[4];return"."!==t?t+e:e});default:throw new Error('Unknown notation "'+n+'". Choose "auto", "exponential", or "fixed".')}},e.splitNumber=function(t){var e=String(t).toLowerCase().match(/^0*?(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!e)throw new SyntaxError("Invalid number "+t);var r=e[1],n=e[2],o=parseFloat(e[4]||"0"),a=n.indexOf(".");o+=a!==-1?a-1:n.length-1;var i=n.replace(".","").replace(/^0*/,function(t){return o-=t.length,""}).replace(/0*$/,"").split("").map(function(t){return parseInt(t)});return 0===i.length&&(i.push(0),o++),{sign:r,coefficients:i,exponent:o}},e.toEngineering=function(t,n){if(isNaN(t)||!isFinite(t))return String(t);var o=e.roundDigits(e.splitNumber(t),n),a=o.exponent,i=o.coefficients,s=a%3===0?a:a<0?a-3-a%3:a-a%3,l=a>=0?a:Math.abs(s);i.length-1<l&&(i=i.concat(r(l-(i.length-1))));for(var c=Math.abs(a-s),u=1;--c>=0;)u++;var d=i.slice(u).join(""),f=d.match(/[1-9]/)?"."+d:"",_=i.slice(0,u).join("")+f+"e"+(a>=0?"+":"")+s.toString();return o.sign+_},e.toFixed=function(t,n){if(isNaN(t)||!isFinite(t))return String(t);var o=e.splitNumber(t),a=e.roundDigits(o,o.exponent+1+(n||0)),i=a.coefficients,s=a.exponent+1,l=s+(n||0);return i.length<l&&(i=i.concat(r(l-i.length))),s<0&&(i=r(-s+1).concat(i),s=1),n&&i.splice(s,0,0===s?"0.":"."),a.sign+i.join("")},e.toExponential=function(t,n){if(isNaN(t)||!isFinite(t))return String(t);var o=e.splitNumber(t),a=n?e.roundDigits(o,n):o,i=a.coefficients,s=a.exponent;i.length<n&&(i=i.concat(r(n-i.length)));var l=i.shift();return a.sign+l+(i.length>0?"."+i.join(""):"")+"e"+(s>=0?"+":"")+s},e.toPrecision=function(t,n,o){if(isNaN(t)||!isFinite(t))return String(t);var a=o&&void 0!==o.lower?o.lower:.001,i=o&&void 0!==o.upper?o.upper:1e5,s=e.splitNumber(t),l=Math.abs(Math.pow(10,s.exponent));if(l<a||l>=i)return e.toExponential(t,n);var c=n?e.roundDigits(s,n):s,u=c.coefficients,d=c.exponent;u.length<n&&(u=u.concat(r(n-u.length))),u=u.concat(r(d-u.length+1+(u.length<n?n-u.length:0))),u=r(-d).concat(u);var f=d>0?d:0;return f<u.length-1&&u.splice(f+1,0,"."),c.sign+u.join("")},e.roundDigits=function(t,e){for(var r={sign:t.sign,coefficients:t.coefficients,exponent:t.exponent},n=r.coefficients;e<=0;)n.unshift(0),r.exponent++,e++;if(n.length>e){var o=n.splice(e,n.length-e);if(o[0]>=5){var a=e-1;for(n[a]++;10===n[a];)n.pop(),0===a&&(n.unshift(0),r.exponent++,a++),a--,n[a]++}}return r},e.digits=function(t){return t.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length},e.DBL_EPSILON=Number.EPSILON||2.220446049250313e-16,e.nearlyEqual=function(t,r,n){if(null==n)return t==r;if(t==r)return!0;if(isNaN(t)||isNaN(r))return!1;if(isFinite(t)&&isFinite(r)){var o=Math.abs(t-r);return o<e.DBL_EPSILON||o<=Math.max(Math.abs(t),Math.abs(r))*n}return!1}},function(t,e){"use strict";t.exports=function(t){return t&&t.constructor.prototype.isMatrix||!1}},function(t,e,r){"use strict";var n=r(34);e.mixin=function(t){var e=new n;return t.on=e.on.bind(e),t.off=e.off.bind(e),t.once=e.once.bind(e),t.emit=e.emit.bind(e),t}},function(t,e){"use strict";function r(){}r.prototype={on:function(t,e,r){var n=this.e||(this.e={});return(n[t]||(n[t]=[])).push({fn:e,ctx:r}),this},once:function(t,e,r){function n(){o.off(t,n),e.apply(r,arguments)}var o=this;return n._=e,this.on(t,n,r)},emit:function(t){var e=[].slice.call(arguments,1),r=((this.e||(this.e={}))[t]||[]).slice(),n=0,o=r.length;for(n;n<o;n++)r[n].fn.apply(r[n].ctx,e);return this},off:function(t,e){var r=this.e||(this.e={}),n=r[t],o=[];if(n&&e)for(var a=0,i=n.length;a<i;a++)n[a].fn!==e&&n[a].fn._!==e&&o.push(n[a]);return o.length?r[t]=o:delete r[t],this}},t.exports=r},function(t,e,r){"use strict";function n(t,e,r,n,c){function u(t,e){var r=arguments.length;if(1!==r&&2!==r)throw new l("import",r,1,2);if(e||(e={}),i(t))p(t,e);else if(Array.isArray(t))t.forEach(function(t){u(t,e)});else if("object"===("undefined"==typeof t?"undefined":o(t))){for(var n in t)if(t.hasOwnProperty(n)){var a=t[n];h(a)?d(n,a,e):i(t)?p(t,e):u(a,e)}}else if(!e.silent)throw new TypeError("Factory, Object, or Array expected")}function d(t,e,r){if(r.wrap&&"function"==typeof e&&(e=_(e)),v(c[t])&&v(e))return e=r.override?n(t,e.signatures):n(c[t],e),c[t]=e,f(t,e),void c.emit("import",t,function(){return e});if(void 0===c[t]||r.override)return c[t]=e,f(t,e),void c.emit("import",t,function(){return e});if(!r.silent)throw new Error('Cannot import "'+t+'": already exists')}function f(t,e){e&&"function"==typeof e.transform?(c.expression.transform[t]=e.transform,m(t)&&(c.expression.mathWithTransform[t]=e.transform)):(delete c.expression.transform[t],m(t)&&(c.expression.mathWithTransform[t]=e))}function _(t){var e=function(){for(var e=[],r=0,n=arguments.length;r<n;r++){var o=arguments[r];e[r]=o&&o.valueOf()}return t.apply(c,e)};return t.transform&&(e.transform=t.transform),e}function p(t,e){if("string"==typeof t.name){var o=t.name,i=o in c.expression.transform,l=t.path?s(c,t.path):c,u=l.hasOwnProperty(o)?l[o]:void 0,d=function(){var a=r(t);if(a&&"function"==typeof a.transform)throw new Error('Transforms cannot be attached to factory functions. Please create a separate function for it with exports.path="expression.transform"');if(v(u)&&v(a))return e.override||(a=n(u,a)),a;if(void 0===u||e.override)return a;if(!e.silent)throw new Error('Cannot import "'+o+'": already exists')};t.lazy!==!1?(a(l,o,d),i||("expression.transform"===t.path||g(t))&&a(c.expression.mathWithTransform,o,d)):(l[o]=d(),i||("expression.transform"===t.path||g(t))&&(c.expression.mathWithTransform[o]=d())),c.emit("import",o,d,t.path)}else r(t)}function h(e){return"function"==typeof e||"number"==typeof e||"string"==typeof e||"boolean"==typeof e||null===e||e&&t.isUnit(e)||e&&t.isComplex(e)||e&&t.isBigNumber(e)||e&&t.isFraction(e)||e&&t.isMatrix(e)||e&&Array.isArray(e)}function v(t){return"function"==typeof t&&"object"===o(t.signatures)}function m(t){return!y.hasOwnProperty(t)}function g(t){return void 0===t.path&&!y.hasOwnProperty(t.name)}var y={expression:!0,type:!0,docs:!0,error:!0,json:!0,chain:!0};return u}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=r(27).lazy,i=r(27).isFactory,s=r(27).traverse,l=r(36);e.math=!0,e.name="import",e.factory=n,e.lazy=!0},function(t,e){"use strict";function r(t,e,n,o){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");this.fn=t,this.count=e,this.min=n,this.max=o,this.message="Wrong number of arguments in function "+t+" ("+e+" provided, "+n+(void 0!=o?"-"+o:"")+" expected)",this.stack=(new Error).stack}r.prototype=new Error,r.prototype.constructor=Error,r.prototype.name="ArgumentsError",r.prototype.isArgumentsError=!0,t.exports=r},function(t,e,r){"use strict";function n(t,e,r,n,o){function a(t){if(t){var r=s.map(e,s.clone);i(t,"matrix",l),i(t,"number",c),s.deepExtend(e,t);var n=s.map(e,s.clone),a=s.map(t,s.clone);return o.emit("config",n,r,a),n}return s.map(e,s.clone)}var l=["Matrix","Array"],c=["number","BigNumber","Fraction"];return a.MATRIX=l,a.NUMBER=c,a}function o(t,e){return t.indexOf(e)!==-1}function a(t,e){return t.map(function(t){return t.toLowerCase()}).indexOf(e.toLowerCase())}function i(t,e,r){if(void 0!==t[e]&&!o(r,t[e])){var n=a(r,t[e]);n!==-1?(console.warn('Warning: Wrong casing for configuration option "'+e+'", should be "'+r[n]+'" instead of "'+t[e]+'".'),t[e]=r[n]):console.warn('Warning: Unknown value "'+t[e]+'" for configuration option "'+e+'". Available options: '+r.map(JSON.stringify).join(", ")+".")}}var s=r(27);e.name="config",e.math=!0,e.factory=n},function(t,e,r){"use strict";t.exports=[r(39),r(49),r(51),r(54),r(64),r(70),r(71),r(72),r(73),r(56),r(74)]},function(t,e,r){"use strict";function n(t,e,r,n){function o(){if(!(this instanceof o))throw new SyntaxError("Constructor must be called with the new operator")}return o.prototype.type="Matrix",o.prototype.isMatrix=!0,o.storage=function(t){if(!i(t))throw new TypeError("format must be a string value");var e=o._storage[t];if(!e)throw new SyntaxError("Unsupported matrix storage format: "+t);return e},o._storage={},o.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},o.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},o.prototype.create=function(t,e){throw new Error("Cannot invoke create on a Matrix interface")},o.prototype.subset=function(t,e,r){throw new Error("Cannot invoke subset on a Matrix interface")},o.prototype.get=function(t){throw new Error("Cannot invoke get on a Matrix interface")},o.prototype.set=function(t,e,r){throw new Error("Cannot invoke set on a Matrix interface")},o.prototype.resize=function(t,e){throw new Error("Cannot invoke resize on a Matrix interface")},o.prototype.reshape=function(t,e){throw new Error("Cannot invoke reshape on a Matrix interface")},o.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},o.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},o.prototype.map=function(t,e){throw new Error("Cannot invoke map on a Matrix interface")},o.prototype.forEach=function(t){throw new Error("Cannot invoke forEach on a Matrix interface")},o.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},o.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},o.prototype.format=function(t){throw new Error("Cannot invoke format on a Matrix interface")},o.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},o}var o=r(40),a=o.string,i=a.isString;e.name="Matrix",e.path="type",e.factory=n},function(t,e,r){"use strict";e.array=r(41),e.boolean=r(47),e.function=r(48),e.number=r(31),e.object=r(27),e.string=r(42),e.types=r(44),e.emitter=r(33)},function(t,e,r){"use strict";function n(t,e,r){var o,a=t.length;if(a!=e[r])throw new u(a,e[r]);if(r<e.length-1){var i=r+1;for(o=0;o<a;o++){var s=t[o];if(!Array.isArray(s))throw new u(e.length-1,e.length,"<");n(t[o],e,i)}}else for(o=0;o<a;o++)if(Array.isArray(t[o]))throw new u(e.length+1,e.length,">")}function o(t,r,n,a){var i,s,l=t.length,c=r[n],u=Math.min(l,c);if(t.length=c,n<r.length-1){var d=n+1;for(i=0;i<u;i++)s=t[i],Array.isArray(s)||(s=[s],t[i]=s),o(s,r,d,a);for(i=u;i<c;i++)s=[],t[i]=s,o(s,r,d,a)}else{for(i=0;i<u;i++)for(;Array.isArray(t[i]);)t[i]=t[i][0];if(a!==e.UNINITIALIZED)for(i=u;i<c;i++)t[i]=a}}function a(t,e){var r,n=[];if(0===e.length){if(0===t.length)throw new u(null,null,"!=");return t.shift()}for(r=0;r<e[0];r+=1)n.push(a(t,e.slice(1)));return n}function i(t,e,r){var n,o;if(r<e){var a=r+1;for(n=0,o=t.length;n<o;n++)t[n]=i(t[n],e,a)}else for(;Array.isArray(t);)t=t[0];return t}function s(t,e,r){var n,o;if(Array.isArray(t)){var a=r+1;for(n=0,o=t.length;n<o;n++)t[n]=s(t[n],e,a)}else for(var i=r;i<e;i++)t=[t];return t}var l=r(31),c=r(42),u=(r(27),r(44),r(45)),d=r(46);e.size=function(t){for(var e=[];Array.isArray(t);)e.push(t.length),t=t[0];return e},e.validate=function(t,e){var r=0==e.length;if(r){if(Array.isArray(t))throw new u(t.length,0)}else n(t,e,0)},e.validateIndex=function(t,e){if(!l.isNumber(t)||!l.isInteger(t))throw new TypeError("Index must be an integer (value: "+t+")");if(t<0||"number"==typeof e&&t>=e)throw new d(t,e)},e.UNINITIALIZED={},e.resize=function(t,e,r){if(!Array.isArray(t)||!Array.isArray(e))throw new TypeError("Array expected");if(0===e.length)throw new Error("Resizing to scalar is not supported");e.forEach(function(t){if(!l.isNumber(t)||!l.isInteger(t)||t<0)throw new TypeError("Invalid size, must contain positive integers (size: "+c.format(e)+")")});var n=void 0!==r?r:0;return o(t,e,0,n),t},e.reshape=function(t,r){var n,o=e.flatten(t),i=function(t){return t.reduce(function(t,e){return t*e})};if(!Array.isArray(t)||!Array.isArray(r))throw new TypeError("Array expected");if(0===r.length)throw new u(0,i(e.size(t)),"!=");try{n=a(o,r)}catch(n){if(n instanceof u)throw new u(i(r),i(e.size(t)),"!=");throw n}if(o.length>0)throw new u(i(r),i(e.size(t)),"!=");return n},e.squeeze=function(t,r){for(var n=r||e.size(t);Array.isArray(t)&&1===t.length;)t=t[0],n.shift();for(var o=n.length;1===n[o-1];)o--;return o<n.length&&(t=i(t,o,0),n.length=o),t},e.unsqueeze=function(t,r,n,o){var a=o||e.size(t);if(n)for(var i=0;i<n;i++)t=[t],a.unshift(1);for(t=s(t,r,0);a.length<r;)a.push(1);return t},e.flatten=function(t){if(!Array.isArray(t))return t;var e=[];return t.forEach(function t(r){Array.isArray(r)?r.forEach(t):e.push(r)}),e},e.map=function(t,e){return Array.prototype.map.call(t,e)},e.forEach=function(t,e){Array.prototype.forEach.call(t,e)},e.filter=function(t,r){if(1!==e.size(t).length)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(t,r)},e.filterRegExp=function(t,r){if(1!==e.size(t).length)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(t,function(t){return r.test(t)})},e.join=function(t,e){return Array.prototype.join.call(t,e)},e.identify=function(t){if(!Array.isArray(t))throw new TypeError("Array input expected");if(0===t.length)return t;var e=[],r=0;e[0]={value:t[0],identifier:0};for(var n=1;n<t.length;n++)t[n]===t[n-1]?r++:r=0,e.push({value:t[n],identifier:r});return e},e.generalize=function(t){if(!Array.isArray(t))throw new TypeError("Array input expected");if(0===t.length)return t;for(var e=[],r=0;r<t.length;r++)e.push(t[r].value);return e},e.isArray=Array.isArray},function(t,e,r){"use strict";function n(t,r){if(Array.isArray(t)){for(var o="[",a=t.length,i=0;i<a;i++)0!=i&&(o+=", "),o+=n(t[i],r);return o+="]"}return e.format(t,r)}function o(t){return t&&"object"===("undefined"==typeof t?"undefined":a(t))&&"number"==typeof t.s&&"number"==typeof t.n&&"number"==typeof t.d||!1}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=r(31).format,s=r(43).format,l=r(28);e.isString=function(t){return"string"==typeof t},e.endsWith=function(t,e){var r=t.length-e.length,n=t.length;return t.substring(r,n)===e},e.format=function(t,r){if("number"==typeof t)return i(t,r);if(l(t))return s(t,r);if(o(t))return r&&"decimal"===r.fraction?t.toString():t.s*t.n+"/"+t.d;if(Array.isArray(t))return n(t,r);if(e.isString(t))return'"'+t+'"';if("function"==typeof t)return t.syntax?String(t.syntax):"function";if(t&&"object"===("undefined"==typeof t?"undefined":a(t))){if("function"==typeof t.format)return t.format(r);if(t&&t.toString()!=={}.toString())return t.toString();var c=[];for(var u in t)t.hasOwnProperty(u)&&c.push('"'+u+'": '+e.format(t[u],r));return"{"+c.join(", ")+"}"}return String(t)},e.stringify=function(t){for(var e=String(t),r="",n=0;n<e.length;){var o=e.charAt(n);"\\"===o?(r+=o,n++,o=e.charAt(n),""!==o&&'"\\/bfnrtu'.indexOf(o)!==-1||(r+="\\"),r+=o):r+='"'===o?'\\"':o,n++}return'"'+r+'"'},e.escape=function(t){var e=String(t);return e=e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}},function(t,e){"use strict";e.format=function(t,r){if("function"==typeof r)return r(t);if(!t.isFinite())return t.isNaN()?"NaN":t.gt(0)?"Infinity":"-Infinity";var n="auto",o=void 0;switch(void 0!==r&&(r.notation&&(n=r.notation),"number"==typeof r?o=r:r.precision&&(o=r.precision)),n){case"fixed":return e.toFixed(t,o);case"exponential":return e.toExponential(t,o);case"auto":var a=.001,i=1e5;r&&r.exponential&&(void 0!==r.exponential.lower&&(a=r.exponential.lower),void 0!==r.exponential.upper&&(i=r.exponential.upper));({toExpNeg:t.constructor.toExpNeg,toExpPos:t.constructor.toExpPos});if(t.constructor.config({toExpNeg:Math.round(Math.log(a)/Math.LN10),toExpPos:Math.round(Math.log(i)/Math.LN10)}),t.isZero())return"0";var s,l=t.abs();return s=l.gte(a)&&l.lt(i)?t.toSignificantDigits(o).toFixed():e.toExponential(t,o),s.replace(/((\.\d*?)(0+))($|e)/,function(){var t=arguments[2],e=arguments[4];return"."!==t?t+e:e});default:throw new Error('Unknown notation "'+n+'". Choose "auto", "exponential", or "fixed".')}},e.toExponential=function(t,e){return void 0!==e?t.toExponential(e-1):t.toExponential()},e.toFixed=function(t,e){return t.toFixed(e||0)}},function(t,e){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.type=function(t){var e="undefined"==typeof t?"undefined":r(t);return"object"===e?null===t?"null":Array.isArray(t)?"Array":t instanceof Date?"Date":t instanceof RegExp?"RegExp":t instanceof Boolean?"boolean":t instanceof Number?"number":t instanceof String?"string":"Object":"function"===e?"Function":e}},function(t,e){"use strict";function r(t,e,n){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");this.actual=t,this.expected=e,this.relation=n,this.message="Dimension mismatch ("+(Array.isArray(t)?"["+t.join(", ")+"]":t)+" "+(this.relation||"!=")+" "+(Array.isArray(e)?"["+e.join(", ")+"]":e)+")",this.stack=(new Error).stack}r.prototype=new RangeError,r.prototype.constructor=RangeError,r.prototype.name="DimensionError",r.prototype.isDimensionError=!0,t.exports=r},function(t,e){"use strict";function r(t,e,n){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");this.index=t,arguments.length<3?(this.min=0,this.max=e):(this.min=e,this.max=n),void 0!==this.min&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":void 0!==this.max&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=(new Error).stack}r.prototype=new RangeError,r.prototype.constructor=RangeError,r.prototype.name="IndexError",r.prototype.isIndexError=!0,t.exports=r},function(t,e){"use strict";e.isBoolean=function(t){return"boolean"==typeof t}},function(t,e){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.memoize=function(t,e){return function n(){"object"!==r(n.cache)&&(n.cache={});for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];var i=e?e(o):JSON.stringify(o);return i in n.cache?n.cache[i]:n.cache[i]=t.apply(t,o)}},e.maxArgumentCount=function(t){return Object.keys(t.signatures||{}).reduce(function(t,e){var r=(e.match(/,/g)||[]).length+1;return Math.max(t,r)},-1)},e.callWithRightArgumentCount=function(t,e,r){return Object.keys(t.signatures||{}).reduce(function(t,e){var r=(e.match(/,/g)||[]).length+1;return Math.max(t,r)},-1)}},function(t,e,r){"use strict";function n(t,e,n,c){function h(e,r){if(!(this instanceof h))throw new SyntaxError("Constructor must be called with the new operator");if(r&&!_(r))throw new Error("Invalid datatype: "+r);if(t.isMatrix(e))"DenseMatrix"===e.type?(this._data=l.clone(e._data),this._size=l.clone(e._size),this._datatype=r||e._datatype):(this._data=e.toArray(),this._size=e.size(),this._datatype=r||e._datatype);else if(e&&u(e.data)&&u(e.size))this._data=e.data,this._size=e.size,this._datatype=r||e.datatype;else if(u(e))this._data=x(e),this._size=s.size(this._data),s.validate(this._data,this._size),this._datatype=r;else{if(e)throw new TypeError("Unsupported type of data ("+o.types.type(e)+")");this._data=[],this._size=[0],this._datatype=r}}function v(e,r){if(!t.isIndex(r))throw new TypeError("Invalid index");var n=r.isScalar();if(n)return e.get(r.min());var o=r.size();if(o.length!=e._size.length)throw new a(o.length,e._size.length);for(var i=r.min(),s=r.max(),l=0,c=e._size.length;l<c;l++)p(i[l],e._size[l]),p(s[l],e._size[l]);return new h(m(e._data,r,o.length,0),e._datatype)}function m(t,e,r,n){var o=n===r-1,a=e.dimension(n);return o?a.map(function(e){return p(e,t.length),t[e]}).valueOf():a.map(function(o){p(o,t.length);var a=t[o];return m(a,e,r,n+1)}).valueOf()}function g(e,r,n,o){if(!r||r.isIndex!==!0)throw new TypeError("Invalid index");var i,c=r.size(),u=r.isScalar();if(t.isMatrix(n)?(i=n.size(),n=n.valueOf()):i=s.size(n),u){if(0!==i.length)throw new TypeError("Scalar expected");e.set(r.min(),n,o)}else{if(c.length<e._size.length)throw new a(c.length,e._size.length,"<");if(i.length<c.length){for(var d=0,f=0;1===c[d]&&1===i[d];)d++;for(;1===c[d];)f++,d++;n=s.unsqueeze(n,c.length,f,i)}if(!l.deepEqual(c,i))throw new a(c,i,">");var _=r.max().map(function(t){return t+1});w(e,_,o);var p=c.length,h=0;y(e._data,r,n,p,h)}return e}function y(t,e,r,n,o){var a=o===n-1,i=e.dimension(o);a?i.forEach(function(e,n){p(e),t[e]=r[n[0]]}):i.forEach(function(a,i){p(a),y(t[a],e,r[i[0]],n,o+1)})}function w(t,e,r){for(var n=t._size.slice(0),o=!1;n.length<e.length;)n.push(0),o=!0;for(var a=0,i=e.length;a<i;a++)e[a]>n[a]&&(n[a]=e[a],o=!0);o&&z(t,n,r)}function x(t){for(var e=0,r=t.length;e<r;e++){var n=t[e];u(n)?t[e]=x(n):n&&n.isMatrix===!0&&(t[e]=x(n.valueOf()))}return t}var b=n(r(39));h.prototype=new b,h.prototype.type="DenseMatrix",h.prototype.isDenseMatrix=!0,h.prototype.storage=function(){return"dense"},h.prototype.datatype=function(){return this._datatype},h.prototype.create=function(t,e){return new h(t,e)},h.prototype.subset=function(t,e,r){switch(arguments.length){case 1:return v(this,t);case 2:case 3:return g(this,t,e,r);default:throw new SyntaxError("Wrong number of arguments")}},h.prototype.get=function(t){if(!u(t))throw new TypeError("Array expected");if(t.length!=this._size.length)throw new a(t.length,this._size.length);for(var e=0;e<t.length;e++)p(t[e],this._size[e]);for(var r=this._data,n=0,o=t.length;n<o;n++){var i=t[n];p(i,r.length),r=r[i]}return r},h.prototype.set=function(t,e,r){if(!u(t))throw new TypeError("Array expected");if(t.length<this._size.length)throw new a(t.length,this._size.length,"<");var n,o,i,s=t.map(function(t){return t+1});w(this,s,r);var l=this._data;for(n=0,o=t.length-1;n<o;n++)i=t[n],p(i,l.length),l=l[i];return i=t[t.length-1],p(i,l.length),l[i]=e,this},h.prototype.resize=function(t,e,r){if(!u(t))throw new TypeError("Array expected");var n=r?this.clone():this;return z(n,t,e)};var z=function(t,e,r){if(0===e.length){for(var n=t._data;u(n);)n=n[0];return n}return t._size=e.slice(0),t._data=s.resize(t._data,t._size,r),t};return h.prototype.reshape=function(t,e){var r=e?this.clone():this;return r._data=s.reshape(r._data,t),r._size=t.slice(0),r},h.prototype.clone=function(){var t=new h({data:l.clone(this._data),size:l.clone(this._size),datatype:this._datatype});return t},h.prototype.size=function(){return this._size.slice(0)},h.prototype.map=function(t){var e=this,r=function r(n,o){return u(n)?n.map(function(t,e){return r(t,o.concat(e))}):t(n,o,e)};return new h({data:r(this._data,[]),size:l.clone(this._size),datatype:this._datatype})},h.prototype.forEach=function(t){var e=this,r=function r(n,o){u(n)?n.forEach(function(t,e){r(t,o.concat(e))}):t(n,o,e)};r(this._data,[])},h.prototype.toArray=function(){return l.clone(this._data)},h.prototype.valueOf=function(){return this._data},h.prototype.format=function(t){return i.format(this._data,t)},h.prototype.toString=function(){return i.format(this._data)},h.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},h.prototype.diagonal=function(e){if(e){if(t.isBigNumber(e)&&(e=e.toNumber()),!d(e)||!f(e))throw new TypeError("The parameter k must be an integer number")}else e=0;for(var r=e>0?e:0,n=e<0?-e:0,o=this._size[0],a=this._size[1],i=Math.min(o-n,a-r),s=[],l=0;l<i;l++)s[l]=this._data[l+n][l+r];return new h({data:s,size:[i],datatype:this._datatype})},h.diagonal=function(e,r,n,o,a){if(!u(e))throw new TypeError("Array expected, size parameter");if(2!==e.length)throw new Error("Only two dimensions matrix are supported");if(e=e.map(function(e){if(t.isBigNumber(e)&&(e=e.toNumber()),!d(e)||!f(e)||e<1)throw new Error("Size values must be positive integers");return e}),n){if(t.isBigNumber(n)&&(n=n.toNumber()),!d(n)||!f(n))throw new TypeError("The parameter k must be an integer number")}else n=0;o&&_(a)&&(o=c.convert(o,a));var i,l=n>0?n:0,p=n<0?-n:0,v=e[0],m=e[1],g=Math.min(v-p,m-l);if(u(r)){if(r.length!==g)throw new Error("Invalid value array length");i=function(t){return r[t]}}else if(t.isMatrix(r)){var y=r.size();if(1!==y.length||y[0]!==g)throw new Error("Invalid matrix length");i=function(t){return r.get([t])}}else i=function(){return r};o||(o=t.isBigNumber(i(0))?new t.BigNumber(0):0);var w=[];if(e.length>0){w=s.resize(w,e,o);for(var x=0;x<g;x++)w[x+p][x+l]=i(x)}return new h({data:w,size:[v,m]})},h.fromJSON=function(t){return new h(t)},h.prototype.swapRows=function(t,e){if(!(d(t)&&f(t)&&d(e)&&f(e)))throw new Error("Row index must be positive integers");if(2!==this._size.length)throw new Error("Only two dimensional matrix is supported");return p(t,this._size[0]),p(e,this._size[0]),h._swapRows(t,e,this._data),this},h._swapRows=function(t,e,r){var n=r[t];r[t]=r[e],r[e]=n},t.Matrix._storage.dense=h,t.Matrix._storage.default=h,h}var o=r(40),a=r(45),i=(r(50).getSafeProperty,r(50).setSafeProperty,o.string),s=o.array,l=o.object,c=o.number,u=Array.isArray,d=c.isNumber,f=c.isInteger,_=i.isString,p=s.validateIndex;e.name="DenseMatrix",e.path="type",e.factory=n,e.lazy=!1},function(t,e,r){"use strict";function n(t,e){if(l(t)&&a(t,e))return t[e];if("function"==typeof t[e]&&s(t,e))throw new Error('Cannot access method "'+e+'" as a property');throw new Error('No access to property "'+e+'"')}function o(t,e,r){if(l(t)&&a(t,e))return t[e]=r;throw new Error('No access to property "'+e+'"')}function a(t,e){return!(!t||"object"!==("undefined"==typeof t?"undefined":c(t)))&&(!!u(d,e)||!(e in Object.prototype)&&!(e in Function.prototype))}function i(t,e){if(!s(t,e))throw new Error('No access to method "'+e+'"')}function s(t,e){return!(!t||"function"!=typeof t[e])&&(!(u(t,e)&&t.__proto__&&e in t.__proto__)&&(!!u(f,e)||!(e in Object.prototype)&&!(e in Function.prototype)))}function l(t){return"object"===("undefined"==typeof t?"undefined":c(t))&&t&&t.constructor===Object}var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u=r(27).hasOwnProperty,d={length:!0,name:!0},f={toString:!0,valueOf:!0,toLocaleString:!0};e.getSafeProperty=n,e.setSafeProperty=o,e.isSafeProperty=a,e.validateSafeMethod=i,e.isSafeMethod=s,e.isPlainObject=l},function(t,e,r){"use strict";function n(t,e,n,h){function v(e,r){if(!(this instanceof v))throw new SyntaxError("Constructor must be called with the new operator");if(r&&!_(r))throw new Error("Invalid datatype: "+r);
if(t.isMatrix(e))y(this,e,r);else if(e&&u(e.index)&&u(e.ptr)&&u(e.size))this._values=e.values,this._index=e.index,this._ptr=e.ptr,this._size=e.size,this._datatype=r||e.datatype;else if(u(e))w(this,e,r);else{if(e)throw new TypeError("Unsupported type of data ("+o.types.type(e)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=r}}var m=n(r(39)),g=n(r(52)),y=function(t,e,r){"SparseMatrix"===e.type?(t._values=e._values?s.clone(e._values):void 0,t._index=s.clone(e._index),t._ptr=s.clone(e._ptr),t._size=s.clone(e._size),t._datatype=r||e._datatype):w(t,e.valueOf(),r||e._datatype)},w=function(t,e,r){t._values=[],t._index=[],t._ptr=[],t._datatype=r;var n=e.length,o=0,a=g,i=0;if(_(r)&&(a=h.find(g,[r,r])||g,i=h.convert(0,r)),n>0){var s=0;do{t._ptr.push(t._index.length);for(var l=0;l<n;l++){var c=e[l];if(u(c)){if(0===s&&o<c.length&&(o=c.length),s<c.length){var d=c[s];a(d,i)||(t._values.push(d),t._index.push(l))}}else 0===s&&o<1&&(o=1),a(c,i)||(t._values.push(c),t._index.push(l))}s++}while(s<o)}t._ptr.push(t._index.length),t._size=[n,o]};v.prototype=new m,v.prototype.type="SparseMatrix",v.prototype.isSparseMatrix=!0,v.prototype.storage=function(){return"sparse"},v.prototype.datatype=function(){return this._datatype},v.prototype.create=function(t,e){return new v(t,e)},v.prototype.density=function(){var t=this._size[0],e=this._size[1];return 0!==t&&0!==e?this._index.length/(t*e):0},v.prototype.subset=function(t,e,r){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return x(this,t);case 2:case 3:return b(this,t,e,r);default:throw new SyntaxError("Wrong number of arguments")}};var x=function(e,r){if(!t.isIndex(r))throw new TypeError("Invalid index");var n=r.isScalar();if(n)return e.get(r.min());var o=r.size();if(o.length!=e._size.length)throw new a(o.length,e._size.length);var i,s,l,c,u=r.min(),d=r.max();for(i=0,s=e._size.length;i<s;i++)p(u[i],e._size[i]),p(d[i],e._size[i]);var f=e._values,_=e._index,h=e._ptr,m=r.dimension(0),g=r.dimension(1),y=[],w=[];m.forEach(function(t,e){w[t]=e[0],y[t]=!0});var x=f?[]:void 0,b=[],z=[];return g.forEach(function(t){for(z.push(b.length),l=h[t],c=h[t+1];l<c;l++)i=_[l],y[i]===!0&&(b.push(w[i]),x&&x.push(f[l]))}),z.push(b.length),new v({values:x,index:b,ptr:z,size:o,datatype:e._datatype})},b=function(e,r,n,o){if(!r||r.isIndex!==!0)throw new TypeError("Invalid index");var l,c=r.size(),u=r.isScalar();if(t.isMatrix(n)?(l=n.size(),n=n.toArray()):l=i.size(n),u){if(0!==l.length)throw new TypeError("Scalar expected");e.set(r.min(),n,o)}else{if(1!==c.length&&2!==c.length)throw new a(c.length,e._size.length,"<");if(l.length<c.length){for(var d=0,f=0;1===c[d]&&1===l[d];)d++;for(;1===c[d];)f++,d++;n=i.unsqueeze(n,c.length,f,l)}if(!s.deepEqual(c,l))throw new a(c,l,">");for(var _=r.min()[0],p=r.min()[1],h=l[0],v=l[1],m=0;m<h;m++)for(var g=0;g<v;g++){var y=n[m][g];e.set([m+_,g+p],y,o)}}return e};v.prototype.get=function(t){if(!u(t))throw new TypeError("Array expected");if(t.length!=this._size.length)throw new a(t.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var e=t[0],r=t[1];p(e,this._size[0]),p(r,this._size[1]);var n=z(e,this._ptr[r],this._ptr[r+1],this._index);return n<this._ptr[r+1]&&this._index[n]===e?this._values[n]:0},v.prototype.set=function(t,e,r){if(!u(t))throw new TypeError("Array expected");if(t.length!=this._size.length)throw new a(t.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var n=t[0],o=t[1],i=this._size[0],s=this._size[1],l=g,c=0;_(this._datatype)&&(l=h.find(g,[this._datatype,this._datatype])||g,c=h.convert(0,this._datatype)),(n>i-1||o>s-1)&&(E(this,Math.max(n+1,i),Math.max(o+1,s),r),i=this._size[0],s=this._size[1]),p(n,i),p(o,s);var d=z(n,this._ptr[o],this._ptr[o+1],this._index);return d<this._ptr[o+1]&&this._index[d]===n?l(e,c)?k(d,o,this._values,this._index,this._ptr):this._values[d]=e:A(d,n,o,e,this._values,this._index,this._ptr),this};var z=function(t,e,r,n){if(r-e===0)return r;for(var o=e;o<r;o++)if(n[o]===t)return o;return e},k=function(t,e,r,n,o){r.splice(t,1),n.splice(t,1);for(var a=e+1;a<o.length;a++)o[a]--},A=function(t,e,r,n,o,a,i){o.splice(t,0,n),a.splice(t,0,e);for(var s=r+1;s<i.length;s++)i[s]++};v.prototype.resize=function(t,e,r){if(!u(t))throw new TypeError("Array expected");if(2!==t.length)throw new Error("Only two dimensions matrix are supported");t.forEach(function(e){if(!c.isNumber(e)||!c.isInteger(e)||e<0)throw new TypeError("Invalid size, must contain positive integers (size: "+l.format(t)+")")});var n=r?this.clone():this;return E(n,t[0],t[1],e)};var E=function(t,e,r,n){var o=n||0,a=g,i=0;_(t._datatype)&&(a=h.find(g,[t._datatype,t._datatype])||g,i=h.convert(0,t._datatype),o=h.convert(o,t._datatype));var s,l,c,u=!a(o,i),d=t._size[0],f=t._size[1];if(r>f){for(l=f;l<r;l++)if(t._ptr[l]=t._values.length,u)for(s=0;s<d;s++)t._values.push(o),t._index.push(s);t._ptr[r]=t._values.length}else r<f&&(t._ptr.splice(r+1,f-r),t._values.splice(t._ptr[r],t._values.length),t._index.splice(t._ptr[r],t._index.length));if(f=r,e>d){if(u){var p=0;for(l=0;l<f;l++){t._ptr[l]=t._ptr[l]+p,c=t._ptr[l+1]+p;var v=0;for(s=d;s<e;s++,v++)t._values.splice(c+v,0,o),t._index.splice(c+v,0,s),p++}t._ptr[f]=t._values.length}}else if(e<d){var m=0;for(l=0;l<f;l++){t._ptr[l]=t._ptr[l]-m;var y=t._ptr[l],w=t._ptr[l+1]-m;for(c=y;c<w;c++)s=t._index[c],s>e-1&&(t._values.splice(c,1),t._index.splice(c,1),m++)}t._ptr[l]=t._values.length}return t._size[0]=e,t._size[1]=r,t};v.prototype.reshape=function(t,e){if(!u(t))throw new TypeError("Array expected");if(2!==t.length)throw new Error("Sparse matrices can only be reshaped in two dimensions");if(t.forEach(function(e){if(!c.isNumber(e)||!c.isInteger(e)||e<0)throw new TypeError("Invalid size, must contain positive integers (size: "+l.format(t)+")")}),this._size[0]*this._size[1]!==t[0]*t[1])throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var r=e?this.clone():this;if(this._size[0]===t[0]&&this._size[1]===t[1])return r;for(var n=[],o=0;o<r._ptr.length;o++)for(var a=0;a<r._ptr[o+1]-r._ptr[o];a++)n.push(o);for(var i=r._values.slice(),s=r._index.slice(),o=0;o<r._index.length;o++){var d=s[o],f=n[o],_=d*r._size[1]+f;n[o]=_%t[1],s[o]=Math.floor(_/t[1])}r._values.length=0,r._index.length=0,r._ptr.length=t[1]+1,r._size=t.slice();for(var o=0;o<r._ptr.length;o++)r._ptr[o]=0;for(var p=0;p<i.length;p++){var o=s[p],a=n[p],h=i[p],v=z(o,r._ptr[a],r._ptr[a+1],r._index);A(v,o,a,h,r._values,r._index,r._ptr)}return r},v.prototype.clone=function(){var t=new v({values:this._values?s.clone(this._values):void 0,index:s.clone(this._index),ptr:s.clone(this._ptr),size:s.clone(this._size),datatype:this._datatype});return t},v.prototype.size=function(){return this._size.slice(0)},v.prototype.map=function(t,e){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var r=this,n=this._size[0],o=this._size[1],a=function(e,n,o){return t(e,[n,o],r)};return N(this,0,n-1,0,o-1,a,e)};var N=function(t,e,r,n,o,a,i){var s=[],l=[],c=[],u=g,d=0;_(t._datatype)&&(u=h.find(g,[t._datatype,t._datatype])||g,d=h.convert(0,t._datatype));for(var f=function(t,e,r){t=a(t,e,r),u(t,d)||(s.push(t),l.push(e))},p=n;p<=o;p++){c.push(s.length);for(var m=t._ptr[p],y=t._ptr[p+1],w=e,x=m;x<y;x++){var b=t._index[x];if(b>=e&&b<=r){if(!i)for(var z=w;z<b;z++)f(0,z-e,p-n);f(t._values[x],b-e,p-n)}w=b+1}if(!i)for(var k=w;k<=r;k++)f(0,k-e,p-n)}return c.push(s.length),new v({values:s,index:l,ptr:c,size:[r-e+1,o-n+1]})};v.prototype.forEach=function(t,e){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var r=this,n=this._size[0],o=this._size[1],a=0;a<o;a++){for(var i=this._ptr[a],s=this._ptr[a+1],l=0,c=i;c<s;c++){var u=this._index[c];if(!e)for(var d=l;d<u;d++)t(0,[d,a],r);t(this._values[c],[u,a],r),l=u+1}if(!e)for(var f=l;f<n;f++)t(0,[f,a],r)}},v.prototype.toArray=function(){return M(this._values,this._index,this._ptr,this._size,!0)},v.prototype.valueOf=function(){return M(this._values,this._index,this._ptr,this._size,!1)};var M=function(t,e,r,n,o){var a,i,l=n[0],c=n[1],u=[];for(a=0;a<l;a++)for(u[a]=[],i=0;i<c;i++)u[a][i]=0;for(i=0;i<c;i++)for(var d=r[i],f=r[i+1],_=d;_<f;_++)a=e[_],u[a][i]=t?o?s.clone(t[_]):t[_]:1;return u};return v.prototype.format=function(t){for(var e=this._size[0],r=this._size[1],n=this.density(),o="Sparse Matrix ["+l.format(e,t)+" x "+l.format(r,t)+"] density: "+l.format(n,t)+"\n",a=0;a<r;a++)for(var i=this._ptr[a],s=this._ptr[a+1],c=i;c<s;c++){var u=this._index[c];o+="\n    ("+l.format(u,t)+", "+l.format(a,t)+") ==> "+(this._values?l.format(this._values[c],t):"X")}return o},v.prototype.toString=function(){return l.format(this.toArray())},v.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},v.prototype.diagonal=function(e){if(e){if(t.isBigNumber(e)&&(e=e.toNumber()),!d(e)||!f(e))throw new TypeError("The parameter k must be an integer number")}else e=0;var r=e>0?e:0,n=e<0?-e:0,o=this._size[0],a=this._size[1],i=Math.min(o-n,a-r),s=[],l=[],c=[];c[0]=0;for(var u=r;u<a&&s.length<i;u++)for(var _=this._ptr[u],p=this._ptr[u+1],h=_;h<p;h++){var m=this._index[h];if(m===u-r+n){s.push(this._values[h]),l[s.length-1]=m-n;break}}return c.push(s.length),new v({values:s,index:l,ptr:c,size:[i,1]})},v.fromJSON=function(t){return new v(t)},v.diagonal=function(e,r,n,o,a){if(!u(e))throw new TypeError("Array expected, size parameter");if(2!==e.length)throw new Error("Only two dimensions matrix are supported");if(e=e.map(function(e){if(t.isBigNumber(e)&&(e=e.toNumber()),!d(e)||!f(e)||e<1)throw new Error("Size values must be positive integers");return e}),n){if(t.isBigNumber(n)&&(n=n.toNumber()),!d(n)||!f(n))throw new TypeError("The parameter k must be an integer number")}else n=0;var i=g,s=0;_(a)&&(i=h.find(g,[a,a])||g,s=h.convert(0,a));var l,c=n>0?n:0,p=n<0?-n:0,m=e[0],y=e[1],w=Math.min(m-p,y-c);if(u(r)){if(r.length!==w)throw new Error("Invalid value array length");l=function(t){return r[t]}}else if(t.isMatrix(r)){var x=r.size();if(1!==x.length||x[0]!==w)throw new Error("Invalid matrix length");l=function(t){return r.get([t])}}else l=function(){return r};for(var b=[],z=[],k=[],A=0;A<y;A++){k.push(b.length);var E=A-c;if(E>=0&&E<w){var N=l(E);i(N,s)||(z.push(E+p),b.push(N))}}return k.push(b.length),new v({values:b,index:z,ptr:k,size:[m,y]})},v.prototype.swapRows=function(t,e){if(!(d(t)&&f(t)&&d(e)&&f(e)))throw new Error("Row index must be positive integers");if(2!==this._size.length)throw new Error("Only two dimensional matrix is supported");return p(t,this._size[0]),p(e,this._size[0]),v._swapRows(t,e,this._size[1],this._values,this._index,this._ptr),this},v._forEachRow=function(t,e,r,n,o){for(var a=n[t],i=n[t+1],s=a;s<i;s++)o(r[s],e[s])},v._swapRows=function(t,e,r,n,o,a){for(var i=0;i<r;i++){var s=a[i],l=a[i+1],c=z(t,s,l,o),u=z(e,s,l,o);if(c<l&&u<l&&o[c]===t&&o[u]===e){if(n){var d=n[c];n[c]=n[u],n[u]=d}}else if(c<l&&o[c]===t&&(u>=l||o[u]!==e)){var f=n?n[c]:void 0;o.splice(u,0,e),n&&n.splice(u,0,f),o.splice(u<=c?c+1:c,1),n&&n.splice(u<=c?c+1:c,1)}else if(u<l&&o[u]===e&&(c>=l||o[c]!==t)){var _=n?n[u]:void 0;o.splice(c,0,t),n&&n.splice(c,0,_),o.splice(c<=u?u+1:u,1),n&&n.splice(c<=u?u+1:u,1)}}},t.Matrix._storage.sparse=v,v}var o=r(40),a=r(45),i=o.array,s=o.object,l=o.string,c=o.number,u=Array.isArray,d=c.isNumber,f=c.isInteger,_=l.isString,p=i.validateIndex;e.name="SparseMatrix",e.path="type",e.factory=n,e.lazy=!1},function(t,e,r){"use strict";function n(t,e,r,n){var i=n("equalScalar",{"boolean, boolean":function(t,e){return t===e},"number, number":function(t,r){return t===r||o(t,r,e.epsilon)},"BigNumber, BigNumber":function(t,r){return t.eq(r)||a(t,r,e.epsilon)},"Fraction, Fraction":function(t,e){return t.equals(e)},"Complex, Complex":function(t,e){return t.equals(e)},"Unit, Unit":function(t,e){if(!t.equalBase(e))throw new Error("Cannot compare units with different base");return i(t.value,e.value)},"string, string":function(t,e){return t===e}});return i}var o=r(31).nearlyEqual,a=r(53);e.factory=n},function(t,e){"use strict";t.exports=function(t,e,r){if(null==r)return t.eq(e);if(t.eq(e))return!0;if(t.isNaN()||e.isNaN())return!1;if(t.isFinite()&&e.isFinite()){var n=t.minus(e).abs();if(n.isZero())return!0;var o=t.constructor.max(t.abs(),e.abs());return n.lte(o.times(r))}return!1}},function(t,e,r){"use strict";function n(t,e,n){function o(){if(!(this instanceof o))throw new SyntaxError("Constructor must be called with the new operator");this._values=[],this._heap=new t.FibonacciHeap}var a=n(r(55)),i=n(r(52));return o.prototype.type="Spa",o.prototype.isSpa=!0,o.prototype.set=function(t,e){if(this._values[t])this._values[t].value=e;else{var r=this._heap.insert(t,e);this._values[t]=r}},o.prototype.get=function(t){var e=this._values[t];return e?e.value:0},o.prototype.accumulate=function(t,e){var r=this._values[t];r?r.value=a(r.value,e):(r=this._heap.insert(t,e),this._values[t]=r)},o.prototype.forEach=function(t,e,r){var n=this._heap,o=this._values,a=[],s=n.extractMinimum();for(s&&a.push(s);s&&s.key<=e;)s.key>=t&&(i(s.value,0)||r(s.key,s.value,this)),s=n.extractMinimum(),s&&a.push(s);for(var l=0;l<a.length;l++){var c=a[l];s=n.insert(c.key,c.value),o[s.key]=s}},o.prototype.swap=function(t,e){var r=this._values[t],n=this._values[e];if(!r&&n)r=this._heap.insert(t,n.value),this._heap.remove(n),this._values[t]=r,this._values[e]=void 0;else if(r&&!n)n=this._heap.insert(e,r.value),this._heap.remove(r),this._values[e]=n,this._values[t]=void 0;else if(r&&n){var o=r.value;r.value=n.value,n.value=o}},o}e.name="Spa",e.path="type",e.factory=n},function(t,e,r){"use strict";function n(t,e,n,a){var i=n(r(56)),s=n(r(57)),l=r(58),c=n(r(59)),u=n(r(60)),d=n(r(61)),f=n(r(62)),_=n(r(63)),p=a("add",o({"Matrix, Matrix":function(t,e){var r;switch(t.storage()){case"sparse":switch(e.storage()){case"sparse":r=u(t,e,s);break;default:r=c(e,t,s,!0)}break;default:switch(e.storage()){case"sparse":r=c(t,e,s,!1);break;default:r=f(t,e,s)}}return r},"Array, Array":function(t,e){return p(i(t),i(e)).valueOf()},"Array, Matrix":function(t,e){return p(i(t),e)},"Matrix, Array":function(t,e){return p(t,i(e))},"Matrix, any":function(t,e){var r;switch(t.storage()){case"sparse":r=d(t,e,s,!1);break;default:r=_(t,e,s,!1)}return r},"any, Matrix":function(t,e){var r;switch(e.storage()){case"sparse":r=d(e,t,s,!0);break;default:r=_(e,t,s,!0)}return r},"Array, any":function(t,e){return _(i(t),e,s,!1).valueOf()},"any, Array":function(t,e){return _(i(e),t,s,!0).valueOf()},"any, any":s,"Array | Matrix | any, Array | Matrix | any, ...any":function(t,e,r){for(var n=p(t,e),o=0;o<r.length;o++)n=p(n,r[o]);return n}},s.signatures));return p.toTex={2:"\\left(${args[0]}"+l.operators.add+"${args[1]}\\right)"},p}var o=r(27).extend;e.name="add",e.factory=n},function(t,e){"use strict";function r(t,e,r,n){function o(e,r,n){var o=t.Matrix.storage(r||"default");return new o(e,n)}var a=n("matrix",{"":function(){return o([])},string:function(t){return o([],t)},"string, string":function(t,e){return o([],t,e)},Array:function(t){return o(t)},Matrix:function(t){return o(t,t.storage())},"Array | Matrix, string":o,"Array | Matrix, string, string":o});return a.toTex={0:"\\begin{bmatrix}\\end{bmatrix}",1:"\\left(${args[0]}\\right)",2:"\\left(${args[0]}\\right)"},a}e.name="matrix",e.factory=r},function(t,e){"use strict";function r(t,e,r,n){var o=n("add",{"number, number":function(t,e){return t+e},"Complex, Complex":function(t,e){return t.add(e)},"BigNumber, BigNumber":function(t,e){return t.plus(e)},"Fraction, Fraction":function(t,e){return t.add(e)},"Unit, Unit":function(t,e){if(null==t.value)throw new Error("Parameter x contains a unit with undefined value");if(null==e.value)throw new Error("Parameter y contains a unit with undefined value");if(!t.equalBase(e))throw new Error("Units do not match");var r=t.clone();return r.value=o(r.value,e.value),r.fixPrefix=!1,r}});return o}e.factory=r},function(t,e){"use strict";e.symbols={Alpha:"A",alpha:"\\alpha",Beta:"B",beta:"\\beta",Gamma:"\\Gamma",gamma:"\\gamma",Delta:"\\Delta",delta:"\\delta",Epsilon:"E",epsilon:"\\epsilon",varepsilon:"\\varepsilon",Zeta:"Z",zeta:"\\zeta",Eta:"H",eta:"\\eta",Theta:"\\Theta",theta:"\\theta",vartheta:"\\vartheta",Iota:"I",iota:"\\iota",Kappa:"K",kappa:"\\kappa",varkappa:"\\varkappa",Lambda:"\\Lambda",lambda:"\\lambda",Mu:"M",mu:"\\mu",Nu:"N",nu:"\\nu",Xi:"\\Xi",xi:"\\xi",Omicron:"O",omicron:"o",Pi:"\\Pi",pi:"\\pi",varpi:"\\varpi",Rho:"P",rho:"\\rho",varrho:"\\varrho",Sigma:"\\Sigma",sigma:"\\sigma",varsigma:"\\varsigma",Tau:"T",tau:"\\tau",Upsilon:"\\Upsilon",upsilon:"\\upsilon",Phi:"\\Phi",phi:"\\phi",varphi:"\\varphi",Chi:"X",chi:"\\chi",Psi:"\\Psi",psi:"\\psi",Omega:"\\Omega",omega:"\\omega",true:"\\mathrm{True}",false:"\\mathrm{False}",i:"i",inf:"\\infty",Inf:"\\infty",infinity:"\\infty",Infinity:"\\infty",oo:"\\infty",lim:"\\lim",undefined:"\\mathbf{?}"},e.operators={transpose:"^\\top",factorial:"!",pow:"^",dotPow:".^\\wedge",unaryPlus:"+",unaryMinus:"-",bitNot:"~",not:"\\neg",multiply:"\\cdot",divide:"\\frac",dotMultiply:".\\cdot",dotDivide:".:",mod:"\\mod",add:"+",subtract:"-",to:"\\rightarrow",leftShift:"<<",rightArithShift:">>",rightLogShift:">>>",equal:"=",unequal:"\\neq",smaller:"<",larger:">",smallerEq:"\\leq",largerEq:"\\geq",bitAnd:"\\&",bitXor:"\\underline{|}",bitOr:"|",and:"\\wedge",xor:"\\veebar",or:"\\vee"},e.defaultTemplate="\\mathrm{${name}}\\left(${args}\\right)";var r={deg:"^\\circ"};e.toSymbol=function(t,n){if(n="undefined"!=typeof n&&n)return r.hasOwnProperty(t)?r[t]:"\\mathrm{"+t+"}";if(e.symbols.hasOwnProperty(t))return e.symbols[t];if(t.indexOf("_")!==-1){var o=t.indexOf("_");return e.toSymbol(t.substring(0,o))+"_{"+e.toSymbol(t.substring(o+1))+"}"}return t}},function(t,e,r){"use strict";function n(t,e,r,n){var a=t.DenseMatrix,i=function(t,e,r,i){var s=t._data,l=t._size,c=t._datatype,u=e._values,d=e._index,f=e._ptr,_=e._size,p=e._datatype;if(l.length!==_.length)throw new o(l.length,_.length);if(l[0]!==_[0]||l[1]!==_[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+_+")");if(!u)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var h,v,m=l[0],g=l[1],y="string"==typeof c&&c===p?c:void 0,w=y?n.find(r,[y,y]):r,x=[];for(h=0;h<m;h++)x[h]=[];var b=[],z=[];for(v=0;v<g;v++){for(var k=v+1,A=f[v],E=f[v+1],N=A;N<E;N++)h=d[N],b[h]=i?w(u[N],s[h][v]):w(s[h][v],u[N]),z[h]=k;for(h=0;h<m;h++)z[h]===k?x[h][v]=b[h]:x[h][v]=s[h][v]}return new a({data:x,size:[m,g],datatype:y})};return i}var o=r(45);e.name="algorithm01",e.factory=n},function(t,e,r){"use strict";function n(t,e,n,a){var i=n(r(52)),s=t.SparseMatrix,l=function(t,e,r){var n=t._values,l=t._index,c=t._ptr,u=t._size,d=t._datatype,f=e._values,_=e._index,p=e._ptr,h=e._size,v=e._datatype;if(u.length!==h.length)throw new o(u.length,h.length);if(u[0]!==h[0]||u[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+h+")");var m,g=u[0],y=u[1],w=i,x=0,b=r;"string"==typeof d&&d===v&&(m=d,w=a.find(i,[m,m]),x=a.convert(0,m),b=a.find(r,[m,m]));var z,k,A,E,N,M=n&&f?[]:void 0,S=[],O=[],B=new s({values:M,index:S,ptr:O,size:[g,y],datatype:m}),T=n&&f?[]:void 0,C=n&&f?[]:void 0,F=[],I=[];for(k=0;k<y;k++){O[k]=S.length;var j=k+1;for(E=c[k],N=c[k+1],A=E;A<N;A++)z=l[A],S.push(z),F[z]=j,T&&(T[z]=n[A]);for(E=p[k],N=p[k+1],A=E;A<N;A++)if(z=_[A],F[z]===j){if(T){var P=b(T[z],f[A]);w(P,x)?F[z]=null:T[z]=P}}else S.push(z),I[z]=j,C&&(C[z]=f[A]);if(T&&C)for(A=O[k];A<S.length;)z=S[A],F[z]===j?(M[A]=T[z],A++):I[z]===j?(M[A]=C[z],A++):S.splice(A,1)}return O[y]=S.length,B};return l}var o=r(45);e.name="algorithm04",e.factory=n},function(t,e){"use strict";function r(t,e,r,n){var o=t.DenseMatrix,a=function(t,e,r,a){var i=t._values,s=t._index,l=t._ptr,c=t._size,u=t._datatype;if(!i)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var d,f=c[0],_=c[1],p=r;"string"==typeof u&&(d=u,e=n.convert(e,d),p=n.find(r,[d,d]));for(var h=[],v=new o({data:h,size:[f,_],datatype:d}),m=[],g=[],y=0;y<_;y++){for(var w=y+1,x=l[y],b=l[y+1],z=x;z<b;z++){var k=s[z];m[k]=i[z],g[k]=w}for(var A=0;A<f;A++)0===y&&(h[A]=[]),g[A]===w?h[A][y]=a?p(e,m[A]):p(m[A],e):h[A][y]=e}return v};return a}e.name="algorithm10",e.factory=r},function(t,e,r){"use strict";function n(t,e,r,n){var o=t.DenseMatrix,i=function(t,e,r){var i=t._data,l=t._size,c=t._datatype,u=e._data,d=e._size,f=e._datatype,_=[];if(l.length!==d.length)throw new a(l.length,d.length);for(var p=0;p<l.length;p++){if(l[p]!==d[p])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+d+")");_[p]=l[p]}var h,v=r;"string"==typeof c&&c===f&&(h=c,e=n.convert(e,h),v=n.find(r,[h,h]));var m=_.length>0?s(v,0,_,_[0],i,u):[];return new o({data:m,size:_,datatype:h})},s=function t(e,r,n,o,a,i){var s=[];if(r===n.length-1)for(var l=0;l<o;l++)s[l]=e(a[l],i[l]);else for(var c=0;c<o;c++)s[c]=t(e,r+1,n,n[r+1],a[c],i[c]);return s};return i}var o=r(40),a=r(45),i=o.string;i.isString;e.name="algorithm13",e.factory=n},function(t,e,r){"use strict";function n(t,e,r,n){var a=t.DenseMatrix,i=function(t,e,r,i){var l,c=t._data,u=t._size,d=t._datatype,f=r;"string"==typeof d&&(l=d,e=n.convert(e,l),f=n.find(r,[l,l]));var _=u.length>0?s(f,0,u,u[0],c,e,i):[];return new a({data:_,size:o(u),datatype:l})},s=function t(e,r,n,o,a,i,s){var l=[];if(r===n.length-1)for(var c=0;c<o;c++)l[c]=s?e(i,a[c]):e(a[c],i);else for(var u=0;u<o;u++)l[u]=t(e,r+1,n,n[r+1],a[u],i,s);return l};return i}var o=r(27).clone;e.name="algorithm14",e.factory=n},function(t,e,r){"use strict";function n(t,e,n,o){function a(){if(!(this instanceof a))throw new SyntaxError("Constructor must be called with the new operator");this._minimum=null,this._size=0}var i=n(r(65)),s=n(r(69)),l=1/Math.log((1+Math.sqrt(5))/2);a.prototype.type="FibonacciHeap",a.prototype.isFibonacciHeap=!0,a.prototype.insert=function(t,e){var r={key:t,value:e,degree:0};if(this._minimum){var n=this._minimum;r.left=n,r.right=n.right,n.right=r,r.right.left=r,i(t,n.key)&&(this._minimum=r)}else r.left=r,r.right=r,this._minimum=r;return this._size++,r},a.prototype.size=function(){return this._size},a.prototype.clear=function(){this._minimum=null,this._size=0},a.prototype.isEmpty=function(){return 0===this._size},a.prototype.extractMinimum=function(){var t=this._minimum;if(null===t)return t;for(var e=this._minimum,r=t.degree,n=t.child;r>0;){var o=n.right;n.left.right=n.right,n.right.left=n.left,n.left=e,n.right=e.right,e.right=n,n.right.left=n,n.parent=null,n=o,r--}return t.left.right=t.right,t.right.left=t.left,t==t.right?e=null:(e=t.right,e=_(e,this._size)),this._size--,this._minimum=e,t},a.prototype.remove=function(t){this._minimum=c(this._minimum,t,-1),this.extractMinimum()};var c=function(t,e,r){e.key=r;var n=e.parent;return n&&i(e.key,n.key)&&(u(t,e,n),d(t,n)),i(e.key,t.key)&&(t=e),t},u=function(t,e,r){e.left.right=e.right,e.right.left=e.left,r.degree--,r.child==e&&(r.child=e.right),0===r.degree&&(r.child=null),e.left=t,e.right=t.right,t.right=e,e.right.left=e,e.parent=null,e.mark=!1},d=function t(e,r){var n=r.parent;n&&(r.mark?(u(e,r,n),t(n)):r.mark=!0)},f=function(t,e){t.left.right=t.right,t.right.left=t.left,t.parent=e,e.child?(t.left=e.child,t.right=e.child.right,e.child.right=t,t.right.left=t):(e.child=t,t.right=t,t.left=t),e.degree++,t.mark=!1},_=function(t,e){var r=Math.floor(Math.log(e)*l)+1,n=new Array(r),o=0,a=t;if(a)for(o++,a=a.right;a!==t;)o++,a=a.right;for(var c;o>0;){for(var u=a.degree,d=a.right;;){if(c=n[u],!c)break;if(s(a.key,c.key)){var _=c;c=a,a=_}f(c,a),n[u]=null,u++}n[u]=a,a=d,o--}t=null;for(var p=0;p<r;p++)c=n[p],c&&(t?(c.left.right=c.right,c.right.left=c.left,c.left=t,c.right=t.right,t.right=c,c.right.left=c,i(c.key,t.key)&&(t=c)):t=c);return t};return a}e.name="FibonacciHeap",e.path="type",e.factory=n},function(t,e,r){"use strict";function n(t,e,n,i){var s=n(r(56)),l=n(r(66)),c=n(r(67)),u=n(r(68)),d=n(r(62)),f=n(r(63)),_=r(58),p=i("smaller",{"boolean, boolean":function(t,e){return t<e},"number, number":function(t,r){return t<r&&!o(t,r,e.epsilon)},"BigNumber, BigNumber":function(t,r){return t.lt(r)&&!a(t,r,e.epsilon)},"Fraction, Fraction":function(t,e){return t.compare(e)===-1},"Complex, Complex":function(t,e){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(t,e){if(!t.equalBase(e))throw new Error("Cannot compare units with different base");return p(t.value,e.value)},"string, string":function(t,e){return t<e},"Matrix, Matrix":function(t,e){var r;switch(t.storage()){case"sparse":switch(e.storage()){case"sparse":r=c(t,e,p);break;default:r=l(e,t,p,!0)}break;default:switch(e.storage()){case"sparse":r=l(t,e,p,!1);break;default:r=d(t,e,p)}}return r},"Array, Array":function(t,e){return p(s(t),s(e)).valueOf()},"Array, Matrix":function(t,e){return p(s(t),e)},"Matrix, Array":function(t,e){return p(t,s(e))},"Matrix, any":function(t,e){var r;switch(t.storage()){case"sparse":r=u(t,e,p,!1);break;default:r=f(t,e,p,!1)}return r},"any, Matrix":function(t,e){var r;switch(e.storage()){case"sparse":r=u(e,t,p,!0);break;default:r=f(e,t,p,!0)}return r},"Array, any":function(t,e){return f(s(t),e,p,!1).valueOf()},"any, Array":function(t,e){return f(s(e),t,p,!0).valueOf()}});return p.toTex={2:"\\left(${args[0]}"+_.operators.smaller+"${args[1]}\\right)"},p}var o=r(31).nearlyEqual,a=r(53);e.name="smaller",e.factory=n},function(t,e,r){"use strict";function n(t,e,r,n){var a=t.DenseMatrix,i=function(t,e,r,i){var s=t._data,l=t._size,c=t._datatype,u=e._values,d=e._index,f=e._ptr,_=e._size,p=e._datatype;if(l.length!==_.length)throw new o(l.length,_.length);if(l[0]!==_[0]||l[1]!==_[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+_+")");if(!u)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var h,v=l[0],m=l[1],g=0,y=r;"string"==typeof c&&c===p&&(h=c,g=n.convert(0,h),y=n.find(r,[h,h]));for(var w=[],x=0;x<v;x++)w[x]=[];for(var b=[],z=[],k=0;k<m;k++){for(var A=k+1,E=f[k],N=f[k+1],M=E;M<N;M++){var S=d[M];b[S]=i?y(u[M],s[S][k]):y(s[S][k],u[M]),z[S]=A}for(var O=0;O<v;O++)z[O]===A?w[O][k]=b[O]:w[O][k]=i?y(g,s[O][k]):y(s[O][k],g)}return new a({data:w,size:[v,m],datatype:h})};return i}var o=r(45);e.name="algorithm03",e.factory=n},function(t,e,r){"use strict";function n(t,e,r,n){var a=t.DenseMatrix,i=function(t,e,r){var i=t._size,l=t._datatype,c=e._size,u=e._datatype;if(i.length!==c.length)throw new o(i.length,c.length);if(i[0]!==c[0]||i[1]!==c[1])throw new RangeError("Dimension mismatch. Matrix A ("+i+") must match Matrix B ("+c+")");var d,f=i[0],_=i[1],p=0,h=r;"string"==typeof l&&l===u&&(d=l,p=n.convert(0,d),h=n.find(r,[d,d]));var v,m,g=[];for(v=0;v<f;v++)g[v]=[];var y=new a({data:g,size:[f,_],datatype:d}),w=[],x=[],b=[],z=[];for(m=0;m<_;m++){var k=m+1;for(s(t,m,b,w,k),s(e,m,z,x,k),v=0;v<f;v++){var A=b[v]===k?w[v]:p,E=z[v]===k?x[v]:p;g[v][m]=h(A,E)}}return y},s=function(t,e,r,n,o){for(var a=t._values,i=t._index,s=t._ptr,l=s[e],c=s[e+1];l<c;l++){var u=i[l];r[u]=o,n[u]=a[l]}};return i}var o=r(45);e.name="algorithm07",e.factory=n},function(t,e){"use strict";function r(t,e,r,n){var o=t.DenseMatrix,a=function(t,e,r,a){var i=t._values,s=t._index,l=t._ptr,c=t._size,u=t._datatype;if(!i)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var d,f=c[0],_=c[1],p=r;"string"==typeof u&&(d=u,e=n.convert(e,d),p=n.find(r,[d,d]));for(var h=[],v=new o({data:h,size:[f,_],datatype:d}),m=[],g=[],y=0;y<_;y++){for(var w=y+1,x=l[y],b=l[y+1],z=x;z<b;z++){var k=s[z];m[k]=i[z],g[k]=w}for(var A=0;A<f;A++)0===y&&(h[A]=[]),g[A]===w?h[A][y]=a?p(e,m[A]):p(m[A],e):h[A][y]=a?p(e,0):p(0,e)}return v};return a}e.name="algorithm12",e.factory=r},function(t,e,r){"use strict";function n(t,e,n,i){var s=n(r(56)),l=n(r(66)),c=n(r(67)),u=n(r(68)),d=n(r(62)),f=n(r(63)),_=r(58),p=i("larger",{"boolean, boolean":function(t,e){return t>e},"number, number":function(t,r){return t>r&&!o(t,r,e.epsilon)},"BigNumber, BigNumber":function(t,r){return t.gt(r)&&!a(t,r,e.epsilon)},"Fraction, Fraction":function(t,e){return 1===t.compare(e)},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(t,e){if(!t.equalBase(e))throw new Error("Cannot compare units with different base");return p(t.value,e.value)},"string, string":function(t,e){return t>e},"Matrix, Matrix":function(t,e){var r;switch(t.storage()){case"sparse":switch(e.storage()){case"sparse":r=c(t,e,p);break;default:r=l(e,t,p,!0)}break;default:switch(e.storage()){case"sparse":r=l(t,e,p,!1);break;default:r=d(t,e,p)}}return r},"Array, Array":function(t,e){return p(s(t),s(e)).valueOf()},"Array, Matrix":function(t,e){return p(s(t),e)},"Matrix, Array":function(t,e){return p(t,s(e))},"Matrix, any":function(t,e){var r;switch(t.storage()){case"sparse":r=u(t,e,p,!1);break;default:r=f(t,e,p,!1)}return r},"any, Matrix":function(t,e){var r;switch(e.storage()){case"sparse":r=u(e,t,p,!0);break;default:r=f(e,t,p,!0)}return r},"Array, any":function(t,e){return f(s(t),e,p,!1).valueOf()},"any, Array":function(t,e){return f(s(e),t,p,!0).valueOf()}});return p.toTex={2:"\\left(${args[0]}"+_.operators.larger+"${args[1]}\\right)"},p}var o=r(31).nearlyEqual,a=r(53);e.name="larger",e.factory=n},function(t,e,r){"use strict";function n(t,e,n){function a(e,r){if(!(this instanceof a))throw new SyntaxError("Constructor must be called with the new operator");if(r&&!l(r))throw new Error("Invalid datatype: "+r);if(t.isMatrix(e)||s(e)){var n=new c(e,r);this._data=n._data,this._size=n._size,this._datatype=n._datatype,this._min=null,this._max=null}else if(e&&s(e.data)&&s(e.size))this._data=e.data,this._size=e.size,this._datatype=e.datatype,this._min="undefined"!=typeof e.min?e.min:null,this._max="undefined"!=typeof e.max?e.max:null;else{if(e)throw new TypeError("Unsupported type of data ("+o.types.type(e)+")");this._data=[],this._size=[0],this._datatype=r,this._min=null,this._max=null}}var c=n(r(49)),u=n(r(65));return a.prototype=new c,a.prototype.type="ImmutableDenseMatrix",a.prototype.isImmutableDenseMatrix=!0,a.prototype.subset=function(e){switch(arguments.length){case 1:var r=c.prototype.subset.call(this,e);return t.isMatrix(r)?new a({data:r._data,size:r._size,datatype:r._datatype}):r;case 2:case 3:throw new Error("Cannot invoke set subset on an Immutable Matrix instance");default:throw new SyntaxError("Wrong number of arguments")}},a.prototype.set=function(){throw new Error("Cannot invoke set on an Immutable Matrix instance")},a.prototype.resize=function(){throw new Error("Cannot invoke resize on an Immutable Matrix instance")},a.prototype.reshape=function(){throw new Error("Cannot invoke reshape on an Immutable Matrix instance")},a.prototype.clone=function(){var t=new a({data:i.clone(this._data),size:i.clone(this._size),datatype:this._datatype});return t},a.prototype.toJSON=function(){return{mathjs:"ImmutableDenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},a.fromJSON=function(t){return new a(t)},a.prototype.swapRows=function(){throw new Error("Cannot invoke swapRows on an Immutable Matrix instance")},a.prototype.min=function(){if(null===this._min){var t=null;this.forEach(function(e){(null===t||u(e,t))&&(t=e)}),this._min=null!==t?t:void 0}return this._min},a.prototype.max=function(){if(null===this._max){var t=null;this.forEach(function(e){(null===t||u(t,e))&&(t=e)}),this._max=null!==t?t:void 0}return this._max},a}var o=r(40),a=o.string,i=o.object,s=Array.isArray,l=a.isString;e.name="ImmutableDenseMatrix",e.path="type",e.factory=n},function(t,e,r){"use strict";function n(t){function e(n){if(!(this instanceof e))throw new SyntaxError("Constructor must be called with the new operator");this._dimensions=[],this._isScalar=!0;for(var o=0,a=arguments.length;o<a;o++){var i=arguments[o];if(t.isRange(i))this._dimensions.push(i),this._isScalar=!1;else if(Array.isArray(i)||t.isMatrix(i)){
var s=r(i.valueOf());this._dimensions.push(s);var l=s.size();1===l.length&&1===l[0]||(this._isScalar=!1)}else if("number"==typeof i)this._dimensions.push(r([i]));else{if("string"!=typeof i)throw new TypeError("Dimension must be an Array, Matrix, number, string, or Range");this._dimensions.push(i)}}}function r(e){for(var r=0,n=e.length;r<n;r++)if("number"!=typeof e[r]||!a(e[r]))throw new TypeError("Index parameters must be positive integer numbers");return new t.ImmutableDenseMatrix(e)}return e.prototype.type="Index",e.prototype.isIndex=!0,e.prototype.clone=function(){var t=new e;return t._dimensions=o(this._dimensions),t._isScalar=this._isScalar,t},e.create=function(t){var r=new e;return e.apply(r,t),r},e.prototype.size=function(){for(var t=[],e=0,r=this._dimensions.length;e<r;e++){var n=this._dimensions[e];t[e]="string"==typeof n?1:n.size()[0]}return t},e.prototype.max=function(){for(var t=[],e=0,r=this._dimensions.length;e<r;e++){var n=this._dimensions[e];t[e]="string"==typeof n?n:n.max()}return t},e.prototype.min=function(){for(var t=[],e=0,r=this._dimensions.length;e<r;e++){var n=this._dimensions[e];t[e]="string"==typeof n?n:n.min()}return t},e.prototype.forEach=function(t){for(var e=0,r=this._dimensions.length;e<r;e++)t(this._dimensions[e],e,this)},e.prototype.dimension=function(t){return this._dimensions[t]||null},e.prototype.isObjectProperty=function(){return 1===this._dimensions.length&&"string"==typeof this._dimensions[0]},e.prototype.getObjectProperty=function(){return this.isObjectProperty()?this._dimensions[0]:null},e.prototype.isScalar=function(){return this._isScalar},e.prototype.toArray=function(){for(var t=[],e=0,r=this._dimensions.length;e<r;e++){var n=this._dimensions[e];t.push("string"==typeof n?n:n.toArray())}return t},e.prototype.valueOf=e.prototype.toArray,e.prototype.toString=function(){for(var t=[],e=0,r=this._dimensions.length;e<r;e++){var n=this._dimensions[e];"string"==typeof n?t.push(JSON.stringify(n)):t.push(n.toString())}return"["+t.join(", ")+"]"},e.prototype.toJSON=function(){return{mathjs:"Index",dimensions:this._dimensions}},e.fromJSON=function(t){return e.create(t.dimensions)},e}var o=r(27).clone,a=r(31).isInteger;e.name="Index",e.path="type",e.factory=n},function(t,e,r){"use strict";function n(t,e,r,n){function a(e,r,n){if(!(this instanceof a))throw new SyntaxError("Constructor must be called with the new operator");if(null!=e)if(t.isBigNumber(e))e=e.toNumber();else if("number"!=typeof e)throw new TypeError("Parameter start must be a number");if(null!=r)if(t.isBigNumber(r))r=r.toNumber();else if("number"!=typeof r)throw new TypeError("Parameter end must be a number");if(null!=n)if(t.isBigNumber(n))n=n.toNumber();else if("number"!=typeof n)throw new TypeError("Parameter step must be a number");this.start=null!=e?parseFloat(e):0,this.end=null!=r?parseFloat(r):0,this.step=null!=n?parseFloat(n):1}return a.prototype.type="Range",a.prototype.isRange=!0,a.parse=function(t){if("string"!=typeof t)return null;var e=t.split(":"),r=e.map(function(t){return parseFloat(t)}),n=r.some(function(t){return isNaN(t)});if(n)return null;switch(r.length){case 2:return new a(r[0],r[1]);case 3:return new a(r[0],r[2],r[1]);default:return null}},a.prototype.clone=function(){return new a(this.start,this.end,this.step)},a.prototype.size=function(){var t=0,e=this.start,r=this.step,n=this.end,a=n-e;return o.sign(r)==o.sign(a)?t=Math.ceil(a/r):0==a&&(t=0),isNaN(t)&&(t=0),[t]},a.prototype.min=function(){var t=this.size()[0];return t>0?this.step>0?this.start:this.start+(t-1)*this.step:void 0},a.prototype.max=function(){var t=this.size()[0];return t>0?this.step>0?this.start+(t-1)*this.step:this.start:void 0},a.prototype.forEach=function(t){var e=this.start,r=this.step,n=this.end,o=0;if(r>0)for(;e<n;)t(e,[o],this),e+=r,o++;else if(r<0)for(;e>n;)t(e,[o],this),e+=r,o++},a.prototype.map=function(t){var e=[];return this.forEach(function(r,n,o){e[n[0]]=t(r,n,o)}),e},a.prototype.toArray=function(){var t=[];return this.forEach(function(e,r){t[r[0]]=e}),t},a.prototype.valueOf=function(){return this.toArray()},a.prototype.format=function(t){var e=o.format(this.start,t);return 1!=this.step&&(e+=":"+o.format(this.step,t)),e+=":"+o.format(this.end,t)},a.prototype.toString=function(){return this.format()},a.prototype.toJSON=function(){return{mathjs:"Range",start:this.start,end:this.end,step:this.step}},a.fromJSON=function(t){return new a(t.start,t.end,t.step)},a}var o=r(31);e.name="Range",e.path="type",e.factory=n},function(t,e){"use strict";function r(t,e,r,n){return n("index",{"...number | string | BigNumber | Range | Array | Matrix":function(e){var r=e.map(function(e){return t.isBigNumber(e)?e.toNumber():Array.isArray(e)||t.isMatrix(e)?e.map(function(e){return t.isBigNumber(e)?e.toNumber():e}):e}),n=new t.Index;return t.Index.apply(n,r),n}})}e.name="index",e.factory=r},function(t,e){"use strict";function r(t,e,r,n){var o=t.SparseMatrix,a=n("sparse",{"":function(){return new o([])},string:function(t){return new o([],t)},"Array | Matrix":function(t){return new o(t)},"Array | Matrix, string":function(t,e){return new o(t,e)}});return a.toTex={0:"\\begin{bsparse}\\end{bsparse}",1:"\\left(${args[0]}\\right)"},a}e.name="sparse",e.factory=r},function(t,e,r){"use strict";function n(t,e,n,i){function s(e,r){var n=l(e),o=n?new t.BigNumber(0):0;if(c(e),r){var i=u(r);return e.length>0?i.resize(e,o):i}var s=[];return e.length>0?a(s,e,o):s}function l(e){var r=!1;return e.forEach(function(e,n,o){t.isBigNumber(e)&&(r=!0,o[n]=e.toNumber())}),r}function c(t){t.forEach(function(t){if("number"!=typeof t||!o(t)||t<0)throw new Error("Parameters in function zeros must be positive integers")})}var u=n(r(56)),d=i("zeros",{"":function(){return"Array"===e.matrix?s([]):s([],"default")},"...number | BigNumber | string":function(t){var r=t[t.length-1];if("string"==typeof r){var n=t.pop();return s(t,n)}return"Array"===e.matrix?s(t):s(t,"default")},Array:s,Matrix:function(t){var e=t.storage();return s(t.valueOf(),e)},"Array | Matrix, string":function(t,e){return s(t.valueOf(),e)}});return d.toTex=void 0,d}var o=r(31).isInteger,a=r(41).resize;e.name="zeros",e.factory=n},function(t,e,r){"use strict";var n=r(2),o=r(18),a=r(77),i=r(5);t.exports=function(t,e,r){var s,l,c=Object.keys(r||{});c.forEach(function(t){s=r[t],/[^a-z_]/i.test(s)&&(s=parseInt(s,10)),l=!1,i(e,function(e){n.has(e,t)&&(l=!0)}),l&&(e=a(e,function(e){return e[t]==s}))});var u,d,f=[],_=!1;return i(e,function(e){u=!0,Object.keys(t.viz.possible_filters||{}).forEach(function(r){d=o(t.viz.filter_data,r),e[r]!=d&&(u=!1)}),u?_===!1&&(_=!0,f.push(e)):f.push(e)}),f}},function(t,e,r){"use strict";function n(t,e,r){var n=[];return e=o(e,r),a(t,function(t,r,o){e(t,r,o)&&n.push(t)}),n}var o=r(78),a=r(5);t.exports=n},function(t,e,r){"use strict";function n(t,e,r){return o.iteratee!==i?o.iteratee(t,e):a(t,e,r)}var o=r(79),a=r(80),i=r(91);t.exports=n},function(t,e,r){"use strict";function n(t){return t instanceof n?t:this instanceof n?void(this._wrapped=t):new n(t)}var o=r(9);n.VERSION=o.VERSION,n.prototype.value=function(){return this._wrapped},n.prototype.valueOf=n.prototype.toJSON=n.prototype.value,n.prototype.toString=function(){return String(this._wrapped)},t.exports=n},function(t,e,r){"use strict";function n(t,e,r){return null==t?o:a(t)?u(t,e,r):i(t)&&!s(t)?l(t):c(t)}var o=r(81),a=r(16),i=r(13),s=r(82),l=r(83),c=r(87),u=r(6);t.exports=n},function(t,e){"use strict";function r(t){return t}t.exports=r},function(t,e,r){"use strict";var n=r(9),o=r(17),a=n.nativeIsArray||o("Array");t.exports=a},function(t,e,r){"use strict";function n(t){return t=o({},t),function(e){return a(e,t)}}var o=r(84),a=r(86);t.exports=n},function(t,e,r){"use strict";var n=r(85),o=r(12),a=n(o);t.exports=a},function(t,e){"use strict";function r(t,e){return function(r){var n=arguments.length;if(e&&(r=Object(r)),n<2||null==r)return r;for(var o=1;o<n;o++)for(var a=arguments[o],i=t(a),s=i.length,l=0;l<s;l++){var c=i[l];e&&void 0!==r[c]||(r[c]=a[c])}return r}}t.exports=r},function(t,e,r){"use strict";function n(t,e){var r=o(e),n=r.length;if(null==t)return!n;for(var a=Object(t),i=0;i<n;i++){var s=r[i];if(e[s]!==a[s]||!(s in a))return!1}return!0}var o=r(12);t.exports=n},function(t,e,r){"use strict";function n(t){return t=a(t),function(e){return o(e,t)}}var o=r(88),a=r(89);t.exports=n},function(t,e){"use strict";function r(t,e){for(var r=e.length,n=0;n<r;n++){if(null==t)return;t=t[e[n]]}return r?t:void 0}t.exports=r},function(t,e,r){"use strict";function n(t){return o.toPath(t)}var o=r(79);r(90),t.exports=n},function(t,e,r){"use strict";function n(t){return a(t)?t:[t]}var o=r(79),a=r(82);o.toPath=n,t.exports=n},function(t,e,r){"use strict";function n(t,e){return a(t,e,1/0)}var o=r(79),a=r(80);o.iteratee=n,t.exports=n},function(t,e){"use strict";t.exports=function(t,e){var r=Object.keys(e||{})[0];return Object.keys(t.viz.possible_filters||{}).forEach(function(n){if(n!=r&&!d3.select(t.root+" .slider_"+n).empty()){var o=d3.select(t.root+" .slider_"+n).attr("current_state");e[n]=o}}),e}},function(t,e,r){"use strict";var n=r(94),o=r(97),a=r(99),i=r(100),s=r(101),l=r(103),c=r(104),u=r(105),d=r(111),f=r(113),_=r(2),p=r(4),h=r(114);t.exports=function(t){function e(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r={};r.root=t.root,r.root_tips=t.root.replace("#",".")+"_d3-tip",r.viz_wrapper=t.root+" .viz_wrapper",r.do_zoom=t.do_zoom,r.background_color=t.background_color,r.super_border_color=t.super_border_color,r.outer_margins=t.outer_margins,r.is_expand=t.ini_expand,r.grey_border_width=t.grey_border_width,r.show_dendrogram=t.show_dendrogram,r.tile_click_hlight=t.tile_click_hlight,r.inst_order=t.inst_order,r.expand_button=t.expand_button,r.sim_mat=t.sim_mat,r.dendro_filter=t.dendro_filter,r.cat_filter=t.cat_filter,r.cat_value_colors=t.cat_value_colors,r.cat_bar_width=180,r.cat_bar_height=20,r.tree_menu_width=400,r.tree_menu_height=237,r.tree_menu_x_offset=20,r.filter_menu_width=500,r.filter_menu_height=237,r.filter_menu_x_offset=20,r.update_button_width=100,r.viz_svg=r.viz_wrapper+" .viz_svg",r.zoom_element=r.viz_wrapper+" .viz_svg",r.uni_duration=1e3,r.bottom_space=10,r.run_trans=!1,r.duration=1e3,r.resize=t.resize,_.has(t,"size")?r.fixed_size=t.size:r.fixed_size=!1,r.border_fraction=65,r.uni_margin=5,r.super_labels={},r.super_labels.margin={},r.super_labels.dim={},r.super_labels.margin.left=r.grey_border_width,r.super_labels.margin.top=r.grey_border_width,r.super_labels.dim.width=0,t.labels.super_labels&&(r.super_labels.dim.width=15*t.labels.super_label_scale),r.triangle_opacity=.6,r.norm_labels={},r.norm_labels.width={},r.dendro_room={},r.show_dendrogram?r.dendro_room.symbol_width=10:r.dendro_room.symbol_width=0,r.cat_colors=t.cat_colors,r=h(t,r,e),_.has(t,"group_level")||(r.show_dendrogram&&(t.group_level={}),_.has(t,"group_level")||(t.group_level={}),t.group_level.row=5,t.group_level.col=5),r.dendro_opacity=.35,r.spillover_col_slant=r.norm_labels.width.col;var n=p(t.network_data.views);return r.possible_filters=n.possible_filters,r.filter_data=n.filter_data,r.viz_nodes={},r.viz_nodes.row=t.network_data.row_nodes_names,r.viz_nodes.col=t.network_data.col_nodes_names,r.viz_nodes.curr_row=t.network_data.row_nodes_names,r.viz_nodes.curr_col=t.network_data.col_nodes_names,r.x_offset=0,r}var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t.labels=n(t),t.viz=e(t,r),o(t),t=a(t),t.viz=i(t.viz),t.viz=s(t.viz),t.viz=l(t.viz),t.sim_mat&&(t.viz.clust.dim.width<=t.viz.clust.dim.height?t.viz.clust.dim.height=t.viz.clust.dim.width:t.viz.clust.dim.width=t.viz.clust.dim.height),t=c(t),t=u(t),t=d(t),t=f(t)}},function(t,e,r){"use strict";var n=r(95);t.exports=function(t){var e={};return e.super_label_scale=t.super_label_scale,e.super_labels=t.super_labels,e.super_label_fs=13.8,e.super_labels&&(e.super={},e.super.row=t.super.row,e.super.col=t.super.col),e.show_label_tooltips=t.show_label_tooltips,e.row_max_char=n(t.network_data.row_nodes,function(t){return t.name.length}).name.length,e.col_max_char=n(t.network_data.col_nodes,function(t){return t.name.length}).name.length,e.max_allow_fs=t.max_allow_fs,e}},function(t,e,r){"use strict";function n(t,e,r){var n,c,u=-(1/0),d=-(1/0);if(null==e||"number"==typeof e&&"object"!=o(t[0])&&null!=t){t=a(t)?t:i(t);for(var f=0,_=t.length;f<_;f++)n=t[f],null!=n&&n>u&&(u=n)}else e=s(e,r),l(t,function(t,r,n){c=e(t,r,n),(c>d||c===-(1/0)&&u===-(1/0))&&(u=t,d=c)});return u}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=r(7),i=r(96),s=r(78),l=r(5);t.exports=n},function(t,e,r){"use strict";function n(t){for(var e=o(t),r=e.length,n=Array(r),a=0;a<r;a++)n[a]=t[e[a]];return n}var o=r(12);t.exports=n},function(t,e,r){"use strict";var n=r(98);t.exports=function(t){d3.select(t.root+" .viz_wrapper").empty()&&d3.select(t.root).append("div").classed("viz_wrapper",!0);var e=n(Object.assign(t,{sidebar_width:0}));d3.select(t.viz.viz_wrapper).style("float","left").style("width",e.width+"px").style("height",e.height+"px")}},function(t,e){"use strict";t.exports=function(t){var e,r={},n=t.buffer_width,o=d3.select(t.root).style("width").replace("px",""),a=d3.select(t.root).style("height").replace("px","");return t.viz.is_expand===!1?(e=t.viz.outer_margins,r.width=o-t.sidebar_width-n):(e=t.viz.outer_margins,r.width=o-n),r.top=e.top,r.left=e.left,t.viz.resize?r.height=a:(t.viz.is_expand?r.width=t.viz.fixed_size.width:r.width=t.viz.fixed_size.width-t.sidebar_width,r.height=t.viz.fixed_size.height),r}},function(t,e){"use strict";t.exports=function(t){return t.viz.svg_dim={},t.viz.svg_dim.width=Number(d3.select(t.viz.viz_wrapper).style("width").replace("px","")),t.viz.svg_dim.height=Number(d3.select(t.viz.viz_wrapper).style("height").replace("px","")),t}},function(t,e){"use strict";t.exports=function(t){return t.norm_labels.margin={},t.norm_labels.margin.left=t.super_labels.margin.left+t.super_labels.dim.width,t.norm_labels.margin.top=t.super_labels.margin.top+t.super_labels.dim.width,t.label_background={},t.label_background.row=t.norm_labels.width.row+t.cat_room.row+t.uni_margin,t.label_background.col=t.norm_labels.width.col+t.cat_room.col+t.uni_margin,t}},function(t,e,r){"use strict";var n=r(102);t.exports=function(t){t.clust={},t.clust.margin={},t.clust.margin.left=t.norm_labels.margin.left+t.norm_labels.width.row+t.cat_room.row+t.uni_margin,t.clust.margin.top=t.norm_labels.margin.top+t.norm_labels.width.col+t.cat_room.col+t.uni_margin;var e=t.svg_dim.width-t.clust.margin.left-t.spillover_col_slant,r=d3.scale.ordinal().rangeBands([0,e]).domain(n(t.num_col_nodes)),o=r.rangeBand()/2;if(o>t.norm_labels.width.col){var a=t.norm_labels.width.col/o;e*=a}return t.clust.dim={},t.clust.dim.width=e,t}},function(t,e){"use strict";function r(t,e,r){null==e&&(e=t||0,t=0),r||(r=e<t?-1:1);for(var n=Math.max(Math.ceil((e-t)/r),0),o=Array(n),a=0;a<n;a++,t+=r)o[a]=t;return o}t.exports=r},function(t,e){"use strict";t.exports=function(t){var e=t.svg_dim.height-t.clust.margin.top-t.dendro_room.col-t.bottom_space;return t.clust.dim.height=e,t}},function(t,e,r){"use strict";var n=r(95);t.exports=function(t){var e=Math.abs(n(t.network_data.col_nodes,function(t){return Math.abs(t.value)}).value);return t.labels.bar_scale_col=d3.scale.linear().domain([0,e]).range([0,.75*t.viz.norm_labels.width.col]),e=Math.abs(n(t.network_data.row_nodes,function(t){return Math.abs(t.value)}).value),t.labels.bar_scale_row=d3.scale.linear().domain([0,e]).range([0,t.viz.norm_labels.width.row]),t}},function(t,e,r){"use strict";var n=r(106),o=r(108);t.exports=function(t){t.matrix=n(t),t.viz.x_scale=d3.scale.ordinal().rangeBands([0,t.viz.clust.dim.width]),t.viz.y_scale=d3.scale.ordinal().rangeBands([0,t.viz.clust.dim.height]);var e;return["row","col"].forEach(function(r){e=t.viz.inst_order[r],"custom"===e&&(e="clust"),"row"===r?t.viz.x_scale.domain(t.matrix.orders[e+"_"+r]):t.viz.y_scale.domain(t.matrix.orders[e+"_"+r])}),t.viz.border_width={},t.viz.border_width.x=t.viz.x_scale.rangeBand()/t.viz.border_fraction,t.viz.border_width.y=t.viz.y_scale.rangeBand()/t.viz.border_fraction,t.viz.rect_width=t.viz.x_scale.rangeBand()-t.viz.border_width.x,t.viz.rect_height=t.viz.y_scale.rangeBand()-t.viz.border_width.y,o(t),t}},function(t,e,r){"use strict";var n=r(2),o=r(107),a=r(95);t.exports=function(t){var e={},r=t.network_data;e.tile_colors=t.tile_colors,e.bar_colors=t.bar_colors,e.outline_colors=t.outline_colors,e.hlight_color=t.highlight_color,e.tile_title=t.tile_title,e.show_tile_tooltips=t.show_tile_tooltips,e.make_tile_tooltip=t.make_tile_tooltip,e.distance_metric="cosine",e.linkage_type="average",e.filter_state="no-filter",e.normalization_state="no-normalization",e.click_hlight_x=-666,e.click_hlight_y=-666,e.click_hlight_row=-666,e.click_hlight_col=-666,e.def_large_matrix=2e4,e.opacity_function=t.opacity_scale,e.orders={},["row","col"].forEach(function(o){var a;a="row"===o?"col":"row";var i=r[a+"_nodes"]||[],s=i.length,l=n.pluck(i,"name"),c=l.sort(),u=c.map(function(t){return r[a+"_nodes_names"].indexOf(t)});e.orders["alpha_"+o]=u;var d=["clust","rank"];n.has(i[0],"rankvar")&&d.push("rankvar"),t.viz.all_cats[a].length>0&&t.viz.all_cats[a].forEach(function(t){t=t.replace("-","_"),d.push(t+"_index")}),d.forEach(function(t){var r=d3.range(s).sort(function(e,r){return i[r][t]-i[e][t]});e.orders[t+"_"+o]=r})}),n.has(r,"all_links")?e.max_link=a(r.all_links,function(t){return Math.abs(t.value)}).value:e.max_link=a(r.links,function(t){return Math.abs(t.value)}).value,e.abs_max_val=Math.abs(e.max_link)*t.clamp_opacity,0===t.input_domain?"linear"===e.opacity_function?e.opacity_scale=d3.scale.linear().domain([0,e.abs_max_val]).clamp(!0).range([0,1]):"log"===e.opacity_function&&(e.opacity_scale=d3.scale.log().domain([.001,e.abs_max_val]).clamp(!0).range([0,1])):"linear"===e.opacity_function?e.opacity_scale=d3.scale.linear().domain([0,t.input_domain]).clamp(!0).range([0,1]):"log"===e.opacity_function&&(e.opacity_scale=d3.scale.log().domain([.001,t.input_domain]).clamp(!0).range([0,1]));var i=n.has(r.links[0],"value_up"),s=n.has(r.links[0],"value_dn");return i||s?e.tile_type="updn":e.tile_type="simple",n.has(r.links[0],"highlight")?e.highlight=1:e.highlight=0,e.matrix=o(r),e.wait_tooltip=0,e}},function(t,e,r){"use strict";var n=r(2);t.exports=function(t){var e,r,o=[];return r=!!n.has(t.links[0],"value_orig"),t.row_nodes.forEach(function(a,i){o[i]={},o[i].name=t.row_nodes[i].name,o[i].row_index=i,o[i].row_data=d3.range(t.col_nodes.length).map(function(o){return e=n.has(t.links[0],"value_up")||n.has(t.links[0],"value_dn")?{pos_x:o,pos_y:i,value:0,value_up:0,value_dn:0,highlight:0}:{pos_x:o,pos_y:i,value:0,highlight:0},r&&(e.value_orig=0),e})}),t.links.forEach(function(t){o[t.source].row_data[t.target].value=t.value,o[t.source].row_data[t.target].row_name=t.row_name,o[t.source].row_data[t.target].col_name=t.col_name,(n.has(t,"value_up")||n.has(t,"value_dn"))&&(o[t.source].row_data[t.target].value_up=t.value_up,o[t.source].row_data[t.target].value_dn=t.value_dn),r&&(o[t.source].row_data[t.target].value_orig=t.value_orig),t.highlight&&(o[t.source].row_data[t.target].highlight=t.highlight),t.info&&(o[t.source].row_data[t.target].info=t.info)}),o}},function(t,e,r){"use strict";var n=r(109),o=r(110);t.exports=function(t){var e=3,r=2,a=e/t.viz.rect_height,i=2;t.viz.ds_zt=i;var s=Math.floor(Math.log(a)/Math.log(i));if(t.viz.rect_height<r&&s>0){var l=2;t.viz.ds_opacity_scale=d3.scale.linear().domain([1,100]).range([1,l]).clamp(!0);var c;t.viz.ds_num_levels=s,t.viz.ds=[],t.matrix.ds_matrix=[];for(var u=t.viz.inst_order.row,d=o.extend(!0,{},t.matrix.matrix),f=0;f<s;f++){t.viz.ds_level=0,c={},c.height=e,c.num_levels=s;var _=Math.pow(i,f);c.zt=_,c.num_rows=Math.round(t.viz.clust.dim.height/(c.height/_)),c.x_scale=d3.scale.ordinal().rangeBands([0,t.viz.clust.dim.width]),c.x_scale.domain(t.matrix.orders[u+"_row"]),c.y_scale=d3.scale.ordinal().rangeBands([0,t.viz.clust.dim.height]),c.y_scale.domain(d3.range(c.num_rows+1)),c.rect_height=c.y_scale.rangeBand()-t.viz.border_width.y,t.viz.ds.push(c);var p=n(t,d,f);t.matrix.ds_matrix.push(p)}t.viz.viz_nodes.row=d3.range(t.matrix.ds_matrix[0].length).map(String)}else t.viz.ds=null,t.viz.ds_level=-1,t.viz.ds_num_levels=0}},function(t,e,r){"use strict";var n=r(5),o=r(2);t.exports=function(t,e,r){var a,i,s,l=t.viz.ds[r].num_rows,c=t.network_data.row_nodes.length/l,u=t.viz.ds_opacity_scale(c),d=t.viz.clust.dim.height/l,f=[],_=l+1;for(i=0;i<_;i++)a={},a.row_index=i,a.name=String(i),a.all_names=[],f.push(a);n(e,function(e){var r=t.viz.y_scale(e.row_index),n=Math.round(r/d),a=e.row_data;if(f[n].all_names.push(e.name),o.has(f[n],"row_data"))for(s=0;s<a.length;s++)f[n].row_data[s].value=f[n].row_data[s].value+a[s].value;else{var i=[];for(s=0;s<a.length;s++)i[s]=a[s];f[n].row_data=i}}),f.forEach(function(t){var e=t.row_data,r=t.all_names.length;n(e,function(t){t.value=t.value/r*u})});var p=[];return f.forEach(function(t){p=p.concat(t.all_names)}),f}},function(t,e){t.exports=jquery},function(t,e,r){"use strict";var n=r(112);t.exports=function(t){t.viz.zoom_scale_font={},t.viz.zoom_scale_font.row=1,t.viz.zoom_scale_font.col=1;var e=.75,r=t.viz.x_scale.rangeBand()/2;return t.viz.square_zoom=t.viz.norm_labels.width.col/r*e,t.viz=n(t.viz),t}},function(t,e){"use strict";t.exports=function(t){var e=t.clust.dim.width/t.num_col_nodes,r=t.clust.dim.height/t.num_row_nodes;return t.zoom_ratio={},t.zoom_ratio.x=e/r,t.zoom_ratio.y=1,t.zoom_ratio.x<1&&(t.zoom_ratio.y=1/t.zoom_ratio.x,t.zoom_ratio.x=1),t}},function(t,e){"use strict";t.exports=function(t){return t.labels.default_fs_row=1.01*t.viz.y_scale.rangeBand(),t.labels.default_fs_col=.87*t.viz.x_scale.rangeBand(),t.labels.default_fs_row>t.labels.max_allow_fs&&(t.labels.default_fs_row=t.labels.max_allow_fs),t.labels.default_fs_col>t.labels.max_allow_fs&&(t.labels.default_fs_col=t.labels.max_allow_fs),t}},function(t,e,r){"use strict";var n=r(115),o=r(2),a=r(116),i=r(117),s=r(5),l=r(118);t.exports=function(t,e){var r,c,u,d=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],f=": ";e.show_categories={},e.all_cats={},e.cat_names={},e.cat_info={};var _={};_.row=null,_.col=null,e.cat_colors={},e.cat_colors.value_opacity=_;var p=0;return["row","col"].forEach(function(n){e.show_categories[n]=!1,e.all_cats[n]=[];var _=Object.keys(t.network_data[n+"_nodes"][0]||{});_=_.sort(),_.forEach(function(t){t.indexOf("cat-")>=0&&(e.show_categories[n]=!0,e.all_cats[n].push(t))}),e.cat_info[n]=null,e.show_categories[n]&&(e.cat_colors[n]={},e.cat_info[n]={},e.cat_names[n]={},s(e.all_cats[n],function(s){var d=t.network_data[n+"_nodes"][0];"string"==typeof d[s]&&d[s].indexOf(f)>0?(r=d[s].split(f)[0],e.cat_names[n][s]=r):e.cat_names[n][s]=s;var _=o.pluck(t.network_data[n+"_nodes"],s)||[],h=[];_.forEach(function(t){var e;e=t.indexOf(": ")>0?t.split(": ")[1]:t,h.push(e)});var v=Array.from(new Set(_)).sort();if(c=i(v),"cat_strings"===c.type){var m=l(h);c.cat_hist=m}else c.cat_hist=null;e.cat_info[n][s]=c,e.cat_colors[n][s]={},v.forEach(function(t,r){u=a.get_random_color(r+p),e.cat_colors[n][s][t]=u,"string"==typeof t&&(t.indexOf("Not ")>=0||t.indexOf(": false")>0)&&(e.cat_colors[n][s][t]="#eee"),p+=1})})),o.has(t.network_data,"cat_colors")&&d===!0&&(e.cat_colors[n]=t.network_data.cat_colors[n]),t.sim_mat&&(e.cat_colors.col=e.cat_colors.row)}),e.cat_colors=e.cat_colors,e.cat_colors.opacity=.6,e.cat_colors.active_opacity=.9,e=n(t,e)}},function(t,e){"use strict";t.exports=function(t,e){var r,n=d3.scale.linear().domain([5,15]).range([85,120]).clamp("true");return e.cat_room={},e.cat_room.symbol_width=12,e.cat_room.separation=3,["row","col"].forEach(function(o){e.norm_labels.width[o]=n(t.labels[o+"_max_char"])*t[o+"_label_scale"],e["num_"+o+"_nodes"]=t.network_data[o+"_nodes"].length,"row"===o?e.dendro_room[o]=e.dendro_room.symbol_width:e.dendro_room[o]=e.dendro_room.symbol_width+3*e.uni_margin;var a=e.all_cats[o].length;if(e.show_categories[o]){r=(a-1)*e.cat_room.separation;var i;i="row"===o?a+1:a,e.cat_room[o]=i*e.cat_room.symbol_width+r}else"row"==o?e.cat_room[o]=e.cat_room.symbol_width:e.cat_room[o]=0}),e}},function(t,e){"use strict";function r(){return"#EEE"}function n(t){return a[t%o()]}function o(){return a.length}var a;a=["#393b79","#aec7e8","#ff7f0e","#ffbb78","#98df8a","#bcbd22","#404040","#ff9896","#c5b0d5","#8c564b","#1f77b4","#5254a3","#FFDB58","#c49c94","#e377c2","#7f7f7f","#2ca02c","#9467bd","#dbdb8d","#17becf","#637939","#6b6ecf","#9c9ede","#d62728","#8ca252","#8c6d31","#bd9e39","#e7cb94","#843c39","#ad494a","#d6616b","#7b4173","#a55194","#ce6dbd","#de9ed6"],t.exports={get_default_color:r,get_random_color:n,get_num_colors:o}},function(t,e,r){"use strict";var n=r(95);t.exports=function(t){var e=t[0],r=!1,o=!1,a="cat_strings",i=NaN,s=[],l=null,c=": ";if("string"==typeof e&&e.indexOf(c)>-1&&(r=!0,e=e.split(c)[1]),0==isNaN(e)&&(o=!0),o&&(a="cat_values",t.forEach(function(t){r&&(t=t.split(c)[1]),isNaN(t)===!0?a="cat_strings":(t=parseFloat(t),s.push(t))})),"cat_values"===a){var u=n(s,function(t){return Math.abs(t)});i=Math.abs(u),l=d3.scale.linear().domain([0,i]).range([0,1])}var d={};return d.type=a,d.max_abs_val=i,d.cat_scale=l,d}},function(t,e,r){"use strict";var n=r(119),o=r(14),a=n(function(t,e,r){o(t,r)?t[r]++:t[r]=1});t.exports=a},function(t,e,r){"use strict";function n(t,e){return function(r,n,i){var s=e?[[],[]]:{};return n=o(n,i),a(r,function(e,o){var a=n(e,o,r);t(s,e,a)}),s}}var o=r(78),a=r(5);t.exports=n},function(t,e){"use strict";t.exports=function(){var t={};return t.zoom_x=1,t.zoom_y=1,t.trans_x=0,t.trans_y=0,t}},function(t,e,r){"use strict";var n=r(122),o=r(141),a=r(173),i=r(185),s=r(186),l=r(197),c=r(198),u=r(199),d=r(204),f=r(192),_=r(205),p=r(206),h=r(207),v=r(211);t.exports=function(t){function e(){var t=r.viz.super_border_color;return(r.viz.is_expand||0==r.show_viz_border)&&(t="white"),t}var r=t.params;d3.select(r.viz.viz_wrapper+" svg").remove();var m=d3.select(r.viz.viz_wrapper).append("svg").attr("class","viz_svg").attr("id","svg_"+r.root.replace("#","")).attr("width",r.viz.svg_dim.width).attr("height",r.viz.svg_dim.height).attr("is_zoom",0).attr("stopped_zoom",1);m.append("rect").attr("class","super_background").style("width",r.viz.svg_dim.width).style("height",r.viz.svg_dim.height).style("fill","white"),n(r,m),o(t),_(t),p(t),v(t),a(t),r.viz.ds_level===-1&&["row","col"].forEach(function(t){var e=Number(d3.select("."+t+"_label_group").select("text").style("font-size").replace("px","")),n=8;e>n&&d3.selectAll(r.root+" ."+t+"_label_group").each(function(){f(r,this,t)})}),d(t),r.viz.show_categories.col&&u(t),s(t),r.labels.super_labels&&i(r),t.config.show_dendrogram&&h(t),d3.select(r.viz.viz_svg).append("rect").classed("left_border",!0).classed("borders",!0).attr("fill",e).attr("width",r.viz.grey_border_width).attr("height",r.viz.svg_dim.height).attr("transform","translate(0,0)"),d3.select(r.viz.viz_svg).append("rect").classed("right_border",!0).classed("borders",!0).attr("fill",e).attr("width",r.viz.grey_border_width).attr("height",r.viz.svg_dim.height).attr("transform",function(){var t=r.viz.svg_dim.width-r.viz.grey_border_width;return"translate("+t+",0)"}),d3.select(r.viz.viz_svg).append("rect").classed("top_border",!0).classed("borders",!0).attr("fill",e).attr("width",r.viz.svg_dim.width).attr("height",r.viz.grey_border_width).attr("transform",function(){var t=0;return"translate("+t+",0)"}),d3.select(r.viz.viz_svg).append("rect").classed("bottom_border",!0).classed("borders",!0).attr("fill",e).attr("width",r.viz.svg_dim.width).attr("height",r.viz.grey_border_width).attr("transform",function(){var t=r.viz.svg_dim.height-r.viz.grey_border_width;return"translate(0,"+t+")"}),l(t),c(t),r.viz.do_zoom&&d3.select(r.viz.zoom_element).call(r.zoom_behavior),d3.select(r.viz.zoom_element).on("dblclick.zoom",null)}},function(t,e,r){"use strict";var n=r(2),o=r(123),a=r(124),i=r(125);t.exports=function(t,e){var r,s=t.network_data,l=[];r=e.append("g").attr("class","clust_container").attr("transform","translate("+t.viz.clust.margin.left+","+t.viz.clust.margin.top+")").append("g").attr("class","clust_group").classed("clust_group",!0),r.append("rect").classed("background",!0).classed("grey_background",!0).style("fill",t.clust_group_background_color).attr("width",t.viz.clust.dim.width).attr("height",t.viz.clust.dim.height),null===t.viz.ds?i(t,t.matrix.matrix,"all",t.viz.ds_level):i(t,t.matrix.ds_matrix[0],"all",t.viz.ds_level),"function"==typeof t.click_tile?d3.selectAll(t.root+" .tile").on("click",function(e){var r={};r.row=t.network_data.row_nodes[e.pos_y].name,r.col=t.network_data.col_nodes[e.pos_x].name,r.value=e.value,n.has(e,"value_up")&&(r.value_up=e.value_up),n.has(e,"value_dn")&&(r.value_dn=e.value_dn),n.has(e,"info")&&(r.info=e.info),t.click_tile(r),a(t,this)}):t.tile_click_hlight&&d3.selectAll(t.root+" .tile").on("click",function(){a(t,this)});var c={},u=0;return c.enter=0,o(t,c,u),{get_clust_group:function(){return r},get_matrix:function(){return l},get_nodes:function(t){return"row"===t?s.row_nodes:s.col_nodes}}}},function(t,e){"use strict";t.exports=function(t,e,r){}},function(t,e){"use strict";t.exports=function(t,e){d3.select(e).each(function(r){var n=r.pos_x,o=r.pos_y;if(d3.selectAll(t.root+" .click_hlight").remove(),n!=t.matrix.click_hlight_x||o!=t.matrix.click_hlight_y){t.matrix.click_hlight_x=n,t.matrix.click_hlight_y=o;var a=6,i=.85,s=a*t.viz.border_width.x,l=a*t.viz.border_width.y;d3.select(e.parentNode).append("rect").classed("click_hlight",!0).classed("top_hlight",!0).attr("width",t.viz.x_scale.rangeBand()).attr("height",l).attr("fill",t.matrix.hlight_color).attr("transform",function(){return"translate("+t.viz.x_scale(n)+",0)"}).attr("opacity",i),d3.select(e.parentNode).append("rect").classed("click_hlight",!0).classed("left_hlight",!0).attr("width",s).attr("height",t.viz.y_scale.rangeBand()-.99*l).attr("fill",t.matrix.hlight_color).attr("transform",function(){return"translate("+t.viz.x_scale(n)+","+.99*l+")"}).attr("opacity",i),d3.select(e.parentNode).append("rect").classed("click_hlight",!0).classed("right_hlight",!0).attr("width",s).attr("height",t.viz.y_scale.rangeBand()-.99*l).attr("fill",t.matrix.hlight_color).attr("transform",function(){var e=t.viz.x_scale(n)+t.viz.x_scale.rangeBand()-s;return"translate("+e+","+.99*l+")"}).attr("opacity",i),d3.select(e.parentNode).append("rect").classed("click_hlight",!0).classed("bottom_hlight",!0).attr("width",function(){return t.viz.x_scale.rangeBand()-1.98*s}).attr("height",l).attr("fill",t.matrix.hlight_color).attr("transform",function(){var e=t.viz.x_scale(n)+.99*s,r=t.viz.y_scale.rangeBand()-l;return"translate("+e+","+r+")"}).attr("opacity",i)}else t.matrix.click_hlight_x=-666,t.matrix.click_hlight_y=-666})}},function(t,e,r){"use strict";var n=r(126),o=r(132),a=r(5),i=r(133);t.exports=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"all",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,l=t.viz.y_scale,c=!0,u="row";if(s>=0&&(l=t.viz.ds[s].y_scale,c=!1,u="ds"+String(s)+"_row"),c)var d=o().attr("class",function(){var e=t.viz.root_tips.replace(".",""),r=e+" d3-tip "+e+"_tile_tip";return r}).style("display","none").direction("nw").offset([0,0]).html(function(e){var r,n=String(e.value.toFixed(3));if(t.keep_orig){var o=String(e.value_orig.toFixed(3));r="<p>"+e.row_name+" and "+e.col_name+"</p><p> normalized value: "+n+"</p><div> original value: "+o+"</div>"}else r="<p>"+e.row_name+" and "+e.col_name+"</p><div> value: "+n+"</div>";return r});else d=null;var f=[];"all"===r?f=e:a(e,function(t){i(r,t.name)&&f.push(t)}),d3.select(t.root+" .clust_group").selectAll(".row").data(f,function(t){return t.name}).enter().append("g").classed(u,!0).attr("transform",function(t){return"translate(0,"+l(t.row_index)+")"}).each(function(e){n(t,e,d,this,s)}),t.viz.ds_level===-1&&null!=d&&d3.selectAll(t.root+" .row").call(d)}},function(t,e,r){"use strict";var n=r(127),o=r(128),a=r(129),i=r(130),s=r(131),l=r(77),c=r(2);
t.exports=function(t,e,r,u){var d=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,f=e.row_data,_=!0,p=t.viz.rect_height;d>=0&&(p=t.viz.ds[d].rect_height);var h;h=!!c.has(t.network_data.links[0],"value_orig");var v;v=h===!1?l(f,function(t){return 0!==t.value}):f;var m=d3.select(u).selectAll("rect").data(v,function(t){return t.col_name}).enter().append("rect").attr("class","tile row_tile").attr("width",t.viz.rect_width).attr("height",p).style("fill",function(e){var r;return r="NaN"===e.value_orig?"#000000":e.value>0?t.matrix.tile_colors[0]:t.matrix.tile_colors[1]}).style("fill-opacity",function(e){var r;return r="NaN"===e.value_orig?.175:t.matrix.opacity_scale(Math.abs(e.value))}).attr("transform",function(e){return s(t,e)});if(_&&m.on("mouseover",function(){for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];a(t,this,r,n)}).on("mouseout",function(){i(t,this,r)}).on("click",function(){console.log("click")}).on("dblclick",null),"updn"==t.matrix.tile_type){var g=l(f,function(t){return 0!=t.value_up||0!=t.value_dn});d3.select(u).selectAll(".tile_up").data(g,function(t){return t.col_name}).enter().append("path").attr("class","tile_up").attr("d",function(){return n(t)}).attr("transform",function(e){s(t,e)}).style("fill",function(){return t.matrix.tile_colors[0]}).style("fill-opacity",function(e){var r=0;return Math.abs(e.value_dn)>0&&(r=t.matrix.opacity_scale(Math.abs(e.value_up))),r}).on("mouseover",function(){for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];a(t,this,r,n)}).on("mouseout",function(){i(t,this,r)}).on("click",function(){console.log("click")}).on("dblclick",null),d3.select(u).selectAll(".tile_dn").data(g,function(t){return t.col_name}).enter().append("path").attr("class","tile_dn").attr("d",function(){return o(t)}).attr("transform",function(e){s(t,e)}).style("fill",function(){return t.matrix.tile_colors[1]}).style("fill-opacity",function(e){var r=0;return Math.abs(e.value_up)>0&&(r=t.matrix.opacity_scale(Math.abs(e.value_dn))),r}).on("mouseover",function(){for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];a(t,this,r,n)}).on("mouseout",function(){i(t,this,r)}).on("click",function(){console.log("click")}).on("dblclick",null),m.each(function(t){Math.abs(t.value_up)>0&&Math.abs(t.value_dn)>0&&d3.select(this).remove()})}t.matrix.tile_title&&m.append("title").text(function(t){var e="value: "+t.value;return e})}},function(t,e){"use strict";t.exports=function(t){var e=0,r=t.viz.x_scale.rangeBand()-t.viz.border_width.x,n=0,o=t.viz.y_scale.rangeBand()-t.viz.border_width.y,a="M"+e+","+n+" L"+e+", "+o+" L"+r+",0 Z";return a}},function(t,e){"use strict";t.exports=function(t){var e=0,r=t.viz.x_scale.rangeBand()-t.viz.border_width.x,n=t.viz.y_scale.rangeBand()-t.viz.border_width.y,o=t.viz.y_scale.rangeBand()-t.viz.border_width.y,a="M"+e+", "+n+"   L"+r+", "+o+" L"+r+",0 Z";return a}},function(t,e){"use strict";t.exports=function(t,e,r,n){var o=n[0];d3.select(e).classed("hovering",!0),["row","col"].forEach(function(e){d3.selectAll(t.root+" ."+e+"_label_group text").style("font-weight",function(t){var r,n=(o[e+"_name"]||"").replace(/_/g," ")===t.name;return r=n?"bold":"normal"})}),dispatchEvent(new CustomEvent("TILE_MOUSEOVER",{detail:{tile:o,rect:e.getBoundingClientRect()}}))}},function(t,e){"use strict";t.exports=function(t,e,r){d3.select(e).classed("hovering",!1),d3.selectAll(t.viz.root_tips+"_tile_tip").style("display","none"),["row","col"].forEach(function(e){d3.selectAll(t.root+" ."+e+"_label_group text").style("font-weight","normal")}),dispatchEvent(new CustomEvent("TILE_MOUSEOUT",{detail:e.__data__}))}},function(t,e){"use strict";t.exports=function(t,e){var r;r=e.pos_x in t.viz.x_scale.domain()?t.viz.x_scale(e.pos_x):0;var n=r+.5*t.viz.border_width.x,o=.5*t.viz.border_width.y;return"translate("+n+","+o+")"}},function(t,e){"use strict";t.exports=function(){function t(t){b=p(t),z=b.createSVGPoint(),document.body.appendChild(x)}function e(){return"n"}function r(){return[0,0]}function n(){return" "}function o(){var t=h();return{top:t.s.y,left:t.s.x}}function a(){var t=h();return{top:t.n.y-x.offsetHeight,left:t.n.x-x.offsetWidth/2}}function i(){var t=h();return{top:t.s.y,left:t.s.x-x.offsetWidth/2}}function s(){var t=h();return{top:t.e.y-x.offsetHeight/2,left:t.e.x}}function l(){var t=h();return{top:t.w.y-x.offsetHeight/2,left:t.w.x-x.offsetWidth}}function c(){var t=h();return{top:t.nw.y-x.offsetHeight,left:t.nw.x-x.offsetWidth}}function u(){var t=h();return{top:t.ne.y-x.offsetHeight,left:t.ne.x}}function d(){var t=h();return{top:t.sw.y,left:t.sw.x-x.offsetWidth}}function f(){var t=h();return{top:t.se.y,left:t.e.x}}function _(){var t=d3.select(document.createElement("div"));return t.style({position:"absolute",opacity:0,pointerEvents:"none",boxSizing:"border-box"}),t.node()}function p(t){return t=t.node(),"svg"==t.tagName.toLowerCase()?t:t.ownerSVGElement}function h(){var t=k||d3.event.target,e={},r=t.getScreenCTM(),n=t.getBBox(),o=n.width,a=n.height,i=n.x,s=n.y,l=document.documentElement.scrollTop||document.body.scrollTop,c=document.documentElement.scrollLeft||document.body.scrollLeft;return r.a=1,r.d=1,r.e=r.e+c,r.f=r.f+l,z.x=i,z.y=s,e.nw=z.matrixTransform(r),z.x=z.x+o,e.ne=z.matrixTransform(r),z.y=z.y+a,e.se=z.matrixTransform(r),z.x=z.x-o,e.sw=z.matrixTransform(r),z.y=z.y-a/2,e.w=z.matrixTransform(r),z.x=z.x+o,e.e=z.matrixTransform(r),z.x=z.x-o/2,z.y=z.y-a/2,e.n=z.matrixTransform(r),z.y=z.y+a,e.s=z.matrixTransform(r),e}function v(t){var e=d3.select(t).classed("hovering");e&&d3.selectAll(".d3-tip").transition().duration(250).style("opacity",0).style("display","none")}function m(t){var e={};return t&&"[object Function]"===e.toString.call(t)}var g=e,y=r,w=n,x=_(),b=null,z=null,k=null;t.show=function(){var e=Array.prototype.slice.call(arguments);e[e.length-1]instanceof SVGElement&&(k=e.pop());var r,n=w.apply(this,e),o=y.apply(this,e),a=g.apply(this,e),i=d3.select(x),s=0;for(i.html(n).style({opacity:1,"pointer-events":"all"}).style("z-index",99);s--;)i.classed(E[s],!1);if(r=A.get(a).apply(this),i.classed(a,!0).style({top:r.top+o[0]+"px",left:r.left+o[1]+"px"}),m(this)===!1){var l=d3.select(this).attr("class");l.indexOf("tile")>=0&&setTimeout(v,5e3,this)}return t},t.hide=function(){var e=d3.select(x);return e.style({opacity:0,"pointer-events":"none"}),t},t.attr=function(e){if(arguments.length<2&&"string"==typeof e)return d3.select(x).attr(e);var r=Array.prototype.slice.call(arguments);return d3.selection.prototype.attr.apply(d3.select(x),r),t},t.style=function(e){if(arguments.length<2&&"string"==typeof e)return d3.select(x).style(e);var r=Array.prototype.slice.call(arguments);return d3.selection.prototype.style.apply(d3.select(x),r),t},t.direction=function(e){return arguments.length?(g=null==e?e:d3.functor(e),t):g},t.offset=function(e){return arguments.length?(y=null==e?e:d3.functor(e),t):y},t.html=function(e){return arguments.length?(w=null==e?e:d3.functor(e),t):w};var A=d3.map({n:a,s:i,e:s,w:l,nw:c,ne:u,sw:d,se:f,south_custom:o}),E=A.keys();return t}},function(t,e,r){"use strict";function n(t,e,r,n){return o(t)||(t=a(t)),("number"!=typeof r||n)&&(r=0),i(t,e,r)>=0}var o=r(7),a=r(96),i=r(134);t.exports=n},function(t,e,r){"use strict";var n=r(135),o=r(136),a=r(138),i=a(1,o,n);t.exports=i},function(t,e,r){"use strict";function n(t,e,r,n){r=o(r,n,1);for(var i=r(e),s=0,l=a(t);s<l;){var c=Math.floor((s+l)/2);r(t[c])<i?s=c+1:l=c}return s}var o=r(78),a=r(10);t.exports=n},function(t,e,r){"use strict";var n=r(137),o=n(1);t.exports=o},function(t,e,r){"use strict";function n(t){return function(e,r,n){r=o(r,n);for(var i=a(e),s=t>0?0:i-1;s>=0&&s<i;s+=t)if(r(e[s],s,e))return s;return-1}}var o=r(78),a=r(10);t.exports=n},function(t,e,r){"use strict";function n(t,e,r){return function(n,s,l){var c=0,u=o(n);if("number"==typeof l)t>0?c=l>=0?l:Math.max(l+u,c):u=l>=0?Math.min(l+1,u):l+u+1;else if(r&&l&&u)return l=r(n,s),n[l]===s?l:-1;if(s!==s)return l=e(a.slice.call(n,c,u),i),l>=0?l+c:-1;for(l=t>0?c:u-1;l>=0&&l<u;l+=t)if(n[l]===s)return l;return-1}}var o=r(10),a=r(9),i=r(139);t.exports=n},function(t,e,r){"use strict";function n(t){return a(t)&&o._isNaN(t)}var o=r(9),a=r(140);t.exports=n},function(t,e,r){"use strict";var n=r(17),o=n("Number");t.exports=o},function(t,e,r){"use strict";var n=r(142);t.exports=function(t,e){var r,o=t.params;r=d3.select(o.viz.viz_svg+" .row_container").empty()?d3.select(o.viz.viz_svg).append("g").classed("row_container",!0).attr("transform","translate("+o.viz.norm_labels.margin.left+","+o.viz.clust.margin.top+")"):d3.select(o.viz.viz_svg).select(".row_container").attr("transform","translate("+o.viz.norm_labels.margin.left+","+o.viz.clust.margin.top+")"),d3.select(o.root+" .row_white_background").empty()&&r.append("rect").classed("row_white_background",!0).classed("white_bars",!0).attr("fill",o.viz.background_color).attr("width",o.viz.label_background.row).attr("height",30*o.viz.clust.dim.height+"px"),d3.select(o.root+" .row_label_container").empty()?r.append("g").classed("row_label_container",!0).attr("transform","translate("+o.viz.norm_labels.width.row+",0)").append("g").classed("row_label_zoom_container",!0):r.select(o.root+" .row_label_container").attr("transform","translate("+o.viz.norm_labels.width.row+",0)"),o.viz.ds_level===-1&&n(t,"all",e)}},function(t,e,r){"use strict";var n=r(2),o=r(143),a=r(144),i=r(172),s=r(5),l=r(133);t.exports=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,c=t.params,u=[];"all"===e?u=c.network_data.row_nodes:s(c.network_data.row_nodes,function(t){l(e,t.name)&&u.push(t)});var d=d3.select(c.root+" .row_label_zoom_container").selectAll("g").data(u,function(t){return t.name}).enter().append("g").classed("row_label_group",!0),f=c.network_data.row_nodes_names||[];d.attr("transform",function(t){var e=f.indexOf(t.name);return"translate(0,"+c.viz.y_scale(e)+")"}),d.on("dblclick",function(e){var r="__data__",n=this[r].name;a(t,this,n),c.tile_click_hlight&&o(this,e.ini)}),i(c),d.insert("rect").style("opacity",0),d.append("text").attr("y",.5*c.viz.rect_height+.35*c.labels.default_fs_row).attr("text-anchor","end").style("font-size",c.labels.default_fs_row+"px").text(function(t){return n.normal_name(t)}).attr("pointer-events","none").style("opacity",0).style("cursor","default").transition().delay(r).duration(r).style("opacity",1),d.each(function(){var t=d3.select(this).select("text")[0][0].getBBox();d3.select(this).select("rect").attr("x",t.x).attr("y",0).attr("width",t.width).attr("height",c.viz.y_scale.rangeBand()).style("fill",function(){var t="yellow";return t}).style("opacity",function(t){var e=0;return 1===t.target&&(e=1),e})}),n.has(c.network_data.row_nodes[0],"value")&&d.append("rect").classed("row_bars",!0).attr("width",function(t){var e=0;return e=c.labels.bar_scale_row(Math.abs(t.value))}).attr("x",function(t){var e=0;return e=-c.labels.bar_scale_row(Math.abs(t.value))}).attr("height",c.viz.y_scale.rangeBand()).attr("fill",function(t){return t.value>0?c.matrix.bar_colors[0]:c.matrix.bar_colors[1]}).attr("opacity",.4)}},function(t,e){"use strict";t.exports=function(t,e,r){if(r!=t.click_hlight_row){var n=6,o=.85,a=n*t.viz.border_width.x;d3.selectAll(t.root+" .click_hlight").remove(),d3.select(e).append("rect").classed("click_hlight",!0).classed("row_top_hlight",!0).attr("width",t.viz.svg_dim.width).attr("height",a).attr("fill",t.matrix.hlight_color).attr("opacity",o),d3.select(e).append("rect").classed("click_hlight",!0).classed("row_bottom_hlight",!0).attr("width",t.viz.svg_dim.width).attr("height",a).attr("fill",t.matrix.hlight_color).attr("opacity",o).attr("transform",function(){var e=t.viz.y_scale.rangeBand()-a;return"translate(0,"+e+")"})}else d3.selectAll(t.root+" .click_hlight").remove(),t.click_hlight_row=-666}},function(t,e,r){"use strict";var n=r(145),o=r(146),a=r(120),i=r(171),s=r(108),l=r(110);t.exports=function(t,e,r){var c=t.params,u=i(c);if(1===u.zoom_y&&1===u.zoom_x){c.viz.inst_order.row="custom",o(t,"col"),d3.selectAll(c.root+" .toggle_col_order .btn").classed("active",!1),c.viz.run_trans=!0;var d=l.extend(!0,{},c.matrix.matrix),f=c.network_data.row_nodes,_=c.network_data.col_nodes,p=[];f.forEach(function(t){p.push(t.name)}),r=p.indexOf(r),p=[],_.forEach(function(t,e){p.push(d[r].row_data[e].value)});var h=d3.range(p.length).sort(function(t,e){return p[e]-p[t]});c.viz.x_scale.domain(h),c.matrix.orders.custom_row=h;var v;v=c.network_data.links.length>c.matrix.def_large_matrix?d3.select(c.root+" .viz_svg"):d3.select(c.root+" .viz_svg").transition().duration(2500);var m=c.network_data.col_nodes_names||[];v.select(".col_zoom_container").selectAll(".col_label_text").attr("transform",function(t){var e=m.indexOf(t.name);return"translate("+c.viz.x_scale(e)+")rotate(-90)"}),v.selectAll(".col_cat_group").attr("transform",function(t){var e=m.indexOf(t.name);return"translate("+c.viz.x_scale(e)+",0)"}),c.viz.ds_level===-1&&(v.selectAll(".tile").attr("transform",function(t){return"translate("+c.viz.x_scale(t.pos_x)+",0)"}),v.selectAll(".tile_up").attr("transform",function(t){return"translate("+c.viz.x_scale(t.pos_x)+",0)"}),v.selectAll(".tile_dn").attr("transform",function(t){return"translate("+c.viz.x_scale(t.pos_x)+",0)"})),d3.selectAll(c.root+" .row_label_group").select("rect").style("opacity",0),d3.select(e).select("rect").style("opacity",1),n(c),c.network_data.links.forEach(function(t){t.x=c.viz.x_scale(t.target),t.y=c.viz.y_scale(t.source)}),c.zoom_info=a(),setTimeout(function(){c.viz.run_trans=!1},2500),c.viz.ds_num_levels>0&&c.viz.ds_level>=0&&s(c)}}},function(t,e){"use strict";t.exports=function(t){var e=6,r=e*t.viz.border_width.x,n=e*t.viz.border_width.y;d3.select(t.root+" .top_hlight").attr("width",t.viz.x_scale.rangeBand()).attr("height",n).transition().duration(2500).attr("transform",function(){return"translate("+t.viz.x_scale(t.matrix.click_hlight_x)+",0)"}),d3.select(t.root+" .left_hlight").attr("width",r).attr("height",t.viz.y_scale.rangeBand()-.99*n).transition().duration(2500).attr("transform",function(){return"translate("+t.viz.x_scale(t.matrix.click_hlight_x)+","+.99*n+")"}),d3.select(t.root+" .right_hlight").attr("width",r).attr("height",t.viz.y_scale.rangeBand()-.99*n).transition().duration(2500).attr("transform",function(){var e=t.viz.x_scale(t.matrix.click_hlight_x)+t.viz.x_scale.rangeBand()-r;return"translate("+e+","+.99*n+")"}),d3.select(t.root+" .bottom_hlight").attr("width",function(){return t.viz.x_scale.rangeBand()-1.98*r}).attr("height",n).transition().duration(2500).attr("transform",function(){var e=t.viz.x_scale(t.matrix.click_hlight_x)+.99*r,o=t.viz.y_scale.rangeBand()-n;return"translate("+e+","+o+")"})}},function(t,e,r){"use strict";var n=r(147);t.exports=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1500,o=t.params;"row"===e&&"clust"===o.viz.inst_order.col&&setTimeout(n,r,t,"row",!0),"col"===e&&"clust"===o.viz.inst_order.row&&setTimeout(n,r,t,"col",!0),"clust"!=o.viz.inst_order.row&&o.viz.dendro_filter.col===!1&&(d3.selectAll(o.root+" .col_dendro_group").style("opacity",0).on("mouseover",null).on("mouseout",null),d3.select(o.root+" .col_slider_group").style("opacity",0),d3.selectAll(o.root+" .col_dendro_crop_buttons").style("opacity",0).on("mouseover",null).on("mouseout",null)),"clust"!=o.viz.inst_order.col&&o.viz.dendro_filter.row===!1&&(d3.selectAll(o.root+" .row_dendro_group").style("opacity",0).on("mouseover",null).on("mouseout",null).on("click",null),d3.select(o.root+" .row_slider_group").style("opacity",0),d3.selectAll(o.root+" .row_dendro_crop_buttons").style("opacity",0).on("mouseover",null).on("mouseout",null))}},function(t,e,r){"use strict";var n=r(148),o=r(149),a=r(150),i=r(132),s=r(152),l=r(155),c=r(110);t.exports=function(t,e){function r(t,r,n){if(d3.select(t).classed("hovering")){var o=d.viz.root_tips+"_"+e+"_dendro_tip";d3.select(o+" .cat_graph").empty()&&null!==d.viz.cat_info[e]&&l(d,e,r,_[n],o,!0),d3.selectAll(d.viz.root_tips+"_"+e+"_dendro_tip").style("opacity",1)}}var u=arguments.length>2&&void 0!==arguments[2]&&arguments[2],d=t.params;"both"===e&&(e="row");var f;f="row"===e?"col":"row","clust"===d.viz.inst_order[f]&&d3.select(d.root+" ."+e+"_slider_group").style("opacity",1);var _;d.viz.show_dendrogram&&(_="row"===e?n(d):o(d),d3.select(t.params.root+" ."+e+"_dendro_crop_buttons").empty()===!1&&s(t,e));var p=d.viz.dendro_opacity,h=500;d3.selectAll(t.params.viz.root_tips+"_"+e+"_dendro_tip").remove();var v;d3.selectAll(d.root+" ."+e+"_dendro_group").empty()?v=!1:(v=!0,d3.selectAll(d.root+" ."+e+"_dendro_group").remove());var m=0,g=-5,y=i().attr("class",function(){var t=d.viz.root_tips.replace(".",""),r=t+" d3-tip "+t+"_"+e+"_dendro_tip";return r}).direction("nw").offset([m,g]).style("display","none").style("opacity",0);y.html(function(){var t='<div class="cluster_info_container"></div>Click for cluster information <br>and additional options.';return t}),u&&(v=!1);var w,x,b,z,k,A,E=d3.select(d.root+" ."+e+"_dendro_container").selectAll("path").data(_,function(t){return t.name}).enter().append("path").style("opacity",0).attr("class",e+"_dendro_group").style("fill","black");E.attr("d",function(t){"row"===e?(w=0,x=t.pos_top,b=30,z=t.pos_mid,k=0,A=t.pos_bot):(w=t.pos_top,x=0,b=t.pos_mid,z=30,k=t.pos_bot,A=0);var r="M"+w+","+x+" L"+b+", "+z+" L"+k+","+A+" Z";return r}),E.on("mouseover",function(n,o){d3.select(this).classed("hovering",!0),null!=t.params.dendro_callback&&t.params.dendro_callback(this),d3.select(d.viz.root_tips+"_"+e+"_dendro_tip").style("display","block"),a(d,this,n,e),y.show(n),d3.select(d.viz.root_tips+"_"+e+"_dendro_tip").style("opacity",0),setTimeout(r,h,this,n,o)}).on("mouseout",function(){"clust"===d.viz.inst_order[f]&&d3.select(this).style("opacity",p),d3.selectAll(d.root+" .dendro_shadow").remove(),d3.select(this).classed("hovering",!1),y.hide(this)}).on("click",function(r,n){c(d.root+" .dendro_info").modal("toggle");var o=r.all_names.join(", ");d3.select(d.root+" .dendro_info input").attr("value",o);var a=d.root+" .dendro_info";d3.selectAll(".dendro_info .cluster_info_container .cat_graph").remove(),null!==d.viz.cat_info[e]&&l(d,e,r,_[n],a),null!=t.params.dendro_click_callback&&t.params.dendro_click_callback(this)}).call(y);var N;N="clust"===d.viz.inst_order[f]?p:0,v?d3.select(d.root+" ."+e+"_dendro_container").selectAll("path").transition().delay(1e3).duration(1e3).style("opacity",N):d3.select(d.root+" ."+e+"_dendro_container").selectAll("path").style("opacity",N)}},function(t,e,r){"use strict";var n=r(5),o=r(2);t.exports=function(t){var e={},r=t.group_level.row,a=t.network_data.row_nodes||[],i=t.network_data.row_nodes_names||[];n(a,function(n){var a=n.group[r],s=i.indexOf(n.name),l=t.viz.y_scale(s),c=l+t.viz.y_scale.rangeBand();o.has(e,a)||(e[a]={},e[a].name_top=n.name,e[a].name_bot=n.name,e[a].pos_top=l,e[a].pos_bot=c,e[a].pos_mid=(l+c)/2,e[a].name=a,e[a].all_names=[],e[a].inst_rc="row"),e[a].all_names.push(n.name),l<e[a].pos_top&&(e[a].name_top=n.name,e[a].pos_top=l,e[a].pos_mid=(l+e[a].pos_bot)/2),c>e[a].pos_bot&&(e[a].name_bot=n.name,e[a].pos_bot=c,e[a].pos_mid=(e[a].pos_top+c)/2)});var s=[];return n(e,function(t){s.push(t)}),s}},function(t,e,r){"use strict";var n=r(5),o=r(2);t.exports=function(t){var e={},r=t.group_level.col,a=t.network_data.col_nodes||[],i=t.network_data.col_nodes_names||[];n(a,function(n){var a=n.group[r],s=i.indexOf(n.name),l=t.viz.x_scale(s),c=l+t.viz.x_scale.rangeBand();o.has(e,a)||(e[a]={},e[a].name_top=n.name,e[a].name_bot=n.name,e[a].pos_top=l,e[a].pos_bot=c,e[a].pos_mid=(l+c)/2,e[a].name=a,e[a].all_names=[],e[a].inst_rc="col"),e[a].all_names.push(n.name),l<e[a].pos_top&&(e[a].name_top=n.name,e[a].pos_top=l,e[a].pos_mid=(l+e[a].pos_bot)/2),c>e[a].pos_bot&&(e[a].name_bot=n.name,e[a].pos_bot=c,e[a].pos_mid=(e[a].pos_top+c)/2)});var s=[];return n(e,function(t){s.push(t)}),s}},function(t,e,r){"use strict";var n=r(151);t.exports=function(t,e,r,o){function a(){d3.select(e).classed("hovering")&&t.is_slider_drag===!1&&(d3.select(e).style("opacity",.7),d3.select(t.viz.viz_svg).classed("running_update")===!1&&i())}function i(){"row"===o?"clust"===t.viz.inst_order.col&&n(t,e,o,r):"col"===o?"clust"===t.viz.inst_order.row&&n(t,e,o,r):"both"===o&&("clust"===t.viz.inst_order.col&&n(t,e,"row",r),"clust"===t.viz.inst_order.row&&n(t,e,"col",r))}d3.selectAll(t.root+" ."+o+"_dendro_crop_buttons")[0].length>1?setTimeout(a,500):d3.selectAll(t.root+" .dendro_shadow").remove()}},function(t,e){"use strict";t.exports=function(t,e,r,n){var o,a=.2;d3.selectAll(t.root+" .dendro_shadow").remove(),"row"==r?(d3.select(t.root+" .clust_group").append("rect").attr("width",t.viz.clust.dim.width+"px").attr("height",n.pos_top+"px").attr("fill","black").classed("dendro_shadow",!0).attr("opacity",a),o=t.viz.clust.dim.height-n.pos_bot,d3.select(t.root+" .clust_group").append("rect").attr("width",t.viz.clust.dim.width+"px").attr("height",o+"px").attr("transform","translate(0,"+n.pos_bot+")").attr("fill","black").classed("dendro_shadow",!0).attr("opacity",a)):"col"===r&&(d3.select(t.root+" .clust_group").append("rect").attr("width",n.pos_top+"px").attr("height",t.viz.clust.dim.height+"px").attr("fill","black").classed("dendro_shadow",!0).attr("opacity",a),o=t.viz.clust.dim.width-n.pos_bot,d3.select(t.root+" .clust_group").append("rect").attr("width",o+"px").attr("height",t.viz.clust.dim.height+"px").attr("transform","translate("+n.pos_bot+",0)").attr("fill","black").classed("dendro_shadow",!0).attr("opacity",a))}},function(t,e,r){"use strict";var n=r(148),o=r(149),a=r(132),i=r(150),s=r(153),l=r(154);t.exports=function(t,e){function r(t){d3.select(t).classed("hovering")&&d3.selectAll(d.viz.root_tips+"_"+e+"_dendro_crop_tip").style("opacity",1).style("display","block")}var c,u,d=t.params,f=.6*d.viz.dendro_opacity;d.viz.show_dendrogram&&("row"===e?(c=n(d),u="col"):(c=o(d),u="row"));var _=5,p=-5,h=a().attr("class",function(){var t=d.viz.root_tips.replace(".",""),r=t+" d3-tip "+t+"_"+e+"_dendro_crop_tip";return r}).direction("nw").style("display","none").offset([_,p]),v=500;d3.selectAll(d.viz.root_tips+"_"+e+"_dendro_crop_tip").remove(),d3.selectAll(d.root+" ."+e+"_dendro_crop_buttons").remove();var m,g,y,w,x,b,z,k,A,E,N=45,M=.25,S=e+"_dendro_crop_buttons";d3.select(t.params.root+" ."+e+"_dendro_icons_group").classed("ran_filter")===!1?(m=d3.select(d.root+" ."+e+"_dendro_icons_group").selectAll("path").data(c,function(t){return t.name}).enter().append("path").classed(S,!0).attr("d",function(t){k=10,A=10;var r=t.pos_bot-t.pos_top;"row"===e?(r<N&&(k=r*M),g=A,y=-k,w=0,x=0,b=A,z=k,E=k):(r<N&&(A=r*M),g=-A,y=k,w=0,x=0,b=A,z=k,E=A);var n="__data__";d3.select(this)[0][0][n].tri_dim=E;var o="M"+g+","+y+" L"+w+", "+x+" L"+b+","+z+" Z";return o}),h.html(function(){var t="Click to crop cluster";return t})):(m=d3.select(d.root+" ."+e+"_dendro_icons_group").selectAll("path").data(c,function(t){return t.name}).enter().append("path").classed(S,!0).attr("d",function(t){k=10,A=12;var r=t.pos_bot-t.pos_top;"row"===e?(r<N&&(k=r*M),g=0,y=-k,w=A,x=0,b=0,z=k):(r<N&&(A=r*M),g=-A,y=0,w=0,x=k,b=A,z=0);var n="__data__";d3.select(this)[0][0][n].tri_dim=10;var o="M"+g+","+y+" L"+w+", "+x+" L"+b+","+z+" Z";return o}),h.html(function(){var t="Click to undo crop";return t})),m.style("cursor","pointer").style("opacity",function(){var t;return t=f}).attr("transform",function(t){var r,n,o;return"row"===e?(n=d.viz.uni_margin,o=t.pos_mid):(n=t.pos_mid,o=d.viz.uni_margin),r="translate("+n+","+o+")"}).on("mouseover",function(t){d3.select(this).classed("hovering",!0),h.show(t),i(d,this,t,e),d3.selectAll(d.viz.root_tips+"_"+e+"_dendro_crop_tip").style("opacity",0).style("display","block"),setTimeout(r,v,this)}).on("mouseout",function(){d3.select(this).classed("hovering",!1),d3.selectAll(d.root+" .dendro_shadow").remove(),d3.select(this).style("opacity",f),h.hide(this)}).on("click",function(r){d3.select(this).style("opacity",.9).transition().duration(1e3).style("opacity",0),d3.selectAll(d.root+" .dendro_shadow").remove(),t.params.dendro_filter.row===!1&&t.params.dendro_filter.col===!1&&t.params.cat_filter.row===!1&&t.params.cat_filter.col===!1?(d3.select(t.params.root+" ."+e+"_dendro_icons_group").attr("transform","translate(0,0), scale(1,1)").classed("ran_filter",!0),d3.select(t.params.root+" ."+u+"_dendro_icons_group").attr("transform","translate(0,0), scale(1,1)"),d3.select(t.params.root+" ."+e+"_slider_group").style("display","none"),d3.select(t.params.root+" ."+u+"_dendro_icons_container").style("display","none"),d3.select(t.params.root+" .crop_button").style("opacity",.2)):(d3.select(t.params.root+" ."+e+"_dendro_icons_group").attr("transform","translate(0,0), scale(1,1)").classed("ran_filter",!1),d3.select(t.params.root+" ."+u+"_dendro_icons_group").attr("transform","translate(0,0), scale(1,1)"),"clust"===d.viz.inst_order[u]&&d3.select(t.params.root+" ."+e+"_slider_group").style("display","block"),d3.select(t.params.root+" ."+u+"_dendro_icons_container").style("display","block"),d3.select(t.params.root+" .crop_button").style("opacity",1)),s(t,r,e)}).call(h),"clust"!=d.viz.inst_order[u]&&d3.select(d.root+" ."+e+"_dendro_icons_group").selectAll("path").style("display","none"),l(d,d.zoom_info,e)}},function(t,e){"use strict";t.exports=function(t,e,r){var n={};if(t.params.dendro_filter.row===!1&&t.params.dendro_filter.col===!1&&t.params.cat_filter.row===!1&&t.params.cat_filter.col===!1){d3.select(t.params.root+" ."+r+"_slider_group").style("opacity",.35).style("pointer-events","none"),n[r]=e.all_names;var o=t.params.network_data[r+"_nodes_names"],a=t.params.network_data.row_nodes,i=t.params.network_data.col_nodes;t.filter_viz_using_names(n),t.params.inst_nodes.row_nodes=a,t.params.inst_nodes.col_nodes=i,d3.selectAll(t.params.root+" .dendro_shadow").transition().duration(1e3).style("opacity",0).remove(),t.params.dendro_filter[r]=o}else n[r]=t.params.dendro_filter[r],t.filter_viz_using_names(n),t.params.dendro_filter[r]=!1}},function(t,e){"use strict";t.exports=function(t,e,r){function n(t,e){var r,n=10;if(e*t<n)r=1;else{var o=n/e;r=t/o}return r}"row"===r?d3.select(t.root+" .row_dendro_icons_group").selectAll("path").attr("transform",function(r){var o=t.viz.uni_margin,a=r.pos_mid,i=e.zoom_y,s=d3.select(this).data()[0].tri_dim,l=n(i,s);return"translate("+o+","+a+") scale(1, "+1/l+")"}):d3.select(t.root+" .col_dendro_icons_group").selectAll("path").attr("transform",function(r){var o=r.pos_mid,a=t.viz.uni_margin,i=e.zoom_x,s=d3.select(this).data()[0].tri_dim,l=n(i,s);return"translate("+o+","+a+") scale("+1/l+", 1)"})}},function(t,e,r){"use strict";var n=r(156),o=r(5),a=r(169),i=r(170);t.exports=function(t,e,r,s,l){var c=arguments.length>5&&void 0!==arguments[5]&&arguments[5];"both"===e&&(e="row");var u=n(t,r,e);if(u.length>0){var d=d3.select(l+" .cluster_info_container"),f=370,_=27,p=177,h=23,v=4,m=5,g=150,y=!1;null!=u[0].bar_data[0][m]&&(f+=100,p=p+g-47,y=!0);var w=s.all_names.length,x=v;if(y){x=m;var b=u[0].bar_data;w=0,o(b,function(t){w+=t[m]})}var z=3,k=25,A=20;u.slice(0,z).forEach(function(t){var e=t.bar_data.length;e>k&&(e=k),A+=_*(e+1)}),c&&d.append("text").text("Cluster Information");var E=d.append("div").style("margin-top","5px").classed("cat_graph",!0).append("svg").style("height",A+"px").style("width",f+"px");d.style("margin-bottom","5px"),E.append("rect").classed("cat_background",!0).attr("height",A+"px").attr("width",f+"px").attr("fill","white").attr("opacity",1),u=u.slice(0,z);var N=d3.scale.linear().domain([0,1e5]).range([20,30]),M=_;if(u.forEach(function(e){var r=e.bar_data[0][x],n=N(r),o=E.append("g").classed("cat_graph_group",!0).attr("transform","translate(10, "+M+")"),s=o.append("g").classed("cat_bar_container",!0).attr("transform","translate(0, 10)"),l=s.selectAll("g").data(e.bar_data).enter().append("g").attr("transform",function(t,e){var r=e*h;return"translate(0,"+r+")"});a(t,e,o,_,x,k,l),i(t,o,l,v,y,n,x,w),M+=_*(e.bar_data.length+1)}),c){var S=d3.select(l),O=S.style("top").split(".px")[0],B=S.style("left").split(".px")[0],T=0,C=0;"row"===e?(T=0,C=p):(T=A+32,C=30),S.style("top",function(){var t=String(parseInt(O,10)-T)+"px";return t}).style("left",function(){var t=String(parseInt(B,10)-C)+"px";return t})}}}},function(t,e,r){"use strict";var n=r(157),o=r(5),a=r(2);t.exports=function(t,e,r){"both"===r&&(r="row");var i,s=e.all_names,l=[],c=t.network_data[r+"_nodes"],u=null,d=!1;o(c,function(t){i=t.name,s.indexOf(i)>=0&&l.push(t)});var f=[];if(null!==t.viz.cat_info[r]){for(var _,p,h,v=t.viz.cat_info[r],m=Object.keys(v||{}),g=[],y=[],w=0;w<m.length;w++)h="cat-"+String(w),"cat_strings"===t.viz.cat_info[r][h].type?(_=t.viz.cat_names[r][h],y.push(_),g.push(h)):"number in clust"===t.viz.cat_names[r][h]&&(u=h,d=!0);var x,b={},z={},k=10,A=4;d&&(A=5);var E;if(E=_===h,y.length>0){var N,M=s.length;o(g,function(e){if(p=e.split("-")[1],_=y[p],E)if(e.indexOf("-")>=0){var i=parseInt(e.split("-")[1],k)+1;_="Category "+String(i)}else _="Category";b[_]={},o(l,function(t){N=t[e],N.indexOf(": ")>=0&&(N=N.split(": ")[1]),N in b[_]?(b[_][N].num_nodes=b[_][N].num_nodes+1,null!=u&&(b[_][N].num_nodes_ds=b[_][N].num_nodes_ds+parseInt(t[u].split(": ")[1],k))):(b[_][N]={},b[_][N].num_nodes=1,null!=u&&(b[_][N].num_nodes_ds=parseInt(t[u].split(": ")[1],k)))}),z={},z.type_name=_,z.num_in_clust=M,x=[];var s,c,d=b[_];for(var h in d){var v=t.viz.cat_info[r][e].cat_hist[h],m=t.network_data[r+"_nodes"].length,g=v/m;c=E?h:_+": "+h;var w=d[h].num_nodes,S=w,O=n(S,M,g);if(a.has(d[h],"num_nodes_ds"))var B=d[h].num_nodes_ds;else B=null;s=t.viz.cat_colors[r][e][c],x.push([e,c,d[h],s,w,B,O])}x.sort(function(t,e){return e[A]-t[A]}),z.bar_data=x,f.push(z)})}}return f}},function(t,e,r){"use strict";var n=r(158),o=r(25),a=o.create();a.import(r(159)),t.exports=function(t,e,r){function o(t,e,r){var n=c(e)/(c(t)*c(e-t));return r=n*(Math.pow(r,t)*Math.pow(1-r,e-t))}function i(t,e,r){for(var n,a,i=0,s=t;s<e+1;s++)n=s,a=o(n,e,r),i+=a;return i}function s(t,e,r){for(var o=e*r,a=Math.sqrt(e*r*(1-r)),i=(t-o)/a,s=n.z,c=n.p,u=-1,d=!1,f=0;f<s.length;f++){var _=s[f];i<_&&d===!1&&(u=f,d=!0)}return u===-1&&(u=s.length-1),l=c[u]}var l,c=a.factorial;return l=i(t,e,r),isNaN(l)&&(l=s(t,e,r)),l}},function(t,e){"use strict";t.exports={p:[.5,.4800611941616275,.460172162722971,.4403823076297575,.42074029056089696,.4012936743170763,.3820885778110473,.3631693488243809,.3445782583896758,.32635522028791997,.3085375387259869,.29115968678834636,.27425311775007355,.2578461108058647,.24196365222307303,.2266273523768682,.2118553985833967,.19766254312269238,.18406012534675947,.17105612630848183,.15865525393145707,.1468590563758959,.13566606094638267,.12507193563715024,.11506967022170828,.10564977366685535,.09680048458561036,.08850799143740196,.08075665923377107,.0735292596096483,.06680720126885807,.06057075800205901,.054799291699557974,.049471468033648075,.044565462758543006,.040059156863817086,.03593031911292579,.03215677479561371,.028716559816001783,.02558805952163861,.022750131948179195,.020182215405704383,.017864420562816542,.0157776073910905,.013903447513498595,.012224472655044696,.010724110021675795,.009386705534838566,.008197535924596114,.007142810735271415,.006209665325776132,.005386145954066684,.004661188023718747,.004024588542758303,.0034669738030406647,.002979763235054555,.002555130330427929,.0021859614549132405,.0018658133003840339,.0015888696473648667,.0013498980316300933,.0011442068310226977,.0009676032132183563,.0008163523128285604,.0006871379379158471,.0005770250423907659,.00048342414238377663,.0004040578018640207,.0003369292656768799,.00028029327681617744,.00023262907903552502,.00019261557563563279,.00015910859015753364,.00013112015442048433,.00010779973347738823,8841728520080377e-20,7234804392511979e-20,59058912418922374e-21,48096344017602614e-21,39075596597787456e-21,3167124183311986e-20,2560881647404149e-20,20657506912546683e-21,16623763729652213e-21,1334574901590631e-20,10688525774934402e-21,8539905470991794e-21,6806876599334031e-21,5412543907703841e-21,4293514469971858e-21,33976731247300535e-22,26822957796388472e-22,2112454702502842e-21,16596751443714555e-22,13008074539172771e-22,10170832425687032e-22,7.933281519755892e-7,6.173073720091925e-7,4.791832765903185e-7,3.710674079633327e-7,2.8665157187919333e-7,2.2090503226954194e-7,1.6982674071475937e-7,1.3024322953320117e-7,9.96442631693347e-8,7.6049605164887e-8,5.790134039964557e-8,4.397711594005869e-8,3.332044848542845e-8,2.518491005446105e-8,1.898956246588768e-8,1.4283479893922661e-8,1.0717590258310852e-8,8.022391850663474e-9,5.99037140106353e-9,4.462172453901611e-9,3.3157459783261365e-9,2.4578650618080152e-9,1.8175078630994235e-9,1.3407124440918662e-9,9.865876450376946e-10,7.242291705137605e-10,5.303423262948808e-10,3.8741473466756636e-10,2.823158037043268e-10,2.0522634252189396e-10,1.4882282217622966e-10,1.0765746385121517e-10,7.768847581709776e-11,5.592507575942645e-11,4.016000583859088e-11,2.876854173604311e-11,2.055788909399508e-11,1.4654650977302715e-11,1.0420976987965154e-11,7.392257778017794e-12,5.230957544144525e-12,3.692499427235561e-12,2.600126965638173e-12,1.826431061976961e-12,1.279812543885835e-12,8.945889558769844e-13,6.23784446333152e-13,4.3388950271780343e-13,3.010627981117422e-13,2.0838581586720548e-13,1.4388386381575764e-13,9.910342749547509e-14,6.809224890620016e-14,4.6670115887190274e-14,3.1908916729108844e-14,2.1762912097085575e-14,1.4806537490047908e-14,1.0048965656526223e-14,6.803311540773901e-15,4.594627435778562e-15,3.095358771958668e-15,2.0801863521393674e-15,1.394517146659261e-15,9.325575771681205e-16,6.22096057427174e-16,4.139701816273122e-16,2.747959392398221e-16,1.8196213635266084e-16,1.2019351542735647e-16,7.919726314642476e-17,5.2055697448902465e-17,3.413148326458146e-17,2.232393197288031e-17,1.456514112590909e-17,9.47953482220325e-18,6.154425590850395e-18,3.985804962848151e-18,2.5749715380118873e-18,1.6594208699647519e-18,1.0667637375474856e-18,6.840807685935497e-19,4.375964799309017e-19,2.7923343749396233e-19,1.7774117841455144e-19,1.1285884059538324e-19,7.148417011269684e-20,4.516591491435403e-20,2.846677408460209e-20,1.7897488120140146e-20,1.1224633591327901e-20,7.022284240441541e-21,4.38238629906646e-21,2.7281535713460872e-21,1.6941535024881097e-21,1.0494515075362604e-21,6.484814453077208e-22,3.9972212057261192e-22,2.4577864834723153e-22,1.507493168810159e-22,9.223413524939353e-23,5.629282311376514e-23,3.4271987941135974e-23,2.0813752194932085e-23,1.2609160670206559e-23],
z:[0,.05,.1,.15000000000000002,.2,.25,.30000000000000004,.35000000000000003,.4,.45,.5,.55,.6000000000000001,.65,.7000000000000001,.75,.8,.8500000000000001,.9,.9500000000000001,1,1.05,1.1,1.1500000000000001,1.2000000000000002,1.25,1.3,1.35,1.4000000000000001,1.4500000000000002,1.5,1.55,1.6,1.6500000000000001,1.7000000000000002,1.75,1.8,1.85,1.9000000000000001,1.9500000000000002,2,2.0500000000000003,2.1,2.15,2.2,2.25,2.3000000000000003,2.35,2.4000000000000004,2.45,2.5,2.5500000000000003,2.6,2.6500000000000004,2.7,2.75,2.8000000000000003,2.85,2.9000000000000004,2.95,3,3.0500000000000003,3.1,3.1500000000000004,3.2,3.25,3.3000000000000003,3.35,3.4000000000000004,3.45,3.5,3.5500000000000003,3.6,3.6500000000000004,3.7,3.75,3.8000000000000003,3.85,3.9000000000000004,3.95,4,4.05,4.1000000000000005,4.15,4.2,4.25,4.3,4.3500000000000005,4.4,4.45,4.5,4.55,4.6000000000000005,4.65,4.7,4.75,4.800000000000001,4.8500000000000005,4.9,4.95,5,5.050000000000001,5.1000000000000005,5.15,5.2,5.25,5.300000000000001,5.3500000000000005,5.4,5.45,5.5,5.550000000000001,5.6000000000000005,5.65,5.7,5.75,5.800000000000001,5.8500000000000005,5.9,5.95,6,6.050000000000001,6.1000000000000005,6.15,6.2,6.25,6.300000000000001,6.3500000000000005,6.4,6.45,6.5,6.550000000000001,6.6000000000000005,6.65,6.7,6.75,6.800000000000001,6.8500000000000005,6.9,6.95,7,7.050000000000001,7.1000000000000005,7.15,7.2,7.25,7.300000000000001,7.3500000000000005,7.4,7.45,7.5,7.550000000000001,7.6000000000000005,7.65,7.7,7.75,7.800000000000001,7.8500000000000005,7.9,7.95,8,8.05,8.1,8.15,8.200000000000001,8.25,8.3,8.35,8.4,8.450000000000001,8.5,8.55,8.6,8.65,8.700000000000001,8.75,8.8,8.85,8.9,8.950000000000001,9,9.05,9.1,9.15,9.200000000000001,9.25,9.3,9.35,9.4,9.450000000000001,9.5,9.55,9.600000000000001,9.65,9.700000000000001,9.75,9.8,9.850000000000001,9.9,9.950000000000001]}},function(t,e,r){"use strict";function n(t,e,n,a){var i=n(r(161)),s=r(58),l=a("factorial",{number:function(t){if(t<0)throw new Error("Value must be non-negative");return i(t+1)},BigNumber:function(t){if(t.isNegative())throw new Error("Value must be non-negative");return i(t.plus(1))},"Array | Matrix":function(t){return o(t,l)}});return l.toTex={1:"\\left(${args[0]}\\right)"+s.operators.factorial},l}var o=r(160);e.name="factorial",e.factory=n},function(t,e){"use strict";t.exports=function t(e,r,n){return e&&"function"==typeof e.map?e.map(function(e){return t(e,r,n)}):r(e)}},function(t,e,r){"use strict";function n(t,e,n,l){function c(r){if(r.isZero())return new t.BigNumber(1);for(var n=e.precision+(0|Math.log(r.toNumber())),o=t.BigNumber.clone({precision:n}),a=new o(r),i=r.toNumber()-1;i>1;)a=a.times(i),i--;return new t.BigNumber(a.toPrecision(t.BigNumber.precision))}var u=n(r(162)),d=n(r(165)),f=l("gamma",{number:function(t){var e,r;if(a(t)){if(t<=0)return isFinite(t)?1/0:NaN;if(t>171)return 1/0;for(var n=t-2,o=t-1;n>1;)o*=n,n--;return 0==o&&(o=1),o}if(t<.5)return Math.PI/(Math.sin(Math.PI*t)*f(1-t));if(t>=171.35)return 1/0;if(t>85){var l=t*t,c=l*t,u=c*t,d=u*t;return Math.sqrt(2*Math.PI/t)*Math.pow(t/Math.E,t)*(1+1/(12*t)+1/(288*l)-139/(51840*c)-571/(2488320*u)+163879/(209018880*d)+5246819/(75246796800*d*t))}--t,r=s[0];for(var _=1;_<s.length;++_)r+=s[_]/(t+_);return e=t+i+.5,Math.sqrt(2*Math.PI)*Math.pow(e,t+.5)*Math.exp(-e)*r},Complex:function(e){var r,n;if(0==e.im)return f(e.re);e=new t.Complex(e.re-1,e.im),n=new t.Complex(s[0],0);for(var o=1;o<s.length;++o){var a=e.re+o,l=a*a+e.im*e.im;0!=l?(n.re+=s[o]*a/l,n.im+=-(s[o]*e.im)/l):n.re=s[o]<0?-(1/0):1/0}r=new t.Complex(e.re+i+.5,e.im);var c=Math.sqrt(2*Math.PI);e.re+=.5;var _=d(r,e);0==_.im?_.re*=c:0==_.re?_.im*=c:(_.re*=c,_.im*=c);var p=Math.exp(-r.re);return r.re=p*Math.cos(-r.im),r.im=p*Math.sin(-r.im),u(u(_,r),n)},BigNumber:function(e){if(e.isInteger())return e.isNegative()||e.isZero()?new t.BigNumber(1/0):c(e.minus(1));if(!e.isFinite())return new t.BigNumber(e.isNegative()?NaN:1/0);throw new Error("Integer BigNumber expected")},"Array | Matrix":function(t){return o(t,f)}});return f.toTex={1:"\\Gamma\\left(${args[0]}\\right)"},f}var o=r(160),a=r(31).isInteger,i=4.7421875,s=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22];e.name="gamma",e.factory=n},function(t,e,r){"use strict";function n(t,e,n,i){var s=r(58),l=n(r(56)),c=n(r(57)),u=n(r(163)),d=n(r(52)),f=n(r(164)),_=n(r(63)),p=t.DenseMatrix,h=t.SparseMatrix,v=i("multiply",o({"Array, Array":function(e,r){m(a.size(e),a.size(r));var n=v(l(e),l(r));return t.isMatrix(n)?n.valueOf():n},"Matrix, Matrix":function(t,e){var r=t.size(),n=e.size();return m(r,n),1===r.length?1===n.length?g(t,e,r[0]):y(t,e):1===n.length?x(t,e):b(t,e)},"Matrix, Array":function(t,e){return v(t,l(e))},"Array, Matrix":function(t,e){return v(l(t,e.storage()),e)},"Matrix, any":function(t,e){var r;switch(t.storage()){case"sparse":r=f(t,e,u,!1);break;case"dense":r=_(t,e,u,!1)}return r},"any, Matrix":function(t,e){var r;switch(e.storage()){case"sparse":r=f(e,t,u,!0);break;case"dense":r=_(e,t,u,!0)}return r},"Array, any":function(t,e){return _(l(t),e,u,!1).valueOf()},"any, Array":function(t,e){return _(l(e),t,u,!0).valueOf()},"any, any":u,"Array | Matrix | any, Array | Matrix | any, ...any":function(t,e,r){for(var n=v(t,e),o=0;o<r.length;o++)n=v(n,r[o]);return n}},u.signatures)),m=function(t,e){switch(t.length){case 1:switch(e.length){case 1:if(t[0]!==e[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(t[0]!==e[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+t[0]+") must match Matrix rows ("+e[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+e.length+" dimensions)")}break;case 2:switch(e.length){case 1:if(t[1]!==e[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+t[1]+") must match Vector length ("+e[0]+")");break;case 2:if(t[1]!==e[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+t[1]+") must match Matrix B rows ("+e[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+e.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+t.length+" dimensions)")}},g=function(t,e,r){if(0===r)throw new Error("Cannot multiply two empty vectors");var n,o=t._data,a=t._datatype,s=e._data,l=e._datatype,d=c,f=u;a&&l&&a===l&&"string"==typeof a&&(n=a,d=i.find(c,[n,n]),f=i.find(u,[n,n]));for(var _=f(o[0],s[0]),p=1;p<r;p++)_=d(_,f(o[p],s[p]));return _},y=function(t,e){switch(e.storage()){case"dense":return w(t,e)}throw new Error("Not implemented")},w=function(t,e){var r,n=t._data,o=t._size,a=t._datatype,s=e._data,l=e._size,d=e._datatype,f=o[0],_=l[1],h=c,v=u;a&&d&&a===d&&"string"==typeof a&&(r=a,h=i.find(c,[r,r]),v=i.find(u,[r,r]));for(var m=[],g=0;g<_;g++){for(var y=v(n[0],s[0][g]),w=1;w<f;w++)y=h(y,v(n[w],s[w][g]));m[g]=y}return new p({data:m,size:[_],datatype:r})},x=function(t,e){switch(t.storage()){case"dense":return z(t,e);case"sparse":return E(t,e)}},b=function(t,e){switch(t.storage()){case"dense":switch(e.storage()){case"dense":return k(t,e);case"sparse":return A(t,e)}break;case"sparse":switch(e.storage()){case"dense":return N(t,e);case"sparse":return M(t,e)}}},z=function(t,e){var r,n=t._data,o=t._size,a=t._datatype,s=e._data,l=e._datatype,d=o[0],f=o[1],_=c,h=u;a&&l&&a===l&&"string"==typeof a&&(r=a,_=i.find(c,[r,r]),h=i.find(u,[r,r]));for(var v=[],m=0;m<d;m++){for(var g=n[m],y=h(g[0],s[0]),w=1;w<f;w++)y=_(y,h(g[w],s[w]));v[m]=y}return new p({data:v,size:[d],datatype:r})},k=function(t,e){var r,n=t._data,o=t._size,a=t._datatype,s=e._data,l=e._size,d=e._datatype,f=o[0],_=o[1],h=l[1],v=c,m=u;a&&d&&a===d&&"string"==typeof a&&(r=a,v=i.find(c,[r,r]),m=i.find(u,[r,r]));for(var g=[],y=0;y<f;y++){var w=n[y];g[y]=[];for(var x=0;x<h;x++){for(var b=m(w[0],s[0][x]),z=1;z<_;z++)b=v(b,m(w[z],s[z][x]));g[y][x]=b}}return new p({data:g,size:[f,h],datatype:r})},A=function(t,e){var r=t._data,n=t._size,o=t._datatype,a=e._values,s=e._index,l=e._ptr,f=e._size,_=e._datatype;if(!a)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var p,v=n[0],m=f[1],g=c,y=u,w=d,x=0;o&&_&&o===_&&"string"==typeof o&&(p=o,g=i.find(c,[p,p]),y=i.find(u,[p,p]),w=i.find(d,[p,p]),x=i.convert(0,p));for(var b=[],z=[],k=[],A=new h({values:b,index:z,ptr:k,size:[v,m],datatype:p}),E=0;E<m;E++){k[E]=z.length;var N=l[E],M=l[E+1];if(M>N)for(var S=0,O=0;O<v;O++){for(var B,T=O+1,C=N;C<M;C++){var F=s[C];S!==T?(B=y(r[O][F],a[C]),S=T):B=g(B,y(r[O][F],a[C]))}S!==T||w(B,x)||(z.push(O),b.push(B))}}return k[m]=z.length,A},E=function(t,e){var r=t._values,n=t._index,o=t._ptr,a=t._datatype;if(!r)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var s,l=e._data,f=e._datatype,_=t._size[0],p=e._size[0],v=[],m=[],g=[],y=c,w=u,x=d,b=0;a&&f&&a===f&&"string"==typeof a&&(s=a,y=i.find(c,[s,s]),w=i.find(u,[s,s]),x=i.find(d,[s,s]),b=i.convert(0,s));var z=[],k=[];g[0]=0;for(var A=0;A<p;A++){var E=l[A];if(!x(E,b))for(var N=o[A],M=o[A+1],S=N;S<M;S++){var O=n[S];k[O]?z[O]=y(z[O],w(E,r[S])):(k[O]=!0,m.push(O),z[O]=w(E,r[S]))}}for(var B=m.length,T=0;T<B;T++){var C=m[T];v[T]=z[C]}return g[1]=m.length,new h({values:v,index:m,ptr:g,size:[_,1],datatype:s})},N=function(t,e){var r=t._values,n=t._index,o=t._ptr,a=t._datatype;if(!r)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var s,l=e._data,f=e._datatype,_=t._size[0],p=e._size[0],v=e._size[1],m=c,g=u,y=d,w=0;a&&f&&a===f&&"string"==typeof a&&(s=a,m=i.find(c,[s,s]),g=i.find(u,[s,s]),y=i.find(d,[s,s]),w=i.convert(0,s));for(var x=[],b=[],z=[],k=new h({values:x,index:b,ptr:z,size:[_,v],datatype:s}),A=[],E=[],N=0;N<v;N++){z[N]=b.length;for(var M=N+1,S=0;S<p;S++){var O=l[S][N];if(!y(O,w))for(var B=o[S],T=o[S+1],C=B;C<T;C++){var F=n[C];E[F]!==M?(E[F]=M,b.push(F),A[F]=g(O,r[C])):A[F]=m(A[F],g(O,r[C]))}}for(var I=z[N],j=b.length,P=I;P<j;P++){var R=b[P];x[P]=A[R]}}return z[v]=b.length,k},M=function(t,e){var r,n=t._values,o=t._index,a=t._ptr,s=t._datatype,l=e._values,d=e._index,f=e._ptr,_=e._datatype,p=t._size[0],v=e._size[1],m=n&&l,g=c,y=u;s&&_&&s===_&&"string"==typeof s&&(r=s,g=i.find(c,[r,r]),y=i.find(u,[r,r]));for(var w,x,b,z,k,A,E,N,M=m?[]:void 0,S=[],O=[],B=new h({values:M,index:S,ptr:O,size:[p,v],datatype:r}),T=m?[]:void 0,C=[],F=0;F<v;F++){O[F]=S.length;var I=F+1;for(k=f[F],A=f[F+1],z=k;z<A;z++)if(N=d[z],m)for(x=a[N],b=a[N+1],w=x;w<b;w++)E=o[w],C[E]!==I?(C[E]=I,S.push(E),T[E]=y(l[z],n[w])):T[E]=g(T[E],y(l[z],n[w]));else for(x=a[N],b=a[N+1],w=x;w<b;w++)E=o[w],C[E]!==I&&(C[E]=I,S.push(E));if(m)for(var j=O[F],P=S.length,R=j;R<P;R++){var D=S[R];M[R]=T[D]}}return O[v]=S.length,B};return v.toTex={2:"\\left(${args[0]}"+s.operators.multiply+"${args[1]}\\right)"},v}var o=r(27).extend,a=r(41);e.name="multiply",e.factory=n},function(t,e){"use strict";function r(t,e,r,n){var o=n("multiplyScalar",{"number, number":function(t,e){return t*e},"Complex, Complex":function(t,e){return t.mul(e)},"BigNumber, BigNumber":function(t,e){return t.times(e)},"Fraction, Fraction":function(t,e){return t.mul(e)},"number | Fraction | BigNumber | Complex, Unit":function(t,e){var r=e.clone();return r.value=null===r.value?r._normalize(t):o(r.value,t),r},"Unit, number | Fraction | BigNumber | Complex":function(t,e){var r=t.clone();return r.value=null===r.value?r._normalize(e):o(r.value,e),r},"Unit, Unit":function(t,e){return t.multiply(e)}});return o}e.factory=r},function(t,e,r){"use strict";function n(t,e,n,o){var a=n(r(52)),i=t.SparseMatrix,s=function(t,e,r,n){var s=t._values,l=t._index,c=t._ptr,u=t._size,d=t._datatype;if(!s)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var f,_=u[0],p=u[1],h=a,v=0,m=r;"string"==typeof d&&(f=d,h=o.find(a,[f,f]),v=o.convert(0,f),e=o.convert(e,f),m=o.find(r,[f,f]));for(var g=[],y=[],w=[],x=new i({values:g,index:y,ptr:w,size:[_,p],datatype:f}),b=0;b<p;b++){w[b]=y.length;for(var z=c[b],k=c[b+1],A=z;A<k;A++){var E=l[A],N=n?m(e,s[A]):m(s[A],e);h(N,v)||(y.push(E),g.push(N))}}return w[p]=y.length,x};return s}e.name="algorithm11",e.factory=n},function(t,e,r){"use strict";function n(t,e,n,i){function s(r,n){if(e.predictable&&!o(n)&&r<0)try{var a=p(n),i=h(a);if((n===i||Math.abs((n-i)/n)<1e-14)&&a.d%2===1)return(a.n%2===0?1:-1)*Math.pow(-r,n)}catch(t){}return r*r<1&&n===1/0||r*r>1&&n===-(1/0)?0:e.predictable&&(r<-1&&n===1/0||r>-1&&r<0&&n===-(1/0))?NaN:o(n)||r>=0||e.predictable?Math.pow(r,n):new t.Complex(r,0).pow(n,0)}function l(t,e){if(!o(e)||e<0)throw new TypeError("For A^b, b must be a positive integer (value is "+e+")");var r=a(t);if(2!=r.length)throw new Error("For A^b, A must be 2 dimensional (A has "+r.length+" dimensions)");if(r[0]!=r[1])throw new Error("For A^b, A must be square (size is "+r[0]+"x"+r[1]+")");for(var n=d(r[0]).valueOf(),i=t;e>=1;)1==(1&e)&&(n=f(i,n)),e>>=1,i=f(i,i);return n}function c(t,e){return _(l(t.valueOf(),e))}var u=r(58),d=n(r(166)),f=n(r(162)),_=n(r(56)),p=n(r(167)),h=n(r(168)),v=i("pow",{"number, number":s,"Complex, Complex":function(t,e){return t.pow(e)},"BigNumber, BigNumber":function(r,n){return n.isInteger()||r>=0||e.predictable?r.pow(n):new t.Complex(r.toNumber(),0).pow(n.toNumber(),0)},"Fraction, Fraction":function(t,r){if(1!==r.d){if(e.predictable)throw new Error("Function pow does not support non-integer exponents for fractions.");return s(t.valueOf(),r.valueOf())}return t.pow(r)},"Array, number":l,"Array, BigNumber":function(t,e){return l(t,e.toNumber())},"Matrix, number":c,"Matrix, BigNumber":function(t,e){return c(t,e.toNumber())},"Unit, number":function(t,e){return t.pow(e)}});return v.toTex={2:"\\left(${args[0]}\\right)"+u.operators.pow+"{${args[1]}}"},v}var o=r(31).isInteger,a=r(41).size;e.name="pow",e.factory=n},function(t,e,r){"use strict";function n(t,e,n,i){function s(t,e){switch(t.length){case 0:return e?c(e):[];case 1:return l(t[0],t[0],e);case 2:return l(t[0],t[1],e);default:throw new Error("Vector containing two values expected")}}function l(e,r,n){var i=t.isBigNumber(e)||t.isBigNumber(r)?t.BigNumber:null;if(t.isBigNumber(e)&&(e=e.toNumber()),t.isBigNumber(r)&&(r=r.toNumber()),!a(e)||e<1)throw new Error("Parameters in function eye must be positive integers");if(!a(r)||r<1)throw new Error("Parameters in function eye must be positive integers");var s=i?new t.BigNumber(1):1,l=i?new i(0):0,c=[e,r];if(n){var u=t.Matrix.storage(n);return u.diagonal(c,s,0,l)}for(var d=o.resize([],c,l),f=e<r?e:r,_=0;_<f;_++)d[_][_]=s;return d}var c=n(r(56)),u=i("eye",{"":function(){return"Matrix"===e.matrix?c([]):[]},string:function(t){return c(t)},"number | BigNumber":function(t){return l(t,t,"Matrix"===e.matrix?"default":void 0)},"number | BigNumber, string":function(t,e){return l(t,t,e)},"number | BigNumber, number | BigNumber":function(t,r){return l(t,r,"Matrix"===e.matrix?"default":void 0)},"number | BigNumber, number | BigNumber, string":function(t,e,r){return l(t,e,r)},Array:function(t){return s(t)},"Array, string":function(t,e){return s(t,e)},Matrix:function(t){return s(t.valueOf(),t.storage())},"Matrix, string":function(t,e){return s(t.valueOf(),e)}});return u.toTex=void 0,u}var o=r(41),a=r(31).isInteger;e.name="eye",e.factory=n},function(t,e,r){"use strict";function n(t,e,r,n){var a=n("fraction",{number:function(e){if(!isFinite(e)||isNaN(e))throw new Error(e+" cannot be represented as a fraction");return new t.Fraction(e)},string:function(e){return new t.Fraction(e)},"number, number":function(e,r){return new t.Fraction(e,r)},BigNumber:function(e){return new t.Fraction(e.toString())},Fraction:function(t){return t},Object:function(e){return new t.Fraction(e)},"Array | Matrix":function(t){return o(t,a)}});return a}var o=r(160);e.name="fraction",e.factory=n},function(t,e,r){"use strict";function n(t,e,r,n){var a=n("number",{"":function(){return 0},number:function(t){return t},string:function(t){var e=Number(t);if(isNaN(e))throw new SyntaxError('String "'+t+'" is no valid number');return e},BigNumber:function(t){return t.toNumber()},Fraction:function(t){return t.valueOf()},Unit:function(t){throw new Error("Second argument with valueless unit expected")},"Unit, string | Unit":function(t,e){return t.toNumber(e)},"Array | Matrix":function(t){return o(t,a)}});return a.toTex={0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"},a}var o=r(160);e.name="number",e.factory=n},function(t,e){"use strict";t.exports=function(t,e,r,n,o,a,i){var s="<p>",l=": ",c=t.viz.cat_bar_width,u=t.viz.cat_bar_height,d=25,f=e.bar_data[0][o];e.bar_data=e.bar_data.slice(0,a);var _=e.type_name;_.length>=d&&(_=_.slice(0,d)+".."),r.append("text").classed("cat_graph_title",!0).text(_).style("font-family",'"Helvetica Neue", Helvetica, Arial, sans-serif').style("font-weight",800);var p=4;r.append("line").attr("x1",0).attr("x2",c).attr("y1",p).attr("y2",p).attr("stroke","blue").attr("stroke-width",1).attr("opacity",1);var h=d3.scale.linear().domain([0,f]).range([0,c]);i.append("rect").attr("height",u+"px").attr("width",function(t){var e=h(t[o]);return e+"px"}).attr("fill",function(t){return t[3]}).attr("opacity",t.viz.cat_colors.opacity).attr("stroke","grey").attr("stroke-width","0.5px"),i.append("text").classed("bar_labels",!0).text(function(t){var e=t[1];return e.indexOf(l)>0&&(e=e.split(l)[1]),e.indexOf(s)>0&&(e=e.split(s)[0]),e.length>=d&&(e=e.slice(0,d)+".."),e}).attr("transform",function(){return"translate(5, "+.75*u+")"}).attr("font-family",'"Helvetica Neue", Helvetica, Arial, sans-serif').attr("font-weight",400).attr("text-anchor","right")}},function(t,e){"use strict";t.exports=function(t,e,r,n,o,a,i,s){var l=t.viz.cat_bar_width,c=t.viz.cat_bar_height,u=150,d=6;e.append("text").text("Count").attr("transform",function(){var t=l+a,e="translate("+t+", 0)";return e}),e.append("text").text("Pct").attr("transform",function(){var t=l+a+60,e="translate("+t+", 0)";return e}),e.append("text").text("P-val").attr("transform",function(){var t=l+a+115,e="translate("+t+", 0)";return e}),o&&e.append("text").text("Clusters").attr("transform",function(){var t=l+u,e="translate("+t+", 0)";return e});var f=35;r.append("text").classed("count_labels",!0).text(function(t){var e=t[i];return e=e.toLocaleString(),String(e)}).attr("transform",function(){var t=l+a+f,e=.75*c;return"translate("+t+", "+e+")"}).attr("font-family",'"Helvetica Neue", Helvetica, Arial, sans-serif').attr("font-weight",400).attr("text-anchor","end"),r.append("text").classed("count_labels",!0).text(function(t){var e=t[i]/s*100;return e=Math.round(10*e)/10,e=e.toLocaleString(),String(e)}).attr("transform",function(){var t=l+a+f+47,e=.75*c;return"translate("+t+", "+e+")"}).attr("font-family",'"Helvetica Neue", Helvetica, Arial, sans-serif').attr("font-weight",400).attr("text-anchor","end"),r.append("text").classed("count_labels",!0).text(function(t){var e=t[d];return e<.001?(e=parseFloat(e.toPrecision(3)),e=e.toExponential()):e=parseFloat(e.toPrecision(2)),e}).attr("transform",function(){var t=l+a+f+112,e=.75*c;return"translate("+t+", "+e+")"}).attr("font-family",'"Helvetica Neue", Helvetica, Arial, sans-serif').attr("font-weight",400).attr("text-anchor","end"),o&&r.append("text").classed("count_labels",!0).text(function(t){return String(t[n].toLocaleString())}).attr("transform",function(){var t=l+f+u+20,e=.75*c;return"translate("+t+", "+e+")"}).attr("font-family",'"Helvetica Neue", Helvetica, Arial, sans-serif').attr("font-weight",400).attr("text-anchor","end")}},function(t,e){"use strict";t.exports=function(t){var e={},r=d3.select(t.root+" .clust_group").attr("transform");return null!=r&&r.indexOf("scale")>0?(e.zoom_x=parseFloat(r.split("scale")[1].replace("(","").replace(")","").split(",")[0]),e.zoom_y=parseFloat(r.split("scale")[1].replace("(","").replace(")","").split(",")[1])):(e.zoom_x=1,e.zoom_y=1),e}},function(t,e){"use strict";t.exports=function(t){t.labels.show_label_tooltips?d3.select(t.root+" .row_label_zoom_container").selectAll("g").on("mouseover",function(t){dispatchEvent(new CustomEvent("ROW_MOUSEOVER",{detail:{row:t,rect:this.getBoundingClientRect()}}))}).on("mouseout",function(t){dispatchEvent(new CustomEvent("ROW_MOUSEOUT",{detail:{row:t}}))}):d3.select(t.root+" .row_label_zoom_container").selectAll("g").on("mouseover",function(){d3.select(this).select("text").classed("active",!0)}).on("mouseout",function(){d3.select(this).select("text").classed("active",!1)})}},function(t,e,r){"use strict";var n=r(2),o=r(174),a=r(175),i=r(144),s=r(183),l=r(184);t.exports=function(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,c=t.params,u=c.network_data.col_nodes,d=c.viz.x_scale.rangeBand()/2+c.viz.border_width.x;d3.select(c.root+" .col_container").empty()?(e=d3.select(c.viz.viz_svg).append("g").attr("class","col_container").attr("transform","translate("+c.viz.clust.margin.left+","+c.viz.norm_labels.margin.top+")"),e.append("rect").attr("fill",c.viz.background_color).attr("width",30*c.viz.clust.dim.width+"px").attr("height",c.viz.label_background.col).attr("class","white_bars"),e.append("g").attr("class","col_label_outer_container").attr("transform","translate(0,"+c.viz.norm_labels.width.col+")").append("g").attr("class","col_zoom_container")):(e=d3.select(c.root+" .col_container").attr("transform","translate("+c.viz.clust.margin.left+","+c.viz.norm_labels.margin.top+")"),e.select(".white_bars").attr("fill",c.viz.background_color).attr("width",30*c.viz.clust.dim.width+"px").attr("height",c.viz.label_background.col),e.select(c.root+" .col_label_outer_container"));var f=d3.select(c.root+" .col_zoom_container").selectAll(".col_label_text").data(u,function(t){return t.name}).enter().append("g").attr("class","col_label_text").attr("transform",function(t){var e=t.col_index;return"translate("+c.viz.x_scale(e)+", 0) rotate(-90)"}),_=f.append("g").attr("class","col_label_group").attr("transform","translate("+c.viz.x_scale.rangeBand()/2+","+d+") rotate(45)").on("mouseover",function(){d3.select(this).select("text").classed("active",!0)}).on("mouseout",function(){d3.select(this).select("text").classed("active",!1)});n.has(c.network_data.col_nodes[0],"value")&&_.append("rect").attr("class","col_bars").attr("width",function(t){var e=0;return t.value>0&&(e=c.labels.bar_scale_col(t.value)),e}).attr("height",.66*c.viz.x_scale.rangeBand()).style("fill",function(t){return t.value>0?c.matrix.bar_colors[0]:c.matrix.bar_colors[1]}).attr("opacity",.6),_.append("text").attr("x",0).attr("y",.64*c.viz.x_scale.rangeBand()).attr("dx",c.viz.border_width.x).attr("text-anchor","start").attr("full_name",function(t){return t.name}).style("font-size",c.labels.default_fs_col+"px").style("cursor","default").text(function(t){return n.normal_name(t)}).style("opacity",0).transition().delay(r).duration(r).style("opacity",1),s(c),_.append("path").style("stroke-width",0).attr("d",function(){return l(c)}).attr("fill","#eee").style("opacity",0).transition().delay(r).duration(r).style("opacity",c.viz.triangle_opacity),d3.selectAll(c.root+" .col_label_text").on("click",function(t){"function"==typeof c.click_label?(c.click_label(t.name,"col"),o(c,this,t.ini)):c.tile_click_hlight&&o(c,this,t.ini)}).on("dblclick",function(e){var r="__data__",n=this[r].name;if(c.sim_mat){a(t,this,n);var s=d3.selectAll(c.root+" .row_label_group").filter(function(t){return t.name==n})[0][0];i(t,s,n)}else a(t,this,n);c.tile_click_hlight&&o(c,this,e.ini)})}},function(t,e){"use strict";t.exports=function(t,e,r){if(r!=t.click_hlight_col){t.click_hlight_col=r;var n=6,o=.85,a=n*t.viz.border_width.x;d3.selectAll(t.root+" .click_hlight").remove(),d3.select(e).append("rect").classed("click_hlight",!0).classed("col_top_hlight",!0).attr("width",t.viz.clust.dim.height).attr("height",a).attr("fill",t.matrix.hlight_color).attr("opacity",o).attr("transform",function(){var e=0,r=-(t.viz.clust.dim.height+t.viz.cat_room.col+t.viz.uni_margin);return"translate("+r+","+e+")"}),d3.select(e).append("rect").classed("click_hlight",!0).classed("col_bottom_hlight",!0).attr("width",t.viz.clust.dim.height).attr("height",a).attr("fill",t.matrix.hlight_color).attr("opacity",o).attr("transform",function(){var e=t.viz.x_scale.rangeBand()-a,r=-(t.viz.clust.dim.height+t.viz.cat_room.col+t.viz.uni_margin);return"translate("+r+","+e+")"})}else d3.selectAll(t.root+" .click_hlight").remove(),t.click_hlight_col=-666}},function(t,e,r){"use strict";var n=r(145),o=r(146),a=r(176),i=r(120),s=r(171),l=r(108),c=r(110);t.exports=function(t,e,r){var u=t.params,d=s(u);if(1===d.zoom_y&&1===d.zoom_x){u.viz.inst_order.col="custom",o(t,"col"),d3.selectAll(u.root+" .toggle_row_order .btn").classed("active",!1),u.viz.run_trans=!0;var f=c.extend(!0,{},u.matrix.matrix),_=u.network_data.row_nodes,p=u.network_data.col_nodes,h=[];p.forEach(function(t){h.push(t.name)});var v=h.indexOf(r);h=[],_.forEach(function(t,e){h.push(f[e].row_data[v].value)});var m=d3.range(h.length).sort(function(t,e){return h[e]-h[t]});u.viz.y_scale.domain(m),u.matrix.orders.custom_col=m;var g,y=u.network_data.row_nodes_names||[];if(g=u.network_data.links.length>u.matrix.def_large_matrix?d3.select(u.root+" .viz_svg"):d3.select(u.root+" .viz_svg").transition().duration(2500),g.selectAll(".row_cat_group").attr("transform",function(t){var e=y.indexOf(t.name);return"translate(0,"+u.viz.y_scale(e)+")"}),g.select(".row_label_zoom_container").selectAll(".row_label_group").attr("transform",function(t){var e=y.indexOf(t.name);return"translate(0,"+u.viz.y_scale(e)+")"}),u.viz.ds_level===-1&&g.selectAll(".row").attr("transform",function(t){var e=y.indexOf(t.name);return"translate(0,"+u.viz.y_scale(e)+")"}),d3.selectAll(u.root+" .col_label_text").select(".highlight_rect").style("opacity",0),d3.select(e).select(".highlight_rect").style("opacity",1),u.network_data.links.forEach(function(t){t.x=u.viz.x_scale(t.target),t.y=u.viz.y_scale(t.source)}),n(u),u.zoom_info=i(),setTimeout(function(){u.viz.run_trans=!1},2500),u.viz.ds_num_levels>0&&u.viz.ds_level>=0){l(u);var w=!0,x=!0,b=!0;a(t,w,x,b)}}}},function(t,e,r){"use strict";var n=r(177),o=r(125),a=r(142),i=r(178),s=r(133),l=r(179);t.exports=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],c=arguments.length>3&&void 0!==arguments[3]&&arguments[3],u=t.params,d=u.zoom_info,f=u.viz.ds_level,_=u.viz.ds_level;null===u.viz.ds?f=-1:(f=Math.floor(Math.log(d.zoom_y)/Math.log(u.viz.ds_zt)),f>u.viz.ds_num_levels-1&&(f=-1));var p=!1;_==-1?f>=0&&(p=!0):f<_&&(p=!0);var h;e===!0||p===!0?(h=f,e=!0,u.viz.ds_level=h):h=_;var v={},m=5;v.min_x=Math.abs(d.trans_x)/d.zoom_x-(m+1)*u.viz.rect_width,v.min_y=Math.abs(d.trans_y)/d.zoom_y-(m+1)*u.viz.rect_height,v.max_x=Math.abs(d.trans_x)/d.zoom_x+u.viz.clust.dim.width/d.zoom_x+m*u.viz.rect_width,v.max_y=Math.abs(d.trans_y)/d.zoom_y+u.viz.clust.dim.height/d.zoom_y+m*u.viz.rect_height,n(u,v);var g;if(c===!1?g=l(u.viz.viz_nodes.row,u.viz.viz_nodes.curr_row):(g="all",d3.selectAll(u.root+" .ds"+String(h)+"_row").remove()),null!=u.viz.ds){var y=".ds"+String(u.viz.ds_level)+"_row";d3.selectAll(y).style("display","block")}h>=0&&(d3.selectAll(u.root+" .row").remove(),d3.selectAll(u.viz.root_tips+"_tile_tip").remove(),d3.selectAll(u.viz.root_tips+"_row_tip").remove());var w;if(h<0?(w=u.matrix.matrix,i(u)):(w=u.matrix.ds_matrix[h],d3.selectAll(u.root+" .row_cat_group path").remove()),r===!0&&d3.selectAll(u.root+" .row_cat_group path").remove(),e===!0&&(h>=0?d3.selectAll(u.root+" .ds"+String(h)+"_row").each(function(t){s(u.viz.viz_nodes.row,t.name)===!1&&d3.select(this).remove()}):d3.selectAll(u.root+" .row").each(function(t){s(u.viz.viz_nodes.row,t.name)===!1&&d3.select(this).remove()}),d3.selectAll(u.root+" .row_label_group").each(function(t){s(u.viz.viz_nodes.row,t.name)===!1&&d3.select(this).remove()}),h!=_&&(g=u.viz.viz_nodes.row,d3.selectAll(u.root+" .ds"+String(_)+"_row").remove())),(g.length>=1||"all"===g)&&o(u,w,g,h),h===-1&&(r===!1||e)){var x=[];d3.selectAll(u.root+" .row_label_group").each(function(t){x.push(t.name)});var b=l(u.viz.viz_nodes.row,x),z=1;b.length>z&&a(t,b)}}},function(t,e){"use strict";t.exports=function(t,e){var r,n=[],o=[],a=t.viz.y_scale,i=t.viz.ds_level,s=t.network_data.row_nodes_names,l=".row";i>=0&&(a=t.viz.ds[i].y_scale,s=d3.range(t.matrix.ds_matrix[i].length).map(String),l=".ds"+String(i)+"_row");for(var c=0;c<s.length;c++)r=a(c),r<e.max_y&&r>e.min_y&&n.push(s[c]);d3.selectAll(t.root+" "+l).each(function(t){o.push(t.name)}),t.viz.viz_nodes.row=n,t.viz.viz_nodes.curr_row=o}},function(t,e){"use strict";t.exports=function(t){d3.select(t.root+" .row_cat_group path").empty()===!0&&d3.selectAll(t.root+" .row_cat_group").append("path").attr("d",function(){var e=t.viz.cat_room.symbol_width-1,r=0,n=1,o=t.viz.y_scale.rangeBand()/2,a=t.viz.cat_room.symbol_width-1,i=t.viz.y_scale.rangeBand(),s="M "+e+","+r+" L "+n+","+o+" L "+a+","+i+" Z";return s}).attr("fill","#eee").style("opacity",t.viz.triangle_opacity)}},function(t,e,r){"use strict";var n=r(180),o=r(181),a=r(77),i=r(133),s=n(function(t,e){return e=o(e,!0,!0),a(t,function(t){return!i(e,t)})});t.exports=s},function(t,e){"use strict";function r(t,e){return e=null==e?t.length-1:+e,function(){for(var r=Math.max(arguments.length-e,0),n=Array(r),o=0;o<r;o++)n[o]=arguments[o+e];switch(e){case 0:return t.call(this,n);case 1:return t.call(this,arguments[0],n);case 2:return t.call(this,arguments[0],arguments[1],n)}var a=Array(e+1);for(o=0;o<e;o++)a[o]=arguments[o];return a[e]=n,t.apply(this,a)}}t.exports=r},function(t,e,r){"use strict";function n(t,e,r,l){if(l=l||[],e||0===e){if(e<=0)return l.concat(t)}else e=1/0;for(var c=l.length,u=0,d=o(t);u<d;u++){var f=t[u];if(a(f)&&(i(f)||s(f)))if(e>1)n(f,e-1,r,l),c=l.length;else for(var _=0,p=f.length;_<p;)l[c++]=f[_++];else r||(l[c++]=f)}return l}var o=r(10),a=r(7),i=r(82),s=r(182);t.exports=n},function(t,e,r){"use strict";var n=r(17),o=r(14),a=n("Arguments");!function(){a(arguments)||(a=function(t){return o(t,"callee")})}();var i=a;t.exports=i},function(t,e){"use strict";t.exports=function(t){t.labels.show_label_tooltips&&d3.select(t.root+" .col_zoom_container").selectAll(".col_label_group").on("mouseover",function(t){dispatchEvent(new CustomEvent("COL_MOUSEOVER",{detail:{col:t,text:this.childNodes[0].getBoundingClientRect(),triangle:this.childNodes[1].getBoundingClientRect()}}))}).on("mouseout",function(t){dispatchEvent(new CustomEvent("COL_MOUSEOUT",{detail:{col:t}}))})}},function(t,e){"use strict";t.exports=function(t){var e=.36*t.viz.x_scale.rangeBand(),r=-t.viz.border_width.x,n=0,o=t.viz.x_scale.rangeBand()-e,a=-(t.viz.x_scale.rangeBand()-e+t.viz.border_width.x),i=-t.viz.border_width.x,s="M "+r+",0 L "+a+","+n+" L "+i+","+o+" Z";return s}},function(t,e){"use strict";t.exports=function(t){d3.select(t.viz.viz_svg).append("rect").attr("fill",t.viz.background_color).attr("height",t.viz.super_labels.dim.width+"px").attr("width","3000px").classed("super_col_bkg",!0).classed("white_bars",!0).attr("transform","translate("+t.viz.clust.margin.left+","+t.viz.super_labels.margin.top+")"),d3.select(t.viz.viz_svg).append("text").attr("class","super_col").text(t.labels.super.col).attr("text-anchor","center").attr("transform",function(){var e=d3.select(this)[0][0].getBBox().width,r=t.viz.clust.dim.width/2+t.viz.norm_labels.width.row-e/2,n=t.viz.super_labels.dim.width;return"translate("+r+","+n+")"}).style("font-size",function(){var e=t.labels.super_label_fs*t.labels.super_label_scale;return e+"px"}).style("font-weight",300),d3.select(t.viz.viz_svg).append("rect").attr("fill",t.viz.background_color).attr("width",t.viz.super_labels.dim.width+"px").attr("height","3000px").classed("super_row_bkg",!0).classed("white_bars",!0).attr("transform","translate("+t.viz.super_labels.margin.left+",0)"),d3.select(t.viz.viz_svg).append("g").classed("super_row",!0).attr("transform",function(){
var e=t.viz.super_labels.dim.width,r=t.viz.clust.dim.height/2+t.viz.norm_labels.width.col;return"translate("+e+","+r+")"}),d3.select(t.root+" .super_row").append("text").text(t.labels.super.row).attr("text-anchor","center").attr("transform",function(){var e=d3.select(this)[0][0].getBBox().width,r=e/2+t.viz.norm_labels.width.col,n="translate(0,"+r+"), rotate(-90)";return n}).style("font-size",function(){var e=t.labels.super_label_fs*t.labels.super_label_scale;return e+"px"}).style("font-weight",300)}},function(t,e,r){"use strict";var n=r(187),o=r(188),a=r(196),i=r(152);t.exports=function(t){var e=t.params,r=e.viz;d3.select(r.root+" .col_container").append("path").style("stroke-width","0").attr("d","M 0,0 L 1000,-1000, L 1000,0 Z").attr("fill",r.background_color).attr("class","right_slant_triangle").attr("transform","translate("+r.clust.dim.width+","+r.norm_labels.width.col+")"),d3.select(r.root+" .col_container").append("path").style("stroke-width","0").attr("d","M 0,0 L 500,-500, L 0,-500 Z").attr("fill",r.background_color).attr("class","left_slant_triangle").attr("transform","translate(-1,"+r.norm_labels.width.col+")");var s=r.clust.margin.top+r.uni_margin/5;d3.select(r.viz_svg).append("rect").attr("fill",r.background_color).attr("width",r.clust.margin.left).attr("height",s-1).attr("class","top_left_white");var l=r.cat_room.col+1.5*r.uni_margin;d3.select(r.viz_svg).append("rect").attr("fill",r.background_color).attr("width",2*r.clust.dim.width).attr("height",l).attr("class","top_right_white").attr("transform",function(){var t=r.clust.margin.left+r.clust.dim.width,e=r.norm_labels.width.col+r.norm_labels.margin.top-r.uni_margin;return"translate("+t+", "+e+")"}),_=r.clust.margin.left+r.clust.dim.width+r.uni_margin,p=r.norm_labels.margin.top+r.norm_labels.width.col+2.5*r.uni_margin;var c=1.15*r.cat_room.symbol_width,u=.65,d=1.25;r.show_categories.col&&d3.select(r.viz_svg).selectAll().data(r.all_cats.col).enter().append("text").classed("col_cat_super",!0).style("font-size",c+"px").style("opacity",u).style("cursor","default").attr("transform",function(t){var e=parseInt(t.split("-")[1],10),n=p+d*r.cat_room.symbol_width*e;return"translate("+_+","+n+")"}).text(function(t){return n(r,t,"col")}),a(t),p=r.show_dendrogram?r.clust.margin.top+r.clust.dim.height+r.dendro_room.col-2*r.uni_margin:r.clust.margin.top+r.clust.dim.height;var f=d3.select(r.viz_svg).append("g").classed("bottom_spillover_container",!0).attr("transform",function(){return"translate(0,"+p+")"});f.append("rect").attr("class","bottom_spillover").attr("fill",r.background_color).attr("width",r.svg_dim.width).attr("height",2*r.svg_dim.height),_=r.clust.margin.left,p=0,f.append("g").classed("col_dendro_icons_container",!0).attr("transform","translate("+_+","+p+")").append("g").classed("col_dendro_icons_group",!0),t.config.show_dendrogram&&i(t,"col");var _=r.clust.margin.left+r.clust.dim.width,p=r.clust.margin.top+r.clust.dim.height,h=r.cat_room.col+r.clust.dim.width,v=r.cat_room.row+10*r.uni_margin;d3.select(r.viz_svg).append("rect").attr("fill",r.background_color).attr("width",h).attr("height",v).attr("transform",function(){return"translate("+_+","+p+")"}).classed("white_bars",!0).classed("dendro_corner_spillover",!0),_=0,p=r.clust.margin.top+r.clust.dim.height,h=r.clust.margin.left,v=10*r.clust.dim.height,d3.select(r.viz_svg).append("rect").attr("fill",r.background_color).attr("width",h).attr("height",v).attr("transform",function(){return"translate("+_+","+p+")"}).classed("white_bars",!0).classed("dendro_col_spillover",!0),o(t)}},function(t,e){"use strict";t.exports=function(t,e,r){var n;if(t.cat_names[r][e]===e){var o=parseInt(e.split("-")[1],10)+1;n="Category "+o}else n=t.cat_names[r][e];return n}},function(t,e,r){"use strict";var n=r(189);t.exports=function(t){var e=t.params;["row","col"].forEach(function(r){e.viz.show_categories[r]&&d3.selectAll(e.root+" ."+r+"_cat_super").on("dblclick",function(){e.sim_mat&&(r="both"),d3.selectAll(e.root+" .toggle_"+r+"_order .btn").classed("active",!1);var o=this.__data__.replace("-","_")+"_index";e.viz.sim_mat?(n(t,o,"row"),n(t,o,"col")):n(t,o,r)})})}},function(t,e,r){"use strict";var n=r(146),o=r(176),a=r(120),i=r(108),s=r(190),l=r(171);t.exports=function(t,e,r){var c=t.params,u=l(c),d=0;1==u.zoom_y&&1==u.zoom_x||(s(t,0,0,1),d=1200);var f;"row"===r?f="col":"col"===r&&(f="row"),c.viz.run_trans=!0,"row"===f?c.viz.inst_order.row=e:"col"===f&&(c.viz.inst_order.col=e),c.viz.show_dendrogram&&n(t,r),"row"===f?c.viz.x_scale.domain(c.matrix.orders[c.viz.inst_order.row+"_row"]):"col"==f&&c.viz.y_scale.domain(c.matrix.orders[c.viz.inst_order.col+"_col"]);var _;_=d3.selectAll(c.root+" .tile")[0].length<c.matrix.def_large_matrix?d3.select(c.root+" .viz_svg").transition().duration(2500).delay(d):d3.select(c.root+" .viz_svg");var p=c.network_data.row_nodes_names||[],h=c.network_data.col_nodes_names||[];if(c.viz.ds_level===-1&&(_.selectAll(".row").attr("transform",function(t){var e=p.indexOf(t.name);return"translate(0,"+c.viz.y_scale(e)+")"}).selectAll(".tile").attr("transform",function(t){return"translate("+c.viz.x_scale(t.pos_x)+" , 0)"}),_.selectAll(".tile_up").attr("transform",function(t){return"translate("+c.viz.x_scale(t.pos_x)+" , 0)"}),_.selectAll(".tile_dn").attr("transform",function(t){return"translate("+c.viz.x_scale(t.pos_x)+" , 0)"})),_.select(".row_label_zoom_container").selectAll(".row_label_group").attr("transform",function(t){var e=p.indexOf(t.name);return"translate(0,"+c.viz.y_scale(e)+")"}),_.select(".col_zoom_container").selectAll(".col_label_text").attr("transform",function(t){var e=h.indexOf(t.name);return"translate("+c.viz.x_scale(e)+") rotate(-90)"}),_.selectAll(".row_cat_group").attr("transform",function(t){var e=p.indexOf(t.name);return"translate(0,"+c.viz.y_scale(e)+")"}),_.selectAll(".col_cat_group").attr("transform",function(t){var e=h.indexOf(t.name);return"translate("+c.viz.x_scale(e)+",0)"}),c.network_data.links.forEach(function(t){t.x=c.viz.x_scale(t.target),t.y=c.viz.y_scale(t.source)}),c.zoom_info=a(),c.viz.ds_num_levels>0&&c.viz.ds_level>=0){i(c);var v=!0,m=!0,g=!0;o(t,v,m,g)}setTimeout(function(){c.viz.run_trans=!1},2500)}},function(t,e,r){"use strict";var n=r(2),o=r(191),a=r(176),i=r(120),s=r(195);t.exports=function(t,e,r,l){function c(t,e){d3.selectAll(u.root+" ."+t+"_dendro_crop_buttons").transition().duration(m).style("opacity",e)}var u=t.params;if(d3.selectAll(u.viz.root_tips).style("display","none"),u.zoom_info=i(),a(t),!u.viz.run_trans){var d=u.viz.clust.dim.height/2,f=d/l;if(r>=d-f){var _=d-r,p=-d/l+_;r+=p}r<-(d-f)&&(_=d+r,p=d/l-_,r+=p);var h=l,v=1,m=700,g=-(h-1)*d;d3.select(u.root+" .clust_group").transition().duration(m).attr("transform","translate("+[0,0+g]+") scale("+v+","+h+")translate("+[e,r]+")"),d3.select(u.root+" .row_label_zoom_container").transition().duration(m).attr("transform","translate("+[0,g]+") scale("+h+","+h+")translate("+[0,r]+")"),d3.select(u.root+" .row_cat_container").transition().duration(m).attr("transform","translate("+[0,g]+") scale(1,"+h+")translate("+[0,r]+")"),d3.select(u.root+" .row_dendro_container").transition().duration(m).attr("transform","translate("+[0,g]+") scale("+v+","+h+")translate("+[u.viz.uni_margin/2,r]+")");var y;["row","col"].forEach(function(t){y=d3.select(u.root+" ."+t+"_dendro_crop_buttons").style("opacity"),d3.selectAll(u.root+" ."+t+"_dendro_crop_buttons").style("opacity",0),setTimeout(c,700,t,y)}),d3.select(u.root+" .col_zoom_container").transition().duration(m).attr("transform"," scale("+v+","+v+")translate("+[e,0]+")"),d3.select(u.root+" .col_cat_container").transition().duration(m).attr("transform"," scale("+v+",1)translate("+[e,0]+")"),d3.select(u.root+" .col_dendro_container").transition().duration(m).attr("transform"," scale("+v+",1)translate("+[e,u.viz.uni_margin/2]+")");var w=u.viz.clust.margin.top+g+r*h,x=u.viz.clust.margin.left+e;u.zoom_behavior.scale(h).translate([x,w]),o(u),d3.select(u.root+" .row_label_zoom_container text").empty()===!1&&d3.select(u.root+" .row_label_zoom_container").each(function(){var t=d3.select(this).select("text")[0][0].getBBox();d3.select(this).select("rect").attr("x",.5*t.x).attr("y",0).attr("width",.5*t.width).attr("height",u.viz.y_scale.rangeBand()).style("fill","yellow")}),d3.select(u.root+" .row_dendro_icons_group").attr("transform","translate("+[0,0+g]+") scale("+v+","+h+")translate("+[e,r]+")"),d3.select(u.root+" .row_dendro_icons_group").selectAll("path").attr("transform",function(t){var e=u.viz.uni_margin,r=t.pos_mid;return"translate("+e+","+r+") scale(1, "+1/h+")"}),d3.select(u.root+" .col_dendro_icons_group").attr("transform",function(){var t=" scale("+v+","+h+")";return t}),d3.select(u.root+" .col_dendro_icons_group").selectAll("path").attr("transform",function(t){var e=t.pos_mid,r=u.viz.uni_margin;return"translate("+e+","+r+") scale(1,1)"}),n.has(u.network_data.col_nodes[0],"value")&&d3.selectAll(u.root+" .col_bars").attr("width",function(t){var e=0;return t.value>0&&(e=u.labels.bar_scale_col(t.value)/v),e}),n.has(u.network_data.row_nodes[0],"value")&&d3.selectAll(u.root+" .row_bars").transition().duration(m).attr("width",function(t){var e=0;return e=u.labels.bar_scale_row(Math.abs(t.value))/h}).attr("x",function(t){var e=0;return e=-u.labels.bar_scale_row(Math.abs(t.value))/h}),s(u)}}},function(t,e,r){"use strict";var n=r(2),o=r(192),a=r(193);t.exports=function(t){d3.selectAll(t.root+" .row_label_group").select("text").text(function(t){return n.normal_name(t)}),d3.selectAll(t.root+" .col_label_text").select("text").text(function(t){return n.normal_name(t)}),a(t),d3.selectAll(t.root+" .row_label_group").each(function(){o(t,this,"row")}),d3.selectAll(t.root+" .col_label_group").each(function(){o(t,this,"col")})}},function(t,e){"use strict";t.exports=function(t,e,r){function n(){return u=d3.select(this).text(),c=u.length,f=c-3,l=u.substring(0,f)+".."}function o(t){return u=d3.select(this).text(),c=".."===u.slice(-2)?u.length-2:u.length,d=t.name,f=c+2,l=d.substring(0,f)+"..",l.length>d.length&&(l=d),l}function a(t,e){return s=e<1?t:t*e}if("none"!=d3.select(e).style("display")){var i,s,l,c,u,d,f,_,p=t.viz.norm_labels.width[r];i="row"===r?t.viz.zoom_ratio.y?t.zoom_behavior.scale()/t.viz.zoom_ratio.y:t.zoom_behavior.scale():t.viz.zoom_ratio.x>1?t.zoom_behavior.scale()/t.viz.zoom_ratio.x:t.zoom_behavior.scale();var h;d3.select(e).select("text").each(function(t){h=t.name.length});var v=d3.select(e).select("text").node().getBBox().width;if(s=a(v,i),s>p)for(_=1;_<h;_++)s>p&&(d3.select(e).select("text").text(n),v=d3.select(e).select("text").node().getBBox().width,s=a(v,i));else if(s<.75*p)for(_=1;_<h;_++)s<.75*p&&(d3.select(e).select("text").text(o),v=d3.select(e).select("text").node().getBBox().width,s=a(v,i))}}},function(t,e,r){"use strict";var n=r(194);t.exports=function(t){var e,r=t.labels.default_fs_row,o=3,a=n(t);a.row>o&&(a.row>t.labels.max_allow_fs?(e=t.viz.zoom_ratio.y?t.zoom_behavior.scale()/t.viz.zoom_ratio.y:t.zoom_behavior.scale(),e<1&&(e=1),r=t.labels.max_allow_fs/e,d3.selectAll(t.root+" .row_label_group").select("text").style("font-size",r+"px").attr("y",.5*t.viz.rect_height+.35*r)):d3.selectAll(t.root+" .row_label_group").select("text").style("font-size",t.labels.default_fs_row+"px").attr("y",.5*t.viz.rect_height+.35*t.labels.default_fs_row)),a.col>o&&(a.col>t.labels.max_allow_fs?(e=t.viz.zoom_ratio.x>1?t.zoom_behavior.scale()/t.viz.zoom_ratio.x:t.zoom_behavior.scale(),e<1&&(e=1),r=t.labels.max_allow_fs/e,r>.7*t.viz.rect_width&&(r=.7*t.viz.rect_width),d3.selectAll(t.root+" .col_label_text").select("text").style("font-size",r+"px")):d3.selectAll(t.root+" .col_label_text").select("text").style("font-size",t.labels.default_fs_col+"px"))}},function(t,e){"use strict";t.exports=function(t){var e={};return t.viz.zoom_ratio.x>1?(e.row=t.labels.default_fs_row*t.zoom_behavior.scale(),e.col=t.labels.default_fs_col*t.zoom_behavior.scale()):(e.row=t.labels.default_fs_row*t.zoom_behavior.scale()/t.viz.zoom_ratio.y,e.col=t.labels.default_fs_col*t.zoom_behavior.scale()),e}},function(t,e){"use strict";t.exports=function(t){t.zoom_info.zoom_x*t.viz.border_width.x>1?d3.selectAll(t.root+" .vert_lines").select("line").style("display","block").style("opacity",0).transition().style("opacity",1):d3.selectAll(t.root+" .vert_lines").select("line").style("display","none"),t.zoom_info.zoom_y*t.viz.border_width.y>1?d3.selectAll(t.root+" .horz_lines").select("line").style("display","block").style("opacity",0).transition().style("opacity",1):d3.selectAll(t.root+" .horz_lines").select("line").style("display","none")}},function(t,e,r){"use strict";var n=r(187),o=r(132),a=r(2);t.exports=function(t){var e=t.params,r=e.viz,i=2.75;d3.select(e.root+" .row_cat_label_container").empty()&&(d3.select(t.params.viz.viz_svg).append("g").classed("row_cat_label_container",!0),d3.select(t.params.viz.viz_svg+" .row_cat_label_container").append("g").classed("row_cat_label_bar_container",!0));var s=r.clust.margin.left+r.clust.dim.width+r.uni_margin,l=r.norm_labels.margin.top+r.norm_labels.width.col+2.5*r.uni_margin,c=1.15*r.cat_room.symbol_width,u=.65,d=1.25;d3.select(e.root+" .row_cat_label_container").attr("transform",function(){return s=r.norm_labels.margin.left+r.norm_labels.width.row+r.cat_room.symbol_width+i*r.uni_margin,l=r.clust.margin.top-r.uni_margin,"translate("+s+","+l+") rotate(-90)"}),d3.selectAll(e.root+" .row_cat_label_container text").remove(),d3.selectAll(e.root+" .row_cat_selection_bar").remove(),d3.selectAll(t.params.viz.root_tips+"_row_cat_super").remove();var f=50,_=-75,p=o().attr("class",function(){var t=e.viz.root_tips.replace(".",""),r=t+" d3-tip "+t+"_row_cat_super";return r}).direction("south_custom").offset([f,_]).style("display","none").style("opacity",0).html(function(t){var o,a=e.network_data.row_nodes[0][t];if(a.indexOf("<p>")>-1){var i=a.split(": ")[0],s=a.split("<p>")[1];o=i+"<p>"+s}else o=n(r,t,"row");return o}),h=d*r.cat_room.symbol_width,v=.9*h;if(d3.select(e.root+" .row_cat_label_container").selectAll().data(r.all_cats.row).enter().append("text").style("width","100px").style("height",v+"px").classed("row_cat_super",!0).style("font-size",c+"px").style("opacity",u).style("cursor","default").attr("transform",function(t){var e=d*r.cat_room.symbol_width*parseInt(t.split("-")[1],10);return"translate(0,"+e+")"}).text(function(t){return n(r,t,"row")}),d3.select(e.root+" .row_cat_label_container").selectAll().data(r.all_cats.row).enter().append("rect").classed("row_cat_super",!0).classed("row_cat_selection_bar",!0).style("height",v+"px").style("fill","green").style("width","120px").style("opacity",0).attr("transform",function(t){var e=h*(parseInt(t.split("-")[1],10)-.75);return"translate(0,"+e+")"}).on("mouseover",function(t){d3.selectAll(e.viz.root_tips+"_row_cat_super").style("display","block").style("opacity",1),p.show(t)}).on("mouseout",function(){p.hide(this),d3.selectAll(".d3-tip").style("display","none"),d3.selectAll(e.viz.root_tips+"_row_cat_super").style("display","none").style("opacity",0)}),d3.select(e.root+" .row_cat_selection_bar").empty()===!1&&d3.selectAll(e.root+" .row_cat_selection_bar").call(p),a.has(e.network_data,"row_cat_bars")){d3.select(e.root+" .enr_title").remove();var m=d3.select(e.root+" .viz_svg").append("g").classed("enr_title",!0).attr("transform",function(){var t=d3.select(e.root+" .row_cat_label_container").attr("transform").split("(")[1].split(")")[0],r=Number(t.split(",")[0])-10;return"translate("+String(r)+", 0)"});m.append("rect").attr("width",e.viz.cat_room.row).attr("height",25).attr("fill","white");var g=e.network_data.enrichrgram_lib.substring(0,40);m.append("text").attr("transform","translate(0, 17)").text(g.replace(/_/g," ")).style("font-size","15px").attr("font-family",'"Helvetica Neue", Helvetica, Arial, sans-serif'),d3.selectAll(e.root+" .enrichr_bars").remove();var y=e.viz.clust.margin.top-35,w=e.network_data.row_cat_bars[0],x=d3.scale.linear().domain([0,w]).range([0,y]);d3.select(e.root+" .row_cat_label_bar_container").selectAll().data(e.network_data.row_cat_bars).enter().append("rect").classed("enrichr_bars",!0).attr("height",v+"px").attr("fill","red").attr("width",function(t){var e=x(t);return e+"px"}).attr("opacity",.4).attr("transform",function(t,e){var r=h*(e-.75);return"translate(0, "+r+")"})}}},function(t,e){"use strict";t.exports=function(t){}},function(t,e,r){"use strict";var n=r(190);t.exports=function(t){var e=t.params;d3.selectAll(e.viz.zoom_element).on("dblclick.zoom",null),d3.select(e.viz.zoom_element).on("dblclick",function(){n(t,0,0,1)})}},function(t,e,r){"use strict";var n=r(200),o=r(132),a=r(201),i=r(202),s=r(203),l=r(5),c=r(110);t.exports=function(t){var e=t.params;d3.select(e.root+" .col_cat_outer_container").empty()?d3.select(e.root+" .col_container").append("g").attr("class","col_cat_outer_container").attr("transform",function(){var t=e.viz.norm_labels.width.col+2;return"translate(0,"+t+")"}).append("g").attr("class","col_cat_container"):d3.select(e.root+" .col_container").select("col_cat_outer_container").attr("transform",function(){var t=e.viz.norm_labels.width.col+2;return"translate(0,"+t+")"}),d3.selectAll(e.viz.root_tips+"_col_cat_tip").remove();var r=o().attr("class",function(){var t=e.viz.root_tips.replace(".",""),r=t+" d3-tip "+t+"_col_cat_tip";return r}).direction("s").offset([5,0]).style("display","none").html(function(t){return n(e,t,this,"col")});d3.select(e.root+" .col_cat_container").selectAll("g").data(e.network_data.col_nodes,function(t){return t.name}).enter().append("g").attr("class","col_cat_group").attr("transform",function(t){var r=(e.network_data.col_nodes_names||[]).indexOf(t.name);return"translate("+e.viz.x_scale(r)+",0)"}),d3.select(e.root+" .col_cat_container").selectAll(".col_cat_group").call(r),d3.selectAll(e.root+" .col_cat_group").each(function(){var t,n=this;l(e.viz.all_cats.col,function(o){var l=parseInt(o.split("-")[1],10),u="col_cat_rect_"+String(l);t=d3.select(n).select("."+u).empty()?d3.select(n).append("rect").attr("class",u).attr("cat",o).attr("transform",function(){var t=e.viz.cat_room.symbol_width+e.viz.cat_room.separation,r=l*t;return"translate(0,"+r+")"}).on("click",function(t){if(d3.select(this).classed("cat_strings")){var r=s(e,t,this,"col");c(e.root+" .dendro_info").modal("toggle");var n=r.join(", ");d3.select(e.root+" .dendro_info input").attr("value",n)}}):d3.select(n).select("."+u),t.attr("width",e.viz.x_scale.rangeBand()).attr("height",e.viz.cat_room.symbol_width).style("fill",function(t){var r=t[o],n=e.viz.cat_colors.col[o][r];return n}).on("mouseover",r.show).on("mouseout",function(){r.hide(this),a(e),d3.select(this).classed("hovering",!1),d3.selectAll(".d3-tip").style("display","none")}),i(e.viz,"col",t,o)})})}},function(t,e,r){"use strict";var n=r(187);t.exports=function(t,e,r,o){function a(){var e=!1;if(d3.select(r).classed("hovering")){var n=[o];t.viz.sim_mat&&(n=["row","col"]),n.forEach(function(r){"string"==typeof l&&l.indexOf("Not ")<0&&"false"!=l&&(e=!0),e&&d3.selectAll(t.root+" ."+r+"_cat_group").selectAll("rect").style("opacity",function(e){var r=d3.select(this).style("opacity");if(d3.select(this).classed("cat_strings")&&d3.select(this).classed("filtered_cat")===!1){var n,o=d3.select(this).attr("cat");n=e[o].indexOf(": ")>=0?e[o].split(": ")[1]:e[o],r=o===i&&n===l?t.viz.cat_colors.active_opacity:t.viz.cat_colors.opacity/4}return r})})}}d3.selectAll(t.viz.root_tips+"_col_cat_tip").style("display","block"),d3.selectAll(t.viz.root_tips+"_row_cat_tip").style("display","block");var i=d3.select(r).attr("cat"),s=n(t.viz,i,o),l=e[i];"string"==typeof l&&l.indexOf(": ")>=0&&(l=l.split(": ")[1]);var c="<div>"+s+": "+l+"</div> <div> <br>Click for Category Menu </div>";return d3.select(r).classed("hovering",!0),setTimeout(a,500),c}},function(t,e){"use strict";t.exports=function(t){["row","col"].forEach(function(e){d3.selectAll(t.root+" ."+e+"_cat_group").selectAll("rect").style("opacity",function(){var e=d3.select(this).style("opacity");return d3.select(this).classed("cat_strings")&&d3.select(this).classed("filtered_cat")===!1&&(e=t.viz.cat_colors.opacity),e})})}},function(t,e){"use strict";t.exports=function(t,e,r,n){function o(t){"string"==typeof t&&t.indexOf(i)>-1&&(t=t.split(i)[1]);var e=parseFloat(t);return e}var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=": ",s=t.cat_info[e][n].type;"cat_strings"===s?a?r.classed("cat_strings",!0).style("opacity",0).transition().duration(1e3).style("opacity",t.cat_colors.opacity):r.classed("cat_strings",!0).style("opacity",t.cat_colors.opacity):r.classed("cat_values",!0).style("opacity",function(r){var a=r[n],i=o(a);return t.cat_info[e][n].cat_scale(Math.abs(i))}).style("fill",function(e){var r,a=o(e[n]);return r=a>0?t.cat_value_colors[0]:t.cat_value_colors[1]})}},function(t,e,r){"use strict";var n=r(2),o=r(5);t.exports=function(t,e,r,a){var i=d3.select(r).attr("cat"),s=e[i],l=t.network_data[a+"_nodes"],c=o(l,function(t){return t[i]==s}),u=n.pluck(c,"name");return u}},function(t,e,r){"use strict";var n=r(200),o=r(132),a=r(201),i=r(202),s=r(203),l=r(5),c=r(110);t.exports=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=t.params;d3.select(r.root+" .row_cat_outer_container").empty()?d3.select(r.root+" .row_container").append("g").attr("class","row_cat_outer_container").attr("transform","translate("+r.viz.norm_labels.width.row+",0)").append("g").attr("class","row_cat_container"):d3.select(r.root+" .row_container").select("row_cat_outer_container").attr("transform","translate("+r.viz.norm_labels.width.row+",0)"),d3.select(r.root+" .row_cat_container").select(".white_bars").empty()?d3.select(r.root+" .row_cat_container").append("rect").attr("class","white_bars").attr("fill",r.viz.background_color).attr("width",r.viz.cat_room.row+"px").attr("height",function(){var t=r.viz.clust.dim.height;return t}):d3.select(r.root+" .row_cat_container").select(".white_bars").attr("fill",r.viz.background_color).attr("width",r.viz.cat_room.row+"px").attr("height",function(){var t=r.viz.clust.dim.height;return t}),d3.selectAll(r.viz.root_tips+"_row_cat_tip").remove();var u=o().attr("class",function(){var t=r.viz.root_tips.replace(".",""),e=t+" d3-tip "+t+"_row_cat_tip";return e}).direction("e").offset([5,0]).style("display","none").html(function(t){return n(r,t,this,"row")});d3.select(r.root+" .row_cat_container").selectAll("g").data(r.network_data.row_nodes,function(t){return t.name}).enter().append("g").attr("class","row_cat_group").attr("transform",function(t){var e=(r.network_data.row_nodes_names||[]).indexOf(t.name);return"translate(0, "+r.viz.y_scale(e)+")"}),d3.select(r.root+" .row_cat_container").selectAll(".row_cat_group").call(u);var d,f;d3.selectAll(r.root+" .row_cat_group rect").remove(),r.viz.show_categories.row&&d3.selectAll(r.root+" .row_cat_group").each(function(){f=this,l(r.viz.all_cats.row,function(t){var n=parseInt(t.split("-")[1],10),o="row_cat_rect_"+String(n);d=d3.select(f).select("."+o).empty()?d3.select(f).append("rect").attr("class",o).attr("cat",t):d3.select(f).select("."+o),d.attr("width",r.viz.cat_room.symbol_width).attr("height",r.viz.y_scale.rangeBand()).style("fill",function(e){var n=e[t],o=r.viz.cat_colors.row[t][n];return o}).attr("x",function(){var t=r.viz.cat_room.symbol_width+r.viz.uni_margin/2;return t+"px"}).attr("transform",function(){var t=r.viz.cat_room.symbol_width+r.viz.cat_room.separation,e=n*t;return"translate("+e+",0)"}).on("click",function(t){if(d3.select(this).classed("cat_strings")){var e=s(r,t,this,"row");c(r.root+" .dendro_info").modal("toggle");var n=e.join(", ");d3.select(r.root+" .dendro_info input").attr("value",n)}}).on("mouseover",u.show).on("mouseout",function(){u.hide(this),a(r),d3.select(this).classed("hovering",!1),d3.selectAll(".d3-tip").style("display","none")}),i(r.viz,"row",d,t,e)})})}},function(t,e,r){"use strict";var n=r(147);t.exports=function(t){var e=t.params,r=e.viz.dendro_room.row+e.viz.uni_margin,o=e.viz.clust.margin.left+e.viz.clust.dim.width,a=e.viz.clust.margin.top;d3.select(e.root+" .row_dendro_outer_container").empty()?(d3.select(e.root+" .viz_svg").append("g").attr("class","row_dendro_outer_container").attr("transform","translate("+o+","+a+")"),d3.select(e.root+" .row_dendro_outer_container").append("rect").classed("row_dendro_spillover",!0).attr("fill",e.viz.background_color).attr("width",r+"px").attr("height",e.viz.svg_dim.height),d3.select(e.root+" .row_dendro_outer_container").append("g").attr("class","row_dendro_container").attr("transform","translate("+e.viz.uni_margin/2+",0)")):(d3.select(e.root+" .viz_svg").select("row_dendro_outer_container").attr("transform","translate("+o+","+a+")"),d3.select(e.root+" .row_dendro_outer_container").select(".row_dendro_spillover").attr("width",r+"px").attr("height",e.viz.svg_dim.height)),t.config.show_dendrogram&&n(t,"row",!1),"clust"!=e.viz.inst_order.col&&d3.selectAll(e.root+" .row_dendro_group").remove()}},function(t,e,r){"use strict";var n=r(147);t.exports=function(t){var e=t.params,r=e.viz.clust.margin.left,o=e.viz.clust.margin.top+e.viz.clust.dim.height,a=e.viz.dendro_room.col+e.viz.uni_margin;d3.select(e.root+" .col_dendro_outer_container").empty()?(d3.select(e.root+" .viz_svg").append("g").attr("class","col_dendro_outer_container").attr("transform","translate("+r+","+o+")"),d3.select(e.root+" .col_dendro_outer_container").append("rect").classed("col_dendro_spillover",!0).attr("fill",e.viz.background_color).attr("width",e.viz.svg_dim.width).attr("height",a+"px"),d3.select(e.root+" .col_dendro_outer_container").append("g").attr("class","col_dendro_container").attr("transform","translate(0,"+e.viz.uni_margin/2+")"),d3.select(e.root+" .col_dendro_outer_container").append("rect").classed("col_dendro_spillover_top",!0).attr("fill",e.viz.background_color).attr("width",e.viz.svg_dim.width).attr("height",e.viz.svg_dim.height).attr("transform","translate(0,"+e.viz.dendro_room.col+")")):(d3.select(e.root+" .viz_svg").select("col_dendro_outer_container").attr("transform","translate("+r+","+o+")"),d3.select(e.root+" .col_dendro_outer_container").select(".col_dendro_spillover").attr("width",e.viz.svg_dim.width).attr("height",a+"px")),t.config.show_dendrogram&&n(t,"col",!1),"clust"!=e.viz.inst_order.row&&d3.selectAll(e.root+" .col_dendro_group").remove()}},function(t,e,r){"use strict";var n=r(208);t.exports=function(t){n(t,"row"),n(t,"col")}},function(t,e,r){"use strict";var n=r(209),o=r(210);t.exports=function(t,e){function r(){t.params.is_slider_drag=!0;var r=d3.event.y;r<0&&(r=0),r>i&&(r=i),this.nextSibling&&this.parentNode.appendChild(this),r=d3.round(r,-1);var o=10-r/10;d3.select(this).attr("transform","translate(0, "+r+")"),n(t,e,o)}function a(){var r=d3.mouse(this),o=d3.round(r[1],-1);d3.select(t.params.root+" ."+e+"_group_circle").attr("transform","translate(0, "+o+")");var a=10-o/10;n(t,e,a)}var i=100,s=d3.behavior.drag().on("drag",r).on("dragend",function(){t.params.is_slider_drag=!1}),l=d3.select(t.params.root+" .viz_svg").append("g").classed(e+"_slider_group",!0);o(t,e);var c=i+20,u=30;l.append("rect").classed(e+"_slider_background",!0).attr("height",c+"px").attr("width",u+"px").attr("fill",t.params.viz.background_color).attr("transform",function(){var t="translate(-10, -5)";return t}).style("opacity",0),l.append("line").style("stroke-width",i/7+"px").style("stroke","black").style("stroke-linecap","round").style("opacity",0).attr("y1",0).attr("y2",function(){return i-2}).on("click",a);var d=-i/40;l.append("path").style("fill","black").attr("transform","translate("+d+", 0)").attr("d",function(){var t=0,e=0,r=0,n=i,o=i/10,a=0,s="M"+t+","+e+" L"+r+", "+n+" L"+o+","+a+" Z";return s}).style("opacity",.35).on("click",a);var f=.35,_=.6;l.append("circle").classed(e+"_group_circle",!0).attr("r",.08*i).attr("transform",function(){return"translate(0, "+i/2+")"}).style("fill","blue").style("opacity",f).on("mouseover",function(){d3.select(this).style("opacity",_)}).on("mouseout",function(){d3.select(this).style("opacity",f)}).call(s)}},function(t,e,r){"use strict";var n=r(147);t.exports=function(t,e,r){var o=t.params;"row"===e?o.group_level.row=r:"col"===e&&(o.group_level.col=r);var a=!0;n(t,e,a)}},function(t,e){"use strict";t.exports=function(t){var e,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"row",o=t.params.viz;if("row"===n){var a=o.svg_dim.width-3*o.uni_margin;e=o.clust.margin.left+o.clust.dim.width+5.25*o.dendro_room.row+2,e>a&&(e=a),r=o.clust.margin.top+3*o.uni_margin+30}else e=2*o.uni_margin,r=o.clust.margin.top+o.clust.dim.height+o.dendro_room.col-2*o.uni_margin;d3.select(t.params.root+" ."+n+"_slider_group").attr("transform",function(){var t;return"row"===n?(e+=.8*o.dendro_room.row,t="translate("+e+","+r+")"):t="translate("+e+","+r+"), rotate(-90)",t}).style("opacity",1)}},function(t,e,r){"use strict";var n=r(152);t.exports=function(t){var e=t.params.viz,r=e.clust.margin.left+e.clust.dim.width+e.uni_margin+e.dendro_room.row,o=d3.select(e.viz_svg).append("g").classed("right_spillover_container",!0).attr("transform",function(){return"translate("+r+", 0)"}),a=e.norm_labels.margin.top+e.norm_labels.width.col;o.append("rect").attr("fill",e.background_color).attr("width",10*e.clust.dim.width).attr("height",e.svg_dim.height+"px").attr("class","white_bars").attr("class","right_spillover").attr("transform",function(){return"translate( 0,"+a+")"});var i=0,s=e.clust.margin.top;o.append("g").classed("row_dendro_icons_container",!0).attr("transform","translate("+i+","+s+")").append("g").classed("row_dendro_icons_group",!0),t.config.show_dendrogram&&n(t,"row"),i=e.clust.margin.left+e.clust.dim.width,s=a;var l=e.dendro_room.row+e.uni_margin,c=e.cat_room.col+e.uni_margin;d3.select(e.viz_svg).append("rect").attr("fill",e.background_color).attr("width",l).attr("height",c).attr("transform",function(){return"translate("+i+","+s+")"}).classed("white_bars",!0).classed("dendro_row_spillover",!0)}},function(t,e,r){"use strict";var n=r(2),o=r(213),a=r(198),i=r(221),s=r(222),l=r(223),c=r(224),u=r(225),d=r(226),f=r(227),_=r(228),p=r(229),h=r(230),v=r(231),m=r(232),g=r(233),y=r(234),w=r(235),x=r(191),b=r(147),z=r(146),k=r(176),A=r(98),E=r(236),N=r(196),M=r(188),S=r(210),O=r(237),B=r(238),T=r(239),C=r(120),F=r(240),I=r(5);t.exports=function(t){var e=t.params,r=A(e);d3.select(e.root+" .play_button"),d3.select(e.root+" .sidebar_wrapper").style("height",r.height+"px"),d3.select(e.viz.viz_wrapper).style("margin-top",r.top+"px").style("width",r.width+"px").style("height",r.height+"px"),e=g(e),e.zoom_info=C(),i(e);var j=d3.select(e.viz.viz_svg);I(e.network_data.links,function(t){t.x=e.viz.x_scale(t.target),t.y=e.viz.y_scale(t.source)}),j.on(".zoom",null),e.zoom_behavior.scaleExtent([1,e.viz.square_zoom*e.viz.zoom_ratio.x]).on("zoom",function(){o(t)}),e.viz.do_zoom&&j.call(e.zoom_behavior),a(t),j.attr("width",e.viz.svg_dim.width).attr("height",e.viz.svg_dim.height),j.select(".super_background").style("width",e.viz.svg_dim.width).style("height",e.viz.svg_dim.height),j.select(".grey_background").attr("width",e.viz.clust.dim.width).attr("height",e.viz.clust.dim.height),setTimeout(E,100,e);var P=e.network_data.row_nodes,R=n.pluck(P,"name")||[];y(e,j),j.selectAll(".highlighting_rect").attr("width",.8*e.viz.x_scale.rangeBand()).attr("height",.8*e.viz.y_scale.rangeBand()),f(e),d(e,j),_(e,j),j.selectAll(".row_label_group").each(function(){var t=d3.select(this).select("text")[0][0].getBBox();d3.select(this).select("rect").attr("x",t.x).attr("y",0).attr("width",t.width).attr("height",e.viz.rect_height).style("fill","yellow").style("opacity",function(t){var e=0;return 1===t.target&&(e=1),e})}),j.selectAll(".row_label_group").select("text").attr("y",.5*e.viz.rect_height+.35*e.labels.default_fs_row),n.has(e.network_data.row_nodes[0],"value")&&w(t,j),j.selectAll(".row_cat_group").attr("transform",function(t){var r=R.indexOf(t.name);return"translate(0, "+e.viz.y_scale(r)+")"}),j.selectAll(".row_cat_group").select("path").attr("d",function(){var t=e.viz.cat_room.symbol_width-1,r=0,n=1,o=e.viz.rect_height/2,a=e.viz.cat_room.symbol_width-1,i=e.viz.rect_height,s="M "+t+","+r+" L "+n+","+o+" L "+a+","+i+" Z";
return s});var D=!0;e.viz.show_dendrogram?(b(t,"row",D),b(t,"col",D),s(e,j),z(t,"row",0),z(t,"col",0)):s(e,j),p(e,j),h(e,j),v(e,j),m(e,j),l(e,j),c(e.viz,j),F(e),u(e,j),e.zoom_behavior.scale(1).translate([e.viz.clust.margin.left,e.viz.clust.margin.top]),x(e),d3.select(e.root+" .clust_container").attr("transform","translate("+e.viz.clust.margin.left+","+e.viz.clust.margin.top+")"),t.params.viz.ds_level===-1&&k(t),N(t),d3.select(e.viz.viz_svg).style("opacity",1),M(t),d3.select(t.params.root+" .row_slider_group").style("opacity",0),d3.select(t.params.root+" .col_slider_group").style("opacity",0),setTimeout(S,500,t,"row"),setTimeout(S,500,t,"col"),setTimeout(O,500,t),setTimeout(T,500,t),setTimeout(B,500,t)}},function(t,e,r){"use strict";var n=r(214),o=r(219),a=r(220);t.exports=function(t){var e=t.params,r={};if(r.zoom_x=d3.event.scale,r.zoom_y=d3.event.scale,r.trans_x=e.zoom_behavior.translate()[0]-e.viz.clust.margin.left,r.trans_y=e.zoom_behavior.translate()[1]-e.viz.clust.margin.top,d3.selectAll(e.viz.root_tips).style("display","none"),e.zoom_info=o(e,r),e.zoom_info=a(e,r),e.is_slider_drag===!1&&e.is_cropping===!1){var i=e.zoom_info.trans_x+e.viz.clust.margin.left,s=e.zoom_info.trans_y+e.viz.clust.margin.top;e.zoom_behavior.translate([i,s]),t.params=e,n(t)}dispatchEvent(new CustomEvent("ON_VIZ_RESIZE"))}},function(t,e,r){"use strict";var n=r(193),o=r(176),a=r(215),i=r(154),s=r(171),l=r(216),c=r(218);t.exports=function(t){function e(t){var e=t.params,r=c(e);r===!0&&setTimeout(l,50,t)}var r=t.params,u=r.zoom_info,d=s(r);d3.select(r.root+" .clust_group").attr("transform","translate("+[u.trans_x,u.trans_y]+") scale("+u.zoom_x+","+u.zoom_y+")"),d3.select(r.root+" .row_label_zoom_container").attr("transform","translate("+[0,u.trans_y]+") scale("+u.zoom_y+")"),d3.select(r.root+" .col_zoom_container").attr("transform","translate("+[u.trans_x,0]+") scale("+u.zoom_x+")"),d3.select(r.root+" .row_cat_container").attr("transform","translate("+[0,u.trans_y]+") scale( 1,"+u.zoom_y+")"),d3.select(r.root+" .row_dendro_container").attr("transform","translate("+[r.viz.uni_margin/2,u.trans_y]+") scale( 1,"+u.zoom_y+")"),d3.select(r.root+" .row_dendro_icons_group").attr("transform",function(){var t=u.trans_y,e="translate("+[0,t]+") ",r="scale(1, "+u.zoom_y+")",n=e+r;return n}),d3.select(r.root+" .col_dendro_icons_group").attr("transform",function(){var t=u.trans_x,e="translate("+[t,0]+")",r="scale("+u.zoom_x+", 1)",n=e+r;return n}),i(r,u,"row"),i(r,u,"col"),d3.select(r.root+" .col_cat_container").attr("transform","translate("+[u.trans_x,0]+") scale("+u.zoom_x+",1)"),d3.select(r.root+" .col_dendro_container").attr("transform","translate("+[u.trans_x,r.viz.uni_margin/2]+") scale("+u.zoom_x+",1)"),a(r,u),d3.select(r.root+" .viz_svg").attr("is_zoom",function(){var t=Number(d3.select(r.root+" .viz_svg").attr("is_zoom"));return d3.select(r.root+" .viz_svg").attr("stopped_zoom",1),t+1});var f=function(){d3.select(r.root+" .viz_svg").attr("is_zoom",function(){var t=Number(d3.select(r.root+" .viz_svg").attr("is_zoom"));return t-1})};if(n(r),u.zoom_y<=d.zoom_y){var _=!1;u.zoom_y<d.zoom_y&&(_=!0);var p=!1;o(t,p,_)}setTimeout(f,50),setTimeout(e,100,t)}},function(t,e,r){"use strict";var n=r(2);t.exports=function(t){var e=t.zoom_info;n.has(t.network_data.row_nodes[0],"value")&&d3.selectAll(t.root+" .row_bars").attr("width",function(r){var n=0;return n=t.labels.bar_scale_row(Math.abs(r.value))/e.zoom_y}).attr("x",function(r){var n=0;return n=-t.labels.bar_scale_row(Math.abs(r.value))/e.zoom_y}),n.has(t.network_data.col_nodes[0],"value")&&d3.selectAll(t.root+" .col_bars").attr("width",function(r){var n=0;return r.value>0&&(n=t.labels.bar_scale_col(r.value)/e.zoom_x),n})}},function(t,e,r){"use strict";var n=r(193),o=r(192),a=r(217),i=r(195),s=r(176),l=r(218);t.exports=function(t){function e(){["row","col"].forEach(function(t){d3.selectAll(r.root+" ."+t+"_label_group").filter(function(){return"none"!=d3.select(this).style("display")}).select("text").style("font-size",function(){var t=Number(d3.select(this).style("font-size").replace("px",""));return t})})}var r=t.params,c=l(r);if(c===!0){["row","col"].forEach(function(t){d3.selectAll(r.root+" ."+t+"_label_group").select("text").style("opacity",1),d3.selectAll(r.root+" ."+t+"_cat_group").select("path").style("display","block")}),s(t,!0),d3.selectAll(r.viz.root_tips).style("display","block"),d3.selectAll(r.root+" .row_label_group").select("text").style("display","none"),d3.selectAll(r.root+" .row_label_group").select("text").style("display","block"),d3.select(r.root+" .viz_svg").attr("stopped_zoom",0),d3.selectAll(r.root+" .row_label_group").select("text").style("display","block"),d3.selectAll(r.root+" .col_label_group").select("text").style("display","block"),i(r),t.params.viz.x_offset=0;var u=150;["row","col"].forEach(function(t){var e=a(r,t);e<u&&d3.selectAll(r.root+" ."+t+"_label_group").each(function(){o(r,this,t)})}),e(),n(r),setTimeout(e,100)}}},function(t,e){"use strict";t.exports=function(t,e){var r;return"row"===e?(r=1e4,t.viz.ds_level===-1&&(r=d3.selectAll(t.root+" .row")[0].length)):"col"===e&&(r=d3.selectAll(t.root+" ."+e+"_label_text").filter(function(){return"none"!=d3.select(this).style("display")})[0].length),r}},function(t,e){"use strict";t.exports=function(t){var e=Number(d3.select(t.root+" .viz_svg").attr("is_zoom")),r=Number(d3.select(t.root+" .viz_svg").attr("stopped_zoom")),n=!1;return 0===e&&0!=r&&(n=!0),n}},function(t,e){"use strict";t.exports=function(t,e){var r=t.viz;return r.zoom_ratio.y>1&&(e.zoom_y<r.zoom_ratio.y?(e.trans_y=0,e.zoom_y=1):e.zoom_y=e.zoom_y/r.zoom_ratio.y),e.pan_room_y=(e.zoom_y-1)*r.clust.dim.height,e.trans_y>=0?e.trans_y=0:e.trans_y<=-e.pan_room_y&&(e.trans_y=-e.pan_room_y),e}},function(t,e){"use strict";t.exports=function(t,e){var r=t.viz;return r.zoom_ratio.x>1&&(e.zoom_x<r.zoom_ratio.x?e.zoom_x=1:e.zoom_x=e.zoom_x/r.zoom_ratio.x),e.pan_room_x=(e.zoom_x-1)*r.clust.dim.width,e.trans_x>0?e.trans_x=0:e.trans_x<=-e.pan_room_x&&(e.trans_x=-e.pan_room_x),e}},function(t,e){"use strict";t.exports=function(t){var e=1,r=0,n=0,o=t.viz.clust.dim.height/2,a=-(e-1)*o;d3.select(t.root+" .clust_group").attr("transform","translate("+[0,0+a]+") scale(1,"+e+")translate("+[r,n]+")"),d3.select(t.root+" .row_label_zoom_container").attr("transform","translate("+[0,a]+") scale("+e+","+e+")translate("+[0,n]+")"),d3.select(t.root+" .row_cat_container").attr("transform","translate("+[0,a]+") scale(1,"+e+")translate("+[0,n]+")"),d3.select(t.root+" .row_dendro_container").attr("transform","translate("+[0,a]+") scale("+e+","+e+")translate("+[t.viz.uni_margin/2,n]+")"),d3.select(t.root+" .col_zoom_container").attr("transform"," scale(1,1)translate("+[r,0]+")"),d3.select(t.root+" .col_cat_container").attr("transform"," scale(1,1)translate("+[r,0]+")"),d3.select(t.root+" .col_dendro_container").attr("transform"," scale(1,1)translate("+[r,t.viz.uni_margin/2]+")"),d3.select(t.root+" .row_dendro_icons_group").attr("transform",function(){return"translate(0,0) scale(1)"}),d3.select(t.root+" .row_dendro_icons_group").selectAll("path").attr("transform",function(t){var e=7,r=t.pos_mid;return"translate("+e+","+r+") scale(1, 1)"})}},function(t,e){"use strict";t.exports=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n={};r===!1?n.run_transition=!1:n=r;var o,a=t.viz.duration,i=t.network_data.col_nodes,s=t.network_data.col_nodes_names||[];n.run_transition?(o=e.transition().delay(n.update).duration(a),e.selectAll(".col_cat_group").data(i,function(t){return t.name}).transition().delay(n.update).duration(a).attr("transform",function(e){var r=s.indexOf(e.name);return"translate("+t.viz.x_scale(r)+",0)"}),e.selectAll(".col_dendro_group").data(i,function(t){return t.name}).transition().delay(n.update).duration(a).attr("transform",function(e){var r=s.indexOf(e.name);return"translate("+t.viz.x_scale(r)+",0)"})):(o=e,e.selectAll(".col_cat_group").data(i,function(t){return t.name}).attr("transform",function(e){var r=s.indexOf(e.name);return"translate("+t.viz.x_scale(r)+",0)"}),d3.select(t.root).selectAll(".col_dendro_group").data(i,function(t){return t.name}).attr("transform",function(e){var r=s.indexOf(e.name);return"translate("+t.viz.x_scale(r)+",0)"}));var l,c;["row","col"].forEach(function(e){var r=t.viz.all_cats[e].length;for(l=0;l<r;l++)c="."+e+"_cat_rect_"+String(l),"row"===e?o.selectAll(c).attr("height",t.viz.y_scale.rangeBand()):o.selectAll(c).attr("width",t.viz.x_scale.rangeBand())});var u=t.viz.clust.margin.left+t.viz.clust.dim.width,d=t.viz.clust.margin.top,f=t.viz.dendro_room.row+t.viz.uni_margin;d3.select(t.root+" .viz_svg").select("row_dendro_outer_container").attr("transform","translate("+u+","+d+")"),d3.select(t.root+" .row_dendro_outer_container").select(".row_dendro_spillover").attr("width",f+"px").attr("height",t.viz.svg_dim.height),u=t.viz.clust.margin.left,d=t.viz.clust.margin.top+t.viz.clust.dim.height;var _=t.viz.dendro_room.col+t.viz.uni_margin;d3.select(t.root+" .col_dendro_outer_container").select(".col_dendro_spillover").attr("width",t.viz.svg_dim.width).attr("height",_+"px"),d3.select(t.root+" .col_dendro_outer_container").select(".col_dendro_spillover_top").attr("width",t.viz.svg_dim.width).attr("height",t.viz.svg_dim.height).attr("transform","translate(0,"+t.viz.dendro_room.col+")"),u=t.viz.clust.margin.left,d=0,d3.select(t.root+" .col_dendro_icons_container").attr("transform","translate("+u+","+d+")")}},function(t,e){"use strict";t.exports=function(t,e){var r,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o={},a=t.viz.duration;n===!1?o.run_transition=!1:o=n,r=o.run_transition?e.transition().delay(o.update).duration(a):e,r.select(".super_col_bkg").attr("height",t.viz.super_labels.dim.width+"px").attr("transform","translate("+t.viz.clust.margin.left+","+t.viz.grey_border_width+")"),r.select(".super_col").attr("transform",function(){var e=t.viz.clust.dim.width/2+t.viz.norm_labels.width.row,r=t.viz.super_labels.dim.width;return"translate("+e+","+r+")"}),r.select(".super_row_bkg").attr("width",t.viz.super_labels.dim.width+"px").attr("transform","translate("+t.viz.grey_border_width+",0)"),r.select(".super_row").attr("transform",function(){var e=t.viz.super_labels.dim.width,r=t.viz.clust.dim.height/2+t.viz.norm_labels.width.col;return"translate("+e+","+r+")"})}},function(t,e){"use strict";t.exports=function(t,e){var r,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o={},a=t.duration;n===!1?o.run_transition=!1:o=n,r=o.run_transition?e.transition().delay(o.update).duration(a):e,r.select(t.root+" .right_slant_triangle").attr("transform","translate("+t.clust.dim.width+","+t.norm_labels.width.col+")"),r.select(t.root+" .left_slant_triangle").attr("transform","translate(-1,"+t.norm_labels.width.col+")");var i=t.clust.margin.top+t.uni_margin/5;r.select(t.root+" .top_left_white").attr("width",t.clust.margin.left).attr("height",i);var s=t.clust.margin.left+t.clust.dim.width+t.uni_margin+t.dendro_room.row,l=t.norm_labels.margin.top+t.norm_labels.width.col;r.select(t.root+" .right_spillover_container").attr("transform",function(){return"translate("+s+", 0)"}),l=t.norm_labels.margin.top+t.norm_labels.width.col,r.select(t.root+" .right_spillover_container rect").attr("transform",function(){return"translate( 0,"+l+")"}),r.select(t.root+" .right_spillover").attr("height",t.svg_dim.height+"px");var c=t.clust.margin.left+t.clust.dim.width,u=l,d=t.dendro_room.row+t.uni_margin,f=t.cat_room.col+t.uni_margin;d3.select(t.root+" .dendro_row_spillover").attr("width",d).attr("height",f).attr("transform",function(){return"translate("+c+","+u+")"}),c=0,u=t.clust.margin.top+t.clust.dim.height,d=t.clust.margin.left,f=10*t.clust.dim.height,r.select(".dendro_col_spillover").attr("width",d).attr("height",f).attr("transform",function(){return"translate("+c+","+u+")"}),c=t.clust.margin.left+t.clust.dim.width,u=t.clust.margin.top+t.clust.dim.height,d=t.cat_room.col+t.clust.dim.width,f=t.cat_room.row+t.uni_margin,r.select(".dendro_corner_spillover").attr("width",d).attr("height",f).attr("transform",function(){return"translate("+c+","+u+")"}),c=t.clust.margin.left+t.clust.dim.width+t.uni_margin,u=t.norm_labels.margin.top+t.norm_labels.width.col+2.5*t.uni_margin;var _=2.75,p=1.2;t.show_categories.col&&d3.selectAll(t.root+" .col_cat_super").attr("transform",function(e){var r=parseInt(e.split("-")[1],10),n=u+p*t.cat_room.symbol_width*r;return"translate("+c+","+n+")"}),t.show_categories.row&&d3.select(t.root+" .row_cat_label_container").attr("transform",function(){return c=t.norm_labels.margin.left+t.norm_labels.width.row+t.cat_room.symbol_width+_*t.uni_margin,u=t.clust.margin.top-t.uni_margin,"translate("+c+","+u+") rotate(-90)"}),u=t.show_dendrogram?t.clust.margin.top+t.clust.dim.height+t.dendro_room.col-2*t.uni_margin:t.clust.margin.top+t.clust.dim.height,d3.select(t.root+" .bottom_spillover_container").attr("transform",function(){return"translate(0,"+u+")"}),r.select(t.root+" .bottom_spillover").attr("width",t.svg_dim.width).attr("height",2*t.svg_dim.height);var h=t.cat_room.col+1.5*t.uni_margin;d3.select(t.viz_svg+" .top_right_white").attr("fill",t.background_color).attr("width",2*t.clust.dim.width).attr("height",h).attr("transform",function(){var e=t.clust.margin.left+t.clust.dim.width,r=t.norm_labels.width.col+t.norm_labels.margin.top-t.uni_margin;return"translate("+e+", "+r+")"})}},function(t,e){"use strict";t.exports=function(t,e){e.select(".left_border").attr("width",t.viz.grey_border_width).attr("height",t.viz.svg_dim.height).attr("transform","translate(0,0)"),e.select(".right_border").attr("width",t.viz.grey_border_width).attr("height",t.viz.svg_dim.height).attr("transform",function(){var e=t.viz.svg_dim.width-t.viz.grey_border_width;return"translate("+e+",0)"}),e.select(".top_border").attr("width",t.viz.svg_dim.width).attr("height",t.viz.grey_border_width).attr("transform",function(){var t=0;return"translate("+t+",0)"}),e.select(".bottom_border").attr("width",t.viz.svg_dim.width).attr("height",t.viz.grey_border_width).attr("transform",function(){var e=t.viz.svg_dim.height-t.viz.grey_border_width;return"translate(0,"+e+")"})}},function(t,e){"use strict";t.exports=function(t,e){var r,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o={},a=t.viz.duration,i=t.network_data.row_nodes,s=t.network_data.row_nodes_names||[];n===!1?o.run_transition=!1:o=n,o.run_transition?(e.selectAll(".row_label_group").data(i,function(t){return t.name}).transition().delay(o.update).duration(a).attr("transform",function(e){var r=s.indexOf(e.name);return"translate(0,"+t.viz.y_scale(r)+")"}).attr("y",.5*t.viz.rect_height+.35*t.labels.default_fs_row),r=e.transition().delay(o.update).duration(a)):(e.selectAll(".row_label_group").data(i,function(t){return t.name}).attr("transform",function(e){var r=s.indexOf(e.name);return"translate(0,"+t.viz.y_scale(r)+")"}).attr("y",.5*t.viz.rect_height+.35*t.labels.default_fs_row),r=e),r.select(t.root+" .row_container").attr("transform","translate("+t.viz.norm_labels.margin.left+","+t.viz.clust.margin.top+")"),r.select(t.root+" .row_container").select(".white_bars").attr("width",t.viz.label_background.row).attr("height",30*t.viz.clust.dim.height+"px"),r.select(t.root+" .row_container").select(".row_label_container").attr("transform","translate("+t.viz.norm_labels.width.row+",0)")}},function(t,e){"use strict";t.exports=function(t){var e=6,r=e*t.viz.border_width.x,n=e*t.viz.border_width.y;d3.select(t.root+" .top_hlight").attr("width",t.viz.rect_width).attr("height",n).attr("transform",function(){return"translate("+t.viz.x_scale(t.matrix.click_hlight_x)+",0)"}),d3.select(t.root+" .left_hlight").attr("width",r).attr("height",t.viz.rect_width-.99*n).attr("transform",function(){return"translate("+t.viz.x_scale(t.matrix.click_hlight_x)+","+.99*n+")"}),d3.select(t.root+" .right_hlight").attr("width",r).attr("height",t.viz.rect_height-.99*n).attr("transform",function(){var e=t.viz.x_scale(t.matrix.click_hlight_x)+t.viz.rect_width-r;return"translate("+e+","+.99*n+")"}),d3.select(t.root+" .bottom_hlight").attr("width",function(){return t.viz.rect_width-1.98*r}).attr("height",n).attr("transform",function(){var e=t.viz.x_scale(t.matrix.click_hlight_x)+.99*r,o=t.viz.rect_height-n;return"translate("+e+","+o+")"}),d3.select(t.root+" .row_top_hlight").attr("width",t.viz.svg_dim.width).attr("height",n),d3.select(t.root+" .row_bottom_hlight").attr("width",t.viz.svg_dim.width).attr("height",n).attr("transform",function(){var e=t.viz.rect_height-n;return"translate(0,"+e+")"}),d3.select(t.root+" .col_top_hlight").attr("width",t.viz.clust.dim.height).attr("height",r).attr("transform",function(){var e=0,r=-(t.viz.clust.dim.height+t.viz.cat_room.col+t.viz.uni_margin);return"translate("+r+","+e+")"}),d3.select(t.root+" .col_bottom_hlight").attr("width",t.viz.clust.dim.height).attr("height",r).attr("transform",function(){var e=t.viz.rect_width-r,n=-(t.viz.clust.dim.height+t.viz.cat_room.col+t.viz.uni_margin);return"translate("+n+","+e+")"})}},function(t,e){"use strict";t.exports=function(t,e){var r,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o={},a=t.viz.duration;n===!1?o.run_transition=!1:o=n,r=o.run_transition?e.transition().delay(o.update).duration(a):e,r.select(".row_cat_outer_container").attr("transform","translate("+t.viz.norm_labels.width.row+",0)").select("white_bars").attr("width",t.viz.cat_room.row+"px").attr("height",function(){var e=t.viz.clust.dim.height;return e});var i=t.viz.clust.margin.left+t.viz.clust.dim.width,s=t.viz.clust.margin.top;r.select(".row_dendro_outer_container").attr("transform","translate("+i+","+s+")"),i=t.viz.clust.margin.left,s=t.viz.clust.margin.top+t.viz.clust.dim.height,r.select(" .col_dendro_outer_container").attr("transform",function(){return"translate("+i+","+s+")"})}},function(t,e){"use strict";t.exports=function(t,e){var r,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o={},a=t.viz.duration,i=t.network_data.col_nodes,s=t.network_data.col_nodes_names||[];n===!1?o.run_transition=!1:o=n,o.run_transition?(r=e.transition().delay(o.update).duration(a),e.selectAll(".col_label_text").data(i,function(t){return t.name}).transition().delay(o.update).duration(a).attr("transform",function(e){var r=s.indexOf(e.name);return"translate("+t.viz.x_scale(r)+", 0) rotate(-90)"})):(r=e,e.selectAll(".col_label_text").data(i,function(t){return t.name}).attr("transform",function(e){var r=s.indexOf(e.name);return"translate("+t.viz.x_scale(r)+", 0) rotate(-90)"}));var l=t.viz.x_scale.rangeBand()/2+t.viz.border_width.x;r.select(t.root+" .col_container").attr("transform","translate("+t.viz.clust.margin.left+","+t.viz.norm_labels.margin.top+")"),r.select(t.root+" .col_container").select(".white_bars").attr("width",30*t.viz.clust.dim.width+"px").attr("height",t.viz.label_background.col),r.select(t.root+" .col_container").select(".col_label_outer_container").attr("transform","translate(0,"+t.viz.norm_labels.width.col+")"),r.selectAll(".col_label_group").attr("transform","translate("+t.viz.x_scale.rangeBand()/2+","+l+") rotate(45)"),r.selectAll(".col_label_group").select("text").attr("y",.6*t.viz.x_scale.rangeBand()).attr("dx",2*t.viz.border_width.x)}},function(t,e,r){"use strict";var n=r(2);t.exports=function(t,e){e.selectAll(".col_label_group").select("text").style("font-size",t.labels.default_fs_col+"px").text(function(t){return n.normal_name(t)}),e.selectAll(".col_label_group").each(function(){d3.select(this).select("text")[0][0].getBBox()})}},function(t,e,r){"use strict";var n=r(184);t.exports=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=e.selectAll(".col_label_group").select("path"),a={},i=t.viz.duration;r===!1?a.run_transition=!1:a=r;var s;s=a.run_transition?o.transition().delay(a.update).duration(i):o,s.attr("d",function(){return n(t)}).attr("fill","#eee")}},function(t,e,r){"use strict";var n=r(2);t.exports=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o={};r===!1?o.run_transition=!1:o=r,n.has(t.network_data.col_nodes[0],"value")&&e.selectAll(".col_bars").data(t.network_data.col_nodes,function(t){return t.name}).attr("width",function(e){var r=0;return e.value>0&&(r=t.labels.bar_scale_col(e.value)),r}).attr("height",.66*t.viz.rect_width)}},function(t,e,r){"use strict";var n=r(99),o=r(103),a=r(101),i=r(113),s=r(112),l=r(5);t.exports=function(t){if(t=n(t),t.viz=a(t.viz),t.viz=o(t.viz),t.sim_mat&&(t.viz.clust.dim.width<=t.viz.clust.dim.height?t.viz.clust.dim.height=t.viz.clust.dim.width:t.viz.clust.dim.width=t.viz.clust.dim.height),t.viz=s(t.viz),t.viz.x_scale.rangeBands([0,t.viz.clust.dim.width]),t.viz.y_scale.rangeBands([0,t.viz.clust.dim.height]),t.viz.border_width.x=t.viz.x_scale.rangeBand()/t.viz.border_fraction,t.viz.border_width.y=t.viz.y_scale.rangeBand()/t.viz.border_fraction,t.viz.rect_width=t.viz.x_scale.rangeBand()-t.viz.border_width.x,t.viz.rect_height=t.viz.y_scale.rangeBand()-t.viz.border_width.y,null!=t.viz.ds)for(var e;e<t.viz.ds.length;e++)t.viz.ds[e].rect_height=t.viz.ds[e].y_scale.rangeBand()-t.viz.border_width.y;return t.viz.ds_num_levels>0&&l(t.viz.ds,function(e){e.y_scale=d3.scale.ordinal().rangeBands([0,t.viz.clust.dim.height]),e.y_scale.domain(d3.range(e.num_rows+1)),e.rect_height=e.y_scale.rangeBand()-t.viz.border_width.y}),t.viz.square_zoom=t.viz.norm_labels.width.col/(t.viz.rect_width/2),t=i(t)}},function(t,e,r){"use strict";var n=r(127),o=r(128),a=r(131);t.exports=function(t,e){var r=t.network_data.row_nodes_names||[];if(t.viz.ds_level===-1)e.selectAll(".row").attr("transform",function(e){var n=r.indexOf(e.name),o=t.viz.y_scale(n);return"translate(0,"+o+")"}),e.selectAll(".row").selectAll(".tile").attr("transform",function(e){return a(t,e)}).attr("width",t.viz.rect_width).attr("height",t.viz.rect_height),e.selectAll(".row").selectAll(".tile_up").attr("d",function(){return n(t)}).attr("transform",function(e){return a(t,e)}),e.selectAll(".row").selectAll(".tile_dn").attr("d",function(){return o(t)}).attr("transform",function(e){return a(t,e)});else{var i=t.viz.ds_level,s=".ds"+String(i)+"_row",l=t.viz.ds[i].rect_height;e.selectAll(s).attr("transform",function(e){var r=t.viz.ds[i].y_scale(e.row_index);return"translate(0,"+r+")"}),e.selectAll(s).selectAll(".tile").attr("transform",function(e){return a(t,e)}).attr("width",t.viz.rect_width).attr("height",l)}}},function(t,e,r){"use strict";var n=r(104);t.exports=function(t,e){var r=t.params;r=n(r),e.selectAll(".row_bars").attr("width",function(t){var e=0;return e=r.labels.bar_scale_row(Math.abs(t.value))}).attr("x",function(t){var e=0;return e=-r.labels.bar_scale_row(Math.abs(t.value))}).attr("height",r.viz.y_scale.rangeBand())}},function(t,e){"use strict";t.exports=function(t){var e=d3.select(t.root+" .clust_container").attr("transform"),r=Number(e.split("(")[1].split(",")[0]),n=Number(e.split(",")[1].replace(")","")),o=r+t.viz.clust.dim.width/2,a=n+t.viz.clust.dim.height/2;d3.select(t.root+" .play_button").attr("transform",function(){return"translate("+o+","+a+")"})}},function(t,e){"use strict";t.exports=function(t){var e,r,n=t.params.viz,o=n.svg_dim.width-3*n.uni_margin;e=n.clust.margin.left+n.clust.dim.width+5.25*n.dendro_room.row,e>o&&(e=o),r=n.clust.margin.top+3*n.uni_margin+90,d3.select(t.params.root+" .tree_icon").attr("transform",function(){var t;return r-=75,t="translate("+e+","+r+")"}).style("opacity",1)}},function(t,e){"use strict";t.exports=function(t){var e,r,n=t.params.viz,o=n.svg_dim.width-3*n.uni_margin;e=n.clust.margin.left+n.clust.dim.width+4*n.dendro_room.row+7,e>o&&(e=o),r=n.clust.margin.top+3*n.uni_margin+152,d3.select(t.params.root+" .filter_icon").attr("transform",function(){var t;return r-=75,t="translate("+e+","+r+")"}).style("opacity",1)}},function(t,e){"use strict";t.exports=function(t){var e=t.params;if(d3.select(e.root+" .tree_menu").empty()===!1){var r=t.params.viz.tree_menu_width;d3.select(e.root+" .tree_menu").attr("transform",function(){var t={};return t.x=e.viz.clust.dim.width+e.viz.clust.margin.left-r+30,t.y=e.viz.clust.margin.top+15,"translate("+t.x+", "+t.y+")"})}}},function(t,e){"use strict";t.exports=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=0;e>0&&(r=2e3);var n=d3.selectAll(t.root+" .horz_lines"),o=d3.selectAll(t.root+" .vert_lines");n.style("opacity",0).attr("transform",function(e){var r=e.row_index,n=t.viz.y_scale(r);return"translate(  0,"+n+") rotate(0)"}).transition().duration(e).delay(r).style("opacity",1),n.append("line").attr("x1",0).attr("x2",t.viz.clust.dim.width).style("stroke-width",function(){var e=t.viz.border_width.y;return e+"px"}),o.style("opacity",0).attr("transform",function(e){var r=e.col_index,n=t.viz.x_scale(r);return"translate("+n+") rotate(-90)"}).transition().duration(e).delay(r).style("opacity",1),o.append("line").attr("x1",0).attr("x2",-t.viz.clust.dim.height).style("stroke-width",function(){var e=t.viz.border_width.x;return e+"px"})}},function(t,e,r){"use strict";var n=r(242),o=r(243),a=r(245),i=r(246),s=r(248),l=r(249),c=r(251),u=r(252),d=r(274),f=r(275),_=r(276),p=r(277),h=r(278),v=r(279),m=r(110);t.exports=function(){var t=this,e=t.params;if(d3.select(e.root+" .running_demo").empty()){d3.select(e.root+" .play_button").classed("running_demo",!0),h(e,!1),m.blockUI({css:{border:"none",padding:"15px",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px",opacity:0,color:"#fff",cursor:"default"}}),d3.selectAll(".blockUI").style("opacity",0);var r=750;t.params.viz.is_expand===!1&&(r=n(e,r,d),r-=1500),r=n(e,r,o),r=n(e,r,a),r=n(t,r,i),r=n(e,r,_),r=n(e,r,s),r=n(e,r,v),r=n(e,r,f),r=n(e,r,l),r=n(e,r,c),r=n(t,r,u),r=n(e,r,d),r=n(e,r,p)}}},function(t,e){"use strict";t.exports=function(t,e,r){var n=(setTimeout(r().run,e,t),r().get_duration());return e+=n}},function(t,e,r){"use strict";var n=r(244);t.exports=function(){function t(t){var e="Clustergrammer allows users to generate\ninteractive and sharable visualizations\nby uploading a matrix",o="This demo will quickly overview some\nof Clustergrammer's interactive features";setTimeout(n,0,t,e,4500/r),setTimeout(n,4500/r,t,o,4500/r)}function e(){return 1e4/r}var r=1;return{run:t,get_duration:e}}},function(t,e){"use strict";t.exports=function(t,e,r){var n=e.split("\n");n.length<3&&n.push(""),d3.select(t.root+" .demo_group").style("opacity",0).transition().duration(250).style("opacity",1).transition().duration(250).delay(r).style("opacity",0);for(var o=0;o<n.length;o++){var a=o+1,i=d3.select(t.root+" .demo_group").select("#text_"+a).text(n[o]),s=i[0][0].getBBox(),l=.9,c=Number(d3.select(".demo_group").select("text").style("font-size").replace("px","")),u=1.3*c;d3.select(t.root+" .demo_group").select(".rect_"+a).style("fill","white").attr("width",s.width+20).attr("height",s.height).attr("x",-10).attr("y",s.y+o*u).style("opacity",l)}}},function(t,e,r){"use strict";var n=r(244),o=r(190);t.exports=function(){function t(t){var e=t.params,r="Zoom and pan by\nscrolling and dragging";n(e,r,4e3),setTimeout(o,1500,t,0,0,4)}function e(){return 4e3}return{run:t,get_duration:e}}},function(t,e,r){"use strict";var n=r(244),o=r(190),a=r(247);t.exports=function(){function t(t){var e=t.params,r="Reset zoom by double-clicking\n";n(e,r,4e3),setTimeout(a,2e3,e,"double",300,300),setTimeout(o,2400,t,0,0,1)}function e(){return 4500}return{run:t,get_duration:e}}},function(t,e){"use strict";t.exports=function(t,e,r,n){var o=200,a=d3.select(t.root+" .viz_svg").append("circle").attr("cx",r).attr("cy",n).attr("r",25).style("stroke","black").style("stroke-width","3px").style("fill","#007f00").style("opacity",.5);"double"===e?a.transition().duration(o).style("opacity",0).transition().duration(50).style("opacity",.5).transition().duration(o).style("opacity",0).remove():a.transition().duration(o).style("opacity",0).transition().duration(250).remove()}},function(t,e,r){"use strict";var n=r(244),o=r(247),a=r(110);t.exports=function(){function t(t){var e="Reorder the matrix based on a single\nrow or column by double-clicking a\nlabel";n(t,e,7e3);var a=r(t,"EGFR"),s=d3.select(a).attr("transform"),l=d3.select(t.root+" .clust_container").attr("transform").split(",")[1].replace(")",""),c=.9*t.viz.norm_labels.width.row,u=s.split(",")[1].replace(")",""),d=String(Number(u)+Number(l)+t.viz.rect_height/2),f=4e3;setTimeout(o,f,t,"double",c,d);var _=f+300;setTimeout(i,_,t,a)}function e(){return 8e3}function r(t,e){var r=d3.selectAll(t.root+" .row_label_group").filter(function(){var t=this.__data__;return t.name==e})[0][0];return r}function i(t,e){a(e).d3DblClick()}return a.fn.d3DblClick=function(){this.each(function(t,e){var r=document.createEvent("MouseEvents");r.initMouseEvent("dblclick",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),e.dispatchEvent(r)})},{run:t,get_duration:e}}},function(t,e,r){"use strict";var n=r(244),o=r(250),a=r(110);t.exports=function(){function t(t){var e="Reorder all rows and columns\nby clicking the reorder\n buttons";n(t,e,9e3),setTimeout(o,3e3,t,"toggle_col_order"),setTimeout(r,3500,t,"col","rank"),setTimeout(o,7e3,t,"toggle_row_order"),setTimeout(r,7500,t,"row","rank")}function e(){return 11e3}function r(t,e,r){var n=d3.selectAll(".toggle_"+e+"_order .btn").filter(function(){return this.__data__==r})[0];a(n).click()}return{run:t,get_duration:e}}},function(t,e){"use strict";t.exports=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4e3;e.indexOf("slider")<0?d3.select(t.root+" ."+e).style("background","#007f00").style("box-shadow","0px 0px 10px 5px #007f00").transition().duration(1).delay(r).style("background","#FFFFFF").style("box-shadow","none"):d3.select(t.root+" ."+e).style("box-shadow","0px 0px 10px 5px #007f00").transition().duration(1).delay(r).style("box-shadow","none")}},function(t,e,r){"use strict";var n=r(244),o=r(250),a=r(190),i=r(110);t.exports=function(){function t(t){var e=t.params,i="Search for rows using\nthe search box";n(e,i,5e3);var l=2500;setTimeout(o,l,e,"gene_search_container"),setTimeout(r,l+1e3,e,"E"),setTimeout(r,l+1500,e,"EG"),setTimeout(r,l+2e3,e,"EGF"),setTimeout(r,l+2500,e,"EGFR"),setTimeout(s,5500,e),setTimeout(a,7500,t,0,0,1)}function e(){return 1e4}function r(t,e){i(t.root+" .gene_search_box").val(e),i(t.root+" .gene_search_box").autocomplete("search",e)}function s(t){i(t.root+" .submit_gene_button").click(),i(t.root+" .gene_search_box").autocomplete("search","")}return{run:t,get_duration:e}}},function(t,e,r){"use strict";var n=r(244),o=r(250),a=r(253),i=r(110);t.exports=function(){function t(t){var e=t.params,a="Filter rows based on sum or\nvariance using the sliders";n(e,a,4e3);var i="N_row_sum";setTimeout(o,5e3,e,"slider_"+i,13e3),a="Filter: Top 20 rows by sum",setTimeout(n,5e3,e,a,4e3),setTimeout(r,5300,t,i,20,1),a="Filter: Top 10 rows by sum",setTimeout(n,1e4,e,a,4e3),setTimeout(r,10300,t,i,10,2),a="Filter: All rows",setTimeout(n,15e3,e,a,4e3),setTimeout(r,15300,t,i,"all",0)}function e(){return 19500}function r(t,e,r,n){var o=t.params,s={};s[e]=r,a(t,s),i(o.root+" .slider_"+e).slider("value",n);var l;l="N_row_sum"===e?"sum":"variance",d3.select(o.root+" .title_"+e).text("Top rows "+l+": "+r)}return{run:t,get_duration:e}}},function(t,e,r){"use strict";var n=r(23),o=r(254),a=r(255);t.exports=function(t,e){o(t.params);var r=n(t.config,t.params,e);d3.select(t.params.root+" .crop_button").style("color","#337ab7").classed("fa-crop",!0).classed("fa-undo",!1).classed("active_cropping",!1),["row","col"].forEach(function(e){d3.select(t.params.root+" ."+e+"_dendro_icons_group").classed("ran_filter",!1),d3.select(t.params.root+" ."+e+"_dendro_icons_container").style("display","block")}),a(t,r)}},function(t,e){"use strict";t.exports=function(t){d3.selectAll(t.root+" .btn").attr("disabled",!0),d3.select(t.viz.viz_svg).style("opacity",.7)}},function(t,e,r){"use strict";var n=r(22),o=r(256),a=r(258),i=r(197),s=r(199),l=r(204),c=r(205),u=r(206),d=r(269),f=r(198),_=r(270),p=r(196),h=r(271),v=r(213),m=r(273),g=r(114),y=r(110);t.exports=function(t,e){function r(){d3.selectAll(".dendro_shadow").remove();
}function w(){d3.select(t.params.viz.viz_svg).transition().duration(250).style("opacity",1),setTimeout(x,1e3)}function x(){d3.select(t.params.viz.viz_svg).classed("running_update",!1)}d3.select(t.params.viz.viz_svg).classed("running_update",!0),d3.selectAll(t.params.root+" .ds"+String(t.params.viz.ds_level)+"_row").remove(),null!=t.params.matrix_update_callback&&t.params.matrix_update_callback();var b=t.params.matrix.distance_metric,z=t.params.matrix.linkage_type,k=t.params.matrix.filter_state,A=t.params.matrix.normalization_state,E=t.params.group_level,N=t.params.crop_filter_nodes,M=y.extend(!0,{},t.config),S=null;if(null!=t.params.new_row_cats){h(t.params.new_row_cats,e.row_nodes),S=t.params.new_row_cats,t.params.new_row_cats=S;var O=!0;t.params.viz=g(t.params,t.params.viz,O)}M.network_data=e,M.inst_order=t.params.viz.inst_order,M.input_domain=t.params.matrix.opacity_scale.domain()[1],_(M,t.params),M.ini_view=null,M.current_col_cat=t.params.current_col_cat,M.cat_colors=t.params.viz.cat_colors;var B=n(M),T=o(t.params,B);t.params=B,t.params.zoom_behavior=d3.behavior.zoom().scaleExtent([1,t.params.viz.square_zoom*t.params.viz.zoom_ratio.x]).on("zoom",function(){v(t)}),t.params.matrix.distance_metric=b,t.params.matrix.linkage_type=z,t.params.matrix.filter_state=k,t.params.matrix.normalization_state=A,t.params.group_level=E,t.params.crop_filter_nodes=N,0===t.params.viz.ds_num_levels?a(t,e,T):m(t),d3.select(t.params.viz.viz_svg).style("opacity",.7),l(t),p(t),t.params.viz.show_categories.col&&s(t),c(t),u(t),i(t),d3.select(t.params.viz.viz_svg).call(t.params.zoom_behavior),f(t),t.params.viz.run_trans=!0,setTimeout(d,2500,t.params),setTimeout(r,50),setTimeout(r,100),setTimeout(r,500),setTimeout(r,1e3),setTimeout(r,1500),setTimeout(w,T.enter)}},function(t,e,r){"use strict";var n=r(257),o=r(179);t.exports=function(t,e){var r=t.network_data.row_nodes,a=t.network_data.col_nodes,i=n(r,function(t){return t.name}),s=n(a,function(t){return t.name}),l=i.concat(s),c=e.network_data.row_nodes,u=e.network_data.col_nodes,d=n(c,function(t){return t.name}),f=n(u,function(t){return t.name}),_=d.concat(f),p=o(l,_).length,h=o(_,l).length,v={};p>0?v.update=1e3:v.update=0,h>0?v.enter=1e3:v.enter=0,v.enter=v.enter+v.update,v.run_transition=!0;var m=t.network_data.links.length,g=e.network_data.links.length,y=.5*e.matrix.def_large_matrix;return(m>y||g>y)&&(v.run_transition=!1,v.update=0,v.enter=0),v}},function(t,e,r){"use strict";function n(t,e,r){e=o(e,r);for(var n=!a(t)&&i(t),s=(n||t).length,l=Array(s),c=0;c<s;c++){var u=n?n[c]:c;l[c]=e(t[u],u,t)}return l}var o=r(78),a=r(7),i=r(12);t.exports=n},function(t,e,r){"use strict";var n=r(259),o=r(141),a=r(173),i=r(260),s=r(264),l=r(123),c=r(265),u=r(268),d=r(191),f=r(132);t.exports=function(t,e,r){var _=t.params;d3.selectAll(_.viz.root_tips).remove();var p=f().attr("class",function(){var t=_.viz.root_tips.replace(".",""),e=t+" d3-tip "+t+"_tile_tip";return e}).direction("nw").offset([0,0]).style("display","none").html(function(t){var e,r=String(t.value.toFixed(3));if(_.keep_orig){var n=String(t.value_orig.toFixed(3));e="<p>"+t.row_name+" and "+t.col_name+"</p><p> normalized value: "+r+"</p><div> original value: "+n+"</div>"}else e="<p>"+t.row_name+" and "+t.col_name+"</p><div> value: "+r+"</div>";return e});d3.select(_.root+" .clust_group").call(p),u(_);for(var h=1e3,v=e.row_nodes,m=e.col_nodes,g=e.links,y=g,w=0;w<y.length;w++){var x=y[w];y[w].name=v[x.source].name+"_"+m[x.target].name}var b=d3.select(_.root+" .clust_group").selectAll(".row").data(_.matrix.matrix,function(t){return t.name});r.run_transition?b.transition().delay(r.update).duration(h).attr("transform",function(t){var e=t.row_index;return"translate(0,"+_.viz.y_scale(e)+")"}):b.attr("transform",function(t){var e=t.row_index;return"translate(0,"+_.viz.y_scale(e)+")"}),d3.select(_.root+" .clust_group").selectAll(".row").each(function(t){var e=this;i(_,t,r,h,e,p)}),d3.selectAll(_.root+" .horz_lines").remove(),d3.selectAll(_.root+" .vert_lines").remove(),s(_,r,h),n(t,h,r),c(_,r,h,p),o(t,h),a(t,h),l(_,r,h),setTimeout(d,2e3,_)}},function(t,e,r){"use strict";var n=r(2),o=r(103),a=r(99),i=r(101),s=r(221),l=r(222),c=r(223),u=r(224),d=r(226),f=r(228),_=r(229),p=r(230),h=r(231),v=r(232),m=r(235),g=r(113),y=r(112),w=r(120);t.exports=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;null===r&&(r={},r.enter=0,r.update=0,r.run_transition=!1);var x=t.params,b=t.params.network_data.row_nodes;x.zoom_info=w();var z=x.network_data.row_nodes_names||[];s(x),x=a(x),x.viz=i(x.viz),x.viz=o(x.viz),x.sim_mat&&(x.viz.clust.dim.width<=x.viz.clust.dim.height?x.viz.clust.dim.height=x.viz.clust.dim.width:x.viz.clust.dim.width=x.viz.clust.dim.height),x.viz=y(x.viz),x.viz.x_scale.rangeBands([0,x.viz.clust.dim.width]),x.viz.y_scale.rangeBands([0,x.viz.clust.dim.height]),x.viz.square_zoom=x.viz.norm_labels.width.col/(x.viz.x_scale.rangeBand()/2),x.zoom_behavior.scaleExtent([1,x.viz.square_zoom*x.viz.zoom_ratio.x]),x.viz.border_width.x=x.viz.x_scale.rangeBand()/x.viz.border_fraction,x.viz.border_width.y=x.viz.y_scale.rangeBand()/x.viz.border_fraction,x=g(x);var k=d3.select(x.viz.viz_wrapper).select("svg");k.select(x.root+" .grey_background").transition().delay(r.update).duration(e).attr("width",x.viz.clust.dim.width).attr("height",x.viz.clust.dim.height),d(x,k,r),k.selectAll(".row_label_group").select("text").style("font-size",x.labels.default_fs_row+"px").text(function(t){return n.normal_name(t)}),k.selectAll(".row_label_group").each(function(){var t=d3.select(this).select("text")[0][0].getBBox();d3.select(this).select("rect").attr("x",t.x).attr("y",0).attr("width",t.width).attr("height",x.viz.y_scale.rangeBand()).style("fill","yellow").style("opacity",function(t){var e=0;return 1===t.target&&(e=1),e})}),f(x,k,r),r.run_transition?(k.selectAll(".row_label_group").select("text").transition().delay(r.update).duration(e).attr("y",.5*x.viz.rect_height+.35*x.labels.default_fs_row),k.selectAll(".row_cat_group").data(b,function(t){return t.name}).transition().delay(r.update).duration(e).attr("transform",function(t){var e=z.indexOf(t.name);return"translate(0, "+x.viz.y_scale(e)+")"}),k.selectAll(".row_cat_group").select("path").transition().delay(r.update).duration(e).attr("d",function(){var t=x.viz.cat_room.symbol_width-1,e=0,r=1,n=x.viz.y_scale.rangeBand()/2,o=x.viz.cat_room.symbol_width-1,a=x.viz.y_scale.rangeBand(),i="M "+t+","+e+" L "+r+","+n+" L "+o+","+a+" Z";return i}),k.selectAll(".row_dendro_group").data(b,function(t){return t.name}).transition().delay(r.update).duration(e).attr("transform",function(t){var e=z.indexOf(t.name);return"translate(0, "+x.viz.y_scale(e)+")"})):(k.selectAll(".row_label_group").select("text").attr("y",.5*x.viz.rect_height+.35*x.labels.default_fs_row),k.selectAll(".row_cat_group").data(b,function(t){return t.name}).attr("transform",function(t){var e=z.indexOf(t.name);return"translate(0, "+x.viz.y_scale(e)+")"}),k.selectAll(".row_cat_group").select("path").attr("d",function(){var t=x.viz.cat_room.symbol_width-1,e=0,r=1,n=x.viz.y_scale.rangeBand()/2,o=x.viz.cat_room.symbol_width-1,a=x.viz.y_scale.rangeBand(),i="M "+t+","+e+" L "+r+","+n+" L "+o+","+a+" Z";return i}),k.selectAll(".row_dendro_group").data(b,function(t){return t.name}).attr("transform",function(t){var e=z.indexOf(t.name);return"translate(0, "+x.viz.y_scale(e)+")"})),n.has(x.network_data.row_nodes[0],"value")&&m(t,k),_(x,k,r),p(x,k),h(x,k,r),v(x,k,r),l(x,k,r),c(x,k,r),u(x.viz,k,r),x.zoom_behavior.scale(1).translate([x.viz.clust.margin.left,x.viz.clust.margin.top])}},function(t,e,r){"use strict";var n=r(261),o=r(262),a=r(263),i=r(129),s=r(130),l=r(131),c=r(77),u=r(133);t.exports=function(t,e,r,d,f,_){var p=e.row_data,h=c(p,function(t){return 0!=t.value}),v=d3.select(f).selectAll(".tile").data(h,function(t){return t.col_name});n(t,r,v,p,f);var m=v.on("mouseover",function(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];i(t,this,_,r)}).on("mouseout",function(){s(t,this,_)}).on("click",function(){console.log("click")}).on("dblclick",null),g=t.network_data.col_nodes_names;r.run_transition?m.transition().delay(r.update).duration(d).attr("width",t.viz.rect_width).attr("height",t.viz.rect_height).attr("transform",function(e){return u(g,e.col_name)?l(t,e):"translate(0,0)"}):m.attr("width",t.viz.rect_width).attr("height",t.viz.rect_height).attr("transform",function(e){return u(g,e.col_name)?l(t,e):"translate(0,0)"}),"updn"==t.matrix.tile_type&&a(t,p,f,r,d,v,_),o(t,r,d,v,_)}},function(t,e,r){"use strict";var n=r(77);t.exports=function(t,e,r,o,a){if(e.run_transition?r.exit().transition().duration(300).attr("fill-opacity",0).remove():r.exit().attr("fill-opacity",0).remove(),"updn"==t.matrix.tile_type){var i=n(o,function(t){return 0!=t.value_up||0!=t.value_dn}),s=d3.select(a).selectAll(".tile_up").data(i,function(t){return t.col_name});e.run_transition?s.exit().transition().duration(300).attr("fill","0").remove():s.exit().attr("fill",0).remove();var l=d3.select(a).selectAll(".tile_dn").data(i,function(t){return t.col_name});e.run_transition?l.exit().transition().duration(300).attr("fill",0).remove():l.exit().attr("fill",0).remove()}}},function(t,e,r){"use strict";var n=r(129),o=r(130),a=r(131);t.exports=function(t,e,r,i,s){var l=i.enter().append("rect").attr("class","tile row_tile").attr("width",t.viz.rect_width).attr("height",t.viz.rect_height).on("mouseover",function(){for(var e=arguments.length,r=Array(e),o=0;o<e;o++)r[o]=arguments[o];n(t,this,s,r)}).on("mouseout",function(){o(t,this,s)}).on("click",function(){console.log("click")}).on("dblclick",null).attr("fill-opacity",0).attr("transform",function(e){return a(t,e)});e.run_transition?l.transition().delay(e.enter).duration(r).style("fill",function(e){return e.value>0?t.matrix.tile_colors[0]:t.matrix.tile_colors[1]}).attr("fill-opacity",function(e){var r=t.matrix.opacity_scale(Math.abs(e.value));return r}):l.style("fill",function(e){return e.value>0?t.matrix.tile_colors[0]:t.matrix.tile_colors[1]}).attr("fill-opacity",function(e){var r=t.matrix.opacity_scale(Math.abs(e.value));return r}),l.each(function(t){Math.abs(t.value_up)>0&&Math.abs(t.value_dn)>0&&d3.select(this).remove()})}},function(t,e,r){"use strict";var n=r(127),o=r(128),a=r(129),i=r(130),s=r(131),l=r(77);t.exports=function(t,e,r,c,u,d,f){var _=l(e,function(t){return 0!=t.value_up||0!=t.value_dn}),p=d3.select(r).selectAll(".tile_up").data(_,function(t){return t.col_name}),h=p.on("mouseover",function(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];a(t,this,f,r)}).on("mouseout",function(){i(t,this,f)}).on("click",function(){console.log("click")}).on("dblclick",null);c.run_transition?h.transition().delay(c.update).duration(u).attr("d",function(){return n(t)}).attr("transform",function(e){return s(t,e)}):h.attr("d",function(){return n(t)}).attr("transform",function(e){return s(t,e)});var v=d3.select(r).selectAll(".tile_dn").data(_,function(t){return t.col_name}),m=v.on("mouseover",function(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];a(t,this,f,r)}).on("mouseout",function(){i(t,this,f)}).on("click",function(){console.log("click")}).on("dblclick",null);c.run_transition?m.transition().delay(c.update).duration(u).attr("d",function(){return o(t)}).attr("transform",function(e){return s(t,e)}):m.attr("d",function(){return o(t)}).attr("transform",function(e){return s(t,e)}),d.selectAll(".tile").each(function(t){Math.abs(t.value_up)>0&&Math.abs(t.value_dn)>0&&d3.select(this).remove()})}},function(t,e){"use strict";t.exports=function(t,e,r){var n=t.network_data.row_nodes,o=t.network_data.col_nodes,a=d3.select(t.root+" .clust_group").selectAll(".row").data(t.matrix.matrix,function(t){return t.name}).exit();e.run_transition?a.transition().duration(r).style("opacity",0).remove():a.style("opacity",0).remove(),d3.selectAll(t.root+" .row_label_group").data(n,function(t){return t.name}).exit().transition().duration(r).style("opacity",0).remove(),d3.selectAll(t.root+" .col_label_group").data(o,function(t){return t.name}).exit().transition().duration(r).style("opacity",0).remove(),d3.selectAll(t.root+" .row_cat_group").data(n,function(t){return t.name}).exit().transition().duration(r).style("opacity",0).remove(),d3.selectAll(t.root+" .row_dendro_group").data(n,function(t){return t.name}).exit().transition().duration(r).style("opacity",0).remove(),d3.selectAll(t.root+" .col_label_text").data(o,function(t){return t.name}).exit().transition().duration(r).style("opacity",0).remove(),d3.selectAll(t.root+" .horz_lines").data(n,function(t){return t.name}).exit().transition().duration(r).style("opacity",0).remove(),d3.selectAll(t.root+" .vert_lines").data(o,function(t){return t.name}).exit().transition().duration(r).style("opacity",0).remove(),d3.selectAll(t.root+" .col_cat_group").data(o,function(t){return t.name}).exit().transition().duration(r).style("opacity",0).remove(),d3.selectAll(t.root+" .col_dendro_group").data(o,function(t){return t.name}).exit().transition().duration(r).style("opacity",0).remove()}},function(t,e,r){"use strict";var n=r(266);t.exports=function(t,e,r,o){var a=d3.select(t.root+" .clust_group").selectAll(".row").data(t.matrix.matrix,function(t){return t.name}).enter().append("g").classed("row",!0).attr("transform",function(e){return"translate(0,"+t.viz.y_scale(e.row_index)+")"});a.each(function(a){n(t,a,e,r,o,this)})}},function(t,e,r){"use strict";var n=r(267),o=r(129),a=r(130),i=r(131),s=r(77);t.exports=function(t,e,r,l,c,u){var d=e.row_data,f=s(d,function(t){return 0!==t.value}),_=d3.select(u).selectAll("rect").data(f,function(t){return t.col_name}).enter().append("rect").attr("class","tile row_tile").attr("width",t.viz.rect_width).attr("height",t.viz.rect_height).style("fill",function(e){return e.value>0?t.matrix.tile_colors[0]:t.matrix.tile_colors[1]}).on("mouseover",function(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];o(t,this,c,r)}).on("mouseout",function(){a(t,this,c)}).on("click",function(){console.log("click")}).on("dblclick",null);_.style("fill-opacity",0).transition().delay(r.enter).duration(l).style("fill-opacity",function(e){var r=t.matrix.opacity_scale(Math.abs(e.value));return r}),_.attr("transform",function(e){return i(t,e)}),"updn"==t.matrix.tile_type&&n(t,d,u,c,r,l,_)}},function(t,e,r){"use strict";var n=r(127),o=r(128),a=r(131),i=r(77);t.exports=function(t,e,r,s,l,c,u){var d=i(e,function(t){return 0!=t.value_up||0!=t.value_dn}),f=d3.select(r).selectAll(".tile_up").data(d,function(t){return t.col_name}).enter().append("path").attr("class","tile_up").attr("d",function(){return n(t)}).attr("transform",function(e){return a(t,e)}).style("fill",function(){return t.matrix.tile_colors[0]}).on("mouseover",function(e){d3.selectAll(t.root+" .row_label_group text").classed("active",function(t){return e.row_name===t.name}),d3.selectAll(t.root+" .col_label_text text").classed("active",function(t){return e.col_name===t.name}),t.matrix.show_tile_tooltips&&s.show(e)}).on("mouseout",function(){d3.selectAll(t.root+" text").classed("active",!1),t.matrix.show_tile_tooltips&&s.hide()});f.style("fill-opacity",0).transition().delay(l.enter).duration(c).style("fill-opacity",function(e){var r=0;return Math.abs(e.value_dn)>0&&(r=t.matrix.opacity_scale(Math.abs(e.value_up))),r});var _=d3.select(r).selectAll(".tile_dn").data(d,function(t){return t.col_name}).enter().append("path").attr("class","tile_dn").attr("d",function(){return o(t)}).attr("transform",function(e){return a(t,e)}).style("fill",function(){return t.matrix.tile_colors[1]}).on("mouseover",function(e){d3.selectAll(t.root+" .row_label_group text").classed("active",function(t){return e.row_name===t.name}),d3.selectAll(t.root+" .col_label_text text").classed("active",function(t){return e.col_name===t.name}),t.matrix.show_tile_tooltips&&s.show(e)}).on("mouseout",function(){d3.selectAll(t.root+" text").classed("active",!1),t.matrix.show_tile_tooltips&&s.hide()});_.style("fill-opacity",0).transition().delay(l.enter).duration(c).style("fill-opacity",function(e){var r=0;return Math.abs(e.value_up)>0&&(r=t.matrix.opacity_scale(Math.abs(e.value_dn))),r}),u.each(function(t){Math.abs(t.value_up)>0&&Math.abs(t.value_dn)>0&&d3.select(this).remove()})}},function(t,e){"use strict";t.exports=function(t){d3.select(t.root+" .clust_container").attr("transform","translate("+t.viz.clust.margin.left+","+t.viz.clust.margin.top+")"),d3.select(t.root+" .col_label_outer_container").attr("transform","translate(0,"+t.viz.norm_labels.width.col+")"),d3.select(t.root+" .col_cat_outer_container").attr("transform",function(){var e=t.viz.norm_labels.width.col+2;return"translate(0,"+e+")"})}},function(t,e){"use strict";t.exports=function(t){t.dendro_filter.row===!1&&"clust"===t.viz.inst_order.col&&d3.select(t.root+" .row_slider_group").style("opacity",1).style("pointer-events","all"),d3.selectAll(t.root+" .toggle_row_order .btn").attr("disabled",null),t.dendro_filter.col===!1&&"clust"===t.viz.inst_order.row&&d3.select(t.root+" .col_slider_group").style("opacity",1).style("pointer-events","all"),d3.selectAll(t.root+" .toggle_col_order .btn").attr("disabled",null),d3.selectAll(t.root+" .gene_search_button .btn").attr("disabled",null),t.viz.run_trans=!1}},function(t,e){"use strict";t.exports=function(t,e){["row","col"].forEach(function(r){var n;n="row"===r?"col":"row",d3.selectAll(e.root+" .toggle_"+n+"_order .btn").filter(function(){return d3.select(this).attr("name")===t.inst_order[r]}).classed("active",!0)})}},function(t,e,r){"use strict";var n=r(272),o=r(2),a=r(5),i=r(133);t.exports=function(t,e){var r,s,l,c,u,d,f,_,p=arguments.length>2&&void 0!==arguments[2]&&arguments[2],h=0,v=0;a(e,function(e){c=e.name,p===!0&&(c.indexOf(" ")?c=c.split(" ")[0]:c.indexOf("_")&&(c=c.split("_")[0])),h=0,n(e),a(t,function(t){if(r=t.cat_title,s=t.cats,u="false",v=-1,_=0,a(s,function(t){d=t.cat_name,l=t.members,i(l,c)&&(u=d,v=_),_+=1}),o.has(t,"pval")){var n=t.pval.toExponential();f=r+": "+u+"<p> Pval "+String(n)+"</p>"}else f=r.indexOf("cat-")===-1?r+": "+u:u;e["cat-"+String(h)]=f,e["cat_"+String(h)+"_index"]=v,h+=1})})}},function(t,e){"use strict";t.exports=function(t){var e=Object.keys(t||{});e.forEach(function(e){e.indexOf("cat-")>-1&&delete t[e],e.indexOf("cat_")>-1&&delete t[e]})}},function(t,e,r){"use strict";var n=r(259),o=r(173),a=r(176),i=r(268);t.exports=function(t){d3.selectAll(t.params.root+" .row_cat_group").remove(),d3.selectAll(t.params.root+" .row_label_group").remove(),d3.selectAll(t.params.root+" .row").remove();var e=!0,r=!0,s=!0;a(t,e,r,s),o(t);var l=t.params.network_data.col_nodes;d3.selectAll(t.params.root+" .col_label_group").data(l,function(t){return t.name}).exit().style("opacity",0).remove(),d3.selectAll(t.params.root+" .col_label_text").data(l,function(t){return t.name}).exit().style("opacity",0).remove(),d3.selectAll(t.params.root+" .col_cat_group").data(l,function(t){return t.name}).exit().style("opacity",0).remove(),d3.selectAll(t.params.root+" .col_dendro_group").data(l,function(t){return t.name}).exit().style("opacity",0).remove(),i(t.params);var c={};c.enter=0,c.update=0,c.run_transition=!1;var u=0;n(t,u,c)}},function(t,e,r){"use strict";var n=r(247),o=r(110);t.exports=function(){function t(t){var e=Number(d3.select(t.root+" .expand_button").attr("x").replace("px","")),o=Number(d3.select(t.root+" .expand_button").attr("y").replace("px","")),i=0,s=400;setTimeout(n,i,t,"single",e,o),setTimeout(r,s,t),setTimeout(a,1500,t)}function e(){return 3500}function r(t){o(t.root+" .expand_button").d3Click()}function a(t){i(t,"row","clust"),i(t,"col","clust")}function i(t,e,r){var n=d3.selectAll(".toggle_"+e+"_order .btn").filter(function(){return this.__data__==r})[0];o(n).click()}return o.fn.d3Click=function(){this.each(function(t,e){var r=document.createEvent("MouseEvents");r.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),e.dispatchEvent(r)})},{run:t,get_duration:e}}},function(t,e,r){"use strict";var n=r(244),o=r(250),a=r(209),i=r(110);t.exports=function(){function t(t){var e="Identify row and column groups\nof varying sizes using  the\nsliders and dendrogram";n(t,e,1e4),setTimeout(o,3e3,t,"slider_col",7e3),setTimeout(r,4e3,t,"row",3),setTimeout(r,5e3,t,"row",4),setTimeout(r,6e3,t,"row",5),setTimeout(r,7e3,t,"row",6),setTimeout(r,8e3,t,"row",7),setTimeout(r,9e3,t,"row",5)}function e(){return 11e3}function r(t,e,r){i(cgm.params.root+" .slider_col").slider("value",r/10),a(cgm,e,r)}return{run:t,get_duration:e}}},function(t,e,r){"use strict";var n=r(244),o=r(247),a=r(110);t.exports=function(){function t(t){var e="Row and column categories\ncan be use to reorder\nby double-clicking";n(t,e,7e3);var a=d3.selectAll(t.root+" .col_cat_super").filter(function(){return"cat-1"===this.__data__})[0],i=d3.select(".col_cat_super").attr("transform"),s=Number(i.split("(")[1].split(",")[0].replace(")",""))+20,l=Number(i.split(",")[1].replace(")","")),c=4e3;setTimeout(o,c,t,"double",s,l);var u=c+300;setTimeout(r,u,t,a)}function e(){return 8e3}function r(t,e){a(e).d3DblClick()}return a.fn.d3DblClick=function(){this.each(function(t,e){var r=document.createEvent("MouseEvents");r.initMouseEvent("dblclick",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),e.dispatchEvent(r)})},{run:t,get_duration:e}}},function(t,e,r){"use strict";var n=r(244),o=r(278);t.exports=function(){function t(t){var r="Clustergrammer is built with gene\nexpression data in mind and interfaces\nwith several Ma'ayan lab web tools",o="The example data being visualized is\ngene expression data obtained from the\nCancer Cell Line Encyclopedia",a="For more information please view\nthe help documentation";setTimeout(n,0,t,r,4500),setTimeout(n,4500,t,o,4500),setTimeout(n,9e3,t,a,4500),setTimeout(e,14e3,t)}function e(t){d3.select(t.root+" .play_button").classed("running_demo",!1),o(t,!0)}function r(){return 12e3}return{run:t,get_duration:r}}},function(t,e,r){"use strict";var n=r(110);t.exports=function(t,e){e===!1?d3.select(t.root+" .play_button").transition().duration(500).style("opacity",0):(d3.select(t.root+" .play_button").transition().duration(500).style("opacity",1),n.unblockUI())}},function(t,e,r){"use strict";var n=r(244),o=r(247),a=r(110);t.exports=function(){function t(t){var e="View additional controls\nby clicking the menu button";n(t,e,4e3);var a=Number(d3.select(t.root+" .expand_button").attr("x").replace("px","")),i=Number(d3.select(t.root+" .expand_button").attr("y").replace("px","")),s=3e3,l=3400;setTimeout(o,s,t,"single",a,i),setTimeout(r,l,t)}function e(){return 5e3}function r(t){a(t.root+" .expand_button").d3Click()}return a.fn.d3Click=function(){this.each(function(t,e){var r=document.createEvent("MouseEvents");r.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),e.dispatchEvent(r)})},a.fn.d3DblClick=function(){this.each(function(t,e){var r=document.createEvent("MouseEvents");r.initMouseEvent("dblclick",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),e.dispatchEvent(r)})},{run:t,get_duration:e}}},function(t,e,r){"use strict";var n=r(281),o=r(282);t.exports=function(){var t=this,e=t.params;n(t);var r=30;o(e,r)}},function(t,e,r){"use strict";var n=r(236);t.exports=function(t){var e=t.params;if(d3.select(e.root+" .play_button").empty()){var r=d3.select(e.root+" .viz_svg").append("g").classed("play_button",!0).classed("running_demo",!1);n(e),r.append("circle").style("r",45).style("fill","white").style("stroke","black").style("stroke-width","3px").style("opacity",.5),r.append("path").attr("d",function(){var t=40,e=22,r=15;return"M-"+r+",-"+e+" l "+t+","+e+" l -"+t+","+e+" z "}).style("fill","black").style("opacity",.5),r.on("mouseover",function(){d3.select(this).select("path").style("fill","red").style("opacity",1),d3.select(this).select("circle").style("opacity",1)}).on("mouseout",function(){d3.select(this).select("path").style("fill","black").style("opacity",.5),d3.select(this).select("circle").style("opacity",.5)}).on("click",function(){t.play_demo()})}}},function(t,e){"use strict";t.exports=function(t,e){if(d3.select(t.root+" .demo_group").empty()){var r=d3.select(t.root+" .clust_container").attr("transform"),n=Number(r.split("(")[1].split(",")[0]),o=Number(r.split(",")[1].replace(")","")),a=d3.select(t.root+" .viz_svg").append("g").classed("demo_group",!0).attr("transform",function(){var t=n+20,e=o+40;return"translate("+t+","+e+")"});a.append("rect").classed("rect_1",!0),a.append("rect").classed("rect_2",!0),a.append("rect").classed("rect_3",!0);var i=1.3*e;a.append("text").attr("id","text_1").attr("font-size",e+"px").attr("font-weight",1e3).attr("font-family",'"Helvetica Neue", Helvetica, Arial, sans-serif'),a.append("text").attr("id","text_2").attr("font-size",e+"px").attr("font-weight",1e3).attr("font-family",'"Helvetica Neue", Helvetica, Arial, sans-serif').attr("transform",function(){return"translate(0,"+String(i)+")"}),a.append("text").attr("id","text_3").attr("font-size",e+"px").attr("font-weight",1e3).attr("font-family",'"Helvetica Neue", Helvetica, Arial, sans-serif').attr("transform",function(){return"translate(0,"+String(2*i)+")"})}}},function(t,e,r){"use strict";var n=r(24),o=r(255);t.exports=function(t){var e=n(this.config,t);o(this,e)}},function(t,e,r){"use strict";var n=r(24),o=r(255),a=r(2),i=r(110);t.exports=function(t){var e,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e=r===!1?this:r;var s,l=e.params,c={};["row","col"].forEach(function(e){var r=l.inst_nodes[e+"_nodes"];if(a.has(t,e))if(t[e].length>0){var n=t[e];s=i.grep(r,function(t){return i.inArray(t.name,n)>-1})}else s=r;else s=r;c[e+"_nodes"]=s});var u=e.params.network_data.row_nodes,d=e.params.network_data.col_nodes,f=n(e.config,c);o(e,f),u.length>e.params.inst_nodes.row_nodes.length&&(e.params.inst_nodes.row_nodes=u),d.length>e.params.inst_nodes.col_nodes.length&&(e.params.inst_nodes.col_nodes=d)}},function(t,e,r){"use strict";var n=r(204),o=r(93),a=r(212),i=r(271);t.exports=function(t,e){null!=t.params.cat_update_callback&&t.params.cat_update_callback(this);var r=t.params.viz.cat_colors.col;i(e,t.params.network_data.row_nodes,!0),i(e,t.params.inst_nodes.row_nodes,!0),t.params=o(t.params,!1),n(t,!0),a(t),t.params.new_row_cats=e,t.params.viz.cat_colors.col=r}},function(t,e,r){"use strict";var n=r(204),o=r(93),a=r(212),i=r(271),s=r(287);t.exports=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=this,r=s(e),l=e.params.viz.cat_colors.col;if(i(r,e.params.network_data.row_nodes),i(r,e.params.inst_nodes.row_nodes),e.params.new_row_cats=r,e.params.viz.cat_colors.col=l,t){var c=!0;e.params=o(e.params,c),n(e,!0),a(e)}}},function(t,e,r){"use strict";var n=r(5);t.exports=function(t){function e(t,e,n){r={},r.cat_title=t,r.cats=[],o={},o.cat_name=e,o.members=[],o.members.push(n),r.cats.push(o),_.push(r)}var r,o,a,i,s,l,c,u,d=t.config.network_data.row_nodes||[],f=": ",_=[],p=d[0],h=Object.keys(p||{}),v={};h.forEach(function(t){t.indexOf("cat-")>=0&&(l=p[t],u=parseInt(t.split("cat-")[1],10),c=l.indexOf(f)>=0?l.split(f)[0]:t,v[u]=c)});var m,g=Object.keys(v||{}).sort();return g.forEach(function(t){m={},m.cat_title=v[t],m.cats=[],_.push(m)}),d.each(function(t){var r=Object.keys(t||{});r.forEach(function(r){if(r.indexOf("cat-")>-1){s=t[r],u=parseInt(r.split("cat-")[1],10);var l=r;s=t[r];var c=t[r],d=t.name;c.indexOf(f)>-1?(l=c.split(f)[0],s=c.split(f)[1]):(l=r,s=c),0===_.length?e(l,s,d):(a=!1,_.forEach(function(t){l===t.cat_title&&(a=!0,i=!1,n(t.cats,function(t){s===t.cat_name&&(i=!0,t.members.push(d))}),i===!1&&(o={},o.cat_name=s,o.members=[],o.members.push(d),t.cats.push(o)))}))}})}),_}},function(t,e,r){"use strict";var n=r(253),o=r(289);t.exports=function(t,e,r){var a={};a[e]=r,n(t,a),o(t,e,r)}},function(t,e,r){"use strict";var n=r(290);t.exports=function(t,e,r){var o,a,i=t.params;d3.select(i.root+" .slider_"+e).attr("current_state",r),Object.keys(i.viz.possible_filters||{}).forEach(function(r){if(o=e.indexOf("row")>-1?"row":e.indexOf("col")>-1?"col":"neither",a=r.indexOf("row")>-1?"row":r.indexOf("col")>-1?"col":"neither",e!=r&&"neither"!=o&&o==a){var s=n(i,r);t.slider_functions[r].value(0),d3.select(i.root+" .title_"+r).text(s.text+s.state),d3.select(i.root+" .slider_"+r).attr("current_state",s.state)}});var s=n(i,e);d3.select(i.root+" .title_"+e).text(s.text+r+s.suffix)}},function(t,e,r){"use strict";var n=r(18);t.exports=function(t,e){var r={},o={},a={};return r.state=n(t.viz.filter_data,e),a.top=e.split("_")[0],a.node=e.split("_")[1],a.measure=e.split("_")[2],"row"===a.node?o.node="rows":o.node="columns","N"===a.top&&(r.suffix=""),"pct"===a.top&&(r.suffix="%"),"sum"==a.measure?o.measure="sum":"var"==a.measure&&(o.measure="variance"),"sum"===a.measure&&(r.text="Top "+o.node+" "+o.measure+": "),"var"===a.measure&&(r.text="Top "+o.node+" "+o.measure+": "),Object.keys(t.viz.possible_filters||{}).indexOf("enr_score_type")>-1&&"col"===a.node&&(r.text="Top Enriched Terms: ",r.suffix=""),r}},function(t,e,r){"use strict";var n=r(292),o=r(293);t.exports=function(){var t=n(),e=this.params,r=o(e),a=new Blob([r],{type:"text/plain;charset=utf-8"});t(a,"clustergrammer.txt")}},function(t,e){"use strict";t.exports=function(){/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */
var t=t||navigator.msSaveBlob&&navigator.msSaveBlob.bind(navigator)||function(t){var e=t.document,r=function(){return t.URL||t.webkitURL||t},n=t.URL||t.webkitURL||t,o=e.createElementNS("http://www.w3.org/1999/xhtml","a"),a="download"in o,i=function(r){var n=e.createEvent("MouseEvents");n.initMouseEvent("click",!0,!1,t,0,0,0,0,0,!1,!1,!1,!1,0,null),r.dispatchEvent(n)},s=t.webkitRequestFileSystem,l=t.requestFileSystem||s||t.mozRequestFileSystem,c=function(e){(t.setImmediate||t.setTimeout)(function(){throw e},0)},u="application/octet-stream",d=0,f=[],_=function(){for(var t=f.length;t--;){var e=f[t];"string"==typeof e?n.revokeObjectURL(e):e.remove()}f.length=0},p=function(t,e,r){e=[].concat(e);for(var n=e.length;n--;){var o=t["on"+e[n]];if("function"==typeof o)try{o.call(t,r||t)}catch(t){c(t)}}},h=function(e,n){var c,_,h,v=this,m=e.type,g=!1,y=function(){var t=r().createObjectURL(e);return f.push(t),t},w=function(){p(v,"writestart progress write writeend".split(" "))},x=function(){!g&&c||(c=y(e)),_&&(_.location.href=c),v.readyState=v.DONE,w()},b=function(t){return function(){if(v.readyState!==v.DONE)return t.apply(this,arguments)}},z={create:!0,exclusive:!1};return v.readyState=v.INIT,n||(n="download"),a?(c=y(e),o.href=c,o.download=n,i(o),v.readyState=v.DONE,void w()):(t.chrome&&m&&m!==u&&(h=e.slice||e.webkitSlice,e=h.call(e,0,e.size,u),g=!0),s&&"download"!==n&&(n+=".download"),_=m===u||s?t:t.open(),l?(d+=e.size,void l(t.TEMPORARY,d,b(function(t){t.root.getDirectory("saved",z,b(function(t){var r=function(){t.getFile(n,z,b(function(t){t.createWriter(b(function(r){r.onwriteend=function(e){_.location.href=t.toURL(),f.push(t),v.readyState=v.DONE,p(v,"writeend",e)},r.onerror=function(){var t=r.error;t.code!==t.ABORT_ERR&&x()},"writestart progress write abort".split(" ").forEach(function(t){r["on"+t]=v["on"+t]}),r.write(e),v.abort=function(){r.abort(),v.readyState=v.DONE},v.readyState=v.WRITING}),x)}),x)};t.getFile(n,{create:!1},b(function(t){t.remove(),r()}),b(function(t){t.code===t.NOT_FOUND_ERR?r():x()}))}),x)}),x)):void x())},v=h.prototype,m=function(t,e){return new h(t,e)};return v.abort=function(){var t=this;t.readyState=t.DONE,p(t,"abort")},v.readyState=v.INIT=0,v.WRITING=1,v.DONE=2,v.error=v.onwritestart=v.onprogress=v.onwrite=v.onabort=v.onerror=v.onwriteend=null,t.addEventListener("unload",_,!1),m}(self);return t}},function(t,e,r){"use strict";var n=r(294),o=r(5);t.exports=function(t){var e,r=t.matrix,a={};["row","col"].forEach(function(n){var o;o="row"===n?"col":"row",e=t.inst_order[n],a[o]=r.orders[e+"_"+n]});for(var i="\t",s=t.network_data.row_nodes,l=t.network_data.col_nodes,c=0;c<a.col.length;c++){var u=a.col[c],d=l[u],f=n(t,d,"col");c<a.col.length-1?i=i+f+"\t":i+=f}var _;return i+="\n",o(a.row,function(e){_=r.matrix[e].row_data;var o=s[e],l=n(t,o,"row");i=i+l+"\t";for(var c=0;c<a.col.length;c++){var u=a.col[c];c<a.col.length-1?i=i+String(_[u].value)+"\t":i+=String(_[u].value)}i+="\n"}),i}},function(t,e){"use strict";t.exports=function(t,e,r){var n,o=e.name,a=t.viz.all_cats[r].length;if(a>0){o="('"+o+"'";for(var i=0;i<a;i++)n="cat-"+String(i),o=o+", '"+String(e[n])+"'";o+=")"}else o=String(o);return o}},function(t,e,r){"use strict";var n=r(296),o=r(5);t.exports=function(){function t(){d3.select(r.params.root+" .col_dendro_icons_container").style("display","none"),d3.select(r.params.root+" .row_dendro_icons_container").style("display","none");var t=u.extent(),o=t[0],i=t[1],s=o[0],l=i[0],c=o[1],d=i[1];if(s!=l&&c!=d){setTimeout(n,500,r);var f=e(s,l,c,d,o,i);r.filter_viz_using_names(f),d3.select(a.root+" .crop_button").style("color","#337ab7").classed("fa-crop",!1).classed("fa-undo",!0)}}function e(t,e,r,n,i,s){t>e&&(t=s[0],e=i[0]),r>n&&(r=s[1],n=i[1]),r-=a.viz.rect_height,t-=a.viz.rect_width;var l={};return l.row=[],l.col=[],o(a.matrix.matrix,function(t){var e=a.viz.y_scale(t.row_index);e>r&&e<n&&l.row.push(t.name)}),d3.selectAll(a.root+" .col_label_text").each(function(r){var n=d3.select(this).attr("transform"),o=Number(n.split(",")[0].split("(")[1]);o>t&&o<e&&l.col.push(r.name)}),l}var r=this,a=r.params,i=a.viz.clust.dim.width,s=a.viz.clust.dim.height,l=d3.scale.linear().domain([0,i]).range([0,i]),c=d3.scale.linear().domain([0,s]).range([0,s]);d3.select(a.root+" .clust_container").append("g").classed("brush_group",!0),r.params.is_cropping=!0;var u=d3.svg.brush().x(l).y(c).on("brushend",t);d3.select(a.root+" .brush_group").call(u),d3.selectAll(a.root+" .extent").style("opacity",.2).style("fill","black")}},function(t,e){"use strict";t.exports=function(t){d3.select(t.params.root+" .brush_group").transition().style("opacity",0).remove(),t.params.is_cropping=!1}},function(t,e){t.exports=d3},function(t,e,r){var n,o,a;"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(i,s){o=[r(297)],n=s,a="function"==typeof n?n.apply(e,o):n,!(void 0!==a&&(t.exports=a))}(void 0,function(t){return function(){"use strict";function e(e){e.each(function(){function e(e){"boolean"==typeof m&&(m=t.svg.axis().ticks(Math.round(d/100)).tickFormat(z).orient("horizontal"===v?"bottom":"right")),l=s.ticks?s.copy().range([0,d]):s.copy().rangePoints([0,d],.5),m.scale(l);var r=e.append("svg").classed("d3-slider-axis d3-slider-axis-"+m.orient(),!0).on("click",E),n=r.append("g");"horizontal"===v?(r.style("margin-left",-g+"px"),r.attr({width:d+2*g,height:g}),"top"===m.orient()?(r.style("top",-g+"px"),n.attr("transform","translate("+g+","+g+")")):n.attr("transform","translate("+g+",0)")):(r.style("top",-g+"px"),r.attr({width:g,height:d+2*g}),"left"===m.orient()?(r.style("left",-g+"px"),n.attr("transform","translate("+g+","+g+")")):n.attr("transform","translate(0,"+g+")")),n.call(m)}function p(){if("array"!=a(i)){var e=Math.max(0,Math.min(d,t.event.offsetX||t.event.layerX));r(s.invert?n(s.invert(e/d)):o(e/d))}}function h(){if("array"!=a(i)){var e=d-Math.max(0,Math.min(d,t.event.offsetY||t.event.layerY));r(s.invert?n(s.invert(e/d)):o(e/d))}}function w(){"handle-one"===t.event.sourceEvent.target.id?y=1:"handle-two"==t.event.sourceEvent.target.id&&(y=2);var e=Math.max(0,Math.min(d,t.event.x));r(s.invert?n(s.invert(e/d)):o(e/d))}function A(){"handle-one"===t.event.sourceEvent.target.id?y=1:"handle-two"==t.event.sourceEvent.target.id&&(y=2);var e=d-Math.max(0,Math.min(d,t.event.y));r(s.invert?n(s.invert(e/d)):o(e/d))}function E(){t.event.stopPropagation()}s||(s=t.scale.linear().domain([f,_])),i=i||s.domain()[0];var N=t.select(this).classed("d3-slider d3-slider-"+v,!0),M=t.behavior.drag();if(M.on("dragend",function(){x.slideend(t.event,i)}),"array"==a(i)&&2==i.length?(c=N.append("a").classed("d3-slider-handle",!0).attr("xlink:href","#").attr("id","handle-one").on("click",E).call(M),k=N.append("a").classed("d3-slider-handle",!0).attr("id","handle-two").attr("xlink:href","#").on("click",E).call(M)):c=N.append("a").classed("d3-slider-handle",!0).attr("xlink:href","#").attr("id","handle-one").on("click",E).call(M),"horizontal"===v){if(N.on("click",p),"array"==a(i)&&2==i.length){u=t.select(this).append("div").classed("d3-slider-range",!0),c.style("left",b(s(i[0]))),u.style("left",b(s(i[0]))),M.on("drag",w);var S=100-parseFloat(b(s(i[1])));k.style("left",b(s(i[1]))),u.style("right",S+"%"),M.on("drag",w)}else c.style("left",b(s(i))),M.on("drag",w);d=parseInt(N.style("width"),10)}else{if(N.on("click",h),M.on("drag",A),"array"==a(i)&&2==i.length){u=t.select(this).append("div").classed("d3-slider-range-vertical",!0),c.style("bottom",b(s(i[0]))),u.style("bottom",b(s(i[0]))),M.on("drag",A);var O=100-parseFloat(b(s(i[1])));k.style("bottom",b(s(i[1]))),u.style("top",O+"%"),M.on("drag",A)}else c.style("bottom",b(s(i))),M.on("drag",A);d=parseInt(N.style("height"),10)}m&&e(N)})}function r(e){var r="array"==a(i)&&2==i.length?i[y-1]:i,o=b(s(n(r))),l=b(s(n(e))),d="horizontal"===v?"left":"bottom";if(o!==l){if("array"==a(i)&&2==i.length?(i[y-1]=e,t.event&&x.slide(t.event,i)):t.event&&x.slide(t.event.sourceEvent||t.event,i=e),i[0]>=i[1])return;if(1===y)"array"==a(i)&&2==i.length&&("left"===d?u.style("left",l):u.style("bottom",l)),h?c.transition().styleTween(d,function(){return t.interpolate(o,l)}).duration("number"==typeof h?h:250):c.style(d,l);else{var f=100-parseFloat(l),_=100-parseFloat(l);"left"===d?u.style("right",f+"%"):u.style("top",_+"%"),h?k.transition().styleTween(d,function(){return t.interpolate(o,l)}).duration("number"==typeof h?h:250):k.style(d,l)}}}function n(t){if(t===s.domain()[0]||t===s.domain()[1])return t;var e=t;if(w)e=o(s(t));else{var r=(t-s.domain()[0])%p;e=t-r,2*Math.abs(r)>=p&&(e+=r>0?p:-p)}return e}function o(t){var e=s.ticks?s.ticks():s.domain(),r=e.map(function(e){return t-s(e)}),n=-1,o=0,a=s.ticks?s.range()[1]:s.rangeExtent()[1];do n++,Math.abs(r[n])<a&&(a=Math.abs(r[n]),o=n);while(r[n]>0&&n<r.length-1);return e[o]}function a(t){return{}.toString.call(t).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}var i,s,l,c,u,d,f=0,_=100,p=.01,h=!1,v="horizontal",m=!1,g=50,y=1,w=!1,x=t.dispatch("slide","slideend"),b=t.format(".2%"),z=t.format(".0"),k=null;return e.min=function(t){return arguments.length?(f=t,e):f},e.max=function(t){return arguments.length?(_=t,e):_},e.step=function(t){return arguments.length?(p=t,e):p},e.animate=function(t){return arguments.length?(h=t,e):h},e.orientation=function(t){return arguments.length?(v=t,e):v},e.axis=function(t){return arguments.length?(m=t,e):m},e.margin=function(t){return arguments.length?(g=t,e):g},e.value=function(t){return arguments.length?(i&&r(n(t)),i=t,e):i},e.snap=function(t){return arguments.length?(w=t,e):w},e.scale=function(t){return arguments.length?(s=t,e):s},t.rebind(e,x,"on"),e}})}]);
//# sourceMappingURL=clustergrammer.min.js.map